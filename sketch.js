(function(g,p){"function"===typeof define&&define.amd?define("p5",[],function(){return g.returnExportsGlobal=p()}):"object"===typeof exports?module.exports=p():g.p5=p()})(this,function(){var g={};g.shim=function(g){window.requestDraw=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,e){window.setTimeout(a,1E3/60)}}();"undefined"!==typeof Uint8ClampedArray&&(Uint8ClampedArray.prototype.slice=
Array.prototype.slice)}({});g.constants=function(g){g=Math.PI;return{P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:g/2,PI:g,QUARTER_PI:g/4,TAU:2*g,TWO_PI:2*g,DEGREES:"degrees",RADIANS:"radians",CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:"points",LINES:"lines",TRIANGLES:"triangles",TRIANGLE_FAN:"triangles_fan",TRIANGLE_STRIP:"triangles_strip",
QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"normal",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"source-over",
OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF"}}({});g.core=function(g,a,e){var d=
function(c,k,r){2===arguments.length&&"boolean"===typeof k&&(r=k,k=void 0);this._setupDone=!1;this.pixelDensity=window.devicePixelRatio||1;this._startTime=(new Date).getTime();this._userNode=k;this._curElement=null;this._elements=[];this._updateInterval=this._preloadCount=0;this._isGlobal=!1;this._loop=!0;this._styles=[];this._defaultCanvasSize={width:100,height:100};this._events={mousemove:null,mousedown:null,mouseup:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,
touchstart:null,touchmove:null,touchend:null,resize:null,blur:null};window.DeviceOrientationEvent?this._events.deviceorientation=null:window.DeviceMotionEvent?this._events.devicemotion=null:this._events.MozOrientation=null;/Firefox/i.test(navigator.userAgent)?this._events.DOMMouseScroll=null:this._events.mousewheel=null;this._loadingScreenId="p5_loading";this._start=function(){this._userNode&&"string"===typeof this._userNode&&(this._userNode=document.getElementById(this._userNode));this._loadingScreen=
document.getElementById(this._loadingScreenId);this._loadingScreen||(this._loadingScreen=document.createElement("loadingDiv"),this._loadingScreen.innerHTML="loading...",this._loadingScreen.style.position="absolute",(this._userNode||document.body).appendChild(this._loadingScreen));this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d",!0);var f=this.preload||window.preload,h=this._isGlobal?window:this;f?(this._preloadMethods.forEach(function(f){h[f]=function(){var l=Array.prototype.slice.call(arguments);
return h._preload(f,l)}}),f(),0===this._preloadCount&&(this._setup(),this._runFrames(),this._draw())):(this._setup(),this._runFrames(),this._draw())}.bind(this);this._preload=function(f,h){var l=this._isGlobal?window:this;l._setProperty("_preloadCount",l._preloadCount+1);h.push(function(f){l._setProperty("_preloadCount",l._preloadCount-1);0===l._preloadCount&&(l._setup(),l._runFrames(),l._draw())});return d.prototype[f].apply(l,h)}.bind(this);this._setup=function(){var f=this._isGlobal?window:this;
"function"===typeof f.preload&&this._preloadMethods.forEach(function(h){f[h]=d.prototype[h]});"function"===typeof f.setup&&f.setup();for(var h=new RegExp(/(^|\s)p5_hidden(?!\S)/g),l=document.getElementsByClassName("p5_hidden"),c=0;c<l.length;c++){var m=l[c];m.style.visibility="";m.className=m.className.replace(h,"")}this._setupDone=!0;this._loadingScreen.parentNode.removeChild(this._loadingScreen)}.bind(this);this._draw=function(){var f=(new Date).getTime();this._frameRate=1E3/(f-this._lastFrameTime);
this._lastFrameTime=f;this._setProperty("frameCount",this.frameCount+1);this._loop&&(this._drawInterval&&clearInterval(this._drawInterval),this._drawInterval=setTimeout(function(){window.requestDraw(this._draw.bind(this))}.bind(this),1E3/this._targetFrameRate));this.redraw();this._updatePAccelerations();this._updatePMouseCoords();this._updatePTouchCoords()}.bind(this);this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this);this._setProperty=function(f,h){this[f]=
h;this._isGlobal&&(window[f]=h)}.bind(this);this.remove=function(){if(this._curElement){this._loop=!1;this._drawInterval&&clearTimeout(this._drawInterval);this._updateInterval&&clearTimeout(this._updateInterval);for(var f in this._events)window.removeEventListener(f,this._events[f]);for(f=0;f<this._elements.length;f++){var h=this._elements[f];h.elt.parentNode&&h.elt.parentNode.removeChild(h.elt);for(var l in h._events)h.elt.removeEventListener(l,h._events[l])}var c=this;this._registeredMethods.remove.forEach(function(f){"undefined"!==
typeof f&&f.call(c)});if(this._isGlobal){for(var m in d.prototype)try{delete window[m]}catch(r){window[m]=void 0}for(var t in this)if(this.hasOwnProperty(t))try{delete window[t]}catch(k){window[t]=void 0}}}}.bind(this);for(var h in e)d.prototype[h]=e[h];if(c)c(this);else{this._isGlobal=!0;for(var m in d.prototype)"function"===typeof d.prototype[m]?(h=m.substring(2),this._events.hasOwnProperty(h)||(window[m]=d.prototype[m].bind(this))):window[m]=d.prototype[m];for(var f in this)this.hasOwnProperty(f)&&
(window[f]=this[f])}for(var l in this._events)if(m=this["_on"+l])m=m.bind(this),window.addEventListener(l,m),this._events[l]=m;var t=this;window.addEventListener("focus",function(){t._setProperty("focused",!0)});window.addEventListener("blur",function(){t._setProperty("focused",!1)});r?this._start():"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)};d.prototype._preloadMethods="loadJSON loadImage loadStrings loadXML loadShape loadTable loadFont".split(" ");
d.prototype._registeredMethods={pre:[],post:[],remove:[]};d.prototype.registerPreloadMethod=function(c){d.prototype._preloadMethods.push(c)}.bind(this);d.prototype.registerMethod=function(c,k){d.prototype._registeredMethods.hasOwnProperty(c)||(d.prototype._registeredMethods[c]=[]);d.prototype._registeredMethods[c].push(k)}.bind(this);return d}({},g.shim,g.constants);g.utilscolor_utils=function(g,a){a.ColorUtils={};a.ColorUtils.hsbaToRGBA=function(e){var d=e[0],c=e[1],k=e[2],d=d/255,c=c/255,k=k/255,
r=[];if(0===c)r=[Math.round(255*k),Math.round(255*k),Math.round(255*k),e[3]];else{var h=6*d;6===h&&(h=0);var m=Math.floor(h),d=k*(1-c),r=k*(1-c*(h-m)),c=k*(1-c*(1-(h-m)));0===m?(m=k,h=c,k=d):1===m?(m=r,h=k,k=d):2===m?(m=d,h=k,k=c):3===m?(m=d,h=r):4===m?(m=c,h=d):(m=k,h=d,k=r);r=[Math.round(255*m),Math.round(255*h),Math.round(255*k),e[3]]}return r};a.ColorUtils.rgbaToHSBA=function(e){var d=e[0]/255,c=e[1]/255,k=e[2]/255,r=Math.min(d,c,k),h=Math.max(d,c,k),m=h-r,f;if(0===m)r=f=0;else{var r=m/h,l=((h-
d)/6+m/2)/m,t=((h-c)/6+m/2)/m,m=((h-k)/6+m/2)/m;d===h?f=m-t:c===h?f=1/3+l-m:k===h&&(f=2/3+t-l);0>f&&(f+=1);1<f&&--f}return[Math.round(255*f),Math.round(255*r),Math.round(255*h),e[3]]};return a.ColorUtils}({},g.core);g.p5Color=function(g,a,e,d){a.Color=function(f,h){this.color_array=a.Color._getFormattedColor.apply(f,h);this._converted_color=this._convertTo255(f);f._colorMode===d.HSB?(this.hsba=this.color_array,this.rgba=e.hsbaToRGBA(this._converted_color)):this.rgba=this.color_array;return this};
a.Color.prototype._convertTo255=function(f){f=f._colorMode===d.RGB?f._maxRGB:f._maxHSB;var h=[];h[0]=255*this.color_array[0]/f[0];h[1]=255*this.color_array[1]/f[1];h[2]=255*this.color_array[2]/f[2];h[3]=255*this.color_array[3]/f[3];return h};a.Color.prototype.getHue=function(){this.hsba||(this.hsba=e.rgbaToHSBA(this._converted_color));return this.hsba[0]};a.Color.prototype.getSaturation=function(){this.hsba||(this.hsba=e.rgbaToHSBA(this._converted_color));return this.hsba[1]};a.Color.prototype.getBrightness=
function(){this.hsba||(this.hsba=e.rgbaToHSBA(this._converted_color));return this.hsba[2]};a.Color.prototype.getRed=function(){return this.rgba[0]};a.Color.prototype.getGreen=function(){return this.rgba[1]};a.Color.prototype.getBlue=function(){return this.rgba[2]};a.Color.prototype.getAlpha=function(){return this.hsba?this.hsba[3]:this.rgba[3]};a.Color.prototype.toString=function(){for(var f=this.rgba,h=0;3>h;h++)f[h]=Math.floor(f[h]);return"rgba("+f[0]+","+f[1]+","+f[2]+","+("undefined"!==typeof f[3]?
f[3]/255:1)+")"};g=/\s*/;var c=/(\d{1,3})/,k=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,r=new RegExp(k.source+"%"),h={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",
darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",
firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",
lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",
mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",
rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},
m=/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,f=/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,l=new RegExp(["^rgb\\(",c.source,",",c.source,",",c.source,"\\)$"].join(g.source),"i"),t=new RegExp(["^rgb\\(",r.source,",",r.source,",",r.source,"\\)$"].join(g.source),"i"),A=new RegExp(["^rgba\\(",c.source,",",c.source,",",c.source,",",k.source,"\\)$"].join(g.source),"i"),n=new RegExp(["^rgba\\(",r.source,",",r.source,",",r.source,",",k.source,"\\)$"].join(g.source),"i");a.Color._getFormattedColor=function(){var c,
r,k,e;if(3<=arguments.length)c=arguments[0],r=arguments[1],k=arguments[2],e="number"===typeof arguments[3]?arguments[3]:255;else{if("string"===typeof arguments[0]){c=arguments[0].trim().toLowerCase();if(h[c])return a.Color._getFormattedColor.apply(this,[h[c]]);c=m.test(c)?m.exec(c).slice(1).map(function(f){return parseInt(f+f,16)}):f.test(c)?f.exec(c).slice(1).map(function(f){return parseInt(f,16)}):l.test(c)?l.exec(c).slice(1).map(function(f){return parseInt(f,10)}):t.test(c)?t.exec(c).slice(1).map(function(f){return parseInt(parseFloat(f)/
100*255,10)}):A.test(c)?A.exec(c).slice(1).map(function(f,h){return 3===h?parseInt(255*parseFloat(f),10):parseInt(f,10)}):n.test(c)?n.exec(c).slice(1).map(function(f,h){return 3===h?parseInt(255*parseFloat(f),10):parseInt(parseFloat(f)/100*255,10)}):[255];return a.Color._getFormattedColor.apply(this,c)}this._colorMode===d.RGB?c=r=k=arguments[0]:(c=k=arguments[0],r=0);e="number"===typeof arguments[1]?arguments[1]:255}return[c,r,k,e]};return a.Color}({},g.core,g.utilscolor_utils,g.constants);g.p5Element=
function(g,a){function e(d,c,k){c=c.bind(k);k.elt.addEventListener(d,c,!1);k._events[d]=c}a.Element=function(d,c){this.elt=d;this._pInst=c;this._events={};this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight};a.Element.prototype.parent=function(d){"string"===typeof d?d=document.getElementById(d):d instanceof a.Element&&(d=d.elt);d.appendChild(this.elt);return this};a.Element.prototype.id=function(d){this.elt.id=d;return this};a.Element.prototype["class"]=function(d){this.elt.className+=
" "+d;return this};a.Element.prototype.mousePressed=function(d){e("mousedown",d,this);e("touchstart",d,this);return this};a.Element.prototype.mouseWheel=function(d){e("mousewheel",d,this);return this};a.Element.prototype.mouseReleased=function(d){e("mouseup",d,this);e("touchend",d,this);return this};a.Element.prototype.mouseClicked=function(d){e("click",d,this);return this};a.Element.prototype.mouseMoved=function(d){e("mousemove",d,this);e("touchmove",d,this);return this};a.Element.prototype.mouseOver=
function(d){e("mouseover",d,this);return this};a.Element.prototype.mouseOut=function(d){e("mouseout",d,this);return this};a.Element.prototype.touchStarted=function(d){e("touchstart",d,this);e("mousedown",d,this);return this};a.Element.prototype.touchMoved=function(d){e("touchmove",d,this);e("mousemove",d,this);return this};a.Element.prototype.touchEnded=function(d){e("touchend",d,this);e("mouseup",d,this);return this};a.Element.prototype.dragOver=function(d){e("dragover",d,this);return this};a.Element.prototype.dragLeave=
function(d){e("dragleave",d,this);return this};a.Element.prototype.drop=function(d,c){function k(c){var h=new a.File(c);return function(c){h.data=c.target.result;d(h)}}window.File&&window.FileReader&&window.FileList&&window.Blob?(e("dragover",function(c){c.stopPropagation();c.preventDefault()},this),e("dragleave",function(c){c.stopPropagation();c.preventDefault()},this),1<arguments.length&&e("drop",c,this),e("drop",function(c){c.stopPropagation();c.preventDefault();c=c.dataTransfer.files;for(var h=
0;h<c.length;h++){var d=c[h],f=new FileReader;f.onload=k(d);"text"===d.type?f.readAsText(d):f.readAsDataURL(d)}},this)):console.log("The File APIs are not fully supported in this browser.");return this};a.Element.prototype._setProperty=function(d,c){this[d]=c};return a.Element}({},g.core);g.p5Font=function(g,a,e){a.Font=function(d){this.parent=d;this.font=void 0};a.Font.prototype.renderPath=function(d,c,k,r,h){var m=this.parent,f,l,t;r=r||m._textSize;h=h||{};f=m.textWidth(d);l=m.textAscent();t=m.textDescent();
l+=t;m.drawingContext.textAlign===e.CENTER?c-=f/2:m.drawingContext.textAlign===e.RIGHT&&(c-=f);m.drawingContext.textBaseline===e.TOP?k+=l:m.drawingContext.textBaseline===e._CTX_MIDDLE?k+=l/2-t:m.drawingContext.textBaseline===e.BOTTOM&&(k-=t);d=this.font.getPath(d,c,k,r,h);m._doStroke&&m._strokeSet&&(d.strokeWidth=m.drawingContext.lineWidth,d.stroke=m.drawingContext.strokeStyle);m._doFill&&(d.fill=m._fillSet?m.drawingContext.fillStyle:e._DEFAULT_TEXT_FILL);d.draw(m.drawingContext)};a.Font.prototype.textBounds=
function(d,c,k,r){if(!this.parent._isOpenType())throw Error("not supported for system fonts");r=r||this.parent._textSize;var h=[],m=[],f=1/this.font.unitsPerEm*r;this.font.forEachGlyph(d,void 0!==c?c:0,void 0!==k?k:0,r,{},function(l,c,d){if("space"!==l.name){c=void 0!==c?c:0;d=void 0!==d?d:0;l=l.getMetrics();var r=d+-l.yMin*f,k=c+l.xMax*f;d+=-l.yMax*f;h.push(c+l.xMin*f);m.push(r);h.push(k);m.push(d)}});d=Math.min.apply(null,h);c=Math.min.apply(null,m);k=Math.max.apply(null,h);r=Math.max.apply(null,
m);return{x:d,y:c,w:k-d,h:r-c}};a.Font.prototype.list=function(){throw"not yet implemented";};return a.Font}({},g.core,g.constants);g.canvas=function(g,a){return{modeAdjust:function(e,d,c,k,r){if(r===a.CORNER)return{x:e,y:d,w:c,h:k};if(r===a.CORNERS)return{x:e,y:d,w:c-e,h:k-d};if(r===a.RADIUS)return{x:e-c,y:d-k,w:2*c,h:2*k};if(r===a.CENTER)return{x:e-.5*c,y:d-.5*k,w:c,h:k}},arcModeAdjust:function(e,d,c,k,r){if(r===a.CORNER)return{x:e+.5*c,y:d+.5*k,w:c,h:k};if(r===a.CORNERS)return{x:e,y:d,w:c+e,h:k+
d};if(r===a.RADIUS)return{x:e,y:d,w:2*c,h:2*k};if(r===a.CENTER)return{x:e,y:d,w:c,h:k}}}}({},g.constants);g.filters=function(g){var a={_toPixels:function(c){return c instanceof ImageData?c.data:c.getContext("2d").getImageData(0,0,c.width,c.height).data},_getARGB:function(c,h){var d=4*h;return c[d+3]<<24&4278190080|c[d]<<16&16711680|c[d+1]<<8&65280|c[d+2]&255},_setPixels:function(c,h){for(var d=0,f=0,l=c.length;f<l;f++)d=4*f,c[d+0]=(h[f]&16711680)>>>16,c[d+1]=(h[f]&65280)>>>8,c[d+2]=h[f]&255,c[d+3]=
(h[f]&4278190080)>>>24},_toImageData:function(c){return c instanceof ImageData?c:c.getContext("2d").getImageData(0,0,c.width,c.height)},_createImageData:function(c,h){a._tmpCanvas=document.createElement("canvas");a._tmpCtx=a._tmpCanvas.getContext("2d");return this._tmpCtx.createImageData(c,h)},apply:function(c,h,d){var f=c.getContext("2d"),l=f.getImageData(0,0,c.width,c.height);h=h(l,d);h instanceof ImageData?f.putImageData(h,0,0,0,0,c.width,c.height):f.putImageData(l,0,0,0,0,c.width,c.height)},threshold:function(c,
h){var d=a._toPixels(c);void 0===h&&(h=.5);for(var f=Math.floor(255*h),l=0;l<d.length;l+=4)d[l]=d[l+1]=d[l+2]=.2126*d[l]+.7152*d[l+1]+.0722*d[l+2]>=f?255:0},gray:function(c){c=a._toPixels(c);for(var h=0;h<c.length;h+=4)c[h]=c[h+1]=c[h+2]=.2126*c[h]+.7152*c[h+1]+.0722*c[h+2]},opaque:function(c){c=a._toPixels(c);for(var h=0;h<c.length;h+=4)c[h+3]=255;return c},invert:function(c){c=a._toPixels(c);for(var h=0;h<c.length;h+=4)c[h]=255-c[h],c[h+1]=255-c[h+1],c[h+2]=255-c[h+2]},posterize:function(c,h){var d=
a._toPixels(c);if(2>h||255<h)throw Error("Level must be greater than 2 and less than 255 for posterize");for(var f=h-1,l=0;l<d.length;l+=4){var t=d[l+1],k=d[l+2];d[l]=255*(d[l]*h>>8)/f;d[l+1]=255*(t*h>>8)/f;d[l+2]=255*(k*h>>8)/f}},dilate:function(c){for(var h=a._toPixels(c),d=0,f=h.length?h.length/4:0,l=new Int32Array(f),t,k,e,g,v,w,u,z,y,x,p,C;d<f;)for(t=d,k=d+c.width;d<k;)e=g=a._getARGB(h,d),w=d-1,v=d+1,u=d-c.width,z=d+c.width,w<t&&(w=d),v>=k&&(v=d),0>u&&(u=0),z>=f&&(z=d),u=a._getARGB(h,u),w=a._getARGB(h,
w),z=a._getARGB(h,z),v=a._getARGB(h,v),e=77*(e>>16&255)+151*(e>>8&255)+28*(e&255),x=77*(w>>16&255)+151*(w>>8&255)+28*(w&255),y=77*(v>>16&255)+151*(v>>8&255)+28*(v&255),p=77*(u>>16&255)+151*(u>>8&255)+28*(u&255),C=77*(z>>16&255)+151*(z>>8&255)+28*(z&255),x>e&&(g=w,e=x),y>e&&(g=v,e=y),p>e&&(g=u,e=p),C>e&&(g=z),l[d++]=g;a._setPixels(h,l)},erode:function(c){for(var h=a._toPixels(c),d=0,f=h.length?h.length/4:0,l=new Int32Array(f),t,k,e,g,v,w,u,z,y,x,p,C;d<f;)for(t=d,k=d+c.width;d<k;)e=g=a._getARGB(h,d),
w=d-1,v=d+1,u=d-c.width,z=d+c.width,w<t&&(w=d),v>=k&&(v=d),0>u&&(u=0),z>=f&&(z=d),u=a._getARGB(h,u),w=a._getARGB(h,w),z=a._getARGB(h,z),v=a._getARGB(h,v),e=77*(e>>16&255)+151*(e>>8&255)+28*(e&255),x=77*(w>>16&255)+151*(w>>8&255)+28*(w&255),y=77*(v>>16&255)+151*(v>>8&255)+28*(v&255),p=77*(u>>16&255)+151*(u>>8&255)+28*(u&255),C=77*(z>>16&255)+151*(z>>8&255)+28*(z&255),x<e&&(g=w,e=x),y<e&&(g=v,e=y),p<e&&(g=u,e=p),C<e&&(g=z),l[d++]=g;a._setPixels(h,l)}},e,d,c,k;a.blur=function(r,h){for(var m=a._toPixels(r),
f=r.width,l=r.height,t=f*l,A=new Int32Array(t),g=0;g<t;g++)A[g]=a._getARGB(m,g);var q,v,w,u,z,y,x,p,C,D,g=new Int32Array(t),J=new Int32Array(t),L=new Int32Array(t),t=new Int32Array(t),G=0;q=3.5*h|0;q=1>q?1:248>q?q:248;if(e!==q){e=q;d=1+e<<1;c=new Int32Array(d);k=Array(d);for(v=0;v<d;v++)k[v]=new Int32Array(256);z=1;for(y=q-1;z<q;z++){c[q+z]=c[y]=w=y*y;v=k[q+z];u=k[y--];for(var H=0;256>H;H++)v[H]=u[H]=w*H}w=c[q]=q*q;v=k[q];for(q=0;256>q;q++)v[q]=w*q}var I,M;for(I=0;I<l;I++){for(H=0;H<f;H++){u=w=v=
z=q=0;y=H-e;if(0>y)D=-y,y=0;else{if(y>=f)break;D=0}for(;D<d&&!(y>=f);D++)x=A[y+G],M=k[D],z+=M[(x&-16777216)>>>24],v+=M[(x&16711680)>>16],w+=M[(x&65280)>>8],u+=M[x&255],q+=c[D],y++;x=G+H;g[x]=z/q;J[x]=v/q;L[x]=w/q;t[x]=u/q}G+=f}G=0;p=-e;C=p*f;for(I=0;I<l;I++){for(H=0;H<f;H++){u=w=v=z=q=0;if(0>p)D=x=-p,y=H;else{if(p>=l)break;D=0;x=p;y=H+C}for(;D<d&&!(x>=l);D++)M=k[D],z+=M[g[y]],v+=M[J[y]],w+=M[L[y]],u+=M[t[y]],q+=c[D],x++,y+=f;A[H+G]=z/q<<24|v/q<<16|w/q<<8|u/q}G+=f;C+=f;p++}a._setPixels(m,A)};return a}({});
g.p5Graphics=function(g,a){a.Graphics=function(e,d,c){a.Element.call(this,e,d);this.canvas=e;this._pInst=d;c?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[])};a.Graphics.prototype=Object.create(a.Element.prototype);a.Graphics.prototype.resize=function(e,d){this.width=e;this.height=d;this.elt.width=
e*this._pInst.pixelDensity;this.elt.height=d*this._pInst.pixelDensity;this.elt.style.width=e+"px";this.elt.style.height=d+"px";this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height));this.drawingContext.scale(this._pInst.pixelDensity,this._pInst.pixelDensity)};return a.Graphics}({},g.core);g.p5Graphics2D=function(g,a,e,d,c,k){a.Graphics2D=function(c,h,d){a.Graphics.call(this,c,h,d);this.drawingContext=this.canvas.getContext("2d");this._pInst._setProperty("drawingContext",
this.drawingContext);return this};a.Graphics2D.prototype=Object.create(a.Graphics.prototype);a.Graphics2D.prototype._applyDefaults=function(){this.drawingContext.fillStyle=d._DEFAULT_FILL;this.drawingContext.strokeStyle=d._DEFAULT_STROKE;this.drawingContext.lineCap=d.ROUND;this.drawingContext.font="normal 12px sans-serif"};a.Graphics2D.prototype.background=function(){this.drawingContext.save();this.drawingContext.setTransform(1,0,0,1,0,0);this.drawingContext.scale(this._pInst.pixelDensity,this._pInst.pixelDensity);
if(arguments[0]instanceof a.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var c=this.drawingContext.fillStyle,h=this._pInst.color.apply(this._pInst,arguments).toString();this.drawingContext.fillStyle=h;this.drawingContext.fillRect(0,0,this.width,this.height);this.drawingContext.fillStyle=c}this.drawingContext.restore()};a.Graphics2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)};a.Graphics2D.prototype.fill=function(){var c=this.drawingContext,
h=this._pInst.color.apply(this._pInst,arguments);c.fillStyle=h.toString()};a.Graphics2D.prototype.stroke=function(){var c=this.drawingContext,h=this._pInst.color.apply(this._pInst,arguments);c.strokeStyle=h.toString()};a.Graphics2D.prototype.image=function(c,h,d,f,l){var t=c.canvas||c.elt;try{this._pInst._tint&&c.canvas?this.drawingContext.drawImage(this._getTintedImageCanvas(c),h,d,f,l):this.drawingContext.drawImage(t,h,d,f,l)}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e;}};a.Graphics2D.prototype._getTintedImageCanvas=
function(d){if(!d.canvas)return d;var h=c._toPixels(d.canvas),m=document.createElement("canvas");m.width=d.canvas.width;m.height=d.canvas.height;var f=m.getContext("2d");d=f.createImageData(d.canvas.width,d.canvas.height);for(var l=d.data,e=0;e<h.length;e+=4){var k=h[e+1],a=h[e+2],g=h[e+3];l[e]=h[e]*this._pInst._tint[0]/255;l[e+1]=k*this._pInst._tint[1]/255;l[e+2]=a*this._pInst._tint[2]/255;l[e+3]=g*this._pInst._tint[3]/255}f.putImageData(d,0,0);return m};a.Graphics2D.prototype.blend=function(){var c=
this.drawingContext.globalCompositeOperation,h=arguments[arguments.length-1],d=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=h;this._pInst.copy.apply(this._pInst,d);this.drawingContext.globalCompositeOperation=c};a.Graphics2D.prototype.copy=function(){var c,h,d,f,l,e,k,g,q;if(9===arguments.length)c=arguments[0],h=arguments[1],d=arguments[2],f=arguments[3],l=arguments[4],e=arguments[5],k=arguments[6],g=arguments[7],q=arguments[8];else if(8===
arguments.length)c=this._pInst,h=arguments[0],d=arguments[1],f=arguments[2],l=arguments[3],e=arguments[4],k=arguments[5],g=arguments[6],q=arguments[7];else throw Error("Signature not supported");a.Graphics2D._copyHelper(c,h,d,f,l,e,k,g,q)};a.Graphics2D._copyHelper=function(c,h,d,f,l,e,k,a,g){var v=c.canvas.width/c.width;this.drawingContext.drawImage(c.canvas,v*h,v*d,v*f,v*l,e,k,a,g)};a.Graphics2D.prototype.get=function(c,h,d,f){void 0===c&&void 0===h&&void 0===d&&void 0===f?(h=c=0,d=this.width,f=
this.height):void 0===d&&void 0===f&&(f=d=1);if(c>this.width||h>this.height||0>c||0>h)return[0,0,0,255];var l=this.pixelDensity||this._pInst.pixelDensity;if(1===d&&1===f){c=this.drawingContext.getImageData(c*l,h*l,d,f).data;l=[];for(h=0;h<c.length;h+=4)l.push(c[h],c[h+1],c[h+2],c[h+3]);return l}c*=l;h*=l;d=Math.min(d,this.width);f=Math.min(f,this.height);var e=d*l,l=f*l,k=new a.Image(d,f);k.canvas.getContext("2d").drawImage(this.canvas,c,h,e,l,0,0,d,f);return k};a.Graphics2D.prototype.loadPixels=
function(){var c=this.pixelDensity||this._pInst.pixelDensity,c=this.drawingContext.getImageData(0,0,this.width*c,this.height*c);this._pInst?(this._pInst._setProperty("imageData",c),this._pInst._setProperty("pixels",c.data)):(this._setProperty("imageData",c),this._setProperty("pixels",c.data))};a.Graphics2D.prototype.set=function(c,h,d){if(d instanceof a.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst.pixelDensity,this._pInst.pixelDensity),
this.drawingContext.drawImage(d.canvas,c,h),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var f=this._pInst||this,l=0,e=0,k=0,g=0,q=4*(h*f.pixelDensity*this.width*f.pixelDensity+c*f.pixelDensity);f.imageData||f.loadPixels.call(f);if("number"===typeof d)q<f.pixels.length&&(k=e=l=d,g=255);else if(d instanceof Array){if(4>d.length)throw Error("pixel array must be of the form [R, G, B, A]");q<f.pixels.length&&(l=d[0],e=d[1],k=d[2],g=d[3])}else d instanceof a.Color&&q<f.pixels.length&&
(l=d.rgba[0],e=d.rgba[1],k=d.rgba[2],g=d.rgba[3]);for(d=0;d<f.pixelDensity;d++)for(var v=0;v<f.pixelDensity;v++)q=4*((h*f.pixelDensity+v)*this.width*f.pixelDensity+(c*f.pixelDensity+d)),f.pixels[q]=l,f.pixels[q+1]=e,f.pixels[q+2]=k,f.pixels[q+3]=g}};a.Graphics2D.prototype.updatePixels=function(c,h,d,f){var l=this.pixelDensity||this._pInst.pixelDensity;void 0===c&&void 0===h&&void 0===d&&void 0===f&&(h=c=0,d=this.width,f=this.height);d*=l;f*=l;this._pInst?this.drawingContext.putImageData(this._pInst.imageData,
c,h,0,0,d,f):this.drawingContext.putImageData(this.imageData,c,h,0,0,d,f)};a.Graphics2D.prototype.arc=function(c,h,k,f,l,t,a,g){if(this._pInst._doStroke||this._pInst._doFill){var q=this.drawingContext,v=e.arcModeAdjust(c,h,k,f,this._pInst._ellipseMode),w=v.w/2,u=v.h/2;q.beginPath();g.forEach(function(f,h){0===h&&q.moveTo(v.x+f.x1*w,v.y+f.y1*u);q.bezierCurveTo(v.x+f.x2*w,v.y+f.y2*u,v.x+f.x3*w,v.y+f.y3*u,v.x+f.x4*w,v.y+f.y4*u)});if(this._pInst._doFill&&(a!==d.PIE&&null!=a||q.lineTo(v.x,v.y),q.closePath(),
q.fill(),this._pInst._doStroke&&(a===d.CHORD||a===d.PIE)))return q.stroke(),this;!this._pInst._doStroke||a!==d.OPEN&&null!=a||(q.beginPath(),g.forEach(function(f,h){0===h&&q.moveTo(v.x+f.x1*w,v.y+f.y1*u);q.bezierCurveTo(v.x+f.x2*w,v.y+f.y2*u,v.x+f.x3*w,v.y+f.y3*u,v.x+f.x4*w,v.y+f.y4*u)}),q.stroke());return this}};a.Graphics2D.prototype.ellipse=function(c,h,d,f){var l=this.drawingContext,k=this._pInst._doFill,a=this._pInst._doStroke;if(k&&!a){if("rgba(0,0,0,0)"===l.fillStyle)return this}else if(!k&&
a&&"rgba(0,0,0,0)"===l.strokeStyle)return this;c=e.modeAdjust(c,h,d,f,this._pInst._ellipseMode);h=c.w/2*.5522848;d=c.h/2*.5522848;f=c.x+c.w;var g=c.y+c.h,q=c.x+c.w/2,v=c.y+c.h/2;l.beginPath();l.moveTo(c.x,v);l.bezierCurveTo(c.x,v-d,q-h,c.y,q,c.y);l.bezierCurveTo(q+h,c.y,f,v-d,f,v);l.bezierCurveTo(f,v+d,q+h,g,q,g);l.bezierCurveTo(q-h,g,c.x,v+d,c.x,v);l.closePath();k&&l.fill();a&&l.stroke()};a.Graphics2D.prototype.line=function(c,h,d,f){var l=this.drawingContext;if(!this._pInst._doStroke||"rgba(0,0,0,0)"===
l.strokeStyle)return this;l.beginPath();l.moveTo(c,h);l.lineTo(d,f);l.stroke();return this};a.Graphics2D.prototype.point=function(c,h){var e=this.drawingContext,f=e.strokeStyle,l=e.fillStyle;if(!this._pInst._doStroke||"rgba(0,0,0,0)"===e.strokeStyle)return this;c=Math.round(c);h=Math.round(h);e.fillStyle=f;1<e.lineWidth?(e.beginPath(),e.arc(c,h,e.lineWidth/2,0,d.TWO_PI,!1),e.fill()):e.fillRect(c,h,1,1);e.fillStyle=l};a.Graphics2D.prototype.quad=function(c,h,d,f,l,e,k,a){var g=this.drawingContext,
v=this._pInst._doFill,w=this._pInst._doStroke;if(v&&!w){if("rgba(0,0,0,0)"===g.fillStyle)return this}else if(!v&&w&&"rgba(0,0,0,0)"===g.strokeStyle)return this;g.beginPath();g.moveTo(c,h);g.lineTo(d,f);g.lineTo(l,e);g.lineTo(k,a);g.closePath();v&&g.fill();w&&g.stroke();return this};a.Graphics2D.prototype.rect=function(c,h,d,f,l,k,a,g){var q=this.drawingContext,v=this._pInst._doFill,w=this._pInst._doStroke;if(v&&!w){if("rgba(0,0,0,0)"===q.fillStyle)return this}else if(!v&&w&&"rgba(0,0,0,0)"===q.strokeStyle)return this;
f=e.modeAdjust(c,h,d,f,this._pInst._rectMode);this._pInst._doStroke&&1===q.lineWidth%2&&q.translate(.5,.5);q.beginPath();"undefined"===typeof l?q.rect(f.x,f.y,f.w,f.h):("undefined"===typeof k&&(k=l),"undefined"===typeof a&&(a=k),"undefined"===typeof g&&(g=a),c=f.x,h=f.y,d=f.w,f=f.h,v=d/2,w=f/2,d<2*l&&(l=v),f<2*l&&(l=w),d<2*k&&(k=v),f<2*k&&(k=w),d<2*a&&(a=v),f<2*a&&(a=w),d<2*g&&(g=v),f<2*g&&(g=w),q.beginPath(),q.moveTo(c+l,h),q.arcTo(c+d,h,c+d,h+f,k),q.arcTo(c+d,h+f,c,h+f,a),q.arcTo(c,h+f,c,h,g),q.arcTo(c,
h,c+d,h,l),q.closePath());this._pInst._doFill&&q.fill();this._pInst._doStroke&&q.stroke();this._pInst._doStroke&&1===q.lineWidth%2&&q.translate(-.5,-.5);return this};a.Graphics2D.prototype.triangle=function(c,h,d,f,l,e){var k=this.drawingContext,a=this._pInst._doFill,g=this._pInst._doStroke;if(a&&!g){if("rgba(0,0,0,0)"===k.fillStyle)return this}else if(!a&&g&&"rgba(0,0,0,0)"===k.strokeStyle)return this;k.beginPath();k.moveTo(c,h);k.lineTo(d,f);k.lineTo(l,e);k.closePath();a&&k.fill();g&&k.stroke()};
a.Graphics2D.prototype.endShape=function(c,h,e,f,l,k,a){if(0===h.length||!this._pInst._doStroke&&!this._pInst._doFill)return this;(c=c===d.CLOSE)&&!k&&h.push(h[0]);k=h.length;if(!e||a!==d.POLYGON&&null!==a)if(!f||a!==d.POLYGON&&null!==a)if(!l||a!==d.POLYGON&&null!==a)if(a===d.POINTS)for(f=0;f<k;f++)e=h[f],this._pInst._doStroke&&this._pInst.stroke(e[6]),this._pInst.point(e[0],e[1]);else if(a===d.LINES)for(f=0;f+1<k;f+=2)e=h[f],this._pInst._doStroke&&this._pInst.stroke(h[f+1][6]),this._pInst.line(e[0],
e[1],h[f+1][0],h[f+1][1]);else if(a===d.TRIANGLES)for(f=0;f+2<k;f+=3)e=h[f],this.drawingContext.beginPath(),this.drawingContext.moveTo(e[0],e[1]),this.drawingContext.lineTo(h[f+1][0],h[f+1][1]),this.drawingContext.lineTo(h[f+2][0],h[f+2][1]),this.drawingContext.lineTo(e[0],e[1]),this._pInst._doFill&&(this._pInst.fill(h[f+2][5]),this.drawingContext.fill()),this._pInst._doStroke&&(this._pInst.stroke(h[f+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(a===d.TRIANGLE_STRIP)for(f=
0;f+1<k;f++)e=h[f],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[f+1][0],h[f+1][1]),this.drawingContext.lineTo(e[0],e[1]),this._pInst._doStroke&&this._pInst.stroke(h[f+1][6]),this._pInst._doFill&&this._pInst.fill(h[f+1][5]),f+2<k&&(this.drawingContext.lineTo(h[f+2][0],h[f+2][1]),this._pInst._doStroke&&this._pInst.stroke(h[f+2][6]),this._pInst._doFill&&this._pInst.fill(h[f+2][5])),this._doFillStrokeClose();else if(a===d.TRIANGLE_FAN){if(2<k)for(this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0][0],
h[0][1]),this.drawingContext.lineTo(h[1][0],h[1][1]),this.drawingContext.lineTo(h[2][0],h[2][1]),this._pInst._doFill&&this._pInst.fill(h[2][5]),this._pInst._doStroke&&this._pInst.stroke(h[2][6]),this._doFillStrokeClose(),f=3;f<k;f++)e=h[f],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0][0],h[0][1]),this.drawingContext.lineTo(h[f-1][0],h[f-1][1]),this.drawingContext.lineTo(e[0],e[1]),this._pInst._doFill&&this._pInst.fill(e[5]),this._pInst._doStroke&&this._pInst.stroke(e[6]),this._doFillStrokeClose()}else if(a===
d.QUADS)for(f=0;f+3<k;f+=4){e=h[f];this.drawingContext.beginPath();this.drawingContext.moveTo(e[0],e[1]);for(l=1;4>l;l++)this.drawingContext.lineTo(h[f+l][0],h[f+l][1]);this.drawingContext.lineTo(e[0],e[1]);this._pInst._doFill&&this._pInst.fill(h[f+3][5]);this._pInst._doStroke&&this._pInst.stroke(h[f+3][6]);this._doFillStrokeClose()}else if(a===d.QUAD_STRIP){if(3<k)for(f=0;f+1<k;f+=2)e=h[f],this.drawingContext.beginPath(),f+3<k?(this.drawingContext.moveTo(h[f+2][0],h[f+2][1]),this.drawingContext.lineTo(e[0],
e[1]),this.drawingContext.lineTo(h[f+1][0],h[f+1][1]),this.drawingContext.lineTo(h[f+3][0],h[f+3][1]),this._pInst._doFill&&this._pInst.fill(h[f+3][5]),this._pInst._doStroke&&this._pInst.stroke(h[f+3][6])):(this.drawingContext.moveTo(e[0],e[1]),this.drawingContext.lineTo(h[f+1][0],h[f+1][1])),this._doFillStrokeClose()}else{this.drawingContext.beginPath();this.drawingContext.moveTo(h[0][0],h[0][1]);for(f=1;f<k;f++)e=h[f],e.isVert&&(e.moveTo?this.drawingContext.moveTo(e[0],e[1]):this.drawingContext.lineTo(e[0],
e[1]));this._doFillStrokeClose()}else{this.drawingContext.beginPath();for(f=0;f<k;f++)h[f].isVert?h[f].moveTo?this.drawingContext.moveTo([0],h[f][1]):this.drawingContext.lineTo(h[f][0],h[f][1]):this.drawingContext.quadraticCurveTo(h[f][0],h[f][1],h[f][2],h[f][3]);this._doFillStrokeClose()}else{this.drawingContext.beginPath();for(f=0;f<k;f++)h[f].isVert?h[f].moveTo?this.drawingContext.moveTo(h[f][0],h[f][1]):this.drawingContext.lineTo(h[f][0],h[f][1]):this.drawingContext.bezierCurveTo(h[f][0],h[f][1],
h[f][2],h[f][3],h[f][4],h[f][5]);this._doFillStrokeClose()}else if(3<k){l=[];a=1-this._pInst._curveTightness;this.drawingContext.beginPath();this.drawingContext.moveTo(h[1][0],h[1][1]);for(f=1;f+2<k;f++)e=h[f],l[0]=[e[0],e[1]],l[1]=[e[0]+(a*h[f+1][0]-a*h[f-1][0])/6,e[1]+(a*h[f+1][1]-a*h[f-1][1])/6],l[2]=[h[f+1][0]+(a*h[f][0]-a*h[f+2][0])/6,h[f+1][1]+(a*h[f][1]-a*h[f+2][1])/6],l[3]=[h[f+1][0],h[f+1][1]],this.drawingContext.bezierCurveTo(l[1][0],l[1][1],l[2][0],l[2][1],l[3][0],l[3][1]);c&&this.drawingContext.lineTo(h[f+
1][0],h[f+1][1]);this._doFillStrokeClose()}c&&h.pop();return this};a.Graphics2D.prototype.noSmooth=function(){this.drawingContext.mozImageSmoothingEnabled=!1;this.drawingContext.webkitImageSmoothingEnabled=!1;return this};a.Graphics2D.prototype.smooth=function(){this.drawingContext.mozImageSmoothingEnabled=!0;this.drawingContext.webkitImageSmoothingEnabled=!0;return this};a.Graphics2D.prototype.strokeCap=function(c){if(c===d.ROUND||c===d.SQUARE||c===d.PROJECT)this.drawingContext.lineCap=c;return this};
a.Graphics2D.prototype.strokeJoin=function(c){if(c===d.ROUND||c===d.BEVEL||c===d.MITER)this.drawingContext.lineJoin=c;return this};a.Graphics2D.prototype.strokeWeight=function(c){this.drawingContext.lineWidth="undefined"===typeof c||0===c?1E-4:c;return this};a.Graphics2D.prototype._getFill=function(){return this.drawingContext.fillStyle};a.Graphics2D.prototype._getStroke=function(){return this.drawingContext.strokeStyle};a.Graphics2D.prototype.bezier=function(c,h,d,f,l,e,k,a){this._pInst.beginShape();
this._pInst.vertex(c,h);this._pInst.bezierVertex(d,f,l,e,k,a);this._pInst.endShape();return this};a.Graphics2D.prototype.curve=function(c,h,d,f,l,e,k,a){this._pInst.beginShape();this._pInst.curveVertex(c,h);this._pInst.curveVertex(d,f);this._pInst.curveVertex(l,e);this._pInst.curveVertex(k,a);this._pInst.endShape();return this};a.Graphics2D.prototype._doFillStrokeClose=function(){this._pInst._doFill&&this.drawingContext.fill();this._pInst._doStroke&&this.drawingContext.stroke();this.drawingContext.closePath()};
a.Graphics2D.prototype.applyMatrix=function(c,h,d,f,l,e){this.drawingContext.transform(c,h,d,f,l,e)};a.Graphics2D.prototype.resetMatrix=function(){this.drawingContext.setTransform(1,0,0,1,0,0);return this};a.Graphics2D.prototype.rotate=function(c){this.drawingContext.rotate(c)};a.Graphics2D.prototype.scale=function(){var c=1,h=1;1===arguments.length?c=h=arguments[0]:(c=arguments[0],h=arguments[1]);this.drawingContext.scale(c,h);return this};a.Graphics2D.prototype.shearX=function(c){this._pInst._angleMode===
d.DEGREES&&(c=this._pInst.radians(c));this.drawingContext.transform(1,0,this._pInst.tan(c),1,0,0);return this};a.Graphics2D.prototype.shearY=function(c){this._pInst._angleMode===d.DEGREES&&(c=this._pInst.radians(c));this.drawingContext.transform(1,this._pInst.tan(c),0,1,0,0);return this};a.Graphics2D.prototype.translate=function(c,h){this.drawingContext.translate(c,h);return this};a.Graphics2D.prototype.text=function(c,h,e,f,l){var k=this._pInst,a,g,q,v,w,u,z;if(k._doFill||k._doStroke){"string"!==
typeof c&&(c=c.toString());c=c.replace(/(\t)/g,"  ");c=c.split("\n");if("undefined"!==typeof f){for(g=z=0;g<c.length;g++)for(q="",u=c[g].split(" "),a=0;a<u.length;a++)v=q+u[a]+" ",w=this.textWidth(v),w>f?(q=u[a]+" ",z+=k.textLeading()):q=v;switch(this.drawingContext.textAlign){case d.CENTER:h+=f/2;break;case d.RIGHT:h+=f}if("undefined"!==typeof l)switch(this.drawingContext.textBaseline){case d.BOTTOM:e+=l-z;break;case d._CTX_MIDDLE:e+=(l-z)/2;break;case d.BASELINE:e+=l-z}for(g=0;g<c.length;g++){q=
"";u=c[g].split(" ");for(a=0;a<u.length;a++)v=q+u[a]+" ",w=this.textWidth(v),w>f?(this._renderText(k,q,h,e),q=u[a]+" ",e+=k.textLeading()):q=v;this._renderText(k,q,h,e);e+=k.textLeading()}}else for(f=0;f<c.length;f++)this._renderText(k,c[f],h,e),e+=k.textLeading();return k}};a.Graphics2D.prototype._renderText=function(c,h,e,f){if(c._isOpenType())return c._textFont.renderPath(h,e,f);c._doStroke&&c._strokeSet&&this.drawingContext.strokeText(h,e,f);c._doFill&&(this.drawingContext.fillStyle=c._fillSet?
this.drawingContext.fillStyle:d._DEFAULT_TEXT_FILL,this.drawingContext.fillText(h,e,f));return c};a.Graphics2D.prototype.textWidth=function(c){var h=this._pInst;return h._isOpenType()?h._textFont.textBounds(c,0,0).w:this.drawingContext.measureText(c).width};a.Graphics2D.prototype.textAlign=function(c,h){if(arguments.length){if(c===d.LEFT||c===d.RIGHT||c===d.CENTER)this.drawingContext.textAlign=c;if(h===d.TOP||h===d.BOTTOM||h===d.CENTER||h===d.BASELINE)this.drawingContext.textBaseline=h===d.CENTER?
d._CTX_MIDDLE:h;return this._pInst}var e=this.drawingContext.textBaseline;e===d._CTX_MIDDLE&&(e=d.CENTER);return{horizontal:this.drawingContext.textAlign,vertical:e}};a.Graphics2D.prototype._applyTextProperties=function(){var c,h=this._pInst;h._setProperty("_textAscent",null);h._setProperty("_textDescent",null);c=h._textFont;h._isOpenType()&&(c=h._textFont.font.familyName,h._setProperty("_textStyle",h._textFont.font.styleName));this.drawingContext.font=h._textStyle+" "+h._textSize+"px "+c;return h};
a.Graphics2D.prototype.push=function(){this.drawingContext.save()};a.Graphics2D.prototype.pop=function(){this.drawingContext.restore()};return a.Graphics2D}({},g.core,g.canvas,g.constants,g.filters,g.p5Graphics);g.shaders={defaultVertShader:"attribute vec3 a_VertexPosition;\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nvoid main(void) {\nvec3 zeroToOne = a_VertexPosition / 1000.0;\nvec3 zeroToTwo = zeroToOne * 2.0;\nvec3 clipSpace = zeroToTwo - 1.0;\ngl_Position = uPMatrix*uMVMatrix*vec4(clipSpace*vec3(1, -1, 1), 1.0);\n}",
defaultMatFragShader:"precision mediump float;\nuniform vec4 u_MaterialColor;\nvoid main(void) {\ngl_FragColor = u_MaterialColor;\n}"};g.mat4=function(g){var a="undefined"!==typeof Float32Array?Float32Array:Array;g={create:function(){var e=new a(16);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e},clone:function(e){var d=new a(16);d[0]=e[0];d[1]=e[1];d[2]=e[2];d[3]=e[3];d[4]=e[4];d[5]=e[5];d[6]=e[6];d[7]=e[7];d[8]=e[8];
d[9]=e[9];d[10]=e[10];d[11]=e[11];d[12]=e[12];d[13]=e[13];d[14]=e[14];d[15]=e[15];return d},copy:function(e,d){e[0]=d[0];e[1]=d[1];e[2]=d[2];e[3]=d[3];e[4]=d[4];e[5]=d[5];e[6]=d[6];e[7]=d[7];e[8]=d[8];e[9]=d[9];e[10]=d[10];e[11]=d[11];e[12]=d[12];e[13]=d[13];e[14]=d[14];e[15]=d[15];return e},identity:function(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e},transpose:function(e,d){if(e===d){var c=d[1],k=d[2],a=d[3],
h=d[6],m=d[7],f=d[11];e[1]=d[4];e[2]=d[8];e[3]=d[12];e[4]=c;e[6]=d[9];e[7]=d[13];e[8]=k;e[9]=h;e[11]=d[14];e[12]=a;e[13]=m;e[14]=f}else e[0]=d[0],e[1]=d[4],e[2]=d[8],e[3]=d[12],e[4]=d[1],e[5]=d[5],e[6]=d[9],e[7]=d[13],e[8]=d[2],e[9]=d[6],e[10]=d[10],e[11]=d[14],e[12]=d[3],e[13]=d[7],e[14]=d[11],e[15]=d[15];return e},invert:function(e,d){var c=d[0],k=d[1],a=d[2],h=d[3],m=d[4],f=d[5],l=d[6],t=d[7],g=d[8],n=d[9],q=d[10],v=d[11],w=d[12],u=d[13],z=d[14],y=d[15],x=c*f-k*m,p=c*l-a*m,C=c*t-h*m,D=k*l-a*f,
J=k*t-h*f,L=a*t-h*l,G=g*u-n*w,H=g*z-q*w,I=g*y-v*w,M=n*z-q*u,O=n*y-v*u,F=q*y-v*z,E=x*F-p*O+C*M+D*I-J*H+L*G;if(!E)return null;E=1/E;e[0]=(f*F-l*O+t*M)*E;e[1]=(a*O-k*F-h*M)*E;e[2]=(u*L-z*J+y*D)*E;e[3]=(q*J-n*L-v*D)*E;e[4]=(l*I-m*F-t*H)*E;e[5]=(c*F-a*I+h*H)*E;e[6]=(z*C-w*L-y*p)*E;e[7]=(g*L-q*C+v*p)*E;e[8]=(m*O-f*I+t*G)*E;e[9]=(k*I-c*O-h*G)*E;e[10]=(w*J-u*C+y*x)*E;e[11]=(n*C-g*J-v*x)*E;e[12]=(f*H-m*M-l*G)*E;e[13]=(c*M-k*H+a*G)*E;e[14]=(u*p-w*D-z*x)*E;e[15]=(g*D-n*p+q*x)*E;return e},adjoint:function(e,
d){var c=d[0],k=d[1],a=d[2],h=d[3],m=d[4],f=d[5],l=d[6],t=d[7],g=d[8],n=d[9],q=d[10],v=d[11],w=d[12],u=d[13],z=d[14],y=d[15];e[0]=f*(q*y-v*z)-n*(l*y-t*z)+u*(l*v-t*q);e[1]=-(k*(q*y-v*z)-n*(a*y-h*z)+u*(a*v-h*q));e[2]=k*(l*y-t*z)-f*(a*y-h*z)+u*(a*t-h*l);e[3]=-(k*(l*v-t*q)-f*(a*v-h*q)+n*(a*t-h*l));e[4]=-(m*(q*y-v*z)-g*(l*y-t*z)+w*(l*v-t*q));e[5]=c*(q*y-v*z)-g*(a*y-h*z)+w*(a*v-h*q);e[6]=-(c*(l*y-t*z)-m*(a*y-h*z)+w*(a*t-h*l));e[7]=c*(l*v-t*q)-m*(a*v-h*q)+g*(a*t-h*l);e[8]=m*(n*y-v*u)-g*(f*y-t*u)+w*(f*v-
t*n);e[9]=-(c*(n*y-v*u)-g*(k*y-h*u)+w*(k*v-h*n));e[10]=c*(f*y-t*u)-m*(k*y-h*u)+w*(k*t-h*f);e[11]=-(c*(f*v-t*n)-m*(k*v-h*n)+g*(k*t-h*f));e[12]=-(m*(n*z-q*u)-g*(f*z-l*u)+w*(f*q-l*n));e[13]=c*(n*z-q*u)-g*(k*z-a*u)+w*(k*q-a*n);e[14]=-(c*(f*z-l*u)-m*(k*z-a*u)+w*(k*l-a*f));e[15]=c*(f*q-l*n)-m*(k*q-a*n)+g*(k*l-a*f);return e},multiply:function(e,d,c){var k=d[0],a=d[1],h=d[2],m=d[3],f=d[4],l=d[5],t=d[6],g=d[7],n=d[8],q=d[9],v=d[10],w=d[11],u=d[12],z=d[13],y=d[14];d=d[15];var x=c[0],p=c[1],C=c[2],D=c[3];e[0]=
x*k+p*f+C*n+D*u;e[1]=x*a+p*l+C*q+D*z;e[2]=x*h+p*t+C*v+D*y;e[3]=x*m+p*g+C*w+D*d;x=c[4];p=c[5];C=c[6];D=c[7];e[4]=x*k+p*f+C*n+D*u;e[5]=x*a+p*l+C*q+D*z;e[6]=x*h+p*t+C*v+D*y;e[7]=x*m+p*g+C*w+D*d;x=c[8];p=c[9];C=c[10];D=c[11];e[8]=x*k+p*f+C*n+D*u;e[9]=x*a+p*l+C*q+D*z;e[10]=x*h+p*t+C*v+D*y;e[11]=x*m+p*g+C*w+D*d;x=c[12];p=c[13];C=c[14];D=c[15];e[12]=x*k+p*f+C*n+D*u;e[13]=x*a+p*l+C*q+D*z;e[14]=x*h+p*t+C*v+D*y;e[15]=x*m+p*g+C*w+D*d;return e}};g.mul=g.multiply;g.translate=function(e,d,c){var k=c[0],a=c[1];
c=c[2];var h,m,f,l,t,g,n,q,v,w,u,p;d===e?(e[12]=d[0]*k+d[4]*a+d[8]*c+d[12],e[13]=d[1]*k+d[5]*a+d[9]*c+d[13],e[14]=d[2]*k+d[6]*a+d[10]*c+d[14],e[15]=d[3]*k+d[7]*a+d[11]*c+d[15]):(h=d[0],m=d[1],f=d[2],l=d[3],t=d[4],g=d[5],n=d[6],q=d[7],v=d[8],w=d[9],u=d[10],p=d[11],e[0]=h,e[1]=m,e[2]=f,e[3]=l,e[4]=t,e[5]=g,e[6]=n,e[7]=q,e[8]=v,e[9]=w,e[10]=u,e[11]=p,e[12]=h*k+t*a+v*c+d[12],e[13]=m*k+g*a+w*c+d[13],e[14]=f*k+n*a+u*c+d[14],e[15]=l*k+q*a+p*c+d[15]);return e};g.scale=function(e,d,c){var k=c[0],a=c[1];c=
c[2];e[0]=d[0]*k;e[1]=d[1]*k;e[2]=d[2]*k;e[3]=d[3]*k;e[4]=d[4]*a;e[5]=d[5]*a;e[6]=d[6]*a;e[7]=d[7]*a;e[8]=d[8]*c;e[9]=d[9]*c;e[10]=d[10]*c;e[11]=d[11]*c;e[12]=d[12];e[13]=d[13];e[14]=d[14];e[15]=d[15];return e};g.rotate=function(e,d,c,a){var r=a[0],h=a[1];a=a[2];var m=Math.sqrt(r*r+h*h+a*a),f,l,t,g,n,q,v,w,u,p,y,x,B,C,D,J,L,G,H,I;if(1E-6>Math.abs(m))return null;m=1/m;r*=m;h*=m;a*=m;f=Math.sin(c);l=Math.cos(c);t=1-l;c=d[0];m=d[1];g=d[2];n=d[3];q=d[4];v=d[5];w=d[6];u=d[7];p=d[8];y=d[9];x=d[10];B=d[11];
C=r*r*t+l;D=h*r*t+a*f;J=a*r*t-h*f;L=r*h*t-a*f;G=h*h*t+l;H=a*h*t+r*f;I=r*a*t+h*f;r=h*a*t-r*f;h=a*a*t+l;e[0]=c*C+q*D+p*J;e[1]=m*C+v*D+y*J;e[2]=g*C+w*D+x*J;e[3]=n*C+u*D+B*J;e[4]=c*L+q*G+p*H;e[5]=m*L+v*G+y*H;e[6]=g*L+w*G+x*H;e[7]=n*L+u*G+B*H;e[8]=c*I+q*r+p*h;e[9]=m*I+v*r+y*h;e[10]=g*I+w*r+x*h;e[11]=n*I+u*r+B*h;d!==e&&(e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15]);return e};g.rotateX=function(e,d,c){var a=Math.sin(c);c=Math.cos(c);var r=d[4],h=d[5],m=d[6],f=d[7],l=d[8],t=d[9],g=d[10],n=d[11];d!==e&&
(e[0]=d[0],e[1]=d[1],e[2]=d[2],e[3]=d[3],e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15]);e[4]=r*c+l*a;e[5]=h*c+t*a;e[6]=m*c+g*a;e[7]=f*c+n*a;e[8]=l*c-r*a;e[9]=t*c-h*a;e[10]=g*c-m*a;e[11]=n*c-f*a;return e};g.rotateY=function(e,d,c){var a=Math.sin(c);c=Math.cos(c);var g=d[0],h=d[1],m=d[2],f=d[3],l=d[8],t=d[9],A=d[10],n=d[11];d!==e&&(e[4]=d[4],e[5]=d[5],e[6]=d[6],e[7]=d[7],e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15]);e[0]=g*c-l*a;e[1]=h*c-t*a;e[2]=m*c-A*a;e[3]=f*c-n*a;e[8]=g*a+l*c;e[9]=h*a+t*c;
e[10]=m*a+A*c;e[11]=f*a+n*c;return e};g.rotateZ=function(e,d,c){var a=Math.sin(c);c=Math.cos(c);var g=d[0],h=d[1],m=d[2],f=d[3],l=d[4],t=d[5],A=d[6],n=d[7];d!==e&&(e[8]=d[8],e[9]=d[9],e[10]=d[10],e[11]=d[11],e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15]);e[0]=g*c+l*a;e[1]=h*c+t*a;e[2]=m*c+A*a;e[3]=f*c+n*a;e[4]=l*c-g*a;e[5]=t*c-h*a;e[6]=A*c-m*a;e[7]=n*c-f*a;return e};g.frustum=function(a,d,c,k,g,h,m){var f=1/(c-d),l=1/(g-k),t=1/(h-m);a[0]=2*h*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*h*l;a[6]=0;a[7]=
0;a[8]=(c+d)*f;a[9]=(g+k)*l;a[10]=(m+h)*t;a[11]=-1;a[12]=0;a[13]=0;a[14]=m*h*2*t;a[15]=0;return a};g.perspective=function(a,d,c,k,g){d=1/Math.tan(d/2);var h=1/(k-g);a[0]=d/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(g+k)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*g*k*h;a[15]=0;return a};g.ortho=function(a,d,c,k,g,h,m){var f=1/(d-c),l=1/(k-g),t=1/(h-m);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*t;a[11]=0;a[12]=(d+c)*f;a[13]=(g+k)*l;a[14]=
(m+h)*t;a[15]=1;return a};return g}({});g.p5Graphics3D=function(g,a,e,d,c){var k,r,h,m,f=[],l={alpha:!1,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};a.Graphics3D=function(f,c,h){a.Graphics.call(this,f,c,h);try{this.drawingContext=this.canvas.getContext("webgl",l)||this.canvas.getContext("experimental-webgl",l);if(null===this.drawingContext)throw"Error creating webgl context";console.log("p5.Graphics3d: enabled webgl context")}catch(d){console.error(d)}this._pInst._setProperty("_graphics",
this);this.isP3D=!0;k=this.drawingContext;k.clearColor(1,1,1,1);k.clearDepth(1);k.enable(k.DEPTH_TEST);k.depthFunc(k.LEQUAL);k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT);k.viewport(0,0,this.width*this._pInst.pixelDensity,this.height*this._pInst.pixelDensity);this.initShaders();this.initMatrix();return this};a.Graphics3D.prototype=Object.create(a.Graphics.prototype);a.Graphics3D.prototype.initShaders=function(){var f=k.createShader(k.VERTEX_SHADER);k.shaderSource(f,e.defaultVertShader);k.compileShader(f);
if(!k.getShaderParameter(f,k.COMPILE_STATUS))return alert("Yikes! An error occurred compiling the shaders:"+k.getShaderInfoLog(f)),null;var c=k.createShader(k.FRAGMENT_SHADER);k.shaderSource(c,e.defaultMatFragShader);k.compileShader(c);if(!k.getShaderParameter(c,k.COMPILE_STATUS))return alert("Darn! An error occurred compiling the shaders:"+k.getShaderInfoLog(c)),null;r=k.createProgram();k.attachShader(r,f);k.attachShader(r,c);k.linkProgram(r);k.getProgramParameter(r,k.LINK_STATUS)||alert("Snap! Error linking shader program");
k.useProgram(r);r.vertexPositionAttribute=k.getAttribLocation(r,"a_VertexPosition");k.enableVertexAttribArray(r.vertexPositionAttribute);r.pMatrixUniform=k.getUniformLocation(r,"uPMatrix");r.mvMatrixUniform=k.getUniformLocation(r,"uMVMatrix");r.uMaterialColorLoc=k.getUniformLocation(r,"u_MaterialColor");k.uniform4f(r.uMaterialColorLoc,1,1,1,1)};a.Graphics3D.prototype.initMatrix=function(){h=c.create();m=c.create();c.perspective(m,60/180*Math.PI,this.width/this.height,.1,100)};a.Graphics3D.prototype.resetMatrix=
function(){c.identity(h)};a.Graphics3D.prototype.background=function(){var f=this._pInst.color.apply(this._pInst,arguments);k.clearColor(f.color_array[0]/255,f.color_array[1]/255,f.color_array[2]/255,f.color_array[3]/255);k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT)};a.Graphics3D.prototype.stroke=function(){this._stroke=this._pInst.color.apply(this._pInst,arguments)};a.Graphics3D.prototype.drawGeometry=function(f){var c=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,c);k.bufferData(k.ARRAY_BUFFER,
new Float32Array(f),k.STATIC_DRAW);k.vertexAttribPointer(r.vertexPositionAttribute,3,k.FLOAT,!1,0,0);k.uniformMatrix4fv(r.pMatrixUniform,!1,m);k.uniformMatrix4fv(r.mvMatrixUniform,!1,h);k.drawArrays(k.TRIANGLES,0,f.length/3);return this};a.Graphics3D.prototype.translate=function(f,d,l){c.translate(h,h,[f,d,l]);return this};a.Graphics3D.prototype.scale=function(f,d,l){c.scale(h,h,[f,d,l]);return this};a.Graphics3D.prototype.rotateX=function(f){c.rotateX(h,h,f);return this};a.Graphics3D.prototype.rotateY=
function(f){c.rotateY(h,h,f);return this};a.Graphics3D.prototype.rotateZ=function(f){c.rotateZ(h,h,f);return this};a.Graphics3D.prototype.push=function(){var d=c.create();c.copy(d,h);f.push(d)};a.Graphics3D.prototype.pop=function(){if(0===f.length)throw"Invalid popMatrix!";h=f.pop()};return a.Graphics3D}({},g.core,g.shaders,g.p5Graphics,g.mat4);g.p5Image=function(g,a,e){a.Image=function(d,c){this.width=d;this.height=c;this.canvas=document.createElement("canvas");this.canvas.width=this.width;this.canvas.height=
this.height;this.drawingContext=this.canvas.getContext("2d");this.pixelDensity=1;this.pixels=[]};a.Image.prototype._setProperty=function(d,c){this[d]=c};a.Image.prototype.loadPixels=function(){a.Graphics2D.prototype.loadPixels.call(this)};a.Image.prototype.updatePixels=function(d,c,e,g){a.Graphics2D.prototype.updatePixels.call(this,d,c,e,g)};a.Image.prototype.get=function(d,c,e,g){return a.Graphics2D.prototype.get.call(this,d,c,e,g)};a.Image.prototype.set=function(d,c,e){a.Graphics2D.prototype.set.call(this,
d,c,e)};a.Image.prototype.resize=function(d,c){d=d||this.canvas.width;c=c||this.canvas.height;var a=document.createElement("canvas");a.width=d;a.height=c;a.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,a.width,a.height);this.canvas.width=this.width=d;this.canvas.height=this.height=c;this.drawingContext.drawImage(a,0,0,d,c,0,0,d,c);0<this.pixels.length&&this.loadPixels()};a.Image.prototype.copy=function(){a.prototype.copy.apply(this,arguments)};a.Image.prototype.mask=
function(d){void 0===d&&(d=this);var c=this.drawingContext.globalCompositeOperation,e=1;d instanceof a.Graphics&&(e=d._pInst.pixelDensity);d=[d,0,0,e*d.width,e*d.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in";this.copy.apply(this,d);this.drawingContext.globalCompositeOperation=c};a.Image.prototype.filter=function(d,c){e.apply(this.canvas,e[d.toLowerCase()],c)};a.Image.prototype.blend=function(){a.prototype.blend.apply(this,arguments)};a.Image.prototype.save=
function(d,c){var e;if(c)switch(c.toLowerCase()){case "png":e="image/png";break;case "jpeg":e="image/jpeg";break;case "jpg":e="image/jpeg";break;default:e="image/png"}else c="png",e="image/png";var g=this.canvas.toDataURL(e),g=g.replace(e,"image/octet-stream");a.prototype.downloadFile(g,d,c)};return a.Image}({},g.core,g.filters);g.polargeometry=function(g){return{degreesToRadians:function(a){return 2*Math.PI*a/360},radiansToDegrees:function(a){return 360*a/(2*Math.PI)}}}({});g.p5Vector=function(g,
a,e,d){a.Vector=function(c,d,e){var h;c instanceof a?(this.p5=c,c=d[0]||0,h=d[1]||0,d=d[2]||0):(c=c||0,h=d||0,d=e||0);this.x=c;this.y=h;this.z=d};a.Vector.prototype.set=function(c,d,e){if(c instanceof a.Vector)return this.x=c.x||0,this.y=c.y||0,this.z=c.z||0,this;if(c instanceof Array)return this.x=c[0]||0,this.y=c[1]||0,this.z=c[2]||0,this;this.x=c||0;this.y=d||0;this.z=e||0;return this};a.Vector.prototype.copy=function(){return this.p5?new a.Vector(this.p5,[this.x,this.y,this.z]):new a.Vector(this.x,
this.y,this.z)};a.Vector.prototype.add=function(c,d,e){if(c instanceof a.Vector)return this.x+=c.x||0,this.y+=c.y||0,this.z+=c.z||0,this;if(c instanceof Array)return this.x+=c[0]||0,this.y+=c[1]||0,this.z+=c[2]||0,this;this.x+=c||0;this.y+=d||0;this.z+=e||0;return this};a.Vector.prototype.sub=function(c,d,e){if(c instanceof a.Vector)return this.x-=c.x||0,this.y-=c.y||0,this.z-=c.z||0,this;if(c instanceof Array)return this.x-=c[0]||0,this.y-=c[1]||0,this.z-=c[2]||0,this;this.x-=c||0;this.y-=d||0;this.z-=
e||0;return this};a.Vector.prototype.mult=function(c){this.x*=c||0;this.y*=c||0;this.z*=c||0;return this};a.Vector.prototype.div=function(c){this.x/=c;this.y/=c;this.z/=c;return this};a.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())};a.Vector.prototype.magSq=function(){var c=this.x,d=this.y,a=this.z;return c*c+d*d+a*a};a.Vector.prototype.dot=function(c,d,e){return c instanceof a.Vector?this.dot(c.x,c.y,c.z):this.x*(c||0)+this.y*(d||0)+this.z*(e||0)};a.Vector.prototype.cross=function(c){var d=
this.y*c.z-this.z*c.y,e=this.z*c.x-this.x*c.z;c=this.x*c.y-this.y*c.x;return this.p5?new a.Vector(this.p5,[d,e,c]):new a.Vector(d,e,c)};a.Vector.prototype.dist=function(c){return c.copy().sub(this).mag()};a.Vector.prototype.normalize=function(){return this.div(this.mag())};a.Vector.prototype.limit=function(c){var d=this.magSq();d>c*c&&(this.div(Math.sqrt(d)),this.mult(c));return this};a.Vector.prototype.setMag=function(c){return this.normalize().mult(c)};a.Vector.prototype.heading=function(){var c=
Math.atan2(this.y,this.x);return this.p5?this.p5._angleMode===d.RADIANS?c:e.radiansToDegrees(c):c};a.Vector.prototype.rotate=function(c){this.p5&&this.p5._angleMode===d.DEGREES&&(c=e.degreesToRadians(c));c=this.heading()+c;var a=this.mag();this.x=Math.cos(c)*a;this.y=Math.sin(c)*a;return this};a.Vector.prototype.lerp=function(c,d,e,h){if(c instanceof a.Vector)return this.lerp(c.x,c.y,c.z,d);this.x+=(c-this.x)*h||0;this.y+=(d-this.y)*h||0;this.z+=(e-this.z)*h||0;return this};a.Vector.prototype.array=
function(){return[this.x||0,this.y||0,this.z||0]};a.Vector.prototype.equals=function(c,d,e){c instanceof a.Vector?(c=c.x||0,d=c.y||0,e=c.z||0):c instanceof Array?(c=c[0]||0,d=c[1]||0,e=c[2]||0):(c=c||0,d=d||0,e=e||0);return this.x===c&&this.y===d&&this.z===e};a.Vector.fromAngle=function(c){this.p5&&this.p5._angleMode===d.DEGREES&&(c=e.degreesToRadians(c));return this.p5?new a.Vector(this.p5,[Math.cos(c),Math.sin(c),0]):new a.Vector(Math.cos(c),Math.sin(c),0)};a.Vector.random2D=function(){var c;c=
this.p5?this.p5._angleMode===d.DEGREES?this.p5.random(360):this.p5.random(d.TWO_PI):Math.random()*Math.PI*2;return this.fromAngle(c)};a.Vector.random3D=function(){var c,e;this.p5?(c=this.p5.random(0,d.TWO_PI),e=this.p5.random(-1,1)):(c=Math.random()*Math.PI*2,e=2*Math.random()-1);var g=Math.sqrt(1-e*e)*Math.cos(c);c=Math.sqrt(1-e*e)*Math.sin(c);return this.p5?new a.Vector(this.p5,[g,c,e]):new a.Vector(g,c,e)};a.Vector.add=function(c,d,a){a?a.set(c):a=c.copy();a.add(d);return a};a.Vector.sub=function(c,
d,a){a?a.set(c):a=c.copy();a.sub(d);return a};a.Vector.mult=function(c,d,a){a?a.set(c):a=c.copy();a.mult(d);return a};a.Vector.div=function(c,d,a){a?a.set(c):a=c.copy();a.div(d);return a};a.Vector.dot=function(c,d){return c.dot(d)};a.Vector.cross=function(c,d){return c.cross(d)};a.Vector.dist=function(c,d){return c.dist(d)};a.Vector.lerp=function(c,d,a,h){h?h.set(c):h=c.copy();h.lerp(d,a);return h};a.Vector.angleBetween=function(c,a){var g=Math.acos(c.dot(a)/(c.mag()*a.mag()));this.p5&&this.p5._angleMode===
d.DEGREES&&(g=e.radiansToDegrees(g));return g};return a.Vector}({},g.core,g.polargeometry,g.constants);g.p5TableRow=function(g,a){a.TableRow=function(a,d){var c=[],k={};a&&(c=a.split(d||","));for(var g=0;g<c.length;g++)k[g]=c[g];this.arr=c;this.obj=k;this.table=null};a.TableRow.prototype.set=function(a,d){if("string"===typeof a){var c=this.table.columns.indexOf(a);if(0<=c)this.obj[a]=d,this.arr[c]=d;else throw'This table has no column named "'+a+'"';}else if(a<this.table.columns.length)this.arr[a]=
d,this.obj[this.table.columns[a]]=d;else throw"Column #"+a+" is out of the range of this table";};a.TableRow.prototype.setNum=function(a,d){var c=parseFloat(d,10);this.set(a,c)};a.TableRow.prototype.setString=function(a,d){this.set(a,d.toString())};a.TableRow.prototype.get=function(a){return"string"===typeof a?this.obj[a]:this.arr[a]};a.TableRow.prototype.getNum=function(a){var d;d="string"===typeof a?parseFloat(this.obj[a],10):parseFloat(this.arr[a],10);if("NaN"===d.toString())throw"Error: "+this.obj[a]+
" is NaN (Not a Number)";return d};a.TableRow.prototype.getString=function(a){return"string"===typeof a?this.obj[a].toString():this.arr[a].toString()};return a.TableRow}({},g.core);g.p5Table=function(g,a){a.Table=function(a){this.columns=[];this.rows=[]};a.Table.prototype.addRow=function(e){e=e||new a.TableRow;if("undefined"===typeof e.arr||"undefined"===typeof e.obj)throw"invalid TableRow: "+e;e.table=this;this.rows.push(e);return e};a.Table.prototype.removeRow=function(a){this.rows[a].table=null;
a=this.rows.splice(a+1,this.rows.length);this.rows.pop();this.rows=this.rows.concat(a)};a.Table.prototype.getRow=function(a){return this.rows[a]};a.Table.prototype.getRows=function(){return this.rows};a.Table.prototype.findRow=function(a,d){if("string"===typeof d)for(var c=0;c<this.rows.length;c++){if(this.rows[c].obj[d]===a)return this.rows[c]}else for(c=0;c<this.rows.length;c++)if(this.rows[c].arr[d]===a)return this.rows[c];return null};a.Table.prototype.findRows=function(a,d){var c=[];if("string"===
typeof d)for(var k=0;k<this.rows.length;k++)this.rows[k].obj[d]===a&&c.push(this.rows[k]);else for(k=0;k<this.rows.length;k++)this.rows[k].arr[d]===a&&c.push(this.rows[k]);return c};a.Table.prototype.matchRow=function(a,d){if("number"===typeof d)for(var c=0;c<this.rows.length;c++){if(this.rows[c].arr[d].match(a))return this.rows[c]}else for(c=0;c<this.rows.length;c++)if(this.rows[c].obj[d].match(a))return this.rows[c];return null};a.Table.prototype.matchRows=function(a,d){var c=[];if("number"===typeof d)for(var k=
0;k<this.rows.length;k++)this.rows[k].arr[d].match(a)&&c.push(this.rows[k]);else for(k=0;k<this.rows.length;k++)this.rows[k].obj[d].match(a)&&c.push(this.rows[k]);return c};a.Table.prototype.getColumn=function(a){var d=[];if("string"===typeof a)for(var c=0;c<this.rows.length;c++)d.push(this.rows[c].obj[a]);else for(c=0;c<this.rows.length;c++)d.push(this.rows[c].arr[a]);return d};a.Table.prototype.clearRows=function(){delete this.rows;this.rows=[]};a.Table.prototype.addColumn=function(a){this.columns.push(a||
null)};a.Table.prototype.getColumnCount=function(){return this.columns.length};a.Table.prototype.getRowCount=function(){return this.rows.length};a.Table.prototype.removeTokens=function(a,d){for(var c=function(c){return c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},k=[],g=0;g<a.length;g++)k.push(c(a.charAt(g)));c=new RegExp(k.join("|"),"g");if("undefined"===typeof d)for(k=0;k<this.columns.length;k++)for(g=0;g<this.rows.length;g++){var h=this.rows[g].arr[k],h=h.replace(c,"");this.rows[g].arr[k]=h;this.rows[g].obj[this.columns[k]]=
h}else if("string"===typeof d)for(k=0;k<this.rows.length;k++)g=this.rows[k].obj[d],g=g.replace(c,""),this.rows[k].obj[d]=g,h=this.columns.indexOf(d),this.rows[k].arr[h]=g;else for(k=0;k<this.rows.length;k++)g=this.rows[k].arr[d],g=g.replace(c,""),this.rows[k].arr[d]=g,this.rows[k].obj[this.columns[d]]=g};a.Table.prototype.trim=function(a){var d=RegExp(" ","g");if("undefined"===typeof a)for(a=0;a<this.columns.length;a++)for(var c=0;c<this.rows.length;c++){var k=this.rows[c].arr[a],k=k.replace(d,"");
this.rows[c].arr[a]=k;this.rows[c].obj[this.columns[a]]=k}else if("string"===typeof a)for(c=0;c<this.rows.length;c++){k=this.rows[c].obj[a];k=k.replace(d,"");this.rows[c].obj[a]=k;var g=this.columns.indexOf(a);this.rows[c].arr[g]=k}else for(c=0;c<this.rows.length;c++)k=this.rows[c].arr[a],k=k.replace(d,""),this.rows[c].arr[a]=k,this.rows[c].obj[this.columns[a]]=k};a.Table.prototype.removeColumn=function(a){var d,c;"string"===typeof a?(d=a,c=this.columns.indexOf(a),console.log("string")):(c=a,d=this.columns[a]);
a=this.columns.splice(c+1,this.columns.length);this.columns.pop();this.columns=this.columns.concat(a);for(a=0;a<this.rows.length;a++){var k=this.rows[a].arr,g=k.splice(c+1,k.length);k.pop();this.rows[a].arr=k.concat(g);delete this.rows[a].obj[d]}};a.Table.prototype.set=function(a,d,c){this.rows[a].set(d,c)};a.Table.prototype.setNum=function(a,d,c){this.rows[a].set(d,c)};a.Table.prototype.setString=function(a,d,c){this.rows[a].set(d,c)};a.Table.prototype.get=function(a,d){return this.rows[a].get(d)};
a.Table.prototype.getNum=function(a,d){return this.rows[a].getNum(d)};a.Table.prototype.getString=function(a,d){return this.rows[a].getString(d)};a.Table.prototype.getObject=function(a){for(var d={},c,k,g=0;g<this.rows.length;g++)if(c=this.rows[g].obj,"string"===typeof a)if(k=this.columns.indexOf(a),0<=k)k=c[a],d[k]=c;else throw'This table has no column named "'+a+'"';else d[g]=this.rows[g].obj;return d};a.Table.prototype.getArray=function(){for(var a=[],d=0;d<this.rows.length;d++)a.push(this.rows[d].arr);
return a};return a.Table}({},g.core);g.colorcreating_reading=function(g,a,e){a.prototype.alpha=function(d){if(d instanceof a.Color||d instanceof Array)return this.color(d).getAlpha();throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.blue=function(d){if(d instanceof a.Color||d instanceof Array)return this.color(d).getBlue();throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.brightness=function(d){if(d instanceof a.Color||d instanceof Array)return this.color(d).getBrightness();
throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.color=function(){if(arguments[0]instanceof a.Color)return arguments[0];if(arguments[0]instanceof Array)return new a.Color(this,arguments[0]);var d=Array.prototype.slice.call(arguments);return new a.Color(this,d)};a.prototype.green=function(d){if(d instanceof a.Color||d instanceof Array)return this.color(d).getGreen();throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.hue=function(d){if(!d instanceof a.Color)throw Error("Needs p5.Color as argument.");
return d.getHue()};a.prototype.lerpColor=function(d,c,e){e=Math.max(Math.min(e,1),0);if(d instanceof Array){for(var g=[],h=0;h<d.length;h++)g.push(Math.sqrt(a.prototype.lerp(d[h]*d[h],c[h]*c[h],e)));return g}if(d instanceof a.Color){g=[];for(h=0;4>h;h++)g.push(Math.sqrt(a.prototype.lerp(d.rgba[h]*d.rgba[h],c.rgba[h]*c.rgba[h],e)));return new a.Color(this,g)}return Math.sqrt(a.prototype.lerp(d*d,c*c,e))};a.prototype.red=function(d){if(d instanceof a.Color||d instanceof Array)return this.color(d).getRed();
throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.saturation=function(d){if(!d instanceof a.Color)throw Error("Needs p5.Color as argument.");return d.getSaturation()};return a}({},g.core,g.p5Color);g.colorsetting=function(g,a,e,d){a.prototype._doStroke=!0;a.prototype._doFill=!0;a.prototype._strokeSet=!1;a.prototype._fillSet=!1;a.prototype._colorMode=e.RGB;a.prototype._maxRGB=[255,255,255,255];a.prototype._maxHSB=[255,255,255,255];a.prototype.background=function(){arguments[0]instanceof
a.Image?this.image(arguments[0],0,0,this.width,this.height):this._graphics.background.apply(this._graphics,arguments);return this};a.prototype.clear=function(){this._graphics.clear();return this};a.prototype.colorMode=function(){if(arguments[0]===e.RGB||arguments[0]===e.HSB){this._colorMode=arguments[0];var c=this._colorMode===e.RGB?this._maxRGB:this._maxHSB;2===arguments.length?(c[0]=arguments[1],c[1]=arguments[1],c[2]=arguments[1],c[3]=arguments[1]):2<arguments.length&&(c[0]=arguments[1],c[1]=arguments[2],
c[2]=arguments[3]);5===arguments.length&&(c[3]=arguments[4])}return this};a.prototype.fill=function(){this._setProperty("_fillSet",!0);this._setProperty("_doFill",!0);this._graphics.fill.apply(this._graphics,arguments);return this};a.prototype.noFill=function(){this._setProperty("_doFill",!1);return this};a.prototype.noStroke=function(){this._setProperty("_doStroke",!1);return this};a.prototype.stroke=function(){this._setProperty("_strokeSet",!0);this._setProperty("_doStroke",!0);this._graphics.stroke.apply(this._graphics,
arguments);return this};return a}({},g.core,g.constants,g.p5Color);g.dataconversion=function(g,a){a.prototype["float"]=function(a){return parseFloat(a)};a.prototype["int"]=function(e,d){if("string"===typeof e)return d=d||10,parseInt(e,d);if("number"===typeof e)return e|0;if("boolean"===typeof e)return e?1:0;if(e instanceof Array)return e.map(function(c){return a.prototype["int"](c,d)})};a.prototype.str=function(e){return e instanceof Array?e.map(a.prototype.str):String(e)};a.prototype["boolean"]=
function(e){if("number"===typeof e)return 0!==e;if("string"===typeof e)return"true"===e.toLowerCase();if("boolean"===typeof e)return e;if(e instanceof Array)return e.map(a.prototype["boolean"])};a.prototype["byte"]=function(e){e=a.prototype["int"](e,10);if("number"===typeof e)return(e+128)%256-128;if(e instanceof Array)return e.map(a.prototype["byte"])};a.prototype["char"]=function(e){if("number"!==typeof e||isNaN(e)){if(e instanceof Array)return e.map(a.prototype["char"]);if("string"===typeof e)return a.prototype["char"](parseInt(e,
10))}else return String.fromCharCode(e)};a.prototype.unchar=function(e){if("string"===typeof e&&1===e.length)return e.charCodeAt(0);if(e instanceof Array)return e.map(a.prototype.unchar)};a.prototype.hex=function(e,d){d=void 0===d||null===d?d=8:d;if(e instanceof Array)return e.map(function(c){return a.prototype.hex(c,d)});if("number"===typeof e){0>e&&(e=4294967295+e+1);for(var c=Number(e).toString(16).toUpperCase();c.length<d;)c="0"+c;c.length>=d&&(c=c.substring(c.length-d,c.length));return c}};a.prototype.unhex=
function(e){return e instanceof Array?e.map(a.prototype.unhex):parseInt("0x"+e,16)};return a}({},g.core);g.dataarray_functions=function(g,a){a.prototype.append=function(a,d){a.push(d);return a};a.prototype.arrayCopy=function(a,d,c,k,g){"undefined"!==typeof g?(g=Math.min(g,a.length),a=a.slice(d,g+d)):(g="undefined"!==typeof c?Math.min(c,a.length):a.length,k=0,c=d,a=a.slice(0,g));Array.prototype.splice.apply(c,[k,g].concat(a))};a.prototype.concat=function(a,d){return a.concat(d)};a.prototype.reverse=
function(a){return a.reverse()};a.prototype.shorten=function(a){a.pop();return a};a.prototype.shuffle=function(a,d){a=d||ArrayBuffer.isView(a)?a:a.slice();for(var c,k,g=a.length;1<g;)c=Math.random()*g|0,k=a[--g],a[g]=a[c],a[c]=k;return a};a.prototype.sort=function(a,d){var c=d?a.slice(0,Math.min(d,a.length)):a,k=d?a.slice(Math.min(d,a.length)):[],c="string"===typeof c[0]?c.sort():c.sort(function(c,a){return c-a});return c.concat(k)};a.prototype.splice=function(a,d,c){Array.prototype.splice.apply(a,
[c,0].concat(d));return a};a.prototype.subset=function(a,d,c){return"undefined"!==typeof c?a.slice(d,d+c):a.slice(d,a.length)};return a}({},g.core);g.datastring_functions=function(g,a){function e(){var c=arguments[0],a=0>c,d=a?c.toString().substring(1):c.toString(),f=d.indexOf("."),c=-1!==f?d.substring(0,f):d,f=-1!==f?d.substring(f+1):"",a=a?"-":"";if(3===arguments.length){for(d=0;d<arguments[1]-c.length;d++)a+="0";a=a+c+".";a+=f;for(c=0;c<arguments[2]-f.length;c++)a+="0"}else{for(f=0;f<Math.max(arguments[1]-
c.length,0);f++)a+="0";a+=d}return a}function d(){var c=arguments[0].toString(),a=c.indexOf("."),d=-1!==a?c.substring(a):"",c=-1!==a?c.substring(0,a):c,c=c.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");0===arguments[1]&&(d="");1<arguments.length&&(d=d.substring(0,arguments[1]+1));return c+d}function c(c){return 0<parseFloat(c)?"+"+c.toString():c.toString()}function k(c){return 0<parseFloat(c)?" "+c.toString():c.toString()}a.prototype.join=function(c,a){return c.join(a)};a.prototype.match=function(c,
a){return c.match(a)};a.prototype.matchAll=function(c,a){for(var d=new RegExp(a,"g"),f=d.exec(c),l=[];null!==f;)l.push(f),f=d.exec(c);return l};a.prototype.nf=function(){if(arguments[0]instanceof Array){var c=arguments[1],a=arguments[2];return arguments[0].map(function(d){return e(d,c,a)})}return e.apply(this,arguments)};a.prototype.nfc=function(){if(arguments[0]instanceof Array){var c=arguments[1];return arguments[0].map(function(a){return d(a,c)})}return d.apply(this,arguments)};a.prototype.nfp=
function(){var a=this.nf.apply(this,arguments);return a instanceof Array?a.map(c):c(a)};a.prototype.nfs=function(){var c=this.nf.apply(this,arguments);return c instanceof Array?c.map(k):k(c)};a.prototype.split=function(c,a){return c.split(a)};a.prototype.splitTokens=function(){return arguments[0].split(0<arguments.length?arguments[1]:/\s/g).filter(function(c){return c})};a.prototype.trim=function(c){return c instanceof Array?c.map(this.trim):c.trim()};return a}({},g.core);g.environment=function(g,
a,e){var d=[e.ARROW,e.CROSS,e.HAND,e.MOVE,e.TEXT,e.WAIT];a.prototype._frameRate=0;a.prototype._lastFrameTime=(new Date).getTime();a.prototype._targetFrameRate=60;a.prototype.print=window.console&&console.log?function(c){c=JSON.parse(JSON.stringify(c));console.log(c)}:function(){};a.prototype.println=a.prototype.print;a.prototype.frameCount=0;a.prototype.focused=!0;a.prototype.cursor=function(c,a,e){var h="auto",g=this._curElement.elt;-1<d.indexOf(c)?h=c:"string"===typeof c&&(h="",a&&e&&"number"===
typeof a&&"number"===typeof e&&(h=a+" "+e),h="http://"!==c.substring(0,6)?"url("+c+") "+h+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(c)?"url("+c+") "+h+", auto":c);g.style.cursor=h};a.prototype.frameRate=function(c){if("undefined"===typeof c)return this._frameRate;this._setProperty("_targetFrameRate",c);this._runFrames();return this};a.prototype.getFrameRate=function(){return this.frameRate()};a.prototype.setFrameRate=function(c){return this.frameRate(c)};a.prototype.noCursor=
function(){this._curElement.elt.style.cursor="none"};a.prototype.displayWidth=screen.width;a.prototype.displayHeight=screen.height;a.prototype.windowWidth=window.innerWidth;a.prototype.windowHeight=window.innerHeight;a.prototype._onresize=function(c){this._setProperty("windowWidth",window.innerWidth);this._setProperty("windowHeight",window.innerHeight);var a=this._isGlobal?window:this;"function"===typeof a.windowResized&&(a=a.windowResized(c),void 0===a||a||c.preventDefault())};a.prototype.width=
0;a.prototype.height=0;a.prototype.fullscreen=function(c){if("undefined"===typeof c)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(c){c=document.documentElement;if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw Error("Fullscreen not enabled in this browser.");c.requestFullscreen?c.requestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():
c.webkitRequestFullscreen?c.webkitRequestFullscreen():c.msRequestFullscreen&&c.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()};a.prototype.devicePixelScaling=function(c){this.pixelDensity=c?"number"===typeof c?c:window.devicePixelRatio||1:1;this.resizeCanvas(this.width,this.height,!0)};a.prototype.getURL=
function(){return location.href};a.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(c){return""!==c})};a.prototype.getURLParams=function(){for(var c=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,a,d={};null!=(a=c.exec(location.search));)a.index===c.lastIndex&&c.lastIndex++,d[a[1]]=a[2];return d};return a}({},g.core,g.constants);g.imageimage=function(g,a,e){a.prototype._imageMode=e.CORNER;a.prototype._tint=null;a.prototype.createImage=function(c,d){return new a.Image(c,d)};var d=
[];a.prototype.saveCanvas=function(c,d,e){e||(e=a.prototype._checkFileExtension(d,e)[1],""===e&&(e="png"));var h;c?h=c:this._curElement&&this._curElement.elt&&(h=this._curElement.elt);if(a.prototype._isSafari())d="Hello, Safari user!\nNow capturing a screenshot...\nTo save this image,\n",d+="go to File --\x3e Save As.\n",alert(d),window.location.href=h.toDataURL();else{if("undefined"===typeof e)e="png",c="image/png";else switch(e){case "png":c="image/png";break;case "jpeg":c="image/jpeg";break;case "jpg":c=
"image/jpeg";break;default:c="image/png"}h=h.toDataURL(c);h=h.replace(c,"image/octet-stream");a.prototype.downloadFile(h,d,e)}};a.prototype.saveFrames=function(c,e,g,h,m){g=a.prototype.constrain(g||3,0,15);g*=1E3;h=a.prototype.constrain(h||15,0,22);var f=0,l=a.prototype._makeFrame,t=this._curElement.elt,A=setInterval(function(){l(c+f,e,t);f++},1E3/h);setTimeout(function(){clearInterval(A);if(m)m(d);else for(var f=0;f<d.length;f++){var c=d[f];a.prototype.downloadFile(c.imageData,c.filename,c.ext)}d=
[]},g+.01)};a.prototype._makeFrame=function(c,a,e){var h;h=this?this._curElement.elt:e;if(a)switch(a.toLowerCase()){case "png":e="image/png";break;case "jpeg":e="image/jpeg";break;case "jpg":e="image/jpeg";break;default:e="image/png"}else a="png",e="image/png";h=h.toDataURL(e);h=h.replace(e,"image/octet-stream");e={};e.imageData=h;e.filename=c;e.ext=a;d.push(e)};return a}({},g.core,g.constants);g.helpers=function(g,a){function e(f,c,a){"undefined"===h(a)?a="#B40033":"number"===h(a)&&(a=l[a]);console.log("%c> p5.js says: "+
f+"%c [http://p5js.org/reference/#p5/"+c+"]","background-color:"+a+";color:#FFF;","background-color:transparent;color:"+a+";")}for(var d={},c=d.toString,k="Boolean Number String Function Array Date RegExp Object Error".split(" "),r=0;r<k.length;r++)d["[object "+k[r]+"]"]=k[r].toLowerCase();var h=function(f){return null==f?f+"":"object"===typeof f||"function"===typeof f?d[c.call(f)]||"object":typeof f},m=Array.isArray||function(f){return"array"===h(f)},f=["Number","Integer","Number/Constant"],l=["#2D7BB6",
"#EE9900","#4DB200"];a.prototype._validateParameters=function(c,d,l){m(l[0])||(l=[l]);var k=Math.abs(d.length-l[0].length),g,r=0,u=1;for(g=l.length;u<g;u++){var p=Math.abs(d.length-l[u].length);p<=k&&(r=u,k=p)}0<k&&(g="You wrote "+c+"(",0<d.length&&(g+="X"+",X".repeat(d.length-1)),g+="). "+c+" was expecting "+l[r].length+" parameters. Try "+c+"(",0<l[r].length&&(g+="X"+",X".repeat(l[r].length-1)),g+=").",1<l.length&&(g+=" "+c+" takes different numbers of parameters depending on what you want to do. Click this link to learn more: "),
e(g,c,0));for(r=0;r<l.length;r++)for(k=0;k<l[r].length&&k<d.length;k++)if(g=l[r][k],u=h(d[k]),"undefined"===u||null===u)e("It looks like "+c+" received an empty variable in spot #"+(k+1)+". If not intentional, this is often a problem with scope: [link to scope].",c,1);else{var y=g,x=u,p=d[k];if(y.match(/^p5\./))y=y.split("."),p=p instanceof a[y[1]];else{if(!(x="Boolean"===y||y.toLowerCase()===x)){if(y=-1<f.indexOf(y))y=!m(p)&&0<=p-parseFloat(p)+1;x=y}p=x}p||(g=c+" was expecting a "+g.toLowerCase()+
" for parameter #"+(k+1)+", received ",g+="string"===u?'"'+d[k]+'"':d[k],g+=" instead.",1<l.length&&(g+=" "+c+" takes different numbers of parameters depending on what you want to do. Click this link to learn more:"),e(g,c,2))}};a.prototype._testColors=function(){e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#ED225D");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#2D7BB6");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer",
"println","#EE9900");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#A67F59");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#704F21");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#1CC581");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#FF6625");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#79EB22");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer",
"println","#B40033");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#084B7F");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#945F00");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#6B441D");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#2E1B00");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#008851");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer",
"println","#C83C00");e("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#4DB200")};return a}({},g.core);g.imageloading_displaying=function(g,a,e,d,c,k){a.prototype.loadImage=function(c,d,e){var f=new Image,l=new a.Image(1,1,this);f.onload=function(){l.width=l.canvas.width=f.width;l.height=l.canvas.height=f.height;l.canvas.getContext("2d").drawImage(f,0,0);"function"===typeof d&&d(l)};f.onerror=function(f){"function"===typeof e&&e(f)};0!==c.indexOf("data:image/")&&(f.crossOrigin=
"Anonymous");f.src=c;return l};a.prototype.image=function(c,a,e,f,l){this._validateParameters("image",arguments,[["p5.Image","Number","Number"],["p5.Image","Number","Number","Number","Number"]]);f=f||c.width;l=l||c.height;var k=d.modeAdjust(a||0,e||0,f,l,this._imageMode);this._graphics.image(c,k.x,k.y,k.w,k.h)};a.prototype.tint=function(){this._tint=this.color.apply(this,arguments).rgba};a.prototype.noTint=function(){this._tint=null};a.prototype._getTintedImageCanvas=function(c){if(!c.canvas)return c;
var a=e._toPixels(c.canvas),d=document.createElement("canvas");d.width=c.canvas.width;d.height=c.canvas.height;var f=d.getContext("2d");c=f.createImageData(c.canvas.width,c.canvas.height);for(var l=c.data,k=0;k<a.length;k+=4){var g=a[k+1],n=a[k+2],q=a[k+3];l[k]=a[k]*this._tint[0]/255;l[k+1]=g*this._tint[1]/255;l[k+2]=n*this._tint[2]/255;l[k+3]=q*this._tint[3]/255}f.putImageData(c,0,0);return d};a.prototype.imageMode=function(a){if(a===c.CORNER||a===c.CORNERS||a===c.CENTER)this._imageMode=a};return a}({},
g.core,g.filters,g.canvas,g.constants,g.helpers);g.imagepixels=function(g,a,e,d){a.prototype.pixels=[];a.prototype.blend=function(){this._graphics.blend.apply(this._graphics,arguments)};a.prototype.copy=function(){a.Graphics2D._copyHelper.apply(this,arguments)};a.prototype.filter=function(c,a){e.apply(this.canvas,e[c.toLowerCase()],a)};a.prototype.get=function(c,a,d,h){return this._graphics.get(c,a,d,h)};a.prototype.loadPixels=function(){this._graphics.loadPixels()};a.prototype.set=function(c,a,d){this._graphics.set(c,
a,d)};a.prototype.updatePixels=function(c,a,d,h){this._graphics.updatePixels(c,a,d,h)};return a}({},g.core,g.filters,g.p5Color);!function(g,a,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define("reqwest",e):a[g]=e()}("reqwest",g,function(){function g(f,c,a){return function(){if(f._aborted)return a(f.request);if(f._timedOut)return a(f.request,"Request is aborted: timeout");if(f.request&&4==f.request.readyState){f.request.onreadystatechange=
L;var d=y.exec(f.url),d=d&&d[1]||window.location.protocol;(z.test(d)?x.test(f.request.status):f.request.response)?c(f.request):a(f.request)}}}function a(f,c){var a=c.headers||{},d;a.Accept=a.Accept||H.accept[c.type]||H.accept["*"];var h="function"===typeof FormData&&c.data instanceof FormData;c.crossOrigin||a["X-Requested-With"]||(a["X-Requested-With"]=H.requestedWith);a["Content-Type"]||h||(a["Content-Type"]=c.contentType||H.contentType);for(d in a)a.hasOwnProperty(d)&&"setRequestHeader"in f&&f.setRequestHeader(d,
a[d])}function e(f){J=f}function d(f,c){return f+(/\?/.test(f)?"&":"?")+c}function c(c,a,h,l){var k=C++,g=c.jsonpCallback||"callback";c=c.jsonpCallbackName||f.getcallbackPrefix(k);var t=new RegExp("((^|\\?|&)"+g+")=([^&]+)"),m=l.match(t),q=u.createElement("script"),n=0,A=-1!==navigator.userAgent.indexOf("MSIE 10.0");m?"?"===m[3]?l=l.replace(t,"$1="+c):c=m[3]:l=d(l,g+"="+c);w[c]=e;q.type="text/javascript";q.src=l;q.async=!0;"undefined"===typeof q.onreadystatechange||A||(q.htmlFor=q.id="_reqwest_"+
k);q.onload=q.onreadystatechange=function(){if(q.readyState&&"complete"!==q.readyState&&"loaded"!==q.readyState||n)return!1;q.onload=q.onreadystatechange=null;q.onclick&&q.onclick();a(J);J=void 0;B.removeChild(q);n=1};B.appendChild(q);return{abort:function(){q.onload=q.onreadystatechange=null;h({},"Request is aborted: timeout",{});J=void 0;B.removeChild(q);n=1}}}function k(h,l){var e=this.o,k=(e.method||"GET").toUpperCase(),t="string"===typeof e?e:e.url,m=!1!==e.processData&&e.data&&"string"!==typeof e.data?
f.toQueryString(e.data):e.data||null,q,n=!1;"jsonp"!=e.type&&"GET"!=k||!m||(t=d(t,m),m=null);if("jsonp"==e.type)return c(e,h,l,t);q=e.xhr&&e.xhr(e)||I(e);q.open(k,t,!1===e.async?!1:!0);a(q,e);"undefined"!==typeof e.withCredentials&&"undefined"!==typeof q.withCredentials&&(q.withCredentials=!!e.withCredentials);w.XDomainRequest&&q instanceof w.XDomainRequest?(q.onload=h,q.onerror=l,q.onprogress=function(){},n=!0):q.onreadystatechange=g(this,h,l);e.before&&e.before(q);n?setTimeout(function(){q.send(m)},
200):q.send(m);return q}function r(f,c){this.o=f;this.fn=c;m.apply(this,arguments)}function h(f){if(f.match("json"))return"json";if(f.match("javascript"))return"js";if(f.match("text"))return"html";if(f.match("xml"))return"xml"}function m(f,c){function a(c){f.timeout&&clearTimeout(l.timeout);for(l.timeout=null;0<l._completeHandlers.length;)l._completeHandlers.shift()(c)}function d(f,c,h){f=l.request;l._responseArgs.resp=f;l._responseArgs.msg=c;l._responseArgs.t=h;for(l._erred=!0;0<l._errorHandlers.length;)l._errorHandlers.shift()(f,
c,h);a(f)}this.url="string"==typeof f?f:f.url;this.timeout=null;this._fulfilled=!1;this._successHandler=function(){};this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=[];this._erred=!1;this._responseArgs={};var l=this;c=c||function(){};f.timeout&&(this.timeout=setTimeout(function(){l._timedOut=!0;l.request.abort()},f.timeout));f.success&&(this._successHandler=function(){f.success.apply(f,arguments)});f.error&&this._errorHandlers.push(function(){f.error.apply(f,arguments)});
f.complete&&this._completeHandlers.push(function(){f.complete.apply(f,arguments)});this.request=k.call(this,function(e){var k=f.type||e&&h(e.getResponseHeader("Content-Type"));e="jsonp"!==k?l.request:e;var g=M.dataFilter(e.responseText,k);try{e.responseText=g}catch(t){}if(g)switch(k){case "json":try{e=w.JSON?w.JSON.parse(g):eval("("+g+")")}catch(m){return d(e,"Could not parse JSON in response",m)}break;case "js":e=eval(g);break;case "html":e=g;break;case "xml":e=e.responseXML&&e.responseXML.parseError&&
e.responseXML.parseError.errorCode&&e.responseXML.parseError.reason?null:e.responseXML}l._responseArgs.resp=e;l._fulfilled=!0;c(e);for(l._successHandler(e);0<l._fulfillmentHandlers.length;)e=l._fulfillmentHandlers.shift()(e);a(e)},d)}function f(f,c){return new r(f,c)}function l(f){return f?f.replace(/\r?\n/g,"\r\n"):""}function t(f,c){var a=f.name,d=f.tagName.toLowerCase(),h=function(f){f&&!f.disabled&&c(a,l(f.attributes.value&&f.attributes.value.specified?f.value:f.text))},e;if(!f.disabled&&a)switch(d){case "input":/reset|button|image|file/i.test(f.type)||
(h=/checkbox/i.test(f.type),d=/radio/i.test(f.type),e=f.value,(!h&&!d||f.checked)&&c(a,l(h&&""===e?"on":e)));break;case "textarea":c(a,l(f.value));break;case "select":if("select-one"===f.type.toLowerCase())h(0<=f.selectedIndex?f.options[f.selectedIndex]:null);else for(d=0;f.length&&d<f.length;d++)f.options[d].selected&&h(f.options[d])}}function A(){var f,c;for(c=0;c<arguments.length;c++){f=arguments[c];/input|select|textarea/i.test(f.tagName)&&t(f,this);for(var a=["input","select","textarea"],d=void 0,
h=void 0,l=void 0,d=0;d<a.length;d++)for(l=f.getElementsByTagName(a[d]),h=0;h<l.length;h++)t(l[h],this)}}function n(){return f.toQueryString(f.serializeArray.apply(null,arguments))}function q(){var f={};A.apply(function(c,a){c in f?(f[c]&&!G(f[c])&&(f[c]=[f[c]]),f[c].push(a)):f[c]=a},arguments);return f}function v(f,c,a,d){var h,l,e=/\[\]$/;if(G(c))for(h=0;c&&h<c.length;h++)l=c[h],a||e.test(f)?d(f,l):v(f+"["+("object"===typeof l?h:"")+"]",l,a,d);else if(c&&"[object Object]"===c.toString())for(h in c)v(f+
"["+h+"]",c[h],a,d);else d(f,c)}var w=window,u=document,z=/^http/,y=/(^\w+):\/\//,x=/^(20\d|1223)$/,B=u.getElementsByTagName("head")[0],C=0,D="reqwest_"+ +new Date,J,L=function(){},G="function"==typeof Array.isArray?Array.isArray:function(f){return f instanceof Array},H={contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",
js:"application/javascript, text/javascript"}},I=function(f){if(!0===f.crossOrigin){if((f=w.XMLHttpRequest?new XMLHttpRequest:null)&&"withCredentials"in f)return f;if(w.XDomainRequest)return new XDomainRequest;throw Error("Browser does not support cross-origin requests");}return w.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},M={dataFilter:function(f){return f}};r.prototype={abort:function(){this._aborted=!0;this.request.abort()},retry:function(){m.call(this,this.o,this.fn)},
then:function(f,c){f=f||function(){};c=c||function(){};this._fulfilled?this._responseArgs.resp=f(this._responseArgs.resp):this._erred?c(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(f),this._errorHandlers.push(c));return this},always:function(f){this._fulfilled||this._erred?f(this._responseArgs.resp):this._completeHandlers.push(f);return this},fail:function(f){this._erred?f(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):
this._errorHandlers.push(f);return this},"catch":function(f){return this.fail(f)}};f.serializeArray=function(){var f=[];A.apply(function(c,a){f.push({name:c,value:a})},arguments);return f};f.serialize=function(){if(0===arguments.length)return"";var c,a=Array.prototype.slice.call(arguments,0);(c=a.pop())&&c.nodeType&&a.push(c)&&(c=null);c&&(c=c.type);return("map"==c?q:"array"==c?f.serializeArray:n).apply(null,a)};f.toQueryString=function(f,c){var a,d=c||!1,h=[],l=encodeURIComponent,e=function(f,c){c=
"function"===typeof c?c():null==c?"":c;h[h.length]=l(f)+"="+l(c)};if(G(f))for(a=0;f&&a<f.length;a++)e(f[a].name,f[a].value);else for(a in f)f.hasOwnProperty(a)&&v(a,f[a],d,e);return h.join("&").replace(/%20/g,"+")};f.getcallbackPrefix=function(){return D};f.compat=function(f,c){f&&(f.type&&(f.method=f.type)&&delete f.type,f.dataType&&(f.type=f.dataType),f.jsonpCallback&&(f.jsonpCallbackName=f.jsonpCallback)&&delete f.jsonpCallback,f.jsonp&&(f.jsonpCallback=f.jsonp));return new r(f,c)};f.ajaxSetup=
function(f){f=f||{};for(var c in f)M[c]=f[c]};return f});g.inputfiles=function(g,a,e){function d(c,a){var f={};a=a||[];if("undefined"===typeof a)for(var d=0;d<c.length;d++)a[d.toString()]=d;for(d=0;d<a.length;d++)f[a[d]]=c[d];return f}function c(c,a){a&&!0!==a&&"true"!==a||(a="");c||(c="untitled");var f="";c&&-1<c.indexOf(".")&&(f=c.split(".").pop());a&&f!==a&&(f=a,c=c+"."+f);return[c,f]}function k(c){document.body.removeChild(c.target)}a.prototype.loadFont=function(c,d){var f=new a.Font(this);opentype.load(c,
function(c,a){if(c)throw Error(c);f.font=a;"undefined"!==typeof d&&d(f)});return f};a.prototype.createInput=function(){throw"not yet implemented";};a.prototype.createReader=function(){throw"not yet implemented";};a.prototype.loadBytes=function(){throw"not yet implemented";};a.prototype.loadJSON=function(c,a,f){var d=[],k="json";"string"!==typeof f||"jsonp"!==f&&"json"!==f||(k=f);e({url:c,type:k,crossOrigin:!0}).then(function(f){for(var c in f)d[c]=f[c];"undefined"!==typeof a&&a(f)});return d};a.prototype.loadStrings=
function(c,a){var f=[],d=new XMLHttpRequest;d.open("GET",c,!0);d.onreadystatechange=function(){if(4===d.readyState&&(200===d.status||0===d.status)){var c=d.responseText.match(/[^\r\n]+/g),h;for(h in c)f[h]=c[h];"undefined"!==typeof a&&a(f)}};d.send(null);return f};a.prototype.loadTable=function(c){for(var k=null,f=[],l=!1,g=",",A=!1,n=1;n<arguments.length;n++)if("function"===typeof arguments[n])k=arguments[n];else if("string"===typeof arguments[n])if(f.push(arguments[n]),"header"===arguments[n]&&
(l=!0),"csv"===arguments[n]){if(A)throw Error("Cannot set multiple separator types.");g=",";A=!0}else if("tsv"===arguments[n]){if(A)throw Error("Cannot set multiple separator types.");g="\t";A=!0}var q=new a.Table;e({url:c,crossOrigin:!0,type:"csv"}).then(function(f){f=f.responseText;for(var c={},h=[],e=0,A=null,r,p=function(){c.currentState=4;h.push(A);A=null},C=function(){A.push(c.token);c.currentState=0;c.token=""};;){r=f[e++];if(null==r){if(c.escaped)throw Error("Unclosed quote in file.");if(A){C();
p();break}}null===A&&(c.escaped=!1,A=[],c.currentState=0,c.token="");if(0===c.currentState){if('"'===r){c.escaped=!0;c.currentState=1;continue}c.currentState=1}1===c.currentState&&c.escaped?'"'===r?'"'===f[e]?(c.token+='"',e++):(c.escaped=!1,c.currentState=2):c.token+=r:"\r"===r?("\n"===f[e]&&e++,C(),p()):"\n"===r?(C(),p()):r===g?C():1===c.currentState&&(c.token+=r)}if(l)q.columns=h.shift();else for(n=0;n<h.length;n++)q.columns[n]=n.toString();for(n=0;n<h.length&&(n!==h.length-1||1!==h[n].length||
"undefined"!==h[n][0]);n++)f=new a.TableRow,f.arr=h[n],f.obj=d(h[n],q.columns),q.addRow(f);null!==k&&k(q)}).fail(function(f,c){"undefined"!==typeof k&&k(!1)});return q};a.prototype.loadXML=function(c,a){e({url:c,type:"xml",crossOrigin:!0}).then(function(f){a(f)});return[]};a.prototype.parseXML=function(){throw"not yet implemented";};a.prototype.selectFolder=function(){throw"not yet implemented";};a.prototype.selectInput=function(){throw"not yet implemented";};a.prototype.httpGet=function(){var c=
Array.prototype.slice.call(arguments);c.push("GET");a.prototype.httpDo.apply(this,c)};a.prototype.httpPost=function(){var c=Array.prototype.slice.call(arguments);c.push("POST");a.prototype.httpDo.apply(this,c)};a.prototype.httpDo=function(){for(var c="GET",a=arguments[0],f={},d="",k,g=1;g<arguments.length;g++){var n=arguments[g];"string"===typeof n?"GET"===n||"POST"===n||"PUT"===n?c=n:d=n:"object"===typeof n?f=n:"function"===typeof n&&(k=n)}""===d&&(d=-1!==a.indexOf("json")?"json":-1!==a.indexOf("xml")?
"xml":"text");e({url:a,method:c,data:f,type:d,crossOrigin:!0,success:function(f){"undefined"!==typeof k&&("text"===d?k(f.response):k(f))}})};window.URL=window.URL||window.webkitURL;a.prototype._pWriters=[];a.prototype.beginRaw=function(){throw"not yet implemented";};a.prototype.beginRecord=function(){throw"not yet implemented";};a.prototype.createOutput=function(){throw"not yet implemented";};a.prototype.createWriter=function(c,d){for(var f in a.prototype._pWriters)if(a.prototype._pWriters[f].name===
c)return f=new a.PrintWriter(c+window.millis(),d),a.prototype._pWriters.push(f),f;f=new a.PrintWriter(c,d);a.prototype._pWriters.push(f);return f};a.prototype.endRaw=function(){throw"not yet implemented";};a.prototype.endRecord=function(){throw"not yet implemented";};a.PrintWriter=function(c,d){var f=this;this.name=c;this.content="";this.print=function(f){this.content+=f};this.println=function(f){this.content+=f+"\n"};this.flush=function(){this.content=""};this.close=function(){var l=[];l.push(this.content);
a.prototype.writeFile(l,c,d);for(var e in a.prototype._pWriters)a.prototype._pWriters[e].name===this.name&&a.prototype._pWriters.splice(e,1);f.flush();f={}}};a.prototype.saveBytes=function(){throw"not yet implemented";};a.prototype.save=function(d,e,f){var l=arguments,k=this._curElement.elt;if(0===l.length)a.prototype.saveCanvas(k);else if(l[0]instanceof a.Graphics)a.prototype.saveCanvas(l[0].elt,l[1],l[2]);else if(1===l.length&&"string"===typeof l[0])a.prototype.saveCanvas(k,l[0]);else switch(c(l[1],
l[2])[1]){case "json":a.prototype.saveJSON(l[0],l[1],l[2]);break;case "txt":a.prototype.saveStrings(l[0],l[1],l[2]);break;default:l[0]instanceof Array?a.prototype.saveStrings(l[0],l[1],l[2]):l[0]instanceof a.Table?a.prototype.saveTable(l[0],l[1],l[2],l[3]):l[0]instanceof a.Image?a.prototype.saveCanvas(l[0].canvas,l[1]):l[0]instanceof a.SoundFile&&a.prototype.saveSound(l[0],l[1],l[2],l[3])}};a.prototype.saveJSON=function(c,a,f){c=f?JSON.stringify(c):JSON.stringify(c,void 0,2);console.log(c);this.saveStrings(c.split("\n"),
a,"json")};a.prototype.saveJSONObject=a.prototype.saveJSON;a.prototype.saveJSONArray=a.prototype.saveJSON;a.prototype.saveStream=function(){throw"not yet implemented";};a.prototype.saveStrings=function(c,a,f){a=this.createWriter(a,f||"txt");for(var d in c)d<c.length-1?a.println(c[d]):a.print(c[d]);a.close();a.flush()};a.prototype.saveXML=function(){throw"not yet implemented";};a.prototype.selectOutput=function(){throw"not yet implemented";};a.prototype.saveTable=function(c,a,f){a=this.createWriter(a,
f);var d=c.columns,e=",";"tsv"===f&&(e="\t");if("html"!==f){if("0"!==d[0])for(f=0;f<d.length;f++)f<d.length-1?a.print(d[f]+e):a.println(d[f]);for(d=0;d<c.rows.length;d++)for(f=0;f<c.rows[d].arr.length;f++)f<c.rows[d].arr.length-1?a.print(c.rows[d].arr[f]+e):d<c.rows.length-1?a.println(c.rows[d].arr[f]):a.print(c.rows[d].arr[f])}else{a.println("<html>");a.println("<head>");a.println('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />');a.println("</head>");a.println("<body>");a.println("  <table>");
if("0"!==d[0]){a.println("    <tr>");for(e=0;e<d.length;e++)f=r(d[e]),a.println("      <td>"+f),a.println("      </td>");a.println("    </tr>")}for(d=0;d<c.rows.length;d++){a.println("    <tr>");for(e=0;e<c.columns.length;e++)f=c.rows[d].getString(e),f=r(f),a.println("      <td>"+f),a.println("      </td>");a.println("    </tr>")}a.println("  </table>");a.println("</body>");a.print("</html>")}a.close();a.flush()};var r=function(c){return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,
"&quot;").replace(/'/g,"&#039;")};a.prototype.writeFile=function(c,d,f){var l="application/octet-stream";a.prototype._isSafari()&&(l="text/plain");c=new Blob(c,{type:l});c=window.URL.createObjectURL(c);a.prototype.downloadFile(c,d,f)};a.prototype.downloadFile=function(d,e,f){f=c(e,f);e=f[0];f=f[1];var l=document.createElement("a");l.href=d;l.download=e;l.onclick=k;l.style.display="none";document.body.appendChild(l);a.prototype._isSafari()&&(d='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n',
d+='3. Name it with this extension: ."'+f+'"',alert(d));l.click()};a.prototype._checkFileExtension=c;a.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};return a}({},g.core,g.reqwest);g.inputkeyboard=function(g,a){var e={};a.prototype.isKeyPressed=!1;a.prototype.keyIsPressed=!1;a.prototype.key="";a.prototype.keyCode=0;a.prototype._onkeydown=function(a){this._setProperty("isKeyPressed",!0);this._setProperty("keyIsPressed",!0);this._setProperty("keyCode",
a.which);e[a.which]=!0;var c=String.fromCharCode(a.which);c||(c=a.which);this._setProperty("key",c);c=this.keyPressed||window.keyPressed;"function"!==typeof c||a.charCode||!1===c(a)&&a.preventDefault()};a.prototype._onkeyup=function(a){var c=this.keyReleased||window.keyReleased;this._setProperty("isKeyPressed",!1);this._setProperty("keyIsPressed",!1);e[a.which]=!1;var k=String.fromCharCode(a.which);k||(k=a.which);this._setProperty("key",k);this._setProperty("keyCode",a.which);"function"===typeof c&&
!1===c(a)&&a.preventDefault()};a.prototype._onkeypress=function(a){this._setProperty("keyCode",a.which);this._setProperty("key",String.fromCharCode(a.which));var c=this.keyTyped||window.keyTyped;"function"===typeof c&&!1===c(a)&&a.preventDefault()};a.prototype._onblur=function(a){e={}};a.prototype.keyIsDown=function(a){return e[a]};return a}({},g.core);g.inputacceleration=function(g,a){a.prototype.deviceOrientation=void 0;a.prototype.accelerationX=0;a.prototype.accelerationY=0;a.prototype.accelerationZ=
0;a.prototype.pAccelerationX=0;a.prototype.pAccelerationY=0;a.prototype.pAccelerationZ=0;a.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX);this._setProperty("pAccelerationY",this.accelerationY);this._setProperty("pAccelerationZ",this.accelerationZ)};var e=.5;a.prototype.setMoveThreshold=function(c){"number"===typeof c&&(e=c)};var d="",c="";a.prototype._ondeviceorientation=function(c){this._setProperty("accelerationX",c.beta);this._setProperty("accelerationY",
c.gamma);this._setProperty("accelerationZ",c.alpha);this._handleMotion()};a.prototype._ondevicemotion=function(c){this._setProperty("accelerationX",2*c.acceleration.x);this._setProperty("accelerationY",2*c.acceleration.y);this._setProperty("accelerationZ",2*c.acceleration.z);this._handleMotion()};a.prototype._onMozOrientation=function(c){this._setProperty("accelerationX",c.x);this._setProperty("accelerationY",c.y);this._setProperty("accelerationZ",c.z);this._handleMotion()};a.prototype._handleMotion=
function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var a=this.onDeviceMove||window.onDeviceMove;"function"===typeof a&&(Math.abs(this.accelerationX-this.pAccelerationX)>e||Math.abs(this.accelerationY-this.pAccelerationY)>e||Math.abs(this.accelerationZ-this.pAccelerationZ)>e)&&a();a=this.onDeviceTurn||
window.onDeviceTurn;if("function"===typeof a){var g=0;Math.abs(this.accelerationX)>g&&(g=this.accelerationX,c="x");Math.abs(this.accelerationY)>g&&(g=this.accelerationY,c="y");Math.abs(this.accelerationZ)>g&&(c="z");""!==d&&d!==c&&a(c);d=c}};return a}({},g.core);g.inputmouse=function(g,a,e){a.prototype.mouseX=0;a.prototype.mouseY=0;a.prototype.pmouseX=0;a.prototype.pmouseY=0;a.prototype.winMouseX=0;a.prototype.winMouseY=0;a.prototype.pwinMouseX=0;a.prototype.pwinMouseY=0;a.prototype.mouseButton=0;
a.prototype.mouseIsPressed=!1;a.prototype.isMousePressed=!1;a.prototype._updateMouseCoords=function(a){var c,e;"touchstart"===a.type||"touchmove"===a.type||"touchend"===a.type?(this._setProperty("mouseX",this.touchX),this._setProperty("mouseY",this.touchY)):null!==this._curElement&&(e=this._curElement.elt.getBoundingClientRect(),c=a.clientX-e.left,e=a.clientY-e.top,this._setProperty("mouseX",c),this._setProperty("mouseY",e));this._setProperty("winMouseX",a.pageX);this._setProperty("winMouseY",a.pageY)};
a.prototype._updatePMouseCoords=function(a){this._setProperty("pmouseX",this.mouseX);this._setProperty("pmouseY",this.mouseY);this._setProperty("pwinMouseX",this.winMouseX);this._setProperty("pwinMouseY",this.winMouseY)};a.prototype._setMouseButton=function(a){if(1===a.button)this._setProperty("mouseButton",e.CENTER);else if(2===a.button)this._setProperty("mouseButton",e.RIGHT);else if(this._setProperty("mouseButton",e.LEFT),"touchstart"===a.type||"touchmove"===a.type)this._setProperty("mouseX",this.touchX),
this._setProperty("mouseY",this.touchY)};a.prototype._onmousemove=function(a){var c=this._isGlobal?window:this;this._updateMouseCoords(a);this.isMousePressed?"function"===typeof c.mouseDragged?(c=c.mouseDragged(a),!1===c&&a.preventDefault()):"function"===typeof c.touchMoved&&(c=c.touchMoved(a),!1===c&&a.preventDefault(),this._updateTouchCoords(a)):"function"===typeof c.mouseMoved&&(c=c.mouseMoved(a),!1===c&&a.preventDefault())};a.prototype._onmousedown=function(a){var c=this._isGlobal?window:this;
this._setProperty("isMousePressed",!0);this._setProperty("mouseIsPressed",!0);this._setMouseButton(a);this._updateMouseCoords(a);"function"===typeof c.mousePressed?(c=c.mousePressed(a),!1===c&&a.preventDefault()):"function"===typeof c.touchStarted&&(c=c.touchStarted(a),!1===c&&a.preventDefault(),this._updateTouchCoords(a))};a.prototype._onmouseup=function(a){var c=this._isGlobal?window:this;this._setProperty("isMousePressed",!1);this._setProperty("mouseIsPressed",!1);"function"===typeof c.mouseReleased?
(c=c.mouseReleased(a),!1===c&&a.preventDefault()):"function"===typeof c.touchEnded&&(c=c.touchEnded(a),!1===c&&a.preventDefault(),this._updateTouchCoords(a))};a.prototype._onclick=function(a){var c=this._isGlobal?window:this;"function"===typeof c.mouseClicked&&!1===c.mouseClicked(a)&&a.preventDefault()};a.prototype._onmousewheel=a.prototype._onDOMMouseScroll=function(a){var c=this._isGlobal?window:this;"function"===typeof c.mouseWheel&&!1===c.mouseWheel(a)&&a.preventDefault()};return a}({},g.core,
g.constants);g.inputtime_date=function(g,a){a.prototype.day=function(){return(new Date).getDate()};a.prototype.hour=function(){return(new Date).getHours()};a.prototype.minute=function(){return(new Date).getMinutes()};a.prototype.millis=function(){return(new Date).getTime()-this._startTime};a.prototype.month=function(){return(new Date).getMonth()+1};a.prototype.second=function(){return(new Date).getSeconds()};a.prototype.year=function(){return(new Date).getFullYear()};return a}({},g.core);g.inputtouch=
function(g,a){function e(a,c,e){e=e||0;a=a.getBoundingClientRect();c=c.touches[e]||c.changedTouches[e];return{x:c.clientX-a.left,y:c.clientY-a.top}}a.prototype.touchX=0;a.prototype.touchY=0;a.prototype.ptouchX=0;a.prototype.ptouchY=0;a.prototype.touches=[];a.prototype.touchIsDown=!1;a.prototype._updateTouchCoords=function(a){if("mousedown"===a.type||"mousemove"===a.type||"mouseup"===a.type)this._setProperty("touchX",this.mouseX),this._setProperty("touchY",this.mouseY);else{var c=e(this._curElement.elt,
a,0);this._setProperty("touchX",c.x);this._setProperty("touchY",c.y);for(var c=[],k=0;k<a.touches.length;k++){var g=e(this._curElement.elt,a,k);c[k]={x:g.x,y:g.y}}this._setProperty("touches",c)}};a.prototype._updatePTouchCoords=function(){this._setProperty("ptouchX",this.touchX);this._setProperty("ptouchY",this.touchY)};a.prototype._ontouchstart=function(a){var c=this._isGlobal?window:this;this._updateTouchCoords(a);this._setProperty("touchIsDown",!0);"function"===typeof c.touchStarted?(c=c.touchStarted(a),
!1===c&&a.preventDefault()):"function"===typeof c.mousePressed&&(c=c.mousePressed(a),!1===c&&a.preventDefault())};a.prototype._ontouchmove=function(a){var c=this._isGlobal?window:this;this._updateTouchCoords(a);"function"===typeof c.touchMoved?(c=c.touchMoved(a),!1===c&&a.preventDefault()):"function"===typeof c.mouseDragged&&(c=c.mouseDragged(a),!1===c&&a.preventDefault(),this._updateMouseCoords(a))};a.prototype._ontouchend=function(a){this._updateTouchCoords(a);0===this.touches.length&&this._setProperty("touchIsDown",
!1);var c=this._isGlobal?window:this;"function"===typeof c.touchEnded?(c=c.touchEnded(a),!1===c&&a.preventDefault()):"function"===typeof c.mouseReleased&&(c=c.mouseReleased(a),!1===c&&a.preventDefault(),this._updateMouseCoords(a))};return a}({},g.core);g.mathmath=function(g,a){a.prototype.createVector=function(e,d,c){return this instanceof a?new a.Vector(this,arguments):new a.Vector(e,d,c)};return a}({},g.core);g.mathcalculation=function(g,a){a.prototype.abs=Math.abs;a.prototype.ceil=Math.ceil;a.prototype.constrain=
function(a,d,c){return Math.max(Math.min(a,c),d)};a.prototype.dist=function(a,d,c,k){return Math.sqrt((c-a)*(c-a)+(k-d)*(k-d))};a.prototype.exp=Math.exp;a.prototype.floor=Math.floor;a.prototype.lerp=function(a,d,c){return c*(d-a)+a};a.prototype.log=Math.log;a.prototype.mag=function(a,d){return Math.sqrt(a*a+d*d)};a.prototype.map=function(a,d,c,k,g){return(a-d)/(c-d)*(g-k)+k};a.prototype.max=function(){return arguments[0]instanceof Array?Math.max.apply(null,arguments[0]):Math.max.apply(null,arguments)};
a.prototype.min=function(){return arguments[0]instanceof Array?Math.min.apply(null,arguments[0]):Math.min.apply(null,arguments)};a.prototype.norm=function(a,d,c){return this.map(a,d,c,0,1)};a.prototype.pow=Math.pow;a.prototype.round=Math.round;a.prototype.sq=function(a){return a*a};a.prototype.sqrt=Math.sqrt;return a}({},g.core);g.mathrandom=function(g,a){var e=!1,d=function(){var c,a;return{setSeed:function(d){a=c=(null==d?4294967296*Math.random():d)>>>0},getSeed:function(){return c},rand:function(){a=
(1664525*a+1013904223)%4294967296;return a/4294967296}}}();a.prototype.randomSeed=function(c){d.setSeed(c);e=!0};a.prototype.random=function(c,a){var g;g=e?d.rand():Math.random();if(0===arguments.length)return g;if(1===arguments.length)return g*c;if(c>a){var f=c;c=a;a=f}return g*(a-c)+c};var c,k=!1;a.prototype.randomGaussian=function(a,d){var e,f,l;if(k)e=c,k=!1;else{do e=this.random(2)-1,f=this.random(2)-1,l=e*e+f*f;while(1<=l);l=Math.sqrt(-2*Math.log(l)/l);e*=l;c=f*l;k=!0}return e*(d||1)+(a||0)};
return a}({},g.core);g.mathnoise=function(g,a){for(var e=4,d=.5,c=Math.floor(720),k=Array(c),r=Array(c),h=Math.PI/180,m=0;m<c;m++)k[m]=Math.sin(m*h*.5),r[m]=Math.cos(m*h*.5);var f=c,f=f>>1,l;a.prototype.noise=function(a,h,g){h=h||0;g=g||0;if(null==l){l=Array(4096);for(var k=0;4096>k;k++)l[k]=Math.random()}0>a&&(a=-a);0>h&&(h=-h);0>g&&(g=-g);var k=Math.floor(a),m=Math.floor(h),w=Math.floor(g);a-=k;h-=m;g-=w;for(var u,p,y=0,x=.5,B,C,D,J=function(a){return.5*(1-r[Math.floor(a*f)%c])},L=0;L<e;L++){var G=
k+(m<<4)+(w<<8);u=J(a);p=J(h);B=l[G&4095];B+=u*(l[G+1&4095]-B);C=l[G+16&4095];C+=u*(l[G+16+1&4095]-C);B+=p*(C-B);G+=256;C=l[G&4095];C+=u*(l[G+1&4095]-C);D=l[G+16&4095];D+=u*(l[G+16+1&4095]-D);C+=p*(D-C);B+=J(g)*(C-B);y+=B*x;x*=d;k<<=1;a*=2;m<<=1;h*=2;w<<=1;g*=2;1<=a&&(k++,a--);1<=h&&(m++,h--);1<=g&&(w++,g--)}return y};a.prototype.noiseDetail=function(a,c){0<a&&(e=a);0<c&&(d=c)};a.prototype.noiseSeed=function(a){var c=function(){var a,c;return{setSeed:function(f){c=a=(null==f?4294967296*Math.random():
f)>>>0},getSeed:function(){return a},rand:function(){c=(1664525*c+1013904223)%4294967296;return c/4294967296}}}();c.setSeed(a);l=Array(4096);for(a=0;4096>a;a++)l[a]=c.rand()};return a}({},g.core);g.mathtrigonometry=function(g,a,e,d){a.prototype._angleMode=d.RADIANS;a.prototype.acos=function(a){return this._angleMode===d.RADIANS?Math.acos(a):e.radiansToDegrees(Math.acos(a))};a.prototype.asin=function(a){return this._angleMode===d.RADIANS?Math.asin(a):e.radiansToDegrees(Math.asin(a))};a.prototype.atan=
function(a){return this._angleMode===d.RADIANS?Math.atan(a):e.radiansToDegrees(Math.atan(a))};a.prototype.atan2=function(a,g){return this._angleMode===d.RADIANS?Math.atan2(a,g):e.radiansToDegrees(Math.atan2(a,g))};a.prototype.cos=function(a){return this._angleMode===d.RADIANS?Math.cos(a):Math.cos(this.radians(a))};a.prototype.sin=function(a){return this._angleMode===d.RADIANS?Math.sin(a):Math.sin(this.radians(a))};a.prototype.tan=function(a){return this._angleMode===d.RADIANS?Math.tan(a):Math.tan(this.radians(a))};
a.prototype.degrees=function(a){return e.radiansToDegrees(a)};a.prototype.radians=function(a){return e.degreesToRadians(a)};a.prototype.angleMode=function(a){if(a===d.DEGREES||a===d.RADIANS)this._angleMode=a};return a}({},g.core,g.polargeometry,g.constants);g.renderingrendering=function(g,a,e,d,c){a.prototype.createCanvas=function(c,d,h,g){h=h||e.P2D;var f;g&&(f="boolean"===typeof g?g:!1);h===e.WEBGL?((g=document.getElementById("defaultCanvas"))&&g.parentNode.removeChild(g),g=document.createElement("canvas"),
g.id="defaultCanvas"):f?(g=document.createElement("canvas"),g.id="defaultCanvas"):g=this.canvas;this._setupDone||(g.className+=" p5_hidden",g.style.visibility="hidden");this._userNode?this._userNode.appendChild(g):document.body.appendChild(g);h===e.WEBGL?this._defaultGraphics||(this._defaultGraphics=this._graphics=new a.Graphics3D(g,this,!0),this._elements.push(this._defaultGraphics)):this._defaultGraphics||(this._defaultGraphics=this._graphics=new a.Graphics2D(g,this,!0),this._elements.push(this._defaultGraphics));
this._defaultGraphics.resize(c,d);this._defaultGraphics._applyDefaults();return this._defaultGraphics};a.prototype.resizeCanvas=function(a,c,d){this._graphics&&(this._graphics.resize(a,c),this._graphics._applyDefaults(),d||this.redraw())};a.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)};a.prototype.createGraphics=function(a,c,d){return d===e.WEBGL?this._createGraphics3D(a,c):this._createGraphics2D(a,c)};a.prototype._createGraphics2D=function(c,d){var h=
document.createElement("canvas");(this._userNode||document.body).appendChild(h);h=new a.Graphics2D(h,this,!1);this._elements.push(h);for(var e in a.prototype)h[e]||(h[e]="function"===typeof a.prototype[e]?a.prototype[e].bind(h):a.prototype[e]);h.resize(c,d);h._applyDefaults();return h};a.prototype._createGraphics3D=function(c,d){var h=document.createElement("canvas");(this._userNode||document.body).appendChild(h);h=new a.Graphics3D(h,this,!1);this._elements.push(h);for(var e in a.prototype)h.hasOwnProperty(e)||
(h[e]="function"===typeof a.prototype[e]?a.prototype[e].bind(h):a.prototype[e]);h.resize(c,d);h._applyDefaults();return h};a.prototype.blendMode=function(a){if(a===e.BLEND||a===e.DARKEST||a===e.LIGHTEST||a===e.DIFFERENCE||a===e.MULTIPLY||a===e.EXCLUSION||a===e.SCREEN||a===e.REPLACE||a===e.OVERLAY||a===e.HARD_LIGHT||a===e.SOFT_LIGHT||a===e.DODGE||a===e.BURN||a===e.ADD||a===e.NORMAL)this.drawingContext.globalCompositeOperation=a;else throw Error("Mode "+a+" not recognized.");};return a}({},g.core,g.constants,
g.p5Graphics2D,g.p5Graphics3D);g.shape2d_primitives=function(g,a,e,d){a.prototype._createArc=function(a,d,e){var h=[],g=Math.PI/2,f=d<e?1:-1,l=d;for(d=Math.min(2*Math.PI,Math.abs(e-d));1E-5<d;)e=l+f*Math.min(d,g),h.push(this._createSmallArc(a,l,e)),d-=Math.abs(e-l),l=e;return h};a.prototype._createSmallArc=function(a,d,e){var h=(e-d)/2,g=a*Math.cos(h),f=a*Math.sin(h),l=-f,t=.5522847498*Math.tan(h),f=g+t*f,g=l+t*g,l=-g,t=h+d,h=Math.cos(t),t=Math.sin(t);return{x1:a*Math.cos(d),y1:a*Math.sin(d),x2:f*
h-g*t,y2:f*t+g*h,x3:f*h-l*t,y3:f*t+l*h,x4:a*Math.cos(e),y4:a*Math.sin(e)}};a.prototype.arc=function(a,d,g,h,m,f,l){if(!this._doStroke&&!this._doFill)return this;this._angleMode===e.DEGREES&&(m=this.radians(m),f=this.radians(f));var t=this._createArc(1,m,f);this._graphics.arc(a,d,g,h,m,f,l,t);return this};a.prototype.ellipse=function(a,d,e,h){this._validateParameters("ellipse",arguments,["Number","Number","Number","Number"]);if(!this._doStroke&&!this._doFill)return this;e=Math.abs(e);h=Math.abs(h);
this._graphics.ellipse(a,d,e,h);return this};a.prototype.line=function(){this._validateParameters("line",arguments,[["Number","Number","Number","Number"],"Number Number Number Number Number Number".split(" ")]);if(!this._doStroke)return this;this._graphics.isP3D?this._graphics.line(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]):this._graphics.line(arguments[0],arguments[1],arguments[2],arguments[3])};a.prototype.point=function(a,d){this._validateParameters("point",
arguments,["Number","Number"]);if(!this._doStroke)return this;this._graphics.point(a,d);return this};a.prototype.quad=function(a,d,e,h,g,f,l,t){this._validateParameters("quad",arguments,"Number Number Number Number Number Number Number Number".split(" "));if(!this._doStroke&&!this._doFill)return this;this._graphics.quad(a,d,e,h,g,f,l,t);return this};a.prototype.rect=function(a,d,e,h,g,f,l,t){this._validateParameters("rect",arguments,[["Number","Number","Number","Number"],["Number","Number","Number",
"Number","Number"],"Number Number Number Number Number Number Number Number Number".split(" ")]);if(this._doStroke||this._doFill)return this._graphics.rect(a,d,e,h,g,f,l,t),this};a.prototype.triangle=function(a,d,e,h,g,f){this._validateParameters("triangle",arguments,"Number Number Number Number Number Number".split(" "));if(!this._doStroke&&!this._doFill)return this;this._graphics.triangle(a,d,e,h,g,f);return this};return a}({},g.core,g.constants,g.helpers);g.shape3d_primitives=function(g,a){function e(a,
c){var e=[];a.forEach(function(a){a.forEach(function(a){c[a].forEach(function(a){e.push(a)})})});return e}a.prototype.Geometry3D=function(){this.vertices=[];this.faces=[];this.faceNormals=[];this.uvs=[]};a.prototype.plane=function(d,c,g,r){a.prototype.Geometry3D.call(this);d=d||1;c=c||1;g=g||1;r=r||1;for(var h=0;h<=r;h++)for(var m=h/r,f=0;f<=g;f++){var l=f/g;this.vertices.push([2*d*l-d,2*c*m-c,0]);this.uvs.push([l,m]);this.faceNormals.push([0,0,1]);f<g&&h<r&&(l=f+h*(g+1),this.faces.push([l,l+1,l+
g+1]),this.faces.push([l+g+1,l+1,l+g+2]))}d=e(this.faces,this.vertices);this._graphics.drawGeometry(d);return this};a.prototype.cube=function(d,c,g,r,h,m){a.prototype.Geometry3D.call(this);d=d||1;c=c||1;g=g||1;r=r||1;h=h||1;for(m=0;m<=h;m++)for(var f=m/h,l=0;l<=r;l++){var t=l/r;this.vertices.push([2*d*t-d,2*c*f-c,g/2]);this.uvs.push([t,f]);this.faceNormals.push([0,0,1]);l<r&&m<h&&(t=l+m*(r+1),this.faces.push([t,t+1,t+r+1]),this.faces.push([t+r+1,t+1,t+r+2]))}for(m=0;m<=h;m++)for(f=m/h,l=0;l<=r;l++)t=
l/r,this.vertices.push([2*d*t-d,2*c*f-c,-g/2]),this.uvs.push([t,f]),this.faceNormals.push([0,0,-1]),l<r&&m<h&&(t=l+m*(r+1),this.faces.push([t,t+1,t+r+1]),this.faces.push([t+r+1,t+1,t+r+2]));d=e(this.faces,this.vertices);this._graphics.drawGeometry(d);return this};a.prototype.sphere=function(d,c,g,r){a.prototype.Geometry3D.call(this);d=e(this.faces,this.vertices);this._graphics.drawGeometry(d);return this};return a}({},g.core);g.shapeattributes=function(g,a,e){a.prototype._rectMode=e.CORNER;a.prototype._ellipseMode=
e.CENTER;a.prototype.ellipseMode=function(a){if(a===e.CORNER||a===e.CORNERS||a===e.RADIUS||a===e.CENTER)this._ellipseMode=a;return this};a.prototype.noSmooth=function(){this._graphics.noSmooth();return this};a.prototype.rectMode=function(a){if(a===e.CORNER||a===e.CORNERS||a===e.RADIUS||a===e.CENTER)this._rectMode=a;return this};a.prototype.smooth=function(){this._graphics.smooth();return this};a.prototype.strokeCap=function(a){a!==e.ROUND&&a!==e.SQUARE&&a!==e.PROJECT||this._graphics.strokeCap(a);
return this};a.prototype.strokeJoin=function(a){a!==e.ROUND&&a!==e.BEVEL&&a!==e.MITER||this._graphics.strokeJoin(a);return this};a.prototype.strokeWeight=function(a){this._graphics.strokeWeight(a);return this};return a}({},g.core,g.constants);g.shapecurves=function(g,a,e){a.prototype._curveTightness=0;a.prototype.bezier=function(a,c,e,g,h,m,f,l){this._validateParameters("bezier",arguments,"Number Number Number Number Number Number Number Number".split(" "));if(!this._doStroke)return this;this._graphics.bezier(a,
c,e,g,h,m,f,l);return this};a.prototype.bezierDetail=function(a){return this};a.prototype.bezierPoint=function(a,c,e,g,h){var m=1-h;return Math.pow(m,3)*a+3*Math.pow(m,2)*h*c+3*m*Math.pow(h,2)*e+Math.pow(h,3)*g};a.prototype.bezierTangent=function(a,c,e,g,h){var m=1-h;return 3*g*Math.pow(h,2)-3*e*Math.pow(h,2)+6*e*m*h-6*c*m*h+3*c*Math.pow(m,2)-3*a*Math.pow(m,2)};a.prototype.curve=function(a,c,e,g,h,m,f,l){this._validateParameters("curve",arguments,"Number Number Number Number Number Number Number Number".split(" "));
if(this._doStroke)return this._graphics.curve(a,c,e,g,h,m,f,l),this};a.prototype.curveDetail=function(a){return this};a.prototype.curveTightness=function(a){this._setProperty("_curveTightness",a)};a.prototype.curvePoint=function(a,c,e,g,h){var m=h*h*h,f=h*h;return a*(-.5*m+f-.5*h)+c*(1.5*m-2.5*f+1)+e*(-1.5*m+2*f+.5*h)+g*(.5*m-.5*f)};a.prototype.curveTangent=function(a,c,e,g,h){var m=h*h;return a*(-3*m/2+2*h-.5)+c*(9*m/2-5*h)+e*(-9*m/2+4*h+.5)+g*(3*m/2-h)};return a}({},g.core,g.helpers);g.shapevertex=
function(g,a,e){var d=null,c=[],k=[],r=!1,h=!1,m=!1,f=!1;a.prototype.beginContour=function(){k=[];f=!0;return this};a.prototype.beginShape=function(a){d=a===e.POINTS||a===e.LINES||a===e.TRIANGLES||a===e.TRIANGLE_FAN||a===e.TRIANGLE_STRIP||a===e.QUADS||a===e.QUAD_STRIP?a:null;c=[];k=[];return this};a.prototype.bezierVertex=function(a,d,h,e,g,m){if(0===c.length)throw"vertex() must be used once before calling bezierVertex()";r=!0;for(var w=[],u=0;u<arguments.length;u++)w[u]=arguments[u];w.isVert=!1;
f?k.push(w):c.push(w);return this};a.prototype.curveVertex=function(a,f){h=!0;this.vertex(a,f);return this};a.prototype.endContour=function(){var a=k[0].slice();a.isVert=k[0].isVert;a.moveTo=!1;k.push(a);c.push(c[0]);for(a=0;a<k.length;a++)c.push(k[a]);return this};a.prototype.endShape=function(a){if(0===c.length||!this._doStroke&&!this._doFill)return this;var g=a===e.CLOSE;g&&!f&&c.push(c[0]);this._graphics.endShape(a,c,h,r,m,f,d);f=m=r=h=!1;g&&c.pop();return this};a.prototype.quadraticVertex=function(a,
d,h,g){if(this._contourInited){var q={};q.x=a;q.y=d;q.x3=h;q.y3=g;q.type=e.QUADRATIC;this._contourVertices.push(q);return this}if(0<c.length){m=!0;for(var q=[],r=0;r<arguments.length;r++)q[r]=arguments[r];q.isVert=!1;f?k.push(q):c.push(q)}else throw"vertex() must be used once before calling quadraticVertex()";return this};a.prototype.vertex=function(a,d,h){var e=[];e.isVert=!0;e[0]=a;e[1]=d;e[2]=0;e[3]=0;e[4]=0;e[5]=this._graphics._getFill();e[6]=this._graphics._getStroke();h&&(e.moveTo=h);f?(0===
k.length&&(e.moveTo=!0),k.push(e)):c.push(e);return this};return a}({},g.core,g.constants);g.structure=function(g,a){a.prototype.exit=function(){throw"exit() not implemented, see remove()";};a.prototype.noLoop=function(){this._loop=!1;this._drawInterval&&clearInterval(this._drawInterval)};a.prototype.loop=function(){this._loop=!0;this._draw()};a.prototype.push=function(){this._graphics.push();this._styles.push({doStroke:this._doStroke,doFill:this._doFill,tint:this._tint,imageMode:this._imageMode,
rectMode:this._rectMode,ellipseMode:this._ellipseMode,colorMode:this._colorMode,textFont:this.textFont,textLeading:this.textLeading,textSize:this.textSize,textStyle:this.textStyle})};a.prototype.pop=function(){this._graphics.pop();var a=this._styles.pop();this._doStroke=a.doStroke;this._doFill=a.doFill;this._tint=a.tint;this._imageMode=a.imageMode;this._rectMode=a.rectMode;this._ellipseMode=a.ellipseMode;this._colorMode=a.colorMode;this.textFont=a.textFont;this.textLeading=a.textLeading;this.textSize=
a.textSize;this.textStyle=a.textStyle};a.prototype.pushStyle=function(){throw Error("pushStyle() not used, see push()");};a.prototype.popStyle=function(){throw Error("popStyle() not used, see pop()");};a.prototype.redraw=function(){var a=this.setup||window.setup,d=this.draw||window.draw;"function"===typeof d&&(this.push(),"undefined"===typeof a&&this.scale(this.pixelDensity,this.pixelDensity),this._registeredMethods.pre.forEach(function(a){a.call(this)}),d(),this._registeredMethods.post.forEach(function(a){a.call(this)}),
this.pop())};a.prototype.size=function(){throw"size() not implemented, see createCanvas()";};return a}({},g.core);g.transform=function(g,a,e){a.prototype.applyMatrix=function(a,c,e,g,h,m){this._graphics.applyMatrix(a,c,e,g,h,m);return this};a.prototype.popMatrix=function(){throw Error("popMatrix() not used, see pop()");};a.prototype.printMatrix=function(){throw Error("printMatrix() not implemented");};a.prototype.pushMatrix=function(){throw Error("pushMatrix() not used, see push()");};a.prototype.resetMatrix=
function(){this._graphics.resetMatrix();return this};a.prototype.rotate=function(a){this._angleMode===e.DEGREES&&(a=this.radians(a));this._graphics.rotate(a);return this};a.prototype.rotateX=function(a){if(this._graphics.isP3D)this._graphics.rotateX(a);else throw"not yet implemented.";return this};a.prototype.rotateY=function(a){if(this._graphics.isP3D)this._graphics.rotateY(a);else throw"not yet implemented.";return this};a.prototype.rotateZ=function(a){if(this._graphics.isP3D)this._graphics.rotateZ(a);
else throw"not supported in p2d. Please use webgl mode";return this};a.prototype.scale=function(){this._graphics.isP3D?this._graphics.scale(arguments[0],arguments[1],arguments[2]):this._graphics.scale.apply(this._graphics,arguments);return this};a.prototype.shearX=function(a){this._angleMode===e.DEGREES&&(a=this.radians(a));this._graphics.shearX(a);return this};a.prototype.shearY=function(a){this._angleMode===e.DEGREES&&(a=this.radians(a));this._graphics.shearY(a);return this};a.prototype.translate=
function(a,c,e){this._graphics.isP3D?this._graphics.translate(a,c,e):this._graphics.translate(a,c);return this};return a}({},g.core,g.constants);g.typographyattributes=function(g,a,e){a.prototype._textSize=12;a.prototype._textLeading=15;a.prototype._textFont="sans-serif";a.prototype._textStyle=e.NORMAL;a.prototype._textAscent=null;a.prototype._textDescent=null;a.prototype.textAlign=function(a,c){return this._graphics.textAlign(a,c)};a.prototype.textLeading=function(a){return arguments.length?(this._setProperty("_textLeading",
a),this):this._textLeading};a.prototype.textSize=function(a){return arguments.length?(this._setProperty("_textSize",a),this._setProperty("_textLeading",a*e._DEFAULT_LEADMULT),this._graphics._applyTextProperties()):this._textSize};a.prototype.textStyle=function(a){return arguments.length?(a!==e.NORMAL&&a!==e.ITALIC&&a!==e.BOLD||this._setProperty("_textStyle",a),this._graphics._applyTextProperties()):this._textStyle};a.prototype.textWidth=function(a){return this._graphics.textWidth(a)};a.prototype.textAscent=
function(){null===this._textAscent&&this._updateTextMetrics();return this._textAscent};a.prototype.textDescent=function(){null===this._textDescent&&this._updateTextMetrics();return this._textDescent};a.prototype._isOpenType=function(a){a=a||this._textFont;return"object"===typeof a&&a.font&&a.font.supported};a.prototype._updateTextMetrics=function(){if(this._isOpenType()){var a=this._textFont.textBounds("ABCjgq|",0,0);this._setProperty("_textAscent",Math.abs(a.y));this._setProperty("_textDescent",
a.h-Math.abs(a.y));return this}var c=document.createElement("span");c.style.fontFamily=this._textFont;c.style.fontSize=this._textSize+"px";c.innerHTML="ABCjgq|";var e=document.createElement("div");e.style.display="inline-block";e.style.width="1px";e.style.height="0px";a=document.createElement("div");a.appendChild(c);a.appendChild(e);a.style.height="0px";a.style.overflow="hidden";document.body.appendChild(a);e.style.verticalAlign="baseline";var g=this._calculateOffset(e),h=this._calculateOffset(c),
m=g[1]-h[1];e.style.verticalAlign="bottom";g=this._calculateOffset(e);h=this._calculateOffset(c);c=g[1]-h[1]-m;document.body.removeChild(a);this._setProperty("_textAscent",m);this._setProperty("_textDescent",c);return this};a.prototype._calculateOffset=function(a){var c=0,e=0;if(a.offsetParent){do c+=a.offsetLeft,e+=a.offsetTop;while(a=a.offsetParent)}else c+=a.offsetLeft,e+=a.offsetTop;return[c,e]};return a}({},g.core,g.constants);g.typographyloading_displaying=function(g,a,e,d){a.prototype.text=
function(a,d,e,h,g){this._validateParameters("text",arguments,[["String","Number","Number"],["String","Number","Number","Number","Number"]]);return this._doFill||this._doStroke?this._graphics.text.apply(this._graphics,arguments):this};a.prototype.textFont=function(a,d){if(arguments.length){if(!a)throw Error("null font passed to textFont");this._setProperty("_textFont",a);d&&(this._setProperty("_textSize",d),this._setProperty("_textLeading",d*e._DEFAULT_LEADMULT));return this._graphics._applyTextProperties()}return this};
return a}({},g.core,g.constants,g.helpers);g.src_app=function(g,a,e,d,c,k,r,h,m,f,l,t,A,n,q,v,w,u,z,y,x,B,C,D,J,L,G,H,I,M,O,F,E,P,K,X,Q,aa,W,Y,Z,ba,ca){g=function(){window.PHANTOMJS||window.mocha||(window.setup&&"function"===typeof window.setup||window.draw&&"function"===typeof window.draw)&&new a};"complete"===document.readyState?g():window.addEventListener("load",g,!1);return a}({},g.core,g.p5Color,g.p5Element,g.p5Font,g.p5Graphics2D,g.p5Graphics3D,g.p5Image,g.p5Vector,g.p5TableRow,g.p5Table,g.colorcreating_reading,
g.colorsetting,g.constants,g.dataconversion,g.dataarray_functions,g.datastring_functions,g.environment,g.imageimage,g.imageloading_displaying,g.imagepixels,g.inputfiles,g.inputkeyboard,g.inputacceleration,g.inputmouse,g.inputtime_date,g.inputtouch,g.mathmath,g.mathcalculation,g.mathrandom,g.mathnoise,g.mathtrigonometry,g.renderingrendering,g.shape2d_primitives,g.shape3d_primitives,g.shapeattributes,g.shapecurves,g.shapevertex,g.structure,g.transform,g.typographyattributes,g.typographyloading_displaying,
g.shaders);return g.src_app});
(function(g){"object"===typeof exports&&"undefined"!==typeof module?module.exports=g():"function"===typeof define&&define.amd?define([],g):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).opentype=g()})(function(){return function p(a,e,d){function c(h,m){if(!e[h]){if(!a[h]){var f="function"==typeof require&&require;if(!m&&f)return f(h,!0);if(k)return k(h,!0);f=Error("Cannot find module '"+h+"'");throw f.code="MODULE_NOT_FOUND",f;}f=e[h]={exports:{}};
a[h][0].call(f.exports,function(f){var d=a[h][1][f];return c(d?d:f)},f,f.exports,p,a,e,d)}return e[h].exports}for(var k="function"==typeof require&&require,r=0;r<d.length;r++)c(d[r]);return c}({1:[function(p,a,e){e.argument=function(a,c){if(!a)throw Error(c);};e.assert=e.argument},{}],2:[function(p,a,e){e.line=function(a,c,e,r,h){a.beginPath();a.moveTo(c,e);a.lineTo(r,h);a.stroke()}},{}],3:[function(p,a,e){function d(a){this.font=a}function c(a){this.cmap=a}function k(a,c){this.encoding=a;this.charset=
c}function r(a){var c;switch(a.version){case 1:this.names=e.standardNames.slice();break;case 2:this.names=Array(a.numberOfGlyphs);for(c=0;c<a.numberOfGlyphs;c++)this.names[c]=a.glyphNameIndex[c]<e.standardNames.length?e.standardNames[a.glyphNameIndex[c]]:a.names[a.glyphNameIndex[c]-e.standardNames.length];break;case 2.5:this.names=Array(a.numberOfGlyphs);for(c=0;c<a.numberOfGlyphs;c++)this.names[c]=e.standardNames[c+a.glyphNameIndex[c]];break;case 3:this.names=[]}}d.prototype.charToGlyphIndex=function(a){a=
a.charCodeAt(0);var c=this.font.glyphs;if(!c)return null;for(var f=0;f<c.length;f+=1)for(var d=c[f],e=0;e<d.unicodes.length;e+=1)if(d.unicodes[e]===a)return f};c.prototype.charToGlyphIndex=function(a){return this.cmap.glyphIndexMap[a.charCodeAt(0)]||0};k.prototype.charToGlyphIndex=function(a){a=a.charCodeAt(0);return this.charset.indexOf(this.encoding[a])};r.prototype.nameToGlyphIndex=function(a){return this.names.indexOf(a)};r.prototype.glyphIndexToName=function(a){return this.names[a]};e.cffStandardStrings=
".notdef;space;exclam;quotedbl;numbersign;dollar;percent;ampersand;quoteright;parenleft;parenright;asterisk;plus;comma;hyphen;period;slash;zero;one;two;three;four;five;six;seven;eight;nine;colon;semicolon;less;equal;greater;question;at;A;B;C;D;E;F;G;H;I;J;K;L;M;N;O;P;Q;R;S;T;U;V;W;X;Y;Z;bracketleft;backslash;bracketright;asciicircum;underscore;quoteleft;a;b;c;d;e;f;g;h;i;j;k;l;m;n;o;p;q;r;s;t;u;v;w;x;y;z;braceleft;bar;braceright;asciitilde;exclamdown;cent;sterling;fraction;yen;florin;section;currency;quotesingle;quotedblleft;guillemotleft;guilsinglleft;guilsinglright;fi;fl;endash;dagger;daggerdbl;periodcentered;paragraph;bullet;quotesinglbase;quotedblbase;quotedblright;guillemotright;ellipsis;perthousand;questiondown;grave;acute;circumflex;tilde;macron;breve;dotaccent;dieresis;ring;cedilla;hungarumlaut;ogonek;caron;emdash;AE;ordfeminine;Lslash;Oslash;OE;ordmasculine;ae;dotlessi;lslash;oslash;oe;germandbls;onesuperior;logicalnot;mu;trademark;Eth;onehalf;plusminus;Thorn;onequarter;divide;brokenbar;degree;thorn;threequarters;twosuperior;registered;minus;eth;multiply;threesuperior;copyright;Aacute;Acircumflex;Adieresis;Agrave;Aring;Atilde;Ccedilla;Eacute;Ecircumflex;Edieresis;Egrave;Iacute;Icircumflex;Idieresis;Igrave;Ntilde;Oacute;Ocircumflex;Odieresis;Ograve;Otilde;Scaron;Uacute;Ucircumflex;Udieresis;Ugrave;Yacute;Ydieresis;Zcaron;aacute;acircumflex;adieresis;agrave;aring;atilde;ccedilla;eacute;ecircumflex;edieresis;egrave;iacute;icircumflex;idieresis;igrave;ntilde;oacute;ocircumflex;odieresis;ograve;otilde;scaron;uacute;ucircumflex;udieresis;ugrave;yacute;ydieresis;zcaron;exclamsmall;Hungarumlautsmall;dollaroldstyle;dollarsuperior;ampersandsmall;Acutesmall;parenleftsuperior;parenrightsuperior;266 ff;onedotenleader;zerooldstyle;oneoldstyle;twooldstyle;threeoldstyle;fouroldstyle;fiveoldstyle;sixoldstyle;sevenoldstyle;eightoldstyle;nineoldstyle;commasuperior;threequartersemdash;periodsuperior;questionsmall;asuperior;bsuperior;centsuperior;dsuperior;esuperior;isuperior;lsuperior;msuperior;nsuperior;osuperior;rsuperior;ssuperior;tsuperior;ff;ffi;ffl;parenleftinferior;parenrightinferior;Circumflexsmall;hyphensuperior;Gravesmall;Asmall;Bsmall;Csmall;Dsmall;Esmall;Fsmall;Gsmall;Hsmall;Ismall;Jsmall;Ksmall;Lsmall;Msmall;Nsmall;Osmall;Psmall;Qsmall;Rsmall;Ssmall;Tsmall;Usmall;Vsmall;Wsmall;Xsmall;Ysmall;Zsmall;colonmonetary;onefitted;rupiah;Tildesmall;exclamdownsmall;centoldstyle;Lslashsmall;Scaronsmall;Zcaronsmall;Dieresissmall;Brevesmall;Caronsmall;Dotaccentsmall;Macronsmall;figuredash;hypheninferior;Ogoneksmall;Ringsmall;Cedillasmall;questiondownsmall;oneeighth;threeeighths;fiveeighths;seveneighths;onethird;twothirds;zerosuperior;foursuperior;fivesuperior;sixsuperior;sevensuperior;eightsuperior;ninesuperior;zeroinferior;oneinferior;twoinferior;threeinferior;fourinferior;fiveinferior;sixinferior;seveninferior;eightinferior;nineinferior;centinferior;dollarinferior;periodinferior;commainferior;Agravesmall;Aacutesmall;Acircumflexsmall;Atildesmall;Adieresissmall;Aringsmall;AEsmall;Ccedillasmall;Egravesmall;Eacutesmall;Ecircumflexsmall;Edieresissmall;Igravesmall;Iacutesmall;Icircumflexsmall;Idieresissmall;Ethsmall;Ntildesmall;Ogravesmall;Oacutesmall;Ocircumflexsmall;Otildesmall;Odieresissmall;OEsmall;Oslashsmall;Ugravesmall;Uacutesmall;Ucircumflexsmall;Udieresissmall;Yacutesmall;Thornsmall;Ydieresissmall;001.000;001.001;001.002;001.003;Black;Bold;Book;Light;Medium;Regular;Roman;Semibold".split(";");
e.cffStandardEncoding="                                space exclam quotedbl numbersign dollar percent ampersand quoteright parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore quoteleft a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde                                   exclamdown cent sterling fraction yen florin section currency quotesingle quotedblleft guillemotleft guilsinglleft guilsinglright fi fl  endash dagger daggerdbl periodcentered  paragraph bullet quotesinglbase quotedblbase quotedblright guillemotright ellipsis perthousand  questiondown  grave acute circumflex tilde macron breve dotaccent dieresis  ring cedilla  hungarumlaut ogonek caron emdash                 AE  ordfeminine     Lslash Oslash OE ordmasculine      ae    dotlessi   lslash oslash oe germandbls".split(" ");
e.cffExpertEncoding="                                space exclamsmall Hungarumlautsmall  dollaroldstyle dollarsuperior ampersandsmall Acutesmall parenleftsuperior parenrightsuperior twodotenleader onedotenleader comma hyphen period fraction zerooldstyle oneoldstyle twooldstyle threeoldstyle fouroldstyle fiveoldstyle sixoldstyle sevenoldstyle eightoldstyle nineoldstyle colon semicolon commasuperior threequartersemdash periodsuperior questionsmall  asuperior bsuperior centsuperior dsuperior esuperior   isuperior   lsuperior msuperior nsuperior osuperior   rsuperior ssuperior tsuperior  ff fi fl ffi ffl parenleftinferior  parenrightinferior Circumflexsmall hyphensuperior Gravesmall Asmall Bsmall Csmall Dsmall Esmall Fsmall Gsmall Hsmall Ismall Jsmall Ksmall Lsmall Msmall Nsmall Osmall Psmall Qsmall Rsmall Ssmall Tsmall Usmall Vsmall Wsmall Xsmall Ysmall Zsmall colonmonetary onefitted rupiah Tildesmall                                   exclamdownsmall centoldstyle Lslashsmall   Scaronsmall Zcaronsmall Dieresissmall Brevesmall Caronsmall  Dotaccentsmall   Macronsmall   figuredash hypheninferior   Ogoneksmall Ringsmall Cedillasmall    onequarter onehalf threequarters questiondownsmall oneeighth threeeighths fiveeighths seveneighths onethird twothirds   zerosuperior onesuperior twosuperior threesuperior foursuperior fivesuperior sixsuperior sevensuperior eightsuperior ninesuperior zeroinferior oneinferior twoinferior threeinferior fourinferior fiveinferior sixinferior seveninferior eightinferior nineinferior centinferior dollarinferior periodinferior commainferior Agravesmall Aacutesmall Acircumflexsmall Atildesmall Adieresissmall Aringsmall AEsmall Ccedillasmall Egravesmall Eacutesmall Ecircumflexsmall Edieresissmall Igravesmall Iacutesmall Icircumflexsmall Idieresissmall Ethsmall Ntildesmall Ogravesmall Oacutesmall Ocircumflexsmall Otildesmall Odieresissmall OEsmall Oslashsmall Ugravesmall Uacutesmall Ucircumflexsmall Udieresissmall Yacutesmall Thornsmall Ydieresissmall".split(" ");
e.standardNames=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(" ");
e.DefaultEncoding=d;e.CmapEncoding=c;e.CffEncoding=k;e.GlyphNames=r;e.addGlyphNames=function(a){for(var c,f=a.tables.cmap.glyphIndexMap,d=Object.keys(f),e=0;e<d.length;e+=1){var k=d[e];c=a.glyphs[f[k]];c.addUnicode(parseInt(k))}for(e=0;e<a.glyphs.length;e+=1)c=a.glyphs[e],c.name=a.cffEncoding?a.cffEncoding.charset[e]:a.glyphNames.glyphIndexToName(e)}},{}],4:[function(p,a,e){function d(a){a=a||{};this.familyName=a.familyName||" ";this.styleName=a.styleName||" ";this.designer=a.designer||" ";this.designerURL=
a.designerURL||" ";this.manufacturer=a.manufacturer||" ";this.manufacturerURL=a.manufacturerURL||" ";this.license=a.license||" ";this.licenseURL=a.licenseURL||" ";this.version=a.version||"Version 0.1";this.description=a.description||" ";this.copyright=a.copyright||" ";this.trademark=a.trademark||" ";this.unitsPerEm=a.unitsPerEm||1E3;this.ascender=a.ascender;this.descender=a.descender;this.supported=!0;this.glyphs=a.glyphs||[];this.encoding=new r.DefaultEncoding(this);this.tables={}}var c=p("./path"),
k=p("./tables/sfnt"),r=p("./encoding");d.prototype.hasChar=function(a){return null!==this.encoding.charToGlyphIndex(a)};d.prototype.charToGlyphIndex=function(a){return this.encoding.charToGlyphIndex(a)};d.prototype.charToGlyph=function(a){a=this.charToGlyphIndex(a);a=this.glyphs[a];return a||(a=this.glyphs[0]),a};d.prototype.stringToGlyphs=function(a){for(var c=[],f=0;f<a.length;f+=1)c.push(this.charToGlyph(a[f]));return c};d.prototype.nameToGlyphIndex=function(a){return this.glyphNames.nameToGlyphIndex(a)};
d.prototype.nameToGlyph=function(a){a=this.nametoGlyphIndex(a);a=this.glyphs[a];return a||(a=this.glyphs[0]),a};d.prototype.glyphIndexToName=function(a){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(a):""};d.prototype.getKerningValue=function(a,c){a=a.index||a;c=c.index||c;var f=this.getGposKerningValue;return f?f(a,c):this.kerningPairs[a+","+c]||0};d.prototype.forEachGlyph=function(a,c,f,d,e,k){if(this.supported){c=void 0!==c?c:0;f=void 0!==f?f:0;d=void 0!==d?d:72;e=e||
{};var n=void 0===e.kerning?!0:e.kerning,q=1/this.unitsPerEm*d;a=this.stringToGlyphs(a);for(var r=0;r<a.length;r+=1){var w=a[r];if(k(w,c,f,d,e),w.advanceWidth&&(c+=w.advanceWidth*q),n&&r<a.length-1)w=this.getKerningValue(w,a[r+1]),c+=w*q}}};d.prototype.getPath=function(a,d,f,e,k){var A=new c.Path;return this.forEachGlyph(a,d,f,e,k,function(a,c,f,d){a=a.getPath(c,f,d);A.extend(a)}),A};d.prototype.draw=function(a,c,f,d,e,k){this.getPath(c,f,d,e,k).draw(a)};d.prototype.drawPoints=function(a,c,f,d,e,
k){this.forEachGlyph(c,f,d,e,k,function(c,f,d,e){c.drawPoints(a,f,d,e)})};d.prototype.drawMetrics=function(a,c,f,d,e,k){this.forEachGlyph(c,f,d,e,k,function(c,f,d,e){c.drawMetrics(a,f,d,e)})};d.prototype.validate=function(){function a(d){f[d]&&0<f[d].trim().length||c.push("No "+d+" specified.")}var c=[],f=this;a("familyName");a("weightName");a("manufacturer");a("copyright");a("version");0<this.unitsPerEm||c.push("No unitsPerEm specified.")};d.prototype.toTables=function(){return k.fontToTable(this)};
d.prototype.toBuffer=function(){for(var a=this.toTables().encode(),c=new ArrayBuffer(a.length),f=new Uint8Array(c),d=0;d<a.length;d++)f[d]=a[d];return c};d.prototype.download=function(){var a=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf",c=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;window.requestFileSystem(window.TEMPORARY,c.byteLength,function(f){f.root.getFile(a,{create:!0},function(a){a.createWriter(function(f){var d=new DataView(c),
d=new Blob([d],{type:"font/opentype"});f.write(d);f.addEventListener("writeend",function(){location.href=a.toURL()},!1)})})},function(a){throw a;})};e.Font=d},{"./encoding":3,"./path":8,"./tables/sfnt":23}],5:[function(p,a,e){function d(a){this.font=a.font||null;this.index=a.index||0;this.name=a.name||null;this.unicode=a.unicode||void 0;this.unicodes=a.unicodes||void 0!==a.unicode?[a.unicode]:[];this.xMin=a.xMin||0;this.yMin=a.yMin||0;this.xMax=a.xMax||0;this.yMax=a.yMax||0;this.advanceWidth=a.advanceWidth||
0;this.path=a.path||null}var c=p("./check"),k=p("./draw"),r=p("./path");d.prototype.addUnicode=function(a){0===this.unicodes.length&&(this.unicode=a);this.unicodes.push(a)};d.prototype.getPath=function(a,c,f){a=void 0!==a?a:0;c=void 0!==c?c:0;f=1/this.font.unitsPerEm*(void 0!==f?f:72);for(var d=new r.Path,e=this.path.commands,k=0;k<e.length;k+=1){var n=e[k];"M"===n.type?d.moveTo(a+n.x*f,c+-n.y*f):"L"===n.type?d.lineTo(a+n.x*f,c+-n.y*f):"Q"===n.type?d.quadraticCurveTo(a+n.x1*f,c+-n.y1*f,a+n.x*f,c+
-n.y*f):"C"===n.type?d.curveTo(a+n.x1*f,c+-n.y1*f,a+n.x2*f,c+-n.y2*f,a+n.x*f,c+-n.y*f):"Z"===n.type&&d.closePath()}return d};d.prototype.getContours=function(){if(void 0===this.points)return[];for(var a=[],d=[],f=0;f<this.points.length;f+=1){var e=this.points[f];d.push(e);e.lastPointOfContour&&(a.push(d),d=[])}return c.argument(0===d.length,"There are still points left in the current contour."),a};d.prototype.getMetrics=function(){for(var a=this.path.commands,c=[],f=[],d=0;d<a.length;d+=1){var e=
a[d];"Z"!==e.type&&(c.push(e.x),f.push(e.y));"Q"!==e.type&&"C"!==e.type||(c.push(e.x1),f.push(e.y1));"C"===e.type&&(c.push(e.x2),f.push(e.y2))}a={xMin:Math.min.apply(null,c),yMin:Math.min.apply(null,f),xMax:Math.max.apply(null,c),yMax:Math.max.apply(null,f),leftSideBearing:0};return a.rightSideBearing=this.advanceWidth-a.leftSideBearing-(a.xMax-a.xMin),a};d.prototype.draw=function(a,c,f,d){this.getPath(c,f,d).draw(a)};d.prototype.drawPoints=function(a,c,f,d){function e(c,f,d,l){var k=2*Math.PI;a.beginPath();
for(var t=0;t<c.length;t+=1)a.moveTo(f+c[t].x*l,d+c[t].y*l),a.arc(f+c[t].x*l,d+c[t].y*l,2,0,k,!1);a.closePath();a.fill()}c=void 0!==c?c:0;f=void 0!==f?f:0;d=1/this.font.unitsPerEm*(void 0!==d?d:24);for(var k=[],n=[],q=this.path,r=0;r<q.commands.length;r+=1){var w=q.commands[r];void 0!==w.x&&k.push({x:w.x,y:-w.y});void 0!==w.x1&&n.push({x:w.x1,y:-w.y1});void 0!==w.x2&&n.push({x:w.x2,y:-w.y2})}a.fillStyle="blue";e(k,c,f,d);a.fillStyle="red";e(n,c,f,d)};d.prototype.drawMetrics=function(a,c,f,d){c=void 0!==
c?c:0;f=void 0!==f?f:0;d=1/this.font.unitsPerEm*(void 0!==d?d:24);a.lineWidth=1;a.strokeStyle="black";k.line(a,c,-1E4,c,1E4);k.line(a,-1E4,f,1E4,f);a.strokeStyle="blue";k.line(a,c+this.xMin*d,-1E4,c+this.xMin*d,1E4);k.line(a,c+this.xMax*d,-1E4,c+this.xMax*d,1E4);k.line(a,-1E4,f+-this.yMin*d,1E4,f+-this.yMin*d);k.line(a,-1E4,f+-this.yMax*d,1E4,f+-this.yMax*d);a.strokeStyle="green";k.line(a,c+this.advanceWidth*d,-1E4,c+this.advanceWidth*d,1E4)};e.Glyph=d},{"./check":1,"./draw":2,"./path":8}],6:[function(p,
a,e){function d(a,c){p("fs").readFile(a,function(a,f){var d;if(a)d=c(a.message);else{d=new ArrayBuffer(f.length);for(var e=new Uint8Array(d),l=0;l<f.length;l+=1)e[l]=f[l];d=void c(null,d)}return d})}function c(a,c){var f=new XMLHttpRequest;f.open("get",a,!0);f.responseType="arraybuffer";f.onload=function(){return 200!==f.status?c("Font could not be loaded: "+f.statusText):c(null,f.response)};f.send()}function k(a){var c,f,d,e,k,p,O,F=new h.Font;a=new DataView(a,0);var E=m.getFixed(a,0);if(1===E)F.outlinesFormat=
"truetype";else{if(E=m.getTag(a,0),"OTTO"!==E)throw Error("Unsupported OpenType version "+E);F.outlinesFormat="cff"}for(var E=m.getUShort(a,4),P=12,K=0;E>K;K+=1){var X=m.getTag(a,P),Q=m.getULong(a,P+8);switch(X){case "cmap":F.tables.cmap=l.parse(a,Q);F.encoding=new r.CmapEncoding(F.tables.cmap);F.encoding||(F.supported=!1);break;case "head":F.tables.head=q.parse(a,Q);F.unitsPerEm=F.tables.head.unitsPerEm;c=F.tables.head.indexToLocFormat;break;case "hhea":F.tables.hhea=v.parse(a,Q);F.ascender=F.tables.hhea.ascender;
F.descender=F.tables.hhea.descender;F.numberOfHMetrics=F.tables.hhea.numberOfHMetrics;break;case "hmtx":f=Q;break;case "maxp":F.tables.maxp=y.parse(a,Q);F.numGlyphs=F.tables.maxp.numGlyphs;break;case "name":F.tables.name=x.parse(a,Q);F.familyName=F.tables.name.fontFamily;F.styleName=F.tables.name.fontSubfamily;break;case "OS/2":F.tables.os2=B.parse(a,Q);break;case "post":F.tables.post=C.parse(a,Q);F.glyphNames=new r.GlyphNames(F.tables.post);break;case "glyf":d=Q;break;case "loca":e=Q;break;case "CFF ":k=
Q;break;case "kern":p=Q;break;case "GPOS":O=Q}P+=16}d&&e?(c=z.parse(a,e,F.numGlyphs,0===c),F.glyphs=A.parse(a,d,c,F),w.parse(a,f,F.numberOfHMetrics,F.numGlyphs,F.glyphs),r.addGlyphNames(F)):k?(t.parse(a,k,F),r.addGlyphNames(F)):F.supported=!1;return F.supported&&(F.kerningPairs=p?u.parse(a,p):{},O&&n.parse(a,O,F)),F}var r=p("./encoding"),h=p("./font");a=p("./glyph");var m=p("./parse"),f=p("./path"),l=p("./tables/cmap"),t=p("./tables/cff"),A=p("./tables/glyf"),n=p("./tables/gpos"),q=p("./tables/head"),
v=p("./tables/hhea"),w=p("./tables/hmtx"),u=p("./tables/kern"),z=p("./tables/loca"),y=p("./tables/maxp"),x=p("./tables/name"),B=p("./tables/os2"),C=p("./tables/post");e._parse=m;e.Font=h.Font;e.Glyph=a.Glyph;e.Path=f.Path;e.parse=k;e.load=function(a,f){("undefined"==typeof window?d:c)(a,function(a,c){if(a)return f(a);var d=k(c);return d.supported?f(null,d):f("Font is not supported (is this a Postscript font?)")})}},{"./encoding":3,"./font":4,"./glyph":5,"./parse":7,"./path":8,"./tables/cff":10,"./tables/cmap":11,
"./tables/glyf":12,"./tables/gpos":13,"./tables/head":14,"./tables/hhea":15,"./tables/hmtx":16,"./tables/kern":17,"./tables/loca":18,"./tables/maxp":19,"./tables/name":20,"./tables/os2":21,"./tables/post":22,fs:void 0}],7:[function(p,a,e){function d(a,c){this.data=a;this.offset=c;this.relativeOffset=0}e.getByte=function(a,c){return a.getUint8(c)};e.getCard8=e.getByte;e.getUShort=function(a,c){return a.getUint16(c,!1)};e.getCard16=e.getUShort;e.getShort=function(a,c){return a.getInt16(c,!1)};e.getULong=
function(a,c){return a.getUint32(c,!1)};e.getFixed=function(a,c){var d=a.getInt16(c,!1),e=a.getUint16(c+2,!1);return d+e/65535};e.getTag=function(a,c){for(var d="",e=c;c+4>e;e+=1)d+=String.fromCharCode(a.getInt8(e));return d};e.getOffset=function(a,c,d){for(var e=0,f=0;d>f;f+=1)e<<=8,e+=a.getUint8(c+f);return e};e.getBytes=function(a,c,d){for(var e=[];d>c;c+=1)e.push(a.getUint8(c));return e};e.bytesToString=function(a){for(var c="",d=0;d<a.length;d+=1)c+=String.fromCharCode(a[d]);return c};var c=
{"byte":1,uShort:2,"short":2,uLong:4,fixed:4,longDateTime:8,tag:4};d.prototype.parseByte=function(){var a=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a};d.prototype.parseChar=function(){var a=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a};d.prototype.parseCard8=d.prototype.parseByte;d.prototype.parseUShort=function(){var a=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a};d.prototype.parseCard16=
d.prototype.parseUShort;d.prototype.parseSID=d.prototype.parseUShort;d.prototype.parseOffset16=d.prototype.parseUShort;d.prototype.parseShort=function(){var a=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a};d.prototype.parseF2Dot14=function(){var a=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,a};d.prototype.parseULong=function(){var a=e.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,
a};d.prototype.parseFixed=function(){var a=e.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a};d.prototype.parseOffset16List=d.prototype.parseUShortList=function(a){for(var c=Array(a),d=this.data,m=this.offset+this.relativeOffset,f=0;a>f;f++)c[f]=e.getUShort(d,m),m+=2;return this.relativeOffset+=2*a,c};d.prototype.parseString=function(a){var c=this.data,d=this.offset+this.relativeOffset,e="";this.relativeOffset+=a;for(var f=0;a>f;f++)e+=String.fromCharCode(c.getUint8(d+
f));return e};d.prototype.parseTag=function(){return this.parseString(4)};d.prototype.parseLongDateTime=function(){var a=e.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,a};d.prototype.parseFixed=function(){var a=e.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a/65536};d.prototype.parseVersion=function(){var a=e.getUShort(this.data,this.offset+this.relativeOffset),c=e.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=
4,a+c/4096/10};d.prototype.skip=function(a,d){void 0===d&&(d=1);this.relativeOffset+=c[a]*d};e.Parser=d},{}],8:[function(p,a,e){function d(){this.commands=[];this.fill="black";this.stroke=null;this.strokeWidth=1}d.prototype.moveTo=function(a,d){this.commands.push({type:"M",x:a,y:d})};d.prototype.lineTo=function(a,d){this.commands.push({type:"L",x:a,y:d})};d.prototype.curveTo=d.prototype.bezierCurveTo=function(a,d,e,h,m,f){this.commands.push({type:"C",x1:a,y1:d,x2:e,y2:h,x:m,y:f})};d.prototype.quadTo=
d.prototype.quadraticCurveTo=function(a,d,e,h){this.commands.push({type:"Q",x1:a,y1:d,x:e,y:h})};d.prototype.close=d.prototype.closePath=function(){this.commands.push({type:"Z"})};d.prototype.extend=function(a){a.commands&&(a=a.commands);Array.prototype.push.apply(this.commands,a)};d.prototype.draw=function(a){a.beginPath();for(var d=0;d<this.commands.length;d+=1){var e=this.commands[d];"M"===e.type?a.moveTo(e.x,e.y):"L"===e.type?a.lineTo(e.x,e.y):"C"===e.type?a.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,
e.x,e.y):"Q"===e.type?a.quadraticCurveTo(e.x1,e.y1,e.x,e.y):"Z"===e.type&&a.closePath()}this.fill&&(a.fillStyle=this.fill,a.fill());this.stroke&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeWidth,a.stroke())};d.prototype.toPathData=function(a){function d(){for(var f="",e=0;e<arguments.length;e+=1){var h=arguments[e];0<=h&&0<e&&(f+=" ");h=Math.round(h)===h?""+Math.round(h):h.toFixed(a);f+=h}return f}a=void 0!==a?a:2;for(var e="",h=0;h<this.commands.length;h+=1){var m=this.commands[h];"M"===m.type?
e+="M"+d(m.x,m.y):"L"===m.type?e+="L"+d(m.x,m.y):"C"===m.type?e+="C"+d(m.x1,m.y1,m.x2,m.y2,m.x,m.y):"Q"===m.type?e+="Q"+d(m.x1,m.y1,m.x,m.y):"Z"===m.type&&(e+="Z")}return e};d.prototype.toSVG=function(a){var d='<path d="';return d+=this.toPathData(a),d+='"',this.fill&"black"!==this.fill&&(d+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(d+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),d+"/>"};e.Path=d},{}],9:[function(p,a,e){function d(a,c,f){var d;for(d=
0;d<c.length;d+=1){var e=c[d];this[e.name]=e.value}if(this.tableName=a,this.fields=c,f)for(a=Object.keys(f),d=0;d<a.length;d+=1)c=a[d],e=f[c],void 0!==this[c]&&(this[c]=e)}var c=p("./check"),k=p("./types").encode,r=p("./types").sizeOf;d.prototype.sizeOf=function(){for(var a=0,d=0;d<this.fields.length;d+=1){var f=this.fields[d],e=this[f.name];if(void 0===e&&(e=f.value),"function"==typeof e.sizeOf)a+=e.sizeOf();else{var k=r[f.type];c.assert("function"==typeof k,"Could not find sizeOf function for field"+
f.name);a+=k(e)}}return a};d.prototype.encode=function(){return k.TABLE(this)};e.Table=d},{"./check":1,"./types":24}],10:[function(p,a,e){function d(a,c){if(a===c)return!0;if(Array.isArray(a)&&Array.isArray(c)){if(a.length!==c.length)return!1;for(var f=0;f<a.length;f+=1)if(!d(a[f],c[f]))return!1;return!0}return!1}function c(a,c,f){var d,e,l,h=[],k=[];l=u.getCard16(a,c);if(0!==l){var t=u.getByte(a,c+2);e=c+(l+1)*t+2;var m=c+3;for(d=0;l+1>d;d+=1)h.push(u.getOffset(a,m,t)),m+=t;l=e+h[l]}else l=c+2;for(d=
0;d<h.length-1;d+=1)t=u.getBytes(a,e+h[d],e+h[d+1]),f&&(t=f(t)),k.push(t);return{objects:k,startOffset:c,endOffset:l}}function k(a,c){var f,d,e,l;if(28===c)return f=a.parseByte(),d=a.parseByte(),f<<8|d;if(29===c)return f=a.parseByte(),d=a.parseByte(),e=a.parseByte(),l=a.parseByte(),f<<24|d<<16|e<<8|l;if(30===c){f="";for(d=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){l=a.parseByte();e=l>>4;l&=15;if(15===e)break;if(f+=d[e],15===l)break;f+=d[l]}return parseFloat(f)}if(32<=c&&246>=
c)return c-139;if(247<=c&&250>=c)return f=a.parseByte(),256*(c-247)+f+108;if(251<=c&&254>=c)return f=a.parseByte(),256*-(c-251)-f-108;throw Error("Invalid b0 "+c);}function r(a,c,f){var d=new u.Parser(a,void 0!==c?c:0);c=[];var e=[];for(f=void 0!==f?f:a.length;d.relativeOffset<f;)a=d.parseByte(),21>=a?(12===a&&(a=1200+d.parseByte()),c.push([a,e]),e=[]):e.push(k(d,a));f={};for(a=0;a<c.length;a+=1){d=c[a][0];e=c[a][1];if(e=1===e.length?e[0]:e,f.hasOwnProperty(d))throw Error("Object "+f+" already has key "+
d);f[d]=e}return f}function h(a,c){return 390>=c?v.cffStandardStrings[c]:a[c-391]}function m(a,c,f){for(var d={},e=0;e<c.length;e+=1){var l=c[e],k=a[l.op];void 0===k&&(k=void 0!==l.value?l.value:null);"SID"===l.type&&(k=h(f,k));d[l.name]=k}return d}function f(a,c,f){function d(a,c){y&&q.closePath();q.moveTo(a,c);y=!0}function e(){0!==n.length%2&&!v&&(r=n.shift()+c.nominalWidthX);A+=n.length>>1;n.length=0;v=!0}function l(a){for(var w,C,p,z,B,V,S,T,R,U,N=0;N<a.length;)switch(B=a[N],N+=1,B){case 1:e();
break;case 3:e();break;case 4:1<n.length&&!v&&(r=n.shift()+c.nominalWidthX,v=!0);u+=n.pop();d(x,u);break;case 5:for(;0<n.length;)x+=n.shift(),u+=n.shift(),q.lineTo(x,u);break;case 6:for(;0<n.length&&(x+=n.shift(),q.lineTo(x,u),0!==n.length);)u+=n.shift(),q.lineTo(x,u);break;case 7:for(;0<n.length&&(u+=n.shift(),q.lineTo(x,u),0!==n.length);)x+=n.shift(),q.lineTo(x,u);break;case 8:for(;0<n.length;)h=x+n.shift(),k=u+n.shift(),t=h+n.shift(),m=k+n.shift(),x=t+n.shift(),u=m+n.shift(),q.curveTo(h,k,t,m,
x,u);break;case 10:B=n.pop()+c.subrsBias;(B=c.subrs[B])&&l(B);break;case 11:return;case 12:switch(B=a[N],N+=1,B){case 35:h=x+n.shift();k=u+n.shift();t=h+n.shift();m=k+n.shift();B=t+n.shift();V=m+n.shift();S=B+n.shift();T=V+n.shift();R=S+n.shift();U=T+n.shift();x=R+n.shift();u=U+n.shift();n.shift();q.curveTo(h,k,t,m,B,V);q.curveTo(S,T,R,U,x,u);break;case 34:h=x+n.shift();k=u;t=h+n.shift();m=k+n.shift();B=t+n.shift();V=m;S=B+n.shift();T=m;R=S+n.shift();U=u;x=R+n.shift();q.curveTo(h,k,t,m,B,V);q.curveTo(S,
T,R,U,x,u);break;case 36:h=x+n.shift();k=u+n.shift();t=h+n.shift();m=k+n.shift();B=t+n.shift();V=m;S=B+n.shift();T=m;R=S+n.shift();U=T+n.shift();x=R+n.shift();q.curveTo(h,k,t,m,B,V);q.curveTo(S,T,R,U,x,u);break;case 37:h=x+n.shift();k=u+n.shift();t=h+n.shift();m=k+n.shift();B=t+n.shift();V=m+n.shift();S=B+n.shift();T=V+n.shift();R=S+n.shift();U=T+n.shift();Math.abs(R-x)>Math.abs(U-u)?x=R+n.shift():u=U+n.shift();q.curveTo(h,k,t,m,B,V);q.curveTo(S,T,R,U,x,u);break;default:console.log("Glyph "+f+": unknown operator 1200"+
B),n.length=0}break;case 14:0<n.length&&!v&&(r=n.shift()+c.nominalWidthX,v=!0);y&&(q.closePath(),y=!1);break;case 18:e();break;case 19:case 20:e();N+=A+7>>3;break;case 21:2<n.length&&!v&&(r=n.shift()+c.nominalWidthX,v=!0);u+=n.pop();x+=n.pop();d(x,u);break;case 22:1<n.length&&!v&&(r=n.shift()+c.nominalWidthX,v=!0);x+=n.pop();d(x,u);break;case 23:e();break;case 24:for(;2<n.length;)h=x+n.shift(),k=u+n.shift(),t=h+n.shift(),m=k+n.shift(),x=t+n.shift(),u=m+n.shift(),q.curveTo(h,k,t,m,x,u);x+=n.shift();
u+=n.shift();q.lineTo(x,u);break;case 25:for(;6<n.length;)x+=n.shift(),u+=n.shift(),q.lineTo(x,u);h=x+n.shift();k=u+n.shift();t=h+n.shift();m=k+n.shift();x=t+n.shift();u=m+n.shift();q.curveTo(h,k,t,m,x,u);break;case 26:for(n.length%2&&(x+=n.shift());0<n.length;)h=x,k=u+n.shift(),t=h+n.shift(),m=k+n.shift(),x=t,u=m+n.shift(),q.curveTo(h,k,t,m,x,u);break;case 27:for(n.length%2&&(u+=n.shift());0<n.length;)h=x+n.shift(),k=u,t=h+n.shift(),m=k+n.shift(),x=t+n.shift(),u=m,q.curveTo(h,k,t,m,x,u);break;case 28:w=
a[N];C=a[N+1];n.push((w<<24|C<<16)>>16);N+=2;break;case 29:B=n.pop()+c.gsubrsBias;(B=c.gsubrs[B])&&l(B);break;case 30:for(;0<n.length&&(h=x,k=u+n.shift(),t=h+n.shift(),m=k+n.shift(),x=t+n.shift(),u=m+(1===n.length?n.shift():0),q.curveTo(h,k,t,m,x,u),0!==n.length);)h=x+n.shift(),k=u,t=h+n.shift(),m=k+n.shift(),u=m+n.shift(),x=t+(1===n.length?n.shift():0),q.curveTo(h,k,t,m,x,u);break;case 31:for(;0<n.length&&(h=x+n.shift(),k=u,t=h+n.shift(),m=k+n.shift(),u=m+n.shift(),x=t+(1===n.length?n.shift():0),
q.curveTo(h,k,t,m,x,u),0!==n.length);)h=x,k=u+n.shift(),t=h+n.shift(),m=k+n.shift(),x=t+n.shift(),u=m+(1===n.length?n.shift():0),q.curveTo(h,k,t,m,x,u);break;default:32>B?console.log("Glyph "+f+": unknown operator "+B):247>B?n.push(B-139):251>B?(w=a[N],N+=1,n.push(256*(B-247)+w+108)):255>B?(w=a[N],N+=1,n.push(256*-(B-251)-w-108)):(w=a[N],C=a[N+1],p=a[N+2],z=a[N+3],N+=4,n.push((w<<24|C<<16|p<<8|z)/65536))}}var h,k,t,m,q=new z.Path,n=[],A=0,v=!1,r=c.defaultWidthX,y=!1,x=0,u=0;l(a);a=new w.Glyph({font:c,
index:f});return a.path=q,a.advanceWidth=r,a}function l(a){return 1240>a.length?107:33900>a.length?1131:32768}function t(a,c){var f,d=v.cffStandardStrings.indexOf(a);return d=c.indexOf(a),0<=d?f=d+v.cffStandardStrings.length:(f=v.cffStandardStrings.length+c.length,c.push(a)),f}function A(a,c,f){for(var e={},l=0;l<a.length;l+=1){var h=a[l],k=c[h.name];void 0===k||d(k,h.value)||("SID"===h.type&&(k=t(k,f)),e[h.op]={name:h.name,type:h.type,value:k})}return e}function n(a,c){var f=new y.Table("Top DICT",
[{name:"dict",type:"DICT",value:{}}]);return f.dict=A(x,a,c),f}function q(a){var c=new y.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return c.topDicts=[{name:"topDict_0",type:"TABLE",value:a}],c}var v=p("../encoding"),w=p("../glyph"),u=p("../parse"),z=p("../path"),y=p("../table"),x=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},
{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:"real real real real real real".split(" "),value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number",
"number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],B=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];e.parse=function(a,
d,e){e.tables.cff={};var k;k={};k=(k.formatMajor=u.getCard8(a,d),k.formatMinor=u.getCard8(a,d+1),k.size=u.getCard8(a,d+2),k.offsetSize=u.getCard8(a,d+3),k.startOffset=d,k.endOffset=d+4,k);k=c(a,k.endOffset,u.bytesToString);k=c(a,k.endOffset);var t=c(a,k.endOffset,u.bytesToString),n=c(a,t.endOffset);e.gsubrs=n.objects;e.gsubrsBias=l(e.gsubrs);n=new DataView((new Uint8Array(k.objects[0])).buffer);k=t.objects;n=r(n,0,n.byteLength);n=m(n,x,k);e.tables.cff.topDict=n;k=d+n["private"][1];var q;q=t.objects;
var A=r(a,k,n["private"][0]);q=m(A,B,q);(e.defaultWidthX=q.defaultWidthX,e.nominalWidthX=q.nominalWidthX,0!==q.subrs)?(k=c(a,k+q.subrs),e.subrs=k.objects,e.subrsBias=l(e.subrs)):(e.subrs=[],e.subrsBias=0);k=c(a,d+n.charStrings);e.nGlyphs=k.objects.length;q=e.nGlyphs;var A=t.objects,y,w,p,z=new u.Parser(a,d+n.charset);--q;t=[".notdef"];y=z.parseCard8();if(0===y)for(y=0;q>y;y+=1)w=z.parseSID(),t.push(h(A,w));else if(1===y)for(;t.length<=q;)for(w=z.parseSID(),p=z.parseCard8(),y=0;p>=y;y+=1)t.push(h(A,
w)),w+=1;else{if(2!==y)throw Error("Unknown charset format "+y);for(;t.length<=q;)for(w=z.parseSID(),p=z.parseCard16(),y=0;p>=y;y+=1)t.push(h(A,w)),w+=1}if(0===n.encoding)a=new v.CffEncoding(v.cffStandardEncoding,t);else if(1===n.encoding)a=new v.CffEncoding(v.cffExpertEncoding,t);else{q={};a=new u.Parser(a,d+n.encoding);d=a.parseCard8();if(0===d)for(A=a.parseCard8(),d=0;A>d;d+=1)n=a.parseCard8(),q[n]=d;else{if(1!==d)throw Error("Unknown encoding format "+d);A=a.parseCard8();n=1;for(d=0;A>d;d+=1)for(z=
a.parseCard8(),y=a.parseCard8(),w=z;z+y>=w;w+=1)q[w]=n,n+=1}a=new v.CffEncoding(q,t)}e.cffEncoding=a;e.encoding=e.encoding||e.cffEncoding;e.glyphs=[];for(a=0;a<e.nGlyphs;a+=1)e.glyphs.push(f(k.objects[a],e,a))};e.make=function(a,c){for(var f=new y.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",
type:"TABLE"}]),d={version:c.version,fullName:c.fullName,familyName:c.familyName,weight:c.weightName,charset:999,encoding:0,charStrings:999,"private":[0,999]},e=[],l=1;l<a.length;l+=1)e.push(a[l].name);l=[];f.header=new y.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]);var h=[c.postScriptName],k=new y.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);k.names=[];for(var m=0;m<
h.length;m+=1)k.names.push({name:"name_"+m,type:"NAME",value:h[m]});f.nameIndex=k;h=n(d,l);f.topDictIndex=q(h);f.globalSubrIndex=new y.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]);k=new y.Table("Charsets",[{name:"format",type:"Card8",value:0}]);for(m=0;m<e.length;m+=1){var v=t(e[m],l);k.fields.push({name:"glyph_"+m,type:"SID",value:v})}f.charsets=k;e=new y.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(k=0;k<a.length;k+=1){var m=a[k],v=[],r=m.path;
v.push({name:"width",type:"NUMBER",value:m.advanceWidth});for(var x=0,w=0,u=0;u<r.commands.length;u+=1){var p=r.commands[u];if("Q"===p.type)var z=1/3,W=2/3,p={type:"C",x:p.x,y:p.y,x1:z*x+W*p.x1,y1:z*w+W*p.y1,x2:z*p.x+W*p.x1,y2:z*p.y+W*p.y1};if("M"===p.type)x=Math.round(p.x-x),w=Math.round(p.y-w),v.push({name:"dx",type:"NUMBER",value:x}),v.push({name:"dy",type:"NUMBER",value:w}),v.push({name:"rmoveto",type:"OP",value:21}),x=Math.round(p.x),w=Math.round(p.y);else if("L"===p.type)x=Math.round(p.x-x),
w=Math.round(p.y-w),v.push({name:"dx",type:"NUMBER",value:x}),v.push({name:"dy",type:"NUMBER",value:w}),v.push({name:"rlineto",type:"OP",value:5}),x=Math.round(p.x),w=Math.round(p.y);else if("C"===p.type){var z=Math.round(p.x1-x),W=Math.round(p.y1-w),Y=Math.round(p.x2-p.x1),Z=Math.round(p.y2-p.y1),x=Math.round(p.x-p.x2),w=Math.round(p.y-p.y2);v.push({name:"dx1",type:"NUMBER",value:z});v.push({name:"dy1",type:"NUMBER",value:W});v.push({name:"dx2",type:"NUMBER",value:Y});v.push({name:"dy2",type:"NUMBER",
value:Z});v.push({name:"dx",type:"NUMBER",value:x});v.push({name:"dy",type:"NUMBER",value:w});v.push({name:"rrcurveto",type:"OP",value:8});x=Math.round(p.x);w=Math.round(p.y)}}v=(v.push({name:"endchar",type:"OP",value:14}),v);e.charStrings.push({name:m.name,type:"CHARSTRING",value:v})}f.charStringsIndex=e;e=new y.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);e=(e.dict=A(B,{},l),e);k=new y.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);e=(k.privateDicts=[{name:"privateDict_0",
type:"TABLE",value:e}],k);f.privateDictIndex=e;e=new y.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(k=0;k<l.length;k+=1)e.strings.push({name:"string_"+k,type:"STRING",value:l[k]});f.stringIndex=e;e=f.header.sizeOf()+f.nameIndex.sizeOf()+f.topDictIndex.sizeOf()+f.stringIndex.sizeOf()+f.globalSubrIndex.sizeOf();return d.charset=e,d.encoding=0,d.charStrings=d.charset+f.charsets.sizeOf(),d["private"][1]=d.charStrings+f.charStringsIndex.sizeOf(),h=n(d,l),f.topDictIndex=
q(h),f}},{"../encoding":3,"../glyph":5,"../parse":7,"../path":8,"../table":9}],11:[function(p,a,e){function d(a,c,f){a.segments.push({end:c,start:c,delta:-(c-f),offset:0})}var c=p("../check"),k=p("../parse"),r=p("../table");e.parse=function(a,d){var f,e={};e.version=k.getUShort(a,d);c.argument(0===e.version,"cmap table version should be 0.");e.numTables=k.getUShort(a,d+2);var t=-1;for(f=0;f<e.numTables;f+=1){var A=k.getUShort(a,d+4+8*f),n=k.getUShort(a,d+4+8*f+2);if(3===A&&(1===n||0===n)){t=k.getULong(a,
d+4+8*f+4);break}}if(-1===t)return null;f=new k.Parser(a,d+t);e.format=f.parseUShort();c.argument(4===e.format,"Only format 4 cmap tables are supported.");e.length=f.parseUShort();e.language=f.parseUShort();e.segCount=A=f.parseUShort()>>1;f.skip("uShort",3);e.glyphIndexMap={};var n=new k.Parser(a,d+t+14),q=new k.Parser(a,d+t+16+2*A),v=new k.Parser(a,d+t+16+4*A),r=new k.Parser(a,d+t+16+6*A),t=d+t+16+8*A;for(f=0;A-1>f;f+=1)for(var u,p=n.parseUShort(),y=q.parseUShort(),x=v.parseShort(),B=r.parseUShort(),
C=y;p>=C;C+=1)0!==B?(t=r.offset+r.relativeOffset-2,t+=B,t+=2*(C-y),u=k.getUShort(a,t),0!==u&&(u=u+x&65535)):u=C+x&65535,e.glyphIndexMap[C]=u;return e};e.make=function(a){var c,f=new r.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",
value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);f.segments=[];for(c=0;c<a.length;c+=1){for(var e=a[c],k=0;k<e.unicodes.length;k+=1)d(f,e.unicodes[k],c);f.segments=f.segments.sort(function(a,c){return a.start-c.start})}f.segments.push({end:65535,start:65535,delta:1,offset:0});a=f.segments.length;f.segCountX2=2*a;f.searchRange=2*Math.pow(2,Math.floor(Math.log(a)/Math.log(2)));
f.entrySelector=Math.log(f.searchRange/2)/Math.log(2);f.rangeShift=f.segCountX2-f.searchRange;var e=[],k=[],A=[],n=[],q=[];for(c=0;a>c;c+=1){var v=f.segments[c],e=e.concat({name:"end_"+c,type:"USHORT",value:v.end}),k=k.concat({name:"start_"+c,type:"USHORT",value:v.start}),A=A.concat({name:"idDelta_"+c,type:"SHORT",value:v.delta}),n=n.concat({name:"idRangeOffset_"+c,type:"USHORT",value:v.offset});void 0!==v.glyphId&&(q=q.concat({name:"glyph_"+c,type:"USHORT",value:v.glyphId}))}return f.fields=f.fields.concat(e),
f.fields.push({name:"reservedPad",type:"USHORT",value:0}),f.fields=f.fields.concat(k),f.fields=f.fields.concat(A),f.fields=f.fields.concat(n),f.fields=f.fields.concat(q),f.length=2*e.length+16+2*k.length+2*A.length+2*n.length+2*q.length,f}},{"../check":1,"../parse":7,"../table":9}],12:[function(p,a,e){function d(a,c,d,e,h){var k;return 0<(c&e)?(k=a.parseByte(),0===(c&h)&&(k=-k),k=d+k):k=0<(c&h)?d:d+a.parseShort(),k}function c(a,c,e,m){a=new h.Parser(a,c);e=new r.Glyph({font:m,index:e});e.numberOfContours=
a.parseShort();e.xMin=a.parseShort();e.yMin=a.parseShort();e.xMax=a.parseShort();e.yMax=a.parseShort();var n;if(0<e.numberOfContours){var q=e.endPointIndices=[];for(c=0;c<e.numberOfContours;c+=1)q.push(a.parseUShort());e.instructionLength=a.parseUShort();e.instructions=[];for(c=0;c<e.instructionLength;c+=1)e.instructions.push(a.parseByte());var v=q[q.length-1]+1;m=[];for(c=0;v>c;c+=1)if(n=a.parseByte(),m.push(n),0<(8&n))for(var w=a.parseByte(),u=0;w>u;u+=1)m.push(n),c+=1;if(k.argument(m.length===
v,"Bad flags."),0<q.length){u=[];if(0<v){for(c=0;v>c;c+=1)n=m[c],w={},w.onCurve=!!(1&n),w.lastPointOfContour=0<=q.indexOf(c),u.push(w);for(c=q=0;v>c;c+=1)n=m[c],w=u[c],w.x=d(a,n,q,2,16),q=w.x;for(c=q=0;v>c;c+=1)n=m[c],w=u[c],w.y=d(a,n,q,4,32),q=w.y}e.points=u}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else for(e.isComposite=!0,e.points=[],e.components=[],n=!0;n;)m=a.parseUShort(),n={glyphIndex:a.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0},0<(1&m)?(n.dx=a.parseShort(),
n.dy=a.parseShort()):(n.dx=a.parseChar(),n.dy=a.parseChar()),0<(8&m)?n.xScale=n.yScale=a.parseF2Dot14():0<(64&m)?(n.xScale=a.parseF2Dot14(),n.yScale=a.parseF2Dot14()):0<(128&m)&&(n.xScale=a.parseF2Dot14(),n.scale01=a.parseF2Dot14(),n.scale10=a.parseF2Dot14(),n.yScale=a.parseF2Dot14()),e.components.push(n),n=!!(32&m);return e}var k=p("../check"),r=p("../glyph"),h=p("../parse"),m=p("../path");e.parse=function(a,d,e,h){var n,q=[];for(n=0;n<e.length-1;n+=1){var v=e[n];q.push(v!==e[n+1]?c(a,d+v,n,h):new r.Glyph({font:h,
index:n}))}for(n=0;n<q.length;n+=1){d=q[n];if(d.isComposite)for(a=0;a<d.components.length;a+=1)if(h=d.components[a],e=q[h.glyphIndex],e.points){e=e.points;for(var v=[],w=0;w<e.length;w+=1){var u=e[w];v.push({x:h.xScale*u.x+h.scale01*u.y+h.dx,y:h.scale10*u.x+h.yScale*u.y+h.dy,onCurve:u.onCurve,lastPointOfContour:u.lastPointOfContour})}d.points=d.points.concat(v)}a=d;e=d.points;d=new m.Path;if(e){h=[];v=[];for(w=0;w<e.length;w+=1)u=e[w],v.push(u),u.lastPointOfContour&&(h.push(v),v=[]);e=(k.argument(0===
v.length,"There are still points left in the current contour."),h);for(h=0;h<e.length;h+=1){var p,y,v=e[h],w=v[0],u=v[v.length-1];w.onCurve?(p=null,y=!0):(w=u.onCurve?u:{x:(w.x+u.x)/2,y:(w.y+u.y)/2},p=w,y=!1);d.moveTo(w.x,w.y);for(var x=y?1:0;x<v.length;x+=1){var B=v[x],C=0===x?w:v[x-1];if(C.onCurve&&B.onCurve)d.lineTo(B.x,B.y);else if(C.onCurve&&!B.onCurve)p=B;else if(C.onCurve||B.onCurve){if(C.onCurve||!B.onCurve)throw Error("Invalid state.");d.quadraticCurveTo(p.x,p.y,B.x,B.y);p=null}else d.quadraticCurveTo(C.x,
C.y,(C.x+B.x)/2,(C.y+B.y)/2),p=B}w!==u&&(p?d.quadraticCurveTo(p.x,p.y,w.x,w.y):d.lineTo(w.x,w.y))}d=(d.closePath(),d)}a.path=d}return q}},{"../check":1,"../glyph":5,"../parse":7,"../path":8}],13:[function(p,a,e){function d(a,c){for(var d=new f.Parser(a,c),e=d.parseUShort(),h=[],k=0;e>k;k++)h[d.parseTag()]={offset:d.parseUShort()};return h}function c(a,c){var d=new f.Parser(a,c),e=d.parseUShort(),h=d.parseUShort();if(1===e)return d.parseUShortList(h);if(2===e){for(e=[];h--;)for(var k=d.parseUShort(),
m=d.parseUShort(),r=d.parseUShort();m>=k;k++)e[r++]=k;return e}}function k(a,c){var d=new f.Parser(a,c),e=d.parseUShort();if(1===e){var h=d.parseUShort(),e=d.parseUShort(),k=d.parseUShortList(e);return function(a){return k[a-h]||0}}if(2===e){for(var e=d.parseUShort(),m=[],r=[],p=[],y=0;e>y;y++)m[y]=d.parseUShort(),r[y]=d.parseUShort(),p[y]=d.parseUShort();return function(a){for(var c=0,f=m.length-1;f>c;){var d=c+f+1>>1;a<m[d]?f=d-1:c=d}return m[c]<=a&&a<=r[c]?p[c]||0:0}}}function r(a,d){var e,h=new f.Parser(a,
d),m=h.parseUShort(),v=h.parseUShort(),v=c(a,d+v),r=h.parseUShort(),u=h.parseUShort();if(4===r&&0===u){var p={};if(1===m){for(var m=h.parseUShort(),y=[],x=h.parseOffset16List(m),B=0;m>B;B++){var C=x[B],D=p[C];if(!D)for(D={},h.relativeOffset=C,C=h.parseUShort();C--;){var J=h.parseUShort();r&&(e=h.parseShort());u&&h.parseShort();D[J]=e}y[v[B]]=D}return function(a,c){var f=y[a];return f?f[c]:void 0}}if(2===m){for(var x=h.parseUShort(),B=h.parseUShort(),p=h.parseUShort(),m=h.parseUShort(),L=k(a,d+x),
G=k(a,d+B),H=[],x=0;p>x;x++)for(B=H[x]=[],D=0;m>D;D++)r&&(e=h.parseShort()),u&&h.parseShort(),B[D]=e;for(var I={},x=0;x<v.length;x++)I[v[x]]=1;return function(a,c){if(I[a]){var f=L(a),d=G(c);return(f=H[f])?f[d]:void 0}}}}}function h(a,c){var d=new f.Parser(a,c),e=d.parseUShort(),h=d.parseUShort(),k=16&h,m=d.parseUShort(),u=d.parseOffset16List(m),d={lookupType:e,lookupFlag:h,markFilteringSet:k?d.parseUShort():-1};if(2===e){for(var p=[],e=0;m>e;e++)p.push(r(a,c+u[e]));d.getKerningValue=function(a,c){for(var f=
p.length;f--;){var d=p[f](a,c);if(void 0!==d)return d}return 0}}return d}var m=p("../check"),f=p("../parse");e.parse=function(a,c,e){var k=new f.Parser(a,c),q=k.parseFixed();m.argument(1===q,"Unsupported GPOS table version.");d(a,c+k.parseUShort());d(a,c+k.parseUShort());var v=k.parseUShort();k.relativeOffset=v;q=k.parseUShort();k=k.parseOffset16List(q);c+=v;for(v=0;q>v;v++){var r=h(a,c+k[v]);2!==r.lookupType||e.getGposKerningValue||(e.getGposKerningValue=r.getKerningValue)}}},{"../check":1,"../parse":7}],
14:[function(p,a,e){var d=p("../check"),c=p("../parse"),k=p("../table");e.parse=function(a,e){var k={},f=new c.Parser(a,e);return k.version=f.parseVersion(),k.fontRevision=Math.round(1E3*f.parseFixed())/1E3,k.checkSumAdjustment=f.parseULong(),k.magicNumber=f.parseULong(),d.argument(1594834165===k.magicNumber,"Font header has wrong magic number."),k.flags=f.parseUShort(),k.unitsPerEm=f.parseUShort(),k.created=f.parseLongDateTime(),k.modified=f.parseLongDateTime(),k.xMin=f.parseShort(),k.yMin=f.parseShort(),
k.xMax=f.parseShort(),k.yMax=f.parseShort(),k.macStyle=f.parseUShort(),k.lowestRecPPEM=f.parseUShort(),k.fontDirectionHint=f.parseShort(),k.indexToLocFormat=f.parseShort(),k.glyphDataFormat=f.parseShort(),k};e.make=function(a){return new k.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",
value:1E3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],a)}},{"../check":1,"../parse":7,
"../table":9}],15:[function(p,a,e){var d=p("../parse"),c=p("../table");e.parse=function(a,c){var e={},m=new d.Parser(a,c);return e.version=m.parseVersion(),e.ascender=m.parseShort(),e.descender=m.parseShort(),e.lineGap=m.parseShort(),e.advanceWidthMax=m.parseUShort(),e.minLeftSideBearing=m.parseShort(),e.minRightSideBearing=m.parseShort(),e.xMaxExtent=m.parseShort(),e.caretSlopeRise=m.parseShort(),e.caretSlopeRun=m.parseShort(),e.caretOffset=m.parseShort(),m.relativeOffset+=8,e.metricDataFormat=m.parseShort(),
e.numberOfHMetrics=m.parseUShort(),e};e.make=function(a){return new c.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",
value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],a)}},{"../parse":7,"../table":9}],16:[function(p,a,e){var d=p("../parse"),c=p("../table");e.parse=function(a,c,e,m,f){var l,t;a=new d.Parser(a,c);for(c=0;m>c;c+=1){e>c&&(l=a.parseUShort(),t=a.parseShort());
var A=f[c];A.advanceWidth=l;A.leftSideBearing=t}};e.make=function(a){for(var d=new c.Table("hmtx",[]),e=0;e<a.length;e+=1){var m=a[e],f=m.leftSideBearing||0;d.fields.push({name:"advanceWidth_"+e,type:"USHORT",value:m.advanceWidth||0});d.fields.push({name:"leftSideBearing_"+e,type:"SHORT",value:f})}return d}},{"../parse":7,"../table":9}],17:[function(p,a,e){var d=p("../check"),c=p("../parse");e.parse=function(a,e){var h={},m=new c.Parser(a,e),f=m.parseUShort();d.argument(0===f,"Unsupported kern table version.");
m.skip("uShort",1);f=m.parseUShort();d.argument(0===f,"Unsupported kern sub-table version.");m.skip("uShort",2);f=m.parseUShort();m.skip("uShort",3);for(var l=0;f>l;l+=1){var t=m.parseUShort(),A=m.parseUShort(),n=m.parseShort();h[t+","+A]=n}return h}},{"../check":1,"../parse":7}],18:[function(p,a,e){var d=p("../parse");e.parse=function(a,e,r,h){a=new d.Parser(a,e);e=h?a.parseUShort:a.parseULong;for(var m=[],f=0;r+1>f;f+=1){var l=e.call(a);h&&(l*=2);m.push(l)}return m}},{"../parse":7}],19:[function(p,
a,e){var d=p("../parse"),c=p("../table");e.parse=function(a,c){var e={},m=new d.Parser(a,c);return e.version=m.parseVersion(),e.numGlyphs=m.parseUShort(),1===e.version&&(e.maxPoints=m.parseUShort(),e.maxContours=m.parseUShort(),e.maxCompositePoints=m.parseUShort(),e.maxCompositeContours=m.parseUShort(),e.maxZones=m.parseUShort(),e.maxTwilightPoints=m.parseUShort(),e.maxStorage=m.parseUShort(),e.maxFunctionDefs=m.parseUShort(),e.maxInstructionDefs=m.parseUShort(),e.maxStackElements=m.parseUShort(),
e.maxSizeOfInstructions=m.parseUShort(),e.maxComponentElements=m.parseUShort(),e.maxComponentDepth=m.parseUShort()),e};e.make=function(a){return new c.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:a}])}},{"../parse":7,"../table":9}],20:[function(p,a,e){function d(a,c,d,e,h,k){return new r.Table("NameRecord",[{name:"platformID",type:"USHORT",value:a},{name:"encodingID",type:"USHORT",value:c},{name:"languageID",type:"USHORT",value:d},{name:"nameID",type:"USHORT",
value:e},{name:"length",type:"USHORT",value:h},{name:"offset",type:"USHORT",value:k}])}var c=p("../types").encode,k=p("../parse"),r=p("../table"),h="copyright fontFamily fontSubfamily uniqueID fullName version postScriptName trademark manufacturer designer description manufacturerURL designerURL licence licenceURL reserved preferredFamily preferredSubfamily compatibleFullName sampleText postScriptFindFontName wwsFamily wwsSubfamily".split(" ");e.parse=function(a,c){var d={},e=new k.Parser(a,c);d.format=
e.parseUShort();for(var A=e.parseUShort(),n=e.offset+e.parseUShort(),q=0,v=0;A>v;v++){var r=e.parseUShort(),u=e.parseUShort(),p=e.parseUShort(),y=e.parseUShort(),y=h[y],x=e.parseUShort(),B=e.parseUShort();if(3===r&&1===u&&1033===p){r=[];u=x/2;for(p=0;u>p;p++,B+=2)r[p]=k.getShort(a,n+B);B=String.fromCharCode.apply(null,r);y?d[y]=B:(q++,d["unknown"+q]=B)}}return 1===d.format&&(d.langTagCount=e.parseUShort()),d};e.make=function(a){var f=new r.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",
type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]);f.records=[];f.strings=[];var e,k,A=0;for(e=0;e<h.length;e+=1)if(void 0!==a[h[e]]){k=a[h[e]];var n=f,q=e;k=c.STRING(k);A=(n.records.push(d(1,0,0,q,k.length,A)),n.strings.push(k),A+k.length)}for(e=0;e<h.length;e+=1)void 0!==a[h[e]]&&(k=a[h[e]],n=f,q=e,k=c.UTF16(k),A=(n.records.push(d(3,1,1033,q,k.length,A)),n.strings.push(k),A+k.length));f.count=f.records.length;f.stringOffset=6+12*f.count;for(e=0;e<f.records.length;e+=1)f.fields.push({name:"record_"+
e,type:"TABLE",value:f.records[e]});for(e=0;e<f.strings.length;e+=1)f.fields.push({name:"string_"+e,type:"LITERAL",value:f.strings[e]});return f}},{"../parse":7,"../table":9,"../types":24}],21:[function(p,a,e){var d=p("../parse"),c=p("../table"),k=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,
end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,
end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,
end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,
end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},
{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66E3,end:66047},{begin:66208,end:66271},
{begin:127024,end:127135}];e.unicodeRanges=k;e.getUnicodeRange=function(a){for(var c=0;c<k.length;c+=1){var d=k[c];if(a>=d.begin&&a<d.end)return c}return-1};e.parse=function(a,c){var e={},f=new d.Parser(a,c);e.version=f.parseUShort();e.xAvgCharWidth=f.parseShort();e.usWeightClass=f.parseUShort();e.usWidthClass=f.parseUShort();e.fsType=f.parseUShort();e.ySubscriptXSize=f.parseShort();e.ySubscriptYSize=f.parseShort();e.ySubscriptXOffset=f.parseShort();e.ySubscriptYOffset=f.parseShort();e.ySuperscriptXSize=
f.parseShort();e.ySuperscriptYSize=f.parseShort();e.ySuperscriptXOffset=f.parseShort();e.ySuperscriptYOffset=f.parseShort();e.yStrikeoutSize=f.parseShort();e.yStrikeoutPosition=f.parseShort();e.sFamilyClass=f.parseShort();e.panose=[];for(var l=0;10>l;l++)e.panose[l]=f.parseByte();return e.ulUnicodeRange1=f.parseULong(),e.ulUnicodeRange2=f.parseULong(),e.ulUnicodeRange3=f.parseULong(),e.ulUnicodeRange4=f.parseULong(),e.achVendID=String.fromCharCode(f.parseByte(),f.parseByte(),f.parseByte(),f.parseByte()),
e.fsSelection=f.parseUShort(),e.usFirstCharIndex=f.parseUShort(),e.usLastCharIndex=f.parseUShort(),e.sTypoAscender=f.parseShort(),e.sTypoDescender=f.parseShort(),e.sTypoLineGap=f.parseShort(),e.usWinAscent=f.parseUShort(),e.usWinDescent=f.parseUShort(),1<=e.version&&(e.ulCodePageRange1=f.parseULong(),e.ulCodePageRange2=f.parseULong()),2<=e.version&&(e.sxHeight=f.parseShort(),e.sCapHeight=f.parseShort(),e.usDefaultChar=f.parseUShort(),e.usBreakChar=f.parseUShort(),e.usMaxContent=f.parseUShort()),e};
e.make=function(a){return new c.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",
type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",
value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",
type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},
{name:"usMaxContext",type:"USHORT",value:0}],a)}},{"../parse":7,"../table":9}],22:[function(p,a,e){var d=p("../encoding"),c=p("../parse"),k=p("../table");e.parse=function(a,e){var k,f={},l=new c.Parser(a,e);switch(f.version=l.parseVersion(),f.italicAngle=l.parseFixed(),f.underlinePosition=l.parseShort(),f.underlineThickness=l.parseShort(),f.isFixedPitch=l.parseULong(),f.minMemType42=l.parseULong(),f.maxMemType42=l.parseULong(),f.minMemType1=l.parseULong(),f.maxMemType1=l.parseULong(),f.version){case 1:f.names=
d.standardNames.slice();break;case 2:f.numberOfGlyphs=l.parseUShort();f.glyphNameIndex=Array(f.numberOfGlyphs);for(k=0;k<f.numberOfGlyphs;k++)f.glyphNameIndex[k]=l.parseUShort();f.names=[];for(k=0;k<f.numberOfGlyphs;k++)if(f.glyphNameIndex[k]>=d.standardNames.length){var t=l.parseChar();f.names.push(l.parseString(t))}break;case 2.5:for(f.numberOfGlyphs=l.parseUShort(),f.offset=Array(f.numberOfGlyphs),k=0;k<f.numberOfGlyphs;k++)f.offset[k]=l.parseChar()}return f};e.make=function(){return new k.Table("post",
[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},{"../encoding":3,"../parse":7,"../table":9}],23:[function(p,a,e){function d(a){for(;0!==a.length%4;)a.push(0);
for(var c=0,f=0;f<a.length;f+=4)c+=(a[f]<<24)+(a[f+1]<<16)+(a[f+2]<<8)+a[f+3];return c%Math.pow(2,32)}function c(a,c,f,d){return new m.Table("Table Record",[{name:"tag",type:"TAG",value:void 0!==a?a:""},{name:"checkSum",type:"ULONG",value:void 0!==c?c:0},{name:"offset",type:"ULONG",value:void 0!==f?f:0},{name:"length",type:"ULONG",value:void 0!==d?d:0}])}function k(a){var f=new m.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",
value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);f.tables=a;f.numTables=a.length;var e=Math.pow(2,Math.log(f.numTables)/Math.log(2)|0);f.searchRange=16*e;f.entrySelector=Math.log(e)/Math.log(2)|0;f.rangeShift=16*f.numTables-f.searchRange;for(var e=[],l=[],k=f.sizeOf()+c().sizeOf()*f.numTables;0!==k%4;)k+=1,l.push({name:"padding",type:"BYTE",value:0});for(var t=0;t<a.length;t+=1){var n=a[t];h.argument(4===n.tableName.length,"Table name"+n.tableName+
" is invalid.");var q=n.sizeOf(),v=c(n.tableName,d(n.encode()),k,q);e.push({name:v.tag+" Table Record",type:"TABLE",value:v});l.push({name:n.tableName+" table",type:"TABLE",value:n});k+=q;for(h.argument(!isNaN(k),"Something went wrong calculating the offset.");0!==k%4;)k+=1,l.push({name:"padding",type:"BYTE",value:0})}return e.sort(function(a,c){return a.value.tag>c.value.tag?1:-1}),f.fields=f.fields.concat(e),f.fields=f.fields.concat(l),f}function r(a,c,f){for(var d=0;d<c.length;d+=1){var e=a.charToGlyphIndex(c[d]);
if(0<e)return a.glyphs[e].getMetrics()}return f}var h=p("../check"),m=p("../table"),f=p("./cmap"),l=p("./cff"),t=p("./head"),A=p("./hhea"),n=p("./hmtx"),q=p("./maxp"),v=p("./name"),w=p("./os2"),u=p("./post");e.computeCheckSum=d;e.make=k;e.fontToTable=function(a){for(var c=[],e=[],h=[],m=[],p=[],J=[],L=[],G=null,H=0,I=0,M=0,O=0,F=0,E=0;E<a.glyphs.length;E+=1){var P=a.glyphs[E],K=0|P.unicode;(G>K||null===G)&&(G=K);K>H&&(H=K);K=w.getUnicodeRange(K);if(32>K)I|=1<<K;else if(64>K)M|=1<<K-32;else if(96>
K)O|=1<<K-64;else{if(!(123>K))throw Error("Unicode ranges bits > 123 are reserved for internal usage");F|=1<<K-96}".notdef"!==P.name&&(K=P.getMetrics(),c.push(K.xMin),e.push(K.yMin),h.push(K.xMax),m.push(K.yMax),J.push(K.leftSideBearing),L.push(K.rightSideBearing),p.push(P.advanceWidth))}E=Math.min.apply(null,c);e=Math.min.apply(null,e);h=Math.max.apply(null,h);m=Math.max.apply(null,m);c=Math.max.apply(null,p);for(K=P=0;K<p.length;K+=1)P+=p[K];E={xMin:E,yMin:e,xMax:h,yMax:m,advanceWidthMax:c,advanceWidthAvg:P/
p.length,minLeftSideBearing:Math.min.apply(null,J),maxLeftSideBearing:Math.max.apply(null,J),minRightSideBearing:Math.min.apply(null,L)};E.ascender=void 0!==a.ascender?a.ascender:E.yMax;E.descender=void 0!==a.descender?a.descender:E.yMin;p=t.make({unitsPerEm:a.unitsPerEm,xMin:E.xMin,yMin:E.yMin,xMax:E.xMax,yMax:E.yMax});J=A.make({ascender:E.ascender,descender:E.descender,advanceWidthMax:E.advanceWidthMax,minLeftSideBearing:E.minLeftSideBearing,minRightSideBearing:E.minRightSideBearing,xMaxExtent:E.maxLeftSideBearing+
(E.xMax-E.xMin),numberOfHMetrics:a.glyphs.length});L=q.make(a.glyphs.length);G=w.make({xAvgCharWidth:Math.round(E.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:G,usLastCharIndex:H,ulUnicodeRange1:I,ulUnicodeRange2:M,ulUnicodeRange3:O,ulUnicodeRange4:F,sTypoAscender:E.ascender,sTypoDescender:E.descender,sTypoLineGap:0,usWinAscent:E.ascender,usWinDescent:-E.descender,sxHeight:r(a,"xyvw",{yMax:0}).yMax,sCapHeight:r(a,"HIKLEFJMNTZBDPRAGOQSUVWXY",E).yMax,usBreakChar:a.hasChar(" ")?
32:0});H=n.make(a.glyphs);I=f.make(a.glyphs);F=a.familyName+" "+a.styleName;E=a.familyName.replace(/\s/g,"")+"-"+a.styleName;M=v.make({copyright:a.copyright,fontFamily:a.familyName,fontSubfamily:a.styleName,uniqueID:a.manufacturer+":"+F,fullName:F,version:a.version,postScriptName:E,trademark:a.trademark,manufacturer:a.manufacturer,designer:a.designer,description:a.description,manufacturerURL:a.manufacturerURL,designerURL:a.designerURL,license:a.license,licenseURL:a.licenseURL,preferredFamily:a.familyName,
preferredSubfamily:a.styleName});O=u.make();a=l.make(a.glyphs,{version:a.version,fullName:F,familyName:a.familyName,weightName:a.styleName,postScriptName:E});a=k([p,J,L,G,M,I,O,a,H]);G=a.encode();G=d(G);H=a.fields;I=!1;for(E=0;E<H.length;E+=1)if("head table"===H[E].name){H[E].value.checkSumAdjustment=2981146554-G;I=!0;break}if(!I)throw Error("Could not find head table with checkSum to adjust.");return a}},{"../check":1,"../table":9,"./cff":10,"./cmap":11,"./head":14,"./hhea":15,"./hmtx":16,"./maxp":19,
"./name":20,"./os2":21,"./post":22}],24:[function(p,a,e){function d(a){return function(){return a}}var c=p("./check"),k={};p={};k.BYTE=function(a){return c.argument(0<=a&&255>=a,"Byte value should be between 0 and 255."),[a]};p.BYTE=d(1);k.CHAR=function(a){return[a.charCodeAt(0)]};p.BYTE=d(1);k.CHARARRAY=function(a){for(var c=[],f=0;f<a.length;f+=1)c.push(a.charCodeAt(f));return c};p.CHARARRAY=function(a){return a.length};k.USHORT=function(a){return[a>>8&255,255&a]};p.USHORT=d(2);k.SHORT=function(a){return 32768<=
a&&(a=-(65536-a)),[a>>8&255,255&a]};p.SHORT=d(2);k.UINT24=function(a){return[a>>16&255,a>>8&255,255&a]};p.UINT24=d(3);k.ULONG=function(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]};p.ULONG=d(4);k.LONG=function(a){return 2147483648<=a&&(a=-(4294967296-a)),[a>>24&255,a>>16&255,a>>8&255,255&a]};p.LONG=d(4);k.FIXED=k.ULONG;p.FIXED=p.ULONG;k.FWORD=k.SHORT;p.FWORD=p.SHORT;k.UFWORD=k.USHORT;p.UFWORD=p.USHORT;k.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]};p.LONGDATETIME=d(8);k.TAG=function(a){return c.argument(4===
a.length,"Tag should be exactly 4 ASCII characters."),[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]};p.TAG=d(4);k.Card8=k.BYTE;p.Card8=p.BYTE;k.Card16=k.USHORT;p.Card16=p.USHORT;k.OffSize=k.BYTE;p.OffSize=p.BYTE;k.SID=k.USHORT;p.SID=p.USHORT;k.NUMBER=function(a){return-107<=a&&107>=a?[a+139]:108<=a&&1131>=a?(a-=108,[(a>>8)+247,255&a]):-1131<=a&&-108>=a?(a=-a-108,[(a>>8)+251,255&a]):-32768<=a&&32767>=a?k.NUMBER16(a):k.NUMBER32(a)};p.NUMBER=function(a){return k.NUMBER(a).length};
k.NUMBER16=function(a){return[28,a>>8&255,255&a]};p.NUMBER16=d(2);k.NUMBER32=function(a){return[29,a>>24&255,a>>16&255,a>>8&255,255&a]};p.NUMBER32=d(4);k.NAME=k.CHARARRAY;p.NAME=p.CHARARRAY;k.STRING=k.CHARARRAY;p.STRING=p.CHARARRAY;k.UTF16=function(a){for(var c=[],f=0;f<a.length;f+=1)c.push(0),c.push(a.charCodeAt(f));return c};p.UTF16=function(a){return 2*a.length};k.INDEX=function(a){var c,f=1,d=[f],e=[],A=0;for(c=0;c<a.length;c+=1){var n=k.OBJECT(a[c]);Array.prototype.push.apply(e,n);A+=n.length;
f+=n.length;d.push(f)}if(0===e.length)return[0,0];f=[];A=1+Math.floor(Math.log(A)/Math.log(2))/8|0;n=[void 0,k.BYTE,k.USHORT,k.UINT24,k.ULONG][A];for(c=0;c<d.length;c+=1){var q=n(d[c]);Array.prototype.push.apply(f,q)}return Array.prototype.concat(k.Card16(a.length),k.OffSize(A),f,e)};p.INDEX=function(a){return k.INDEX(a).length};k.DICT=function(a){for(var c=[],f=Object.keys(a),d=f.length,e=0;d>e;e+=1)var A=parseInt(f[e],0),n=a[A],c=c.concat(k.OPERAND(n.value,n.type)),c=c.concat(k.OPERATOR(A));return c};
p.DICT=function(a){return k.DICT(a).length};k.OPERATOR=function(a){return 1200>a?[a]:[12,a-1200]};k.OPERAND=function(a,d){var f=[];if(Array.isArray(d))for(var e=0;e<d.length;e+=1)c.argument(a.length===d.length,"Not enough arguments given for type"+d),f=f.concat(k.OPERAND(a[e],d[e]));else f=f.concat("SID"===d?k.NUMBER(a):"offset"===d?k.NUMBER32(a):k.NUMBER(a));return f};k.OP=k.BYTE;p.OP=p.BYTE;var r="function"==typeof WeakMap&&new WeakMap;k.CHARSTRING=function(a){if(r&&r.has(a))return r.get(a);for(var c=
[],f=a.length,d=0;f>d;d+=1)var e=a[d],c=c.concat(k[e.type](e.value));return r&&r.set(a,c),c};p.CHARSTRING=function(a){return k.CHARSTRING(a).length};k.OBJECT=function(a){var d=k[a.type];return c.argument(void 0!==d,"No encoding function for type "+a.type),d(a.value)};k.TABLE=function(a){for(var d=[],f=a.fields.length,e=0;f>e;e+=1){var t=a.fields[e],A=k[t.type];c.argument(void 0!==A,"No encoding function for field type "+t.type);var n=a[t.name];void 0===n&&(n=t.value);t=A(n);d=d.concat(t)}return d};
k.LITERAL=function(a){return a};p.LITERAL=function(a){return a.length};e.decode={};e.encode=k;e.sizeOf=p},{"./check":1}]},{},[6])(6)});var fft_analyzer=function(){function g(){c.isLoaded()?c.isPlaying()?(button.html("mic"),d.setInput(e),e.connect(d),c.stop()):(button.html("file"),c.play(),d.setInput(c),e.disconnect()):(button.html("mic"),d.setInput(e))}function p(a){c.setPath(a.data);button.html("file/mic")}function a(){for(;z<u.length&&u[z].time<performance.now()-w;)u[z].time>performance.now()-w-40&&(notes[u[z].note].amp(u[z].amp/65536),notes[u[z].note].play()),z++;z>=u.length&&(clearInterval(y),r=!1,button_play.html("Play"),loop())}
start_a_old=start_a=800;var e,d,c,k=!1,r=!1,h="",m=0;trigger_amp=.4;harmonic_filter=20;var f=Math.ceil(Math.log(22E3/Math.floor(440*Math.pow(2,-38/12)))/Math.log(2)*576),l=new Int32Array(f),t=new Int32Array(f),A=new Int32Array(f),n=new Int32Array(108),q=new Int32Array(108),v=new Set,w,u=[],z=0,y,x=new Int8Array(108),B="1 1# 2 2# 3 4 4# 5 5# 6 6# 7".split(" "),C="",D=null;touchStarted=function(){start_a_old=start_a;D=null};touchEnded=function(){null!=D&&(start_a=start_a_old+D-touchX);D=null};touchMoved=
function(){null==D&&(D=touchX);start_a=start_a_old+D-touchX};preload=function(){notes=[];c=new p5.SoundFile("");for(var a=32;108>=a;a++)notes[a]=new p5.SoundFile("./sound/"+a.toString()+".ogg")};setup=function(){createElement("h2","Homework for Signal & Systems - FFT spectrum analyzer");createElement("h","Input:");button=createButton("mic");button.mousePressed(g);createElement("h","File:");createFileInput(p);createElement("h","Record: ");button_mode=createButton("Start");button_mode.mousePressed(function(){(k=
!k)?(button_mode.html("Stop"),canvas.hide(),u=[],result.html("--"),C="",timestamp=0,w=Math.floor(performance.now())):(canvas.show(),button_mode.html("Start"))});createElement("br");createElement("h","Identified notes: ");linear_identify=createElement("h","--");createElement("br");createElement("h","High-amp notes: ");amp_identify=createElement("h"," (amp-method, may be incorrect) ");createElement("br");createElement("br");createElement("br");canvas=createCanvas(1200,500);createElement("br");createElement("br");
button_play=createButton("Play");button_play.mousePressed(function(){0>=u.length?alert("No record!"):r=!r;r?(noLoop(),button_play.html("Stop"),k=!1,z=0,w=Math.floor(performance.now()),y=setInterval(a,10)):(button_play.html("Play"),clearInterval(y),loop())});silder=createSlider(-100,500,0);result=createElement("h","--");noFill();e=new p5.AudioIn;e.start();e.disconnect();d=new p5.FFT(0,8192);d.setInput(e)};draw=function(){for(var a=d.analyze(),c=0;c<f;c++){var e=Math.floor(440*Math.pow(2,-38/12)*Math.pow(2,
c/576)*8192/22E3);t[c]=0;for(b=Math.floor(e/Math.pow(2,1/576));b<=Math.ceil(e);b++)t[c]=max(t[c],a[b]*a[b]);A[c]=t[c]-l[c]}l.set(t);a=1;for(c=0;c<A.length;c++)a<A[c]&&(a=A[c]);for(c=0;c<A.length;c++)A[c]=Math.floor(A[c]/a*t[c]*1.3),0>A[c]&&(A[c]=0);a=Math.floor(2/12*576);e=new Int8Array(A.length);for(c=0;c<A.length;c++)if(A[c]>65536*trigger_amp)for(var g=0,r=1;r<harmonic_filter;g=Math.floor(576*Math.log(++r)/Math.log(2)))max([A[c-g-1],A[c-g],A[c-g+1]])>65536*trigger_amp&&e[c-g]++;var y=-1,g=0;v.clear();
for(var p=0;108>p;p++){r=p+34;n[r]=0;q[r]=0;for(var c=Math.floor(a+576*p/12),z=c-Math.floor(12)-1;z<c+Math.floor(12)+1;z++)1<=e[z]&&(v.add(r),n[r]=max(n[r],e[z]*e[z]*e[z]*t[z]),q[r]=max(q[r],t[z]),g<n[r]&&(y=r,g=n[r]))}var D="";0<v.size&&v.forEach(function(a){x[a]?a==y&&(y=-1):D+=B[(a-12-1)%12]+" ["+Math.floor((a-12-1)/12)+"] /"+n[a]+"/  "});h!=D&&(""==h&&m++,amp_identify.html(D));h=D;for(r=0;r<x.length;r++)x[r]&&x[r]--; -1!=y&&(x[y]=6,x[y+12]=8,x[y+12+7]=8,x[y+12+12]=8,linear_identify.html(B[(y-
12-1)%12]+" ["+Math.floor((y-12-1)/12)+"]"));3>=(y-12-1)/12&&(y=-1);7<(y-12-1)/12&&(y=-1);k&&-1!=y&&(r=y,u[u.length]={time:Math.floor(performance.now())-w,note:y,amp:q[r]},C+=" ~ "+B[(r-12-1)%12]+" ["+Math.floor((r-12-1)/12)+"] ",result.html(C));if(!k){background(200);stroke("red");beginShape();for(c=0;c<width;c++)vertex(c,map(A[c+start_a],0,65536,height,0));endShape();stroke("black");beginShape();for(c=0;c<width;c++)vertex(c,map(t[c+start_a],0,65536,height,0));endShape();beginShape();for(r=0;108>
r;r++){c=Math.floor(a+576*r/12);switch(r%12){case 3:stroke("black");text((Math.floor(r/12)+2).toString(),c-start_a+3,10);stroke("blue");line(c-start_a,0,c-start_a,height);break;case 0:stroke("black"),text("A",c-start_a+3,10),stroke("green"),line(c-start_a,0,c-start_a,height)}stroke("black");text(B[(r+21)%12],c-start_a+3,30);stroke("white");line(c-start_a,0,c-start_a,100)}endShape();beginShape();strokeWeight(10);stroke("purple");for(r=0;108>r;r++)c=Math.floor(a+576*r/12),line(c-start_a,0,c-start_a,
Math.ceil(n[r+34]/g*100));strokeWeight(1);endShape()}}}();(function(g,p){"function"===typeof define&&define.amd?define("p5.dom",["p5"],function(a){p(a)}):"object"===typeof exports?p(require("../p5")):p(g.p5)})(this,function(g){function p(a){return"VIDEO"===a.tagName||"AUDIO"===a.tagName?new g.MediaElement(a):new g.Element(a)}function a(a,d,e){(d._userNode?d._userNode:document.body).appendChild(a);a=e?new g.MediaElement(a):new g.Element(a);d._elements.push(a);return a}function e(c,d,e,g){var m=document.createElement(d);"string"===typeof e&&(e=[e]);for(d=
0;d<e.length;d++){var f=document.createElement("source");f.src=e[d];m.appendChild(f)}"undefined"!==typeof g&&m.addEventListener("canplaythrough",function(){g()});var l=a(m,c,!0);l.loadedmetadata=!1;m.addEventListener("loadedmetadata",function(){l.width=m.videoWidth;l.height=m.videoHeight;l.loadedmetadata=!0});return l}g.prototype.getElement=function(a){return(a=document.getElementById(a))?p(a):null};g.prototype.getElements=function(a){var d=[];if(a=document.getElementsByClassName(a))for(var e=0;e<
a.length;e++){var g=p(a[e]);d.push(g)}return d};g.prototype.removeElements=function(a){for(a=0;a<this._elements.length;a++)this._elements[a].elt instanceof HTMLCanvasElement||this._elements[a].remove()};["div","p","span"].forEach(function(c){var d="create"+c.charAt(0).toUpperCase()+c.slice(1);g.prototype[d]=function(d){var e=document.createElement(c);e.innerHTML=void 0===typeof d?"":d;return a(e,this)}});g.prototype.createImg=function(c,d){var e=document.createElement("img");e.src=c;"undefined"!==
typeof d&&(e.alt=d);return a(e,this)};g.prototype.createA=function(c,d,e){var g=document.createElement("a");g.href=c;g.innerHTML=d;e&&(g.target=e);return a(g,this)};g.prototype.createSlider=function(c,d,e,g){var m=document.createElement("input");m.type="range";m.min=c;m.max=d;g&&(m.step=g);e&&(m.value=e);return a(m,this)};g.prototype.createButton=function(c,d){var e=document.createElement("button");e.innerHTML=c;if(e.value=d)e.value=d;return a(e,this)};g.prototype.createInput=function(c){var d=document.createElement("input");
d.type="text";c&&(d.value=c);return a(d,this)};g.prototype.createFileInput=function(c,d){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var e=document.createElement("input");e.type="file";d&&(e.multiple="multiple");e.addEventListener("change",function(a){a=a.target.files;for(var d=0;d<a.length;d++){var f=a[d],e=new FileReader;e.onload=function(a){var f=new g.File(a);return function(a){f.data=a.target.result;c(f)}}(f);"text"===f.type?e.readAsText(f):e.readAsDataURL(f)}},!1);return a(e,
this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")};g.prototype.createVideo=function(a,d){return e(this,"video",a,d)};g.prototype.createAudio=function(a,d){return e(this,"audio",a,d)};g.prototype.VIDEO="video";g.prototype.AUDIO="audio";navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;g.prototype.createCapture=function(){for(var c=!0,d=!0,e,h,m=0;m<arguments.length;m++)arguments[m]===
g.prototype.VIDEO?d=!1:arguments[m]===g.prototype.AUDIO?c=!1:"object"===typeof arguments[m]?e=arguments[m]:"function"===typeof arguments[m]&&(h=arguments[m]);if(navigator.getUserMedia){var f=document.createElement("video");e||(e={video:c,audio:d});navigator.getUserMedia(e,function(a){f.src=window.URL.createObjectURL(a);f.play();h&&h(a)},function(a){console.log(a)})}else throw"getUserMedia not supported in this browser";var l=a(f,this,!0);l.loadedmetadata=!1;f.addEventListener("loadedmetadata",function(){l.width=
f.videoWidth;l.height=f.videoHeight;l.loadedmetadata=!0});return l};g.prototype.createElement=function(c,d){var e=document.createElement(c);"undefined"!==typeof d&&(e.innerHTML=d);return a(e,this)};g.Element.prototype.addClass=function(a){this.elt.className=this.elt.className?this.elt.className+" "+a:a;return this};g.Element.prototype.removeClass=function(a){this.elt.className=this.elt.className.replace(new RegExp("(?:^|\\s)"+a+"(?!\\S)"),"");this.elt.className=this.elt.className.replace(/^\s+|\s+$/g,
"");return this};g.Element.prototype.child=function(a){"string"===typeof a?a=document.getElementById(a):a instanceof g.Element&&(a=a.elt);this.elt.appendChild(a);return this};g.Element.prototype.html=function(a){return"undefined"!==typeof a?(this.elt.innerHTML=a,this):this.elt.innerHTML};g.Element.prototype.position=function(a,d){this.elt.style.position="absolute";this.elt.style.left=a+"px";this.elt.style.top=d+"px";return this};g.Element.prototype.style=function(a,d){if("undefined"===typeof d)for(var e=
a.split(";"),g=0;g<e.length;g++){var m=e[g].split(":");m[0]&&m[1]&&(this.elt.style[m[0].trim()]=m[1].trim())}else this.elt.style[a]=d;return this};g.Element.prototype.attribute=function(a,d){if("undefined"===typeof d)return this.elt.getAttribute(a);this.elt.setAttribute(a,d);return this};g.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value};g.Element.prototype.show=function(){this.elt.style.display=
"block";return this};g.Element.prototype.hide=function(){this.elt.style.display="none";return this};g.Element.prototype.size=function(a,d){var e=a,h=d,m=g.prototype.AUTO;if(e!==m||h!==m){e===m?e=d*this.width/this.height:h===m&&(h=a*this.height/this.width);if(this.elt instanceof HTMLCanvasElement){var m={},f=this.elt.getContext("2d"),l;for(l in f)m[l]=f[l];this.elt.setAttribute("width",e*this._pInst.pixelDensity);this.elt.setAttribute("height",h*this._pInst.pixelDensity);this.elt.setAttribute("style",
"width:"+e+"px !important; height:"+h+"px !important;");this._pInst.scale(this._pInst.pixelDensity,this._pInst.pixelDensity);for(l in m)this.elt.getContext("2d")[l]=m[l]}else this.elt.style.width=e+"px !important",this.elt.style.height=h+"px !important",this.elt.width=e,this.elt.height=h;this.elt.style.overflow="hidden";this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight;this._pInst&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",
this.elt.offsetHeight))}return this};g.Element.prototype.remove=function(){for(var a in this._events)this.elt.removeEventListener(a,this._events[a]);this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)};g.MediaElement=function(a,d){g.Element.call(this,a,d);this._cueIDCounter=this._prevTime=0;this._cues=[]};g.MediaElement.prototype=Object.create(g.Element.prototype);g.MediaElement.prototype.play=function(){this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0);1<this.elt.readyState||
this.elt.load();this.elt.play();return this};g.MediaElement.prototype.stop=function(){this.elt.pause();this.elt.currentTime=0;return this};g.MediaElement.prototype.pause=function(){this.elt.pause();return this};g.MediaElement.prototype.loop=function(){this.elt.setAttribute("loop",!0);this.play();return this};g.MediaElement.prototype.noLoop=function(){this.elt.setAttribute("loop",!1);return this};g.MediaElement.prototype.autoplay=function(a){this.elt.setAttribute("autoplay",a);return this};g.MediaElement.prototype.volume=
function(a){if("undefined"===typeof a)return this.elt.volume;this.elt.volume=a};g.MediaElement.prototype.time=function(a){if("undefined"===typeof a)return this.elt.currentTime;this.elt.currentTime=a};g.MediaElement.prototype.duration=function(){return this.elt.duration};g.MediaElement.prototype.pixels=[];g.MediaElement.prototype.loadPixels=function(){this.loadedmetadata&&(this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=
this.canvas.getContext("2d")),this.drawingContext.drawImage(this.elt,0,0,this.width,this.height),g.prototype.loadPixels.call(this));return this};g.MediaElement.prototype.updatePixels=function(a,d,e,h){this.loadedmetadata&&g.prototype.updatePixels.call(this,a,d,e,h);return this};g.MediaElement.prototype.get=function(a,d,e,h){return this.loadedmetadata?g.prototype.get.call(this,a,d,e,h):[0,0,0,255]};g.MediaElement.prototype.set=function(a,d,e){this.loadedmetadata&&g.prototype.set.call(this,a,d,e)};
g.MediaElement.prototype.connect=function(a){var d,e;if("function"===typeof g.prototype.getAudioContext)d=g.prototype.getAudioContext(),e=g.soundOut.input;else try{d=a.context,e=d.destination}catch(h){throw"connect() is meant to be used with Web Audio API or p5.sound.js";}this.audioSourceNode||(this.audioSourceNode=d.createMediaElementSource(this.elt),this.audioSourceNode.connect(e));a?a.input?this.audioSourceNode.connect(a.input):this.audioSourceNode.connect(a):this.audioSourceNode.connect(e)};g.MediaElement.prototype.disconnect=
function(){if(this.audioSourceNode)this.audioSourceNode.disconnect();else throw"nothing to disconnect";};g.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit";this.elt.controls=!0};g.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};g.MediaElement.prototype.addCue=function(a,e,g){var h=this._cueIDCounter++;a=new d(e,a,h,g);this._cues.push(a);this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this));return h};g.MediaElement.prototype.removeCue=
function(a){for(var d=0;d<this._cues.length;d++)this._cues[d].id===a&&this.cues.splice(d,1);0===this._cues.length&&(this.elt.ontimeupdate=null)};g.MediaElement.prototype.clearCues=function(){this._cues=[];this.elt.ontimeupdate=null};g.MediaElement.prototype._onTimeUpdate=function(){for(var a=this.time(),d=0;d<this._cues.length;d++){var e=this._cues[d].time,g=this._cues[d].val;this._prevTime<e&&e<=a&&this._cues[d].callback(g)}this._prevTime=a};var d=function(a,d,e,g){this.callback=a;this.time=d;this.id=
e;this.val=g};g.File=function(a,d){this.file=a;this._pInst=d;var e=a.type.split("/");this.type=e[0];this.subtype=e[1];this.name=a.name;this.size=a.size;this.data=void 0}});(function(g,p){"function"===typeof define&&define.amd?define("p5.sound",["p5"],function(a){p(a)}):"object"===typeof exports?p(require("../p5")):p(g.p5)})(this,function(g){var p;p=function(){window.AudioContext=window.AudioContext||window.webkitAudioContext;var a=new window.AudioContext;g.prototype.getAudioContext=function(){return a};"function"!==typeof a.createGain&&(window.audioContext.createGain=window.audioContext.createGainNode);"function"!==typeof a.createDelay&&(window.audioContext.createDelay=
window.audioContext.createDelayNode);"function"!==typeof window.AudioBufferSourceNode.prototype.start&&(window.AudioBufferSourceNode.prototype.start=window.AudioBufferSourceNode.prototype.noteGrainOn);"function"!==typeof window.AudioBufferSourceNode.prototype.stop&&(window.AudioBufferSourceNode.prototype.stop=window.AudioBufferSourceNode.prototype.noteOff);"function"!==typeof window.OscillatorNode.prototype.start&&(window.OscillatorNode.prototype.start=window.OscillatorNode.prototype.noteOn);"function"!==
typeof window.OscillatorNode.prototype.stop&&(window.OscillatorNode.prototype.stop=window.OscillatorNode.prototype.noteOff);window.AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(window.AudioContext.prototype.createScriptProcessor=window.AudioContext.prototype.createJavaScriptNode);navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var c=document.createElement("audio");g.prototype.isSupported=function(){return!!c.canPlayType};
g.prototype.isFileSupported=function(a){switch(a.toLowerCase()){case "mp3":return!!c.canPlayType&&c.canPlayType("audio/mpeg;");case "wav":return!!c.canPlayType&&c.canPlayType('audio/wav; codecs="1"');case "ogg":return!!c.canPlayType&&c.canPlayType('audio/ogg; codecs="vorbis"');case "aac","m4a","mp4":return!!c.canPlayType&&(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/aac;"));case "aif","aiff":return!!c.canPlayType&&c.canPlayType("audio/x-aiff;");default:return!1}};navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&
window.addEventListener("touchstart",function(){var c=a.createBuffer(1,1,22050),d=a.createBufferSource();d.buffer=c;d.connect(a.destination);d.start(0)},!1)}();var a;a=function(){var a=new function(){var a=g.prototype.getAudioContext();this.input=a.createGain();this.output=a.createGain();this.limiter=a.createDynamicsCompressor();this.limiter.threshold.value=0;this.limiter.ratio.value=100;this.audiocontext=a;this.output.disconnect();this.inputSources=[];this.input.connect(this.limiter);this.limiter.connect(this.output);
this.meter=a.createGain();this.output.connect(this.meter);this.output.connect(this.audiocontext.destination);this.soundArray=[];this.parts=[];this.extensions=[]};g.soundOut=a;g.soundOut._silentNode=a.audiocontext.createGain();g.soundOut._silentNode.gain.value=0;g.soundOut._silentNode.connect(a.audiocontext.destination);return a}(p);(function(){g.prototype.masterVolume=function(c){a.output.gain.value=c};g.prototype.sampleRate=function(){return a.audiocontext.sampleRate};g.prototype.getMasterVolume=
function(){return a.output.gain.value};g.prototype.freqToMidi=function(a){a=Math.log(a/440)/Math.log(2);return Math.round(12*a)+57};g.prototype.midiToFreq=function(a){return 440*Math.pow(2,(a-69)/12)};g.prototype.soundFormats=function(){a.extensions=[];for(var c=0;c<arguments.length;c++)if(arguments[c]=arguments[c].toLowerCase(),-1<["mp3","wav","ogg","m4a","aac"].indexOf(arguments[c]))a.extensions.push(arguments[c]);else throw arguments[c]+" is not a valid sound format!";};g.prototype.disposeSound=
function(){for(var c=0;c<a.soundArray.length;c++)a.soundArray[c].dispose()};g.prototype.registerMethod("remove",g.prototype.disposeSound);g.prototype._checkFileFormats=function(c){var d;if("string"===typeof c){d=c;var e=d.split(".").pop();if(-1<["mp3","wav","ogg","m4a","aac"].indexOf(e)){var h=g.prototype.isFileSupported(e);if(!h)for(c=d.split("."),h=c[c.length-1],e=0;e<a.extensions.length;e++){var k=a.extensions[e];if(h=g.prototype.isFileSupported(k)){h="";2===c.length&&(h+=c[0]);for(e=1;e<=c.length-
2;e++)h+="."+c[e];d=h+".";d=d+=k;break}}}else for(e=0;e<a.extensions.length;e++)if(k=a.extensions[e],h=g.prototype.isFileSupported(k)){d=d+"."+k;break}}else if("object"===typeof c)for(e=0;e<c.length;e++)if(k=c[e].split(".").pop(),h=g.prototype.isFileSupported(k)){d=c[e];break}return d};g.prototype._mathChain=function(a,c,d,e,g){for(var h in a.mathOps)a.mathOps[h]instanceof g&&(a.mathOps[h].dispose(),d=h,d<a.mathOps.length-1&&(e=a.mathOps[h+1]));a.mathOps[d-1].disconnect();a.mathOps[d-1].connect(c);
c.connect(e);a.mathOps[d]=c;return a}})(a);(function(){var c=a.audiocontext;g.Panner=function(a,d,e){this.input=c.createGain();a.connect(this.input);this.left=c.createGain();this.right=c.createGain();this.left.channelInterpretation="discrete";this.right.channelInterpretation="discrete";1<e?(this.splitter=c.createChannelSplitter(2),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0)):(this.input.connect(this.left),this.input.connect(this.right));
this.output=c.createChannelMerger(2);this.left.connect(this.output,0,1);this.right.connect(this.output,0,0);this.output.connect(d)};g.Panner.prototype.pan=function(a,d){var e=c.currentTime+(d||0),g=(a+1)/2,h=Math.cos(g*Math.PI/2),g=Math.sin(g*Math.PI/2);this.left.gain.linearRampToValueAtTime(g,e);this.right.gain.linearRampToValueAtTime(h,e)};g.Panner.prototype.inputChannels=function(a){1===a?(this.input.disconnect(),this.input.connect(this.left),this.input.connect(this.right)):2===a&&(typeof("undefined"===
this.splitter)&&(this.splitter=c.createChannelSplitter(2)),this.input.disconnect(),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0))};g.Panner.prototype.connect=function(a){this.output.connect(a)};g.Panner.prototype.disconnect=function(a){this.output.disconnect()};g.Panner3D=function(a,d){var e=c.createPanner();e.panningModel="HRTF";e.distanceModel="linear";e.setPosition(0,0,0);a.connect(e);e.connect(d);e.pan=function(a,c,d){e.setPosition(a,
c,d)};return e}})(a);(function(){function c(a,d){for(var e={},f=a.length,g=0;g<f;g++){if(a[g]>d){var h=new p(a[g],g);e[g]=h;g+=6E3}g++}return e}function d(a){for(var c=[],e=Object.keys(a).sort(),f=0;f<e.length;f++)for(var g=0;10>g;g++){var h=a[e[f]],l=a[e[f+g]];if(h&&l){var k=l.sampleIndex-h.sampleIndex;0<k&&h.intervals.push(k);c.some(function(a,c){if(a.interval===k)return a.count++,a})||c.push({interval:k,count:1})}}return c}function e(a,c){var d=[];a.forEach(function(a,e){try{var f=Math.abs(60/
(a.interval/c)),f=k(f);d.some(function(c){if(c.tempo===f)return c.count+=a.count})||isNaN(f)||d.push({tempo:Math.round(f),count:a.count})}catch(g){throw g;}});return d}function h(a,c,d,e){for(var f=[],g=Object.keys(a).sort(),l=0;l<g.length;l++)for(var t=a[g[l]],q=0;q<t.intervals.length;q++){var m=Math.round(Math.abs(60/(t.intervals[q]/d))),m=k(m);Math.abs(m-c)<e&&f.push(t.sampleIndex/44100)}return f=f.filter(function(a,c,d){if(.01<d[c+1]-a)return!0})}function k(a){if(isFinite(a)&&0!=a){for(;90>a;)a*=
2;for(;180<a&&90<a;)a/=2;return a}}var q=a.audiocontext;g.SoundFile=function(c,d,f){if("string"==typeof c)this.url=g.prototype._checkFileFormats(c);else if("object"==typeof c){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob))throw"Unable to load file because the File API is not supported";c.file&&(c=c.file);this.file=c}this._paused=this._playing=this._looping=!1;this._pauseTime=0;this._cues=[];this._lastPos=0;this._counterNode;this._scopeNode;this.bufferSourceNodes=[];this.buffer=
this.bufferSourceNode=null;this.gain=this.playbackRate=1;this.input=a.audiocontext.createGain();this.output=a.audiocontext.createGain();this.reversed=!1;this.startTime=0;this.endTime=null;this.pauseTime=0;this.mode="sustain";this.startMillis=null;this.amplitude=new g.Amplitude;this.output.connect(this.amplitude.input);this.panPosition=0;this.panner=new g.Panner(this.output,a.input,2);(this.url||this.file)&&this.load(d);a.soundArray.push(this);this.whileLoading="function"===typeof f?f:function(){}};
g.prototype.registerPreloadMethod("loadSound");g.prototype.loadSound=function(a,c,d){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");return new g.SoundFile(a,c,d)};g.SoundFile.prototype.load=function(a){if(void 0!=this.url&&""!=this.url){var c=this,d=new XMLHttpRequest;d.addEventListener("progress",function(a){c._updateProgress(a)},!1);d.open("GET",this.url,!0);d.responseType=
"arraybuffer";var f=this;d.onload=function(){q.decodeAudioData(d.response,function(c){f.buffer=c;f.panner.inputChannels(c.numberOfChannels);a&&a(f)})};d.send()}else if(void 0!=this.file){var e=new FileReader,f=this;e.onload=function(){q.decodeAudioData(e.result,function(c){f.buffer=c;f.panner.inputChannels(c.numberOfChannels);a&&a(f)})};e.readAsArrayBuffer(this.file)}};g.SoundFile.prototype._updateProgress=function(a){a.lengthComputable?(a=Math.log(a.loaded/a.total*9.9),this.whileLoading(a)):console.log("size unknown")};
g.SoundFile.prototype.isLoaded=function(){return this.buffer?!0:!1};g.SoundFile.prototype.play=function(c,d,f,e,g){var h=this,l=a.audiocontext.currentTime;c=c||0;0>c&&(c=0);c+=l;if(this.buffer){this._pauseTime=0;"restart"===this.mode&&this.buffer&&this.bufferSourceNode&&(l=a.audiocontext.currentTime,this.bufferSourceNode.stop(c),this._counterNode.stop(c));this.bufferSourceNode=this._initSourceNode();this._counterNode=this._initCounterNode();if(e){if(!(0<=e&&e<this.buffer.duration))throw"start time out of range";
}else e=0;g=g?g<=this.buffer.duration-e?g:this.buffer.duration:this.buffer.duration-e;this.bufferSourceNode.gain||(this.bufferSourceNode.gain=a.audiocontext.createGain(),this.bufferSourceNode.connect(this.bufferSourceNode.gain),this.bufferSourceNode.gain.gain.setValueAtTime(f||1,a.audiocontext.currentTime),this.bufferSourceNode.gain.connect(this.output));d=d||Math.abs(this.playbackRate);this.bufferSourceNode.playbackRate.setValueAtTime(d,l);this._paused?(this.bufferSourceNode.start(c,this.pauseTime,
g),this._counterNode.start(c,this.pauseTime,g)):(this.bufferSourceNode.start(c,e,g),this._counterNode.start(c,e,g));this._playing=!0;this._paused=!1;this.bufferSourceNodes.push(this.bufferSourceNode);this.bufferSourceNode._arrayIndex=this.bufferSourceNodes.length-1;this.bufferSourceNode.onended=function(a){var c=this;this._playing=!1;setTimeout(function(){h.bufferSourceNodes.splice(c._arrayIndex,1);0===h.bufferSourceNodes.length&&(h._playing=!1)},1)}}else throw"not ready to play file, buffer has yet to load. Try preload()";
this.bufferSourceNode.loop=this._looping;this._counterNode.loop=this._looping;!0===this._looping&&(c=e+g,this.bufferSourceNode.loopStart=e,this.bufferSourceNode.loopEnd=c,this._counterNode.loopStart=e,this._counterNode.loopEnd=c)};g.SoundFile.prototype.playMode=function(c){c=c.toLowerCase();if("restart"===c&&this.buffer&&this.bufferSourceNode)for(var d=0;d<this.bufferSourceNodes.length-1;d++)this.bufferSourceNodes[d].stop(a.audiocontext.currentTime);if("restart"===c||"sustain"===c)this.mode=c;else throw'Invalid play mode. Must be either "restart" or "sustain"';
};g.SoundFile.prototype.pause=function(c){var d=a.audiocontext.currentTime;c=(c||0)+d;this.isPlaying()&&this.buffer&&this.bufferSourceNode?(this.pauseTime=this.currentTime(),this.bufferSourceNode.stop(c),this._counterNode.stop(c),this._paused=!0,this._playing=!1,this._pauseTime=this.currentTime()):this._pauseTime=0};g.SoundFile.prototype.loop=function(a,c,d,e,f){this._looping=!0;this.play(a,c,d,e,f)};g.SoundFile.prototype.setLoop=function(a){if(!0===a)this._looping=!0;else if(!1===a)this._looping=
!1;else throw"Error: setLoop accepts either true or false";this.bufferSourceNode&&(this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping)};g.SoundFile.prototype.isLooping=function(){return this.bufferSourceNode?!0===this._looping&&!0===this.isPlaying()?!0:!1:!1};g.SoundFile.prototype.isPlaying=function(){return this._playing};g.SoundFile.prototype.isPaused=function(){return this._paused};g.SoundFile.prototype.stop=function(c){var d=c||0;"sustain"==this.mode?(this.stopAll(d),
this._playing=!1,this.pauseTime=0,this._paused=!1):this.buffer&&this.bufferSourceNode&&(c=a.audiocontext.currentTime,d=d||0,this.pauseTime=0,this.bufferSourceNode.stop(c+d),this._counterNode.stop(c+d),this._paused=this._playing=!1)};g.SoundFile.prototype.stopAll=function(c){var d=a.audiocontext.currentTime;if(this.buffer&&this.bufferSourceNode){for(var e=0;e<this.bufferSourceNodes.length;e++)if(void 0!=typeof this.bufferSourceNodes[e])try{this.bufferSourceNodes[e].stop(d+c)}catch(f){}this._counterNode.stop(d+
c)}};g.SoundFile.prototype.setVolume=function(c,d,e){if("number"===typeof c){d=d||0;e=e||0;var f=a.audiocontext.currentTime,g=this.output.gain.value;this.output.gain.cancelScheduledValues(f+e);this.output.gain.linearRampToValueAtTime(g,f+e);this.output.gain.linearRampToValueAtTime(c,f+e+d)}else if(c)c.connect(this.output.gain);else return this.output.gain};g.SoundFile.prototype.amp=g.SoundFile.prototype.setVolume;g.SoundFile.prototype.fade=g.SoundFile.prototype.setVolume;g.SoundFile.prototype.getVolume=
function(){return this.output.gain.value};g.SoundFile.prototype.pan=function(a,c){this.panPosition=a;this.panner.pan(a,c)};g.SoundFile.prototype.getPan=function(){return this.panPosition};g.SoundFile.prototype.rate=function(c){if(this.playbackRate!==c||!this.bufferSourceNode||this.bufferSourceNode.playbackRate.value!==c){var d=this.playbackRate=c;0===this.playbackRate&&this._playing&&this.pause();if(0>this.playbackRate&&!this.reversed){var e=this.currentTime();this.reverseBuffer();d=Math.abs(c);this.pauseTime=
(e-this.duration())/d}else 0<this.playbackRate&&this.reversed&&this.reverseBuffer();this.bufferSourceNode&&(c=a.audiocontext.currentTime,this.bufferSourceNode.playbackRate.cancelScheduledValues(c),this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(d),c),this._counterNode.playbackRate.cancelScheduledValues(c),this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(d),c))}};g.SoundFile.prototype.setPitch=function(a){a=midiToFreq(a)/midiToFreq(60);this.rate(a)};g.SoundFile.prototype.getPlaybackRate=
function(){return this.playbackRate};g.SoundFile.prototype.duration=function(){return this.buffer?this.buffer.duration:0};g.SoundFile.prototype.currentTime=function(){return 0<this._pauseTime?this._pauseTime:this._lastPos/q.sampleRate};g.SoundFile.prototype.jump=function(a,c){if(0>a||a>this.buffer.duration)throw"jump time out of range";if(c>this.buffer.duration-a)throw"end time out of range";var d=a||0,e=c||this.buffer.duration-a;this.isPlaying()&&this.stop();this.play(0,this.playbackRate,this.output.gain.value,
d,e)};g.SoundFile.prototype.channels=function(){return this.buffer.numberOfChannels};g.SoundFile.prototype.sampleRate=function(){return this.buffer.sampleRate};g.SoundFile.prototype.frames=function(){return this.buffer.length};g.SoundFile.prototype.getPeaks=function(a){if(this.buffer){if(a||(a=5*window.width),this.buffer){for(var c=this.buffer,d=c.length/a,e=~~(d/10)||1,f=c.numberOfChannels,g=new Float32Array(Math.round(a)),h=0;h<f;h++)for(var l=c.getChannelData(h),k=0;k<a;k++){for(var t=~~(k*d),
n=~~(t+d),q=0;t<n;t+=e){var m=l[t];m>q?q=m:-m>q&&(q=m)}if(0===h||q>g[k])g[k]=q}return g}}else throw"Cannot load peaks yet, buffer is not loaded";};g.SoundFile.prototype.reverseBuffer=function(){var a=this.getVolume();this.setVolume(0,.01,0);this.pause();if(this.buffer){for(var c=0;c<this.buffer.numberOfChannels;c++)Array.prototype.reverse.call(this.buffer.getChannelData(c));this.reversed=!this.reversed}else throw"SoundFile is not done loading";this.setVolume(a,.01,.0101);this.play()};g.SoundFile.prototype._onEnded=
function(c){c.onended=function(c){c.stop(a.audiocontext.currentTime)}};g.SoundFile.prototype.add=function(){};g.SoundFile.prototype.dispose=function(){var c=a.audiocontext.currentTime;this.stop(c);if(this.buffer&&this.bufferSourceNode){for(var d=0;d<this.bufferSourceNodes.length-1;d++)null!==this.bufferSourceNodes[d]&&(this.bufferSourceNodes[d].stop(c),this.bufferSourceNodes[d]=null);if(this.isPlaying()){try{this._counterNode.stop(c)}catch(e){console.log(e)}this._counterNode=null}}this.output&&(this.output.disconnect(),
this.output=null);this.panner&&(this.panner.disconnect(),this.panner=null)};g.SoundFile.prototype.connect=function(c){c?c.hasOwnProperty("input")?this.panner.connect(c.input):this.panner.connect(c):this.panner.connect(a.input)};g.SoundFile.prototype.disconnect=function(a){this.panner.disconnect(a)};g.SoundFile.prototype.getLevel=function(a){a&&(this.amplitude.smoothing=a);return this.amplitude.getLevel()};g.SoundFile.prototype.setPath=function(a,c){this.url=g.prototype._checkFileFormats(a);this.load(c)};
g.SoundFile.prototype.setBuffer=function(a){for(var c=q.createBuffer(2,a[0].length,q.sampleRate),d=0,e=0;e<a.length;e++)c.getChannelData(e).set(a[e]),d++;this.buffer=c;this.panner.inputChannels(d)};g.SoundFile.prototype._initCounterNode=function(){var a=this,c=q.currentTime,d=q.createBufferSource();a._scopeNode&&(a._scopeNode.disconnect(),a._scopeNode=null);a._scopeNode=q.createScriptProcessor(256,1,1);d.buffer=m(a.buffer);d.playbackRate.setValueAtTime(a.playbackRate,c);d.connect(a._scopeNode);a._scopeNode.connect(g.soundOut._silentNode);
a._scopeNode.onaudioprocess=function(c){c=c.inputBuffer.getChannelData(0);a._lastPos=c[c.length-1]||0;a._onTimeUpdate(a._lastPos)};return d};g.SoundFile.prototype._initSourceNode=function(){var a=q.currentTime,c=q.createBufferSource();c.buffer=this.buffer;c.playbackRate.setValueAtTime(this.playbackRate,a);return c};var m=function(a){for(var c=new Float32Array(a.length),d=q.createBuffer(1,a.length,44100),e=0;e<a.length;e++)c[e]=e;d.getChannelData(0).set(c);return d};g.SoundFile.prototype.processPeaks=
function(a,g,k,n){var q=this.buffer,m=g||.9,v=k||.22,p=n||200;g=new OfflineAudioContext(1,this.buffer.length,this.buffer.sampleRate);k=g.createBufferSource();k.buffer=q;q=g.createBiquadFilter();q.type="lowpass";k.connect(q);q.connect(g.destination);k.start(0);g.startRendering();g.oncomplete=function(g){g=g.renderedBuffer;var k=g.getChannelData(0);do r=c(k,m),m-=.005;while(Object.keys(r).length<p&&m>=v);k=d(r);k=e(k,g.sampleRate).sort(function(a,c){return c.count-a.count}).splice(0,5);this.tempo=k[0].tempo;
g=h(r,k[0].tempo,g.sampleRate,5);a(g)}};var p=function(a,c){this.sampleIndex=c;this.amplitude=a;this.tempos=[];this.intervals=[]},r=[];g.SoundFile.prototype.addCue=function(a,c,d){var e=this._cueIDCounter++;a=new z(c,a,e,d);this._cues.push(a);return e};g.SoundFile.prototype.removeCue=function(a){for(var c=0;c<this._cues.length;c++)this._cues[c].id===a&&this.cues.splice(c,1)};g.SoundFile.prototype.clearCues=function(){this._cues=[]};g.SoundFile.prototype._onTimeUpdate=function(a){a/=this.buffer.sampleRate;
for(var c=0;c<this._cues.length;c++){var d=this._cues[c].time,e=this._cues[c].val;this._prevTime<d&&d<=a&&this._cues[c].callback(e)}this._prevTime=a};var z=function(a,c,d,e){this.callback=a;this.time=c;this.id=d;this.val=e}})(p,a);(function(){g.Amplitude=function(c){this.bufferSize=2048;this.audiocontext=a.audiocontext;this.input=this.processor=this.audiocontext.createScriptProcessor(this.bufferSize,2,1);this.output=this.audiocontext.createGain();this.smoothing=c||0;this.average=this.volume=0;this.stereoVol=
[0,0];this.stereoAvg=[0,0];this.stereoVolNorm=[0,0];this.volMax=.001;this.normalize=!1;this.processor.onaudioprocess=this._audioProcess.bind(this);this.processor.connect(this.output);this.output.gain.value=0;this.output.connect(this.audiocontext.destination);a.meter.connect(this.processor)};g.Amplitude.prototype.setInput=function(c,d){a.meter.disconnect(this.processor);d&&(this.smoothing=d);null==c?(console.log("Amplitude input source is not ready! Connecting to master output instead"),a.meter.connect(this.processor)):
c instanceof g.Signal?c.output.connect(this.processor):c?(c.connect(this.processor),this.processor.disconnect(),this.processor.connect(this.output)):a.meter.connect(this.processor)};g.Amplitude.prototype.connect=function(c){c?c.hasOwnProperty("input")?this.output.connect(c.input):this.output.connect(c):this.output.connect(this.panner.connect(a.input))};g.Amplitude.prototype.disconnect=function(a){this.output.disconnect()};g.Amplitude.prototype._audioProcess=function(a){for(var c=0;c<a.inputBuffer.numberOfChannels;c++){for(var d=
a.inputBuffer.getChannelData(c),e=d.length,g=0,h=0,k,m=0;m<e;m++)k=d[m],this.normalize?(g+=Math.max(Math.min(k/this.volMax,1),-1),h+=Math.max(Math.min(k/this.volMax,1),-1)*Math.max(Math.min(k/this.volMax,1),-1)):(g+=k,h+=k*k);d=g/e;e=Math.sqrt(h/e);this.stereoVol[c]=Math.max(e,this.stereoVol[c]*this.smoothing);this.stereoAvg[c]=Math.max(d,this.stereoVol[c]*this.smoothing);this.volMax=Math.max(this.stereoVol[c],this.volMax)}var p=this;this.volume=this.stereoVol.reduce(function(a,c,d){p.stereoVolNorm[d-
1]=Math.max(Math.min(p.stereoVol[d-1]/p.volMax,1),0);p.stereoVolNorm[d]=Math.max(Math.min(p.stereoVol[d]/p.volMax,1),0);return a+c})/this.stereoVol.length;this.volNorm=Math.max(Math.min(this.volume/this.volMax,1),0)};g.Amplitude.prototype.getLevel=function(a){return"undefined"!==typeof a?this.normalize?this.stereoVolNorm[a]:this.stereoVol[a]:this.normalize?this.volNorm:this.volume};g.Amplitude.prototype.toggleNormalize=function(a){this.normalize="boolean"===typeof a?a:!this.normalize};g.Amplitude.prototype.smooth=
function(a){0<=a&&1>a?this.smoothing=a:console.log("Error: smoothing must be between 0 and 1")}})(a);(function(){g.FFT=function(c,d){var e=c||.8;0===c&&(e=c);var g=2*d||2048;this.input=this.analyser=a.audiocontext.createAnalyser();a.output.connect(this.analyser);this.analyser.smoothingTimeConstant=e;this.analyser.fftSize=g;this.freqDomain=new Uint8Array(this.analyser.frequencyBinCount);this.timeDomain=new Uint8Array(this.analyser.frequencyBinCount);this.bass=[20,140];this.lowMid=[140,400];this.mid=
[400,2600];this.highMid=[2600,5200];this.treble=[5200,14E3]};g.FFT.prototype.setInput=function(a,c){c&&(this.analyser.fftSize=2*c);a.output?a.output.connect(this.analyser):a.connect(this.analyser)};g.FFT.prototype.waveform=function(a){a&&(this.analyser.fftSize=2*a);this.analyser.getByteTimeDomainData(this.timeDomain);a=Array.apply([],this.timeDomain);a.length===this.analyser.fftSize;a.constructor===Array;return a};g.FFT.prototype.analyze=function(a){a&&(this.analyser.fftSize=2*a);this.analyser.getByteFrequencyData(this.freqDomain);
a=Array.apply([],this.freqDomain);a.length===this.analyser.fftSize;a.constructor===Array;return a};g.FFT.prototype.getEnergy=function(c,d){var e=a.audiocontext.sampleRate/2;"bass"===c?(c=this.bass[0],d=this.bass[1]):"lowMid"===c?(c=this.lowMid[0],d=this.lowMid[1]):"mid"===c?(c=this.mid[0],d=this.mid[1]):"highMid"===c?(c=this.highMid[0],d=this.highMid[1]):"treble"===c&&(c=this.treble[0],d=this.treble[1]);if("number"!==typeof c)throw"invalid input for getEnergy()";if(d){if(c&&d){if(c>d){var g=d;d=c;
c=g}for(var g=Math.round(c/e*this.freqDomain.length),e=Math.round(d/e*this.freqDomain.length),h=0,k=0;g<=e;g++)h+=this.freqDomain[g],k+=1;return h/k}throw"invalid input for getEnergy()";}g=Math.round(c/e*this.freqDomain.length);return this.freqDomain[g]};g.FFT.prototype.getFreq=function(a,c){console.log("getFreq() is deprecated. Please use getEnergy() instead.");return this.getEnergy(a,c)};g.FFT.prototype.smooth=function(a){this.analyser.smoothingTimeConstant=a}})(a);var e;e=function(){function a(c){return void 0===
c}var c;a(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext);a(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext);if(a(AudioContext))throw Error("Web Audio is not supported in this browser");c=new AudioContext;"function"!==typeof AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode);"function"!==typeof AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode);
"function"!==typeof AudioContext.prototype.createPeriodicWave&&(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable);"function"!==typeof AudioBufferSourceNode.prototype.start&&(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn);"function"!==typeof AudioBufferSourceNode.prototype.stop&&(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff);"function"!==typeof OscillatorNode.prototype.start&&(OscillatorNode.prototype.start=
OscillatorNode.prototype.noteOn);"function"!==typeof OscillatorNode.prototype.stop&&(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff);"function"!==typeof OscillatorNode.prototype.setPeriodicWave&&(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable);AudioNode.prototype._nativeConnect=AudioNode.prototype.connect;AudioNode.prototype.connect=function(c,d,e){if(c.input)Array.isArray(c.input)?(a(e)&&(e=0),this.connect(c.input[e])):this.connect(c.input,d,e);else try{c instanceof
AudioNode?this._nativeConnect(c,d,e):this._nativeConnect(c,d)}catch(g){throw Error("error connecting to node: "+c);}};var d=function(c,d){a(c)||1===c?this.input=this.context.createGain():1<c&&(this.input=Array(c));a(d)||1===d?this.output=this.context.createGain():1<d&&(this.output=Array(c))};d.context=c;d.prototype.context=d.context;d.prototype.bufferSize=2048;d.prototype.bufferTime=d.prototype.bufferSize/d.context.sampleRate;d.prototype.connect=function(a,c,d){Array.isArray(this.output)?(c=this.defaultArg(c,
0),this.output[c].connect(a,0,d)):this.output.connect(a,c,d)};d.prototype.disconnect=function(a){Array.isArray(this.output)?(a=this.defaultArg(a,0),this.output[a].disconnect()):this.output.disconnect()};d.prototype.connectSeries=function(){if(1<arguments.length)for(var a=arguments[0],c=1;c<arguments.length;c++){var d=arguments[c];a.connect(d);a=d}};d.prototype.connectParallel=function(){var a=arguments[0];if(1<arguments.length)for(var c=1;c<arguments.length;c++)a.connect(arguments[c])};d.prototype.chain=
function(){if(0<arguments.length)for(var a=this,c=0;c<arguments.length;c++){var d=arguments[c];a.connect(d);a=d}};d.prototype.fan=function(){if(0<arguments.length)for(var a=1;a<arguments.length;a++)this.connect(arguments[a])};AudioNode.prototype.chain=d.prototype.chain;AudioNode.prototype.fan=d.prototype.fan;d.prototype.defaultArg=function(c,d){if("object"===typeof c&&"object"===typeof d){var e={},g;for(g in c)e[g]=this.defaultArg(c[g],c[g]);for(var h in d)e[h]=this.defaultArg(c[h],d[h]);return e}return a(c)?
d:c};d.prototype.optionsObject=function(a,c,d){var e={};if(1===a.length&&"object"===typeof a[0])e=a[0];else for(var f=0;f<c.length;f++)e[c[f]]=a[f];return this.isUndef(d)?e:this.defaultArg(e,d)};d.prototype.isUndef=a;d.prototype.equalPowerScale=function(a){return Math.sin(.5*a*Math.PI)};d.prototype.logScale=function(a){return Math.max(this.normalize(this.gainToDb(a),-100,0),0)};d.prototype.expScale=function(a){return this.dbToGain(this.interpolate(a,-100,0))};d.prototype.dbToGain=function(a){return Math.pow(2,
a/6)};d.prototype.gainToDb=function(a){return 20*(Math.log(a)/Math.LN10)};d.prototype.interpolate=function(a,c,d){return a*(d-c)+c};d.prototype.normalize=function(a,c,d){if(c>d){var e=d;d=c;c=e}else if(c==d)return 0;return(a-c)/(d-c)};d.prototype.dispose=function(){this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null);this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null)};var e=null;d.prototype.noGC=
function(){this.output.connect(e)};AudioNode.prototype.noGC=function(){this.connect(e)};d.prototype.now=function(){return this.context.currentTime};d.prototype.samplesToSeconds=function(a){return a/this.context.sampleRate};d.prototype.toSamples=function(a){a=this.toSeconds(a);return Math.round(a*this.context.sampleRate)};d.prototype.toSeconds=function(a,c){c=this.defaultArg(c,this.now());if("number"===typeof a)return a;if("string"===typeof a){var d=0;"+"===a.charAt(0)&&(a=a.slice(1),d=c);return parseFloat(a)+
d}return c};d.prototype.frequencyToSeconds=function(a){return 1/parseFloat(a)};d.prototype.secondsToFrequency=function(a){return 1/a};var g=[];d._initAudioContext=function(a){a(d.context);g.push(a)};d.setContext=function(a){d.prototype.context=a;d.context=a;for(var c=0;c<g.length;c++)g[c](a)};d.extend=function(c,e){function g(){}a(e)&&(e=d);g.prototype=e.prototype;c.prototype=new g;c.prototype.constructor=c};d.startMobile=function(){var a=d.context.createOscillator(),c=d.context.createGain();c.gain.value=
0;a.connect(c);c.connect(d.context.destination);c=d.context.currentTime;a.start(c);a.stop(c+1)};d._initAudioContext(function(a){d.prototype.bufferTime=d.prototype.bufferSize/a.sampleRate;e=a.createGain();e.gain.value=0;e.connect(a.destination)});return d}();(function(a){a.SignalBase=function(){};a.extend(a.SignalBase);a.SignalBase.prototype.connect=function(c,d,e){c instanceof a.Signal?c.setValue(0):c instanceof AudioParam&&(c.value=0);a.prototype.connect.call(this,c,d,e)};a.SignalBase.prototype.dispose=
function(){a.prototype.dispose.call(this)};return a.SignalBase})(e);(function(a){a.WaveShaper=function(a,c){this._shaper=this.input=this.output=this.context.createWaveShaper();this._curve=null;Array.isArray(a)?this.setCurve(a):isFinite(a)||this.isUndef(a)?this._curve=new Float32Array(this.defaultArg(a,1024)):"function"===typeof a&&(this._curve=new Float32Array(this.defaultArg(c,1024)),this.setMap(a))};a.extend(a.WaveShaper,a.SignalBase);a.WaveShaper.prototype.setMap=function(a){for(var c=0,d=this._curve.length;c<
d;c++)this._curve[c]=a(c/d*2-1,c,c/(d-1)*2-1);this._shaper.curve=this._curve};a.WaveShaper.prototype.setCurve=function(a){this._isSafari()&&a.unshift(a[0]);this._curve=new Float32Array(a);this._shaper.curve=this._curve};a.WaveShaper.prototype.setOversample=function(a){this._shaper.oversample=a};a.WaveShaper.prototype._isSafari=function(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")};a.WaveShaper.prototype.dispose=function(){a.prototype.dispose.call(this);
this._shaper.disconnect();this._curve=this._shaper=null};return a.WaveShaper})(e);var d;d=function(a){a.Signal=function(c){this._scalar=this.context.createGain();this.input=this.output=this.context.createGain();this._syncRatio=1;this.value=this.defaultArg(c,0);a.Signal._constant.chain(this._scalar,this.output)};a.extend(a.Signal,a.SignalBase);a.Signal.prototype.getValue=function(){return this._scalar.gain.value};a.Signal.prototype.setValue=function(a){a=0===this._syncRatio?0:a*this._syncRatio;this._scalar.gain.value=
a};a.Signal.prototype.setValueAtTime=function(a,c){a*=this._syncRatio;this._scalar.gain.setValueAtTime(a,this.toSeconds(c))};a.Signal.prototype.setCurrentValueNow=function(a){a=this.defaultArg(a,this.now());var c=this.getValue();this.cancelScheduledValues(a);this._scalar.gain.setValueAtTime(c,a);return c};a.Signal.prototype.linearRampToValueAtTime=function(a,c){a*=this._syncRatio;this._scalar.gain.linearRampToValueAtTime(a,this.toSeconds(c))};a.Signal.prototype.exponentialRampToValueAtTime=function(a,
c){a*=this._syncRatio;try{this._scalar.gain.exponentialRampToValueAtTime(a,this.toSeconds(c))}catch(d){this._scalar.gain.linearRampToValueAtTime(a,this.toSeconds(c))}};a.Signal.prototype.exponentialRampToValueNow=function(a,c){var d=this.now();this.setCurrentValueNow(d);"+"===c.toString().charAt(0)&&(c=c.substr(1));this.exponentialRampToValueAtTime(a,d+this.toSeconds(c))};a.Signal.prototype.linearRampToValueNow=function(a,c){var d=this.now();this.setCurrentValueNow(d);a*=this._syncRatio;"+"===c.toString().charAt(0)&&
(c=c.substr(1));this._scalar.gain.linearRampToValueAtTime(a,d+this.toSeconds(c))};a.Signal.prototype.setTargetAtTime=function(a,c,d){a*=this._syncRatio;this._scalar.gain.setTargetAtTime(a,this.toSeconds(c),d)};a.Signal.prototype.setValueCurveAtTime=function(a,c,d){for(var e=0;e<a.length;e++)a[e]*=this._syncRatio;this._scalar.gain.setValueCurveAtTime(a,this.toSeconds(c),this.toSeconds(d))};a.Signal.prototype.cancelScheduledValues=function(a){this._scalar.gain.cancelScheduledValues(this.toSeconds(a))};
a.Signal.prototype.sync=function(a,c){c?this._syncRatio=c:0!==a.getValue()?this._syncRatio=this.getValue()/a.getValue():this._syncRatio=0;this._scalar.disconnect();this._scalar=this.context.createGain();this.connectSeries(a,this._scalar,this.output);this._scalar.gain.value=this._syncRatio};a.Signal.prototype.unsync=function(){var c=this.getValue();this._scalar.disconnect();this._scalar=this.context.createGain();this._scalar.gain.value=c/this._syncRatio;this._syncRatio=1;a.Signal._constant.chain(this._scalar,
this.output)};a.Signal.prototype.dispose=function(){a.prototype.dispose.call(this);this._scalar.disconnect();this._scalar=null};Object.defineProperty(a.Signal.prototype,"value",{get:function(){return this.getValue()},set:function(a){this.setValue(a)}});a.Signal._generator=null;a.Signal._constant=null;a._initAudioContext(function(c){a.Signal._generator=c.createOscillator();a.Signal._constant=new a.WaveShaper([1,1]);a.Signal._generator.connect(a.Signal._constant);a.Signal._generator.start(0);a.Signal._generator.noGC()});
return a.Signal}(e);var c;c=function(a){a.Add=function(c){a.call(this,2,0);this._sum=this.input[0]=this.input[1]=this.output=this.context.createGain();this._value=null;isFinite(c)&&(this._value=new a.Signal(c),this._value.connect(this._sum))};a.extend(a.Add,a.SignalBase);a.Add.prototype.setValue=function(a){if(null!==this._value)this._value.setValue(a);else throw Error("cannot switch from signal to number");};a.Add.prototype.dispose=function(){a.prototype.dispose.call(this);this._sum=null;this._value&&
(this._value.dispose(),this._value=null)};return a.Add}(e);var k;k=function(a){a.Multiply=function(c){a.call(this,2,0);this._mult=this.input[0]=this.output=this.context.createGain();this._factor=this.input[1]=this.output.gain;this._factor.value=this.defaultArg(c,0)};a.extend(a.Multiply,a.SignalBase);a.Multiply.prototype.setValue=function(a){this._factor.value=a};a.Multiply.prototype.dispose=function(){a.prototype.dispose.call(this);this._factor=this._mult=null};return a.Multiply}(e);var r;r=function(a){a.Scale=
function(c,d){this._outputMin=this.defaultArg(c,0);this._outputMax=this.defaultArg(d,1);this._scale=this.input=new a.Multiply(1);this._add=this.output=new a.Add(0);this._scale.connect(this._add);this._setRange()};a.extend(a.Scale,a.SignalBase);a.Scale.prototype.setMin=function(a){this._outputMin=a;this._setRange()};a.Scale.prototype.setMax=function(a){this._outputMax=a;this._setRange()};a.Scale.prototype._setRange=function(){this._add.setValue(this._outputMin);this._scale.setValue(this._outputMax-
this._outputMin)};a.Scale.prototype.dispose=function(){a.prototype.dispose.call(this);this._add.dispose();this._add=null;this._scale.dispose();this._scale=null};return a.Scale}(e,c,k);(function(){e.setContext(a.audiocontext);g.Signal=function(a){return new d(a)};d.prototype.fade=d.prototype.linearRampToValueAtTime;k.prototype.fade=d.prototype.fade;c.prototype.fade=d.prototype.fade;r.prototype.fade=d.prototype.fade;d.prototype.setInput=function(a){a.connect(this)};k.prototype.setInput=d.prototype.setInput;
c.prototype.setInput=d.prototype.setInput;r.prototype.setInput=d.prototype.setInput;d.prototype.add=function(a){a=new c(a);this.connect(a);return a};k.prototype.add=d.prototype.add;c.prototype.add=d.prototype.add;r.prototype.add=d.prototype.add;d.prototype.mult=function(a){a=new k(a);this.connect(a);return a};k.prototype.mult=d.prototype.mult;c.prototype.mult=d.prototype.mult;r.prototype.mult=d.prototype.mult;d.prototype.scale=function(a,c,d,e){var h,k;4===arguments.length?(h=g.prototype.map(d,a,
c,0,1)-.5,k=g.prototype.map(e,a,c,0,1)-.5):(h=arguments[0],k=arguments[1]);h=new r(h,k);this.connect(h);return h};k.prototype.scale=d.prototype.scale;c.prototype.scale=d.prototype.scale;r.prototype.scale=d.prototype.scale})(d,c,k,r,e,a);var h;h=function(){g.Oscillator=function(c,d){if("string"===typeof c){var e=d;d=c;c=e}"number"===typeof d&&(e=d,d=c,c=e);this.started=!1;this.oscillator=a.audiocontext.createOscillator();this.f=c||440;this.oscillator.frequency.setValueAtTime(this.f,a.audiocontext.currentTime);
this.oscillator.type=d||"sine";this.input=a.audiocontext.createGain();this.output=a.audiocontext.createGain();this._freqMods=[];this.output.gain.value=.5;this.output.gain.setValueAtTime(.5,a.audiocontext.currentTime);this.oscillator.connect(this.output);this.panPosition=0;this.connection=a.input;this.panner=new g.Panner(this.output,this.connection,1);this.mathOps=[this.output];a.soundArray.push(this)};g.Oscillator.prototype.start=function(c,d){this.started&&this.stop(a.audiocontext.currentTime);if(!this.started){var e=
d||this.f,f=this.oscillator.type;this.oscillator=a.audiocontext.createOscillator();this.oscillator.frequency.exponentialRampToValueAtTime(Math.abs(e),a.audiocontext.currentTime);this.oscillator.type=f;this.oscillator.connect(this.output);this.oscillator.start((c||0)+a.audiocontext.currentTime);this.freqNode=this.oscillator.frequency;for(var g in this._freqMods)"undefined"!==typeof this._freqMods[g].connect&&this._freqMods[g].connect(this.oscillator.frequency);this.started=!0}};g.Oscillator.prototype.stop=
function(c){this.started&&(this.oscillator.stop((c||0)+a.audiocontext.currentTime),this.started=!1)};g.Oscillator.prototype.amp=function(c,d,e){if("number"===typeof c){d=d||0;e=e||0;var f=a.audiocontext.currentTime,g=this.output.gain.value;this.output.gain.cancelScheduledValues(f);this.output.gain.linearRampToValueAtTime(g,f+e);this.output.gain.linearRampToValueAtTime(c,f+e+d)}else if(c)console.log(c),c.connect(this.output.gain);else return this.output.gain};g.Oscillator.prototype.fade=g.Oscillator.prototype.amp;
g.Oscillator.prototype.getAmp=function(){return this.output.gain.value};g.Oscillator.prototype.freq=function(c,d,e){if("number"!==typeof c||isNaN(c))if(c)c.output&&(c=c.output),c.connect(this.oscillator.frequency),this._freqMods.push(c);else return this.oscillator.frequency;else{this.f=c;var f=a.audiocontext.currentTime;d=d||0;e=e||0;var g=this.oscillator.frequency.value;this.oscillator.frequency.cancelScheduledValues(f);this.oscillator.frequency.setValueAtTime(g,f+e);0<c?this.oscillator.frequency.exponentialRampToValueAtTime(c,
e+d+f):this.oscillator.frequency.linearRampToValueAtTime(c,e+d+f)}};g.Oscillator.prototype.getFreq=function(){return this.oscillator.frequency.value};g.Oscillator.prototype.setType=function(a){this.oscillator.type=a};g.Oscillator.prototype.getType=function(){return this.oscillator.type};g.Oscillator.prototype.connect=function(c){c?c.hasOwnProperty("input")?(this.panner.connect(c.input),this.connection=c.input):(this.panner.connect(c),this.connection=c):this.panner.connect(a.input)};g.Oscillator.prototype.disconnect=
function(a){this.output.disconnect();this.panner.disconnect();this.output.connect(this.panner);this.oscMods=[]};g.Oscillator.prototype.pan=function(a,c){this.panPosition=a;this.panner.pan(a,c)};g.Oscillator.prototype.getPan=function(){return this.panPosition};g.Oscillator.prototype.dispose=function(){this.oscillator&&(this.stop(a.audiocontext.currentTime),this.disconnect(),this.oscillator.disconnect(),this.oscillator=this.panner=null);this.osc2&&this.osc2.dispose()};g.Oscillator.prototype.phase=function(c){this.dNode||
(this.dNode=a.audiocontext.createDelay(),this.output.disconnect(),this.output.connect(this.dNode),this.dNode.connect(this.panner));var d=a.audiocontext.currentTime;this.dNode.delayTime.linearRampToValueAtTime(g.prototype.map(c,0,1,0,1/this.oscillator.frequency.value),d)};var d=function(a,c,d,e,f){var g=a.oscillator,h;for(h in a.mathOps)a.mathOps[h]instanceof f&&(g.disconnect(),a.mathOps[h].dispose(),d=h,d<a.mathOps.length-2&&(e=a.mathOps[h+1]));d==a.mathOps.length-1&&a.mathOps.push(e);0<h&&(g=a.mathOps[h-
1]);g.disconnect();g.connect(c);c.connect(e);a.mathOps[d]=c;return a};g.Oscillator.prototype.add=function(a){a=new c(a);return d(this,a,this.mathOps.length-1,this.output,c)};g.Oscillator.prototype.mult=function(a){a=new k(a);return d(this,a,this.mathOps.length-1,this.output,k)};g.Oscillator.prototype.scale=function(a,c,e,h){var k,m;4===arguments.length?(k=g.prototype.map(e,a,c,0,1)-.5,m=g.prototype.map(h,a,c,0,1)-.5):(k=arguments[0],m=arguments[1]);k=new r(k,m);return d(this,k,this.mathOps.length-
1,this.output,r)};g.SinOsc=function(a){g.Oscillator.call(this,a,"sine")};g.SinOsc.prototype=Object.create(g.Oscillator.prototype);g.TriOsc=function(a){g.Oscillator.call(this,a,"triangle")};g.TriOsc.prototype=Object.create(g.Oscillator.prototype);g.SawOsc=function(a){g.Oscillator.call(this,a,"sawtooth")};g.SawOsc.prototype=Object.create(g.Oscillator.prototype);g.SqrOsc=function(a){g.Oscillator.call(this,a,"square")};g.SqrOsc.prototype=Object.create(g.Oscillator.prototype)}(a,d,c,k,r);(function(){e.setContext(a.audiocontext);
var d=null,h=!1;g.Env=function(c,d,e,f,h,k,l,m){this.aTime=c;this.aLevel=d;this.dTime=e||0;this.dLevel=f||0;this.sTime=h||0;this.sLevel=k||0;this.rTime=l||0;this.rLevel=m||0;this.output=a.audiocontext.createGain();this.control=new g.Signal;this.control.connect(this.output);this.connection=null;this.mathOps=[this.control];a.soundArray.push(this)};g.Env.prototype.set=function(a,c,d,e,f,g,h,k){this.aTime=a;this.aLevel=c;this.dTime=d||0;this.dLevel=e||0;this.sTime=f||0;this.sLevel=g||0;this.rTime=h||
0;this.rLevel=k||0};g.Env.prototype.setInput=function(a){for(var c=0;c<arguments.length;c++)this.connect(arguments[c])};g.Env.prototype.ctrl=function(a){this.connect(a)};g.Env.prototype.play=function(c,d){var e=a.audiocontext.currentTime+(d||0);c&&this.connection!==c&&this.connect(c);var f=this.control.getValue();this.control.cancelScheduledValues(e);this.control.linearRampToValueAtTime(f,e);this.control.linearRampToValueAtTime(this.aLevel,e+this.aTime);this.control.linearRampToValueAtTime(this.dLevel,
e+this.aTime+this.dTime);this.control.linearRampToValueAtTime(this.sLevel,e+this.aTime+this.dTime+this.sTime);this.control.linearRampToValueAtTime(this.rLevel,e+this.aTime+this.dTime+this.sTime+this.rTime)};g.Env.prototype.triggerAttack=function(c,d){var e=a.audiocontext.currentTime+(d||0);this.lastAttack=e;h=!0;var f=this.control.getValue();console.log(f);this.control.cancelScheduledValues(e);this.control.linearRampToValueAtTime(f,e);c&&this.connection!==c&&this.connect(c);this.control.linearRampToValueAtTime(this.aLevel,
e+this.aTime);this.control.linearRampToValueAtTime(this.aLevel,e+this.aTime);this.control.linearRampToValueAtTime(this.dLevel,e+this.aTime+this.dTime);this.control.linearRampToValueAtTime(this.sLevel,e+this.aTime+this.dTime+this.sTime)};g.Env.prototype.triggerRelease=function(c,e){if(h){var g=a.audiocontext.currentTime,k=g+(e||0);c&&this.connection!==c&&this.connect(c);this.control.cancelScheduledValues(k);g-this.lastAttack<this.aTime?(g=this.aTime-(k-this.lastAttack),this.control.linearRampToValueAtTime(this.aLevel,
k+g),this.control.linearRampToValueAtTime(this.dLevel,k+g+this.dTime),this.control.linearRampToValueAtTime(this.sLevel,k+g+this.dTime+this.sTime),this.control.linearRampToValueAtTime(this.rLevel,k+g+this.dTime+this.sTime+this.rTime)):g-this.lastAttack<this.aTime+this.dTime?(g=this.aTime+this.dTime-(g-this.lastAttack),this.control.linearRampToValueAtTime(this.dLevel,k+g),this.control.linearRampToValueAtTime(this.sLevel,k+g+.01),this.control.linearRampToValueAtTime(this.rLevel,k+g+.01+this.rTime)):
g-this.lastAttack<this.aTime+this.dTime+this.sTime?(g=this.aTime+this.dTime+this.sTime-(g-this.lastAttack),this.control.linearRampToValueAtTime(this.sLevel,k+g),this.control.linearRampToValueAtTime(this.rLevel,k+g+this.rTime)):(this.control.linearRampToValueAtTime(this.sLevel,k),this.control.linearRampToValueAtTime(this.rLevel,k+this.rTime));k=k+this.aTime+this.dTime+this.sTime+this.rTime;this.connection&&this.connection.hasOwnProperty("oscillator")?(d=this.connection.oscillator,d.stop(k+.01)):this.connect&&
this.connection.hasOwnProperty("source")&&(d=this.connection.source,d.stop(k+.01));h=!1}};g.Env.prototype.connect=function(c){this.connection=c;if(c instanceof g.Oscillator||c instanceof g.SoundFile||c instanceof g.AudioIn||c instanceof g.Reverb||c instanceof g.Noise||c instanceof g.Filter||c instanceof g.Delay)c=c.output.gain;c instanceof AudioParam&&c.setValueAtTime(0,a.audiocontext.currentTime);c instanceof g.Signal&&c.setValue(0);this.output.connect(c)};g.Env.prototype.disconnect=function(a){this.output.disconnect()};
g.Env.prototype.add=function(a){a=new c(a);return g.prototype._mathChain(this,a,this.mathOps.length,this.output,c)};g.Env.prototype.mult=function(a){a=new k(a);return g.prototype._mathChain(this,a,this.mathOps.length,this.output,k)};g.Env.prototype.scale=function(a,c,d,e){a=new r(a,c,d,e);return g.prototype._mathChain(this,a,this.mathOps.length,this.output,r)};g.Env.prototype.dispose=function(){this.disconnect();try{this.control.dispose(),this.control=null}catch(a){}for(var c=1;c<this.mathOps.length;c++)mathOps[c].dispose()}})(a,
c,k,r,e);(function(){function c(){for(var a=d.audiocontext,e=a.createBuffer(1,2048,a.sampleRate),f=e.getChannelData(0),g=0;2048>g;g++)f[g]=1;a=a.createBufferSource();a.buffer=e;a.loop=!0;return a}var d=a;g.Pulse=function(a,e){g.Oscillator.call(this,a,"sawtooth");this.w=e||0;this.osc2=new g.SawOsc(a);this.dNode=d.audiocontext.createDelay();this.dcOffset=c();this.dcGain=d.audiocontext.createGain();this.dcOffset.connect(this.dcGain);this.dcGain.connect(this.output);this.f=a||440;this.dNode.delayTime.value=
this.w/this.oscillator.frequency.value;this.dcGain.gain.value=1.7*(.5-this.w);this.osc2.disconnect();this.osc2.output.gain.minValue=-10;this.osc2.output.gain.maxValue=10;this.osc2.panner.disconnect();this.osc2.amp(-1);this.osc2.output.connect(this.dNode);this.dNode.connect(this.output);this.output.gain.value=1;this.output.connect(this.panner)};g.Pulse.prototype=Object.create(g.Oscillator.prototype);g.Pulse.prototype.width=function(a){if("number"===typeof a)1>=a&&0<=a&&(this.w=a,this.dNode.delayTime.value=
this.w/this.oscillator.frequency.value),this.dcGain.gain.value=1.7*(.5-this.w);else{a.connect(this.dNode.delayTime);var c=new g.SignalAdd(-.5);c.setInput(a);c=c.mult(-1);c=c.mult(1.7);c.connect(this.dcGain.gain)}};g.Pulse.prototype.start=function(a,e){var g=d.audiocontext.currentTime,h=e||0;if(!this.started){var k=a||this.f,m=this.oscillator.type;this.oscillator=d.audiocontext.createOscillator();this.oscillator.frequency.setValueAtTime(k,g);this.oscillator.type=m;this.oscillator.connect(this.output);
this.oscillator.start(h+g);this.osc2.oscillator=d.audiocontext.createOscillator();this.osc2.oscillator.frequency.setValueAtTime(k,h+g);this.osc2.oscillator.type=m;this.osc2.oscillator.connect(this.osc2.output);this.osc2.start(h+g);this.freqNode=[this.oscillator.frequency,this.osc2.oscillator.frequency];this.dcOffset=c();this.dcOffset.connect(this.dcGain);this.dcOffset.start(h+g);void 0!==this.mods&&void 0!==this.mods.frequency&&(this.mods.frequency.connect(this.freqNode[0]),this.mods.frequency.connect(this.freqNode[1]));
this.started=!0;this.osc2.started=!0}};g.Pulse.prototype.stop=function(a){if(this.started){a=a||0;var c=d.audiocontext.currentTime;this.oscillator.stop(a+c);this.osc2.oscillator.stop(a+c);this.dcOffset.stop(a+c);this.started=!1;this.osc2.started=!1}};g.Pulse.prototype.freq=function(a,c,e){if("number"===typeof a){this.f=a;var f=d.audiocontext.currentTime;c=c||0;e=e||0;var g=this.oscillator.frequency.value;this.oscillator.frequency.cancelScheduledValues(f);this.oscillator.frequency.setValueAtTime(g,
f+e);this.oscillator.frequency.exponentialRampToValueAtTime(a,e+c+f);this.osc2.oscillator.frequency.cancelScheduledValues(f);this.osc2.oscillator.frequency.setValueAtTime(g,f+e);this.osc2.oscillator.frequency.exponentialRampToValueAtTime(a,e+c+f);this.freqMod&&(this.freqMod.output.disconnect(),this.freqMod=null)}else a.output&&(a.output.disconnect(),a.output.connect(this.oscillator.frequency),a.output.connect(this.osc2.oscillator.frequency),this.freqMod=a)}})(a,h);(function(){g.Noise=function(a){g.Oscillator.call(this);
delete this.f;delete this.freq;delete this.oscillator;this.buffer=c};g.Noise.prototype=Object.create(g.Oscillator.prototype);var c=function(){for(var c=2*a.audiocontext.sampleRate,d=a.audiocontext.createBuffer(1,c,a.audiocontext.sampleRate),e=d.getChannelData(0),f=0;f<c;f++)e[f]=2*Math.random()-1;d.type="white";return d}(),d=function(){for(var c=2*a.audiocontext.sampleRate,d=a.audiocontext.createBuffer(1,c,a.audiocontext.sampleRate),e=d.getChannelData(0),f,g,h,k,l,m,t,p=f=g=h=k=l=m=t=0;p<c;p++){var r=
2*Math.random()-1;f=.99886*f+.0555179*r;g=.99332*g+.0750759*r;h=.969*h+.153852*r;k=.8665*k+.3104856*r;l=.55*l+.5329522*r;m=-.7616*m-.016898*r;e[p]=f+g+h+k+l+m+t+.5362*r;e[p]*=.11;t=.115926*r}d.type="pink";return d}(),e=function(){for(var c=2*a.audiocontext.sampleRate,d=a.audiocontext.createBuffer(1,c,a.audiocontext.sampleRate),e=d.getChannelData(0),f=0,g=0;g<c;g++){var h=2*Math.random()-1;e[g]=(f+.02*h)/1.02;f=e[g];e[g]*=3.5}d.type="brown";return d}();g.Noise.prototype.setType=function(g){switch(g){case "white":this.buffer=
c;break;case "pink":this.buffer=d;break;case "brown":this.buffer=e;break;default:this.buffer=c}this.started&&(g=a.audiocontext.currentTime,this.stop(g),this.start(g+.01))};g.Noise.prototype.getType=function(){return this.buffer.type};g.Noise.prototype.start=function(){this.started&&this.stop();this.noise=a.audiocontext.createBufferSource();this.noise.buffer=this.buffer;this.noise.loop=!0;this.noise.connect(this.output);this.noise.start(a.audiocontext.currentTime);this.started=!0};g.Noise.prototype.stop=
function(){var c=a.audiocontext.currentTime;this.noise&&(this.noise.stop(c),this.started=!1)};g.Noise.prototype.dispose=function(){var c=a.audiocontext.currentTime;this.noise&&(this.noise.disconnect(),this.stop(c));this.output&&this.output.disconnect();this.panner&&this.panner.disconnect();this.noise=this.buffer=this.panner=this.output=null}})(a);(function(){g.AudioIn=function(){this.input=a.audiocontext.createGain();this.output=a.audiocontext.createGain();this.mediaStream=this.stream=null;this.currentSource=
0;this.enabled=!1;this.amplitude=new g.Amplitude;this.output.connect(this.amplitude.input);"undefined"===typeof window.MediaStreamTrack?window.alert("This browser does not support MediaStreamTrack"):"undefined"!==typeof window.MediaStreamTrack.getSources&&window.MediaStreamTrack.getSources(this._gotSources);a.soundArray.push(this)};g.AudioIn.prototype.start=function(){var c=this;a.inputSources[c.currentSource]?navigator.getUserMedia({audio:{optional:[{sourceId:a.inputSources[c.currentSource].id}]}},
this._onStream=function(d){c.stream=d;c.enabled=!0;c.mediaStream=a.audiocontext.createMediaStreamSource(d);c.mediaStream.connect(c.output);c.amplitude.setInput(c.output)},this._onStreamError=function(a){console.error(a)}):window.navigator.getUserMedia({audio:!0},this._onStream=function(d){c.stream=d;c.enabled=!0;c.mediaStream=a.audiocontext.createMediaStreamSource(d);c.mediaStream.connect(c.output);c.amplitude.setInput(c.output)},this._onStreamError=function(a){console.error(a)})};g.AudioIn.prototype.stop=
function(){this.stream&&this.stream.stop()};g.AudioIn.prototype.connect=function(c){c?c.hasOwnProperty("input")?this.output.connect(c.input):c.hasOwnProperty("analyser")?this.output.connect(c.analyser):this.output.connect(c):this.output.connect(a.input)};g.AudioIn.prototype.disconnect=function(a){this.output.disconnect(a);this.output.connect(this.amplitude.input)};g.AudioIn.prototype.getLevel=function(a){a&&(this.amplitude.smoothing=a);return this.amplitude.getLevel()};g.AudioIn.prototype._gotSources=
function(c){for(var d=0;d!==c.length;d++){var e=c[d];"audio"===e.kind&&a.inputSources.push(e)}};g.AudioIn.prototype.amp=function(c,d){if(d){var e=d||0,g=this.output.gain.value;this.output.gain.cancelScheduledValues(a.audiocontext.currentTime);this.output.gain.setValueAtTime(g,a.audiocontext.currentTime);this.output.gain.linearRampToValueAtTime(c,e+a.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(a.audiocontext.currentTime),this.output.gain.setValueAtTime(c,a.audiocontext.currentTime)};
g.AudioIn.prototype.listSources=function(){console.log("input sources: ");console.log(a.inputSources);return 0<a.inputSources.length?a.inputSources:"This browser does not support MediaStreamTrack.getSources()"};g.AudioIn.prototype.setSource=function(c){0<a.inputSources.length&&c<a.inputSources.length?(this.currentSource=c,console.log("set source to "+a.inputSources[this.currentSource].id)):console.log("unable to set input source")};g.AudioIn.prototype.dispose=function(){this.stop();this.output&&this.output.disconnect();
this.amplitude&&this.amplitude.disconnect();this.output=this.amplitude=null}})(a);h=function(){g.Filter=function(c){this.ac=a.audiocontext;this.input=this.ac.createGain();this.output=this.ac.createGain();this.biquad=this.ac.createBiquadFilter();this.input.connect(this.biquad);this.biquad.connect(this.output);this.connect();c&&this.setType(c)};g.Filter.prototype.process=function(a,c,d){a.connect(this.input);this.set(c,d)};g.Filter.prototype.set=function(a,c,d){a&&this.freq(a,d);c&&this.res(c,d)};g.Filter.prototype.freq=
function(a,c){var d=c||0;0>=a&&(a=1);"number"===typeof a?(this.biquad.frequency.value=a,this.biquad.frequency.cancelScheduledValues(this.ac.currentTime+.01+d),this.biquad.frequency.exponentialRampToValueAtTime(a,this.ac.currentTime+.02+d)):a&&a.connect(this.biquad.frequency);return this.biquad.frequency.value};g.Filter.prototype.res=function(a,c){var d=c||0;"number"==typeof a?(this.biquad.Q.value=a,this.biquad.Q.cancelScheduledValues(this.ac.currentTime+.01+d),this.biquad.Q.linearRampToValueAtTime(a,
this.ac.currentTime+.02+d)):a&&freq.connect(this.biquad.Q);return this.biquad.Q.value};g.Filter.prototype.setType=function(a){this.biquad.type=a};g.Filter.prototype.amp=function(c,d,e){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=this.output.gain.value;this.output.gain.cancelScheduledValues(g);this.output.gain.linearRampToValueAtTime(h,g+e+.001);this.output.gain.linearRampToValueAtTime(c,g+e+d+.001)};g.Filter.prototype.connect=function(a){this.output.connect(a||g.soundOut.input)};g.Filter.prototype.disconnect=
function(){this.output.disconnect()};g.LowPass=function(){g.Filter.call(this,"lowpass")};g.LowPass.prototype=Object.create(g.Filter.prototype);g.HighPass=function(){g.Filter.call(this,"highpass")};g.HighPass.prototype=Object.create(g.Filter.prototype);g.BandPass=function(){g.Filter.call(this,"bandpass")};g.BandPass.prototype=Object.create(g.Filter.prototype)}(a);(function(){g.Delay=function(){this.ac=a.audiocontext;this.input=this.ac.createGain();this.output=this.ac.createGain();this._split=this.ac.createChannelSplitter(2);
this._merge=this.ac.createChannelMerger(2);this._leftGain=this.ac.createGain();this._rightGain=this.ac.createGain();this.leftDelay=this.ac.createDelay();this.rightDelay=this.ac.createDelay();this._leftFilter=new g.Filter;this._rightFilter=new g.Filter;this._leftFilter.disconnect();this._rightFilter.disconnect();this.lowPass=this._leftFilter;this._leftFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime);this._rightFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime);this._leftFilter.biquad.Q.setValueAtTime(.3,
this.ac.currentTime);this._rightFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime);this.input.connect(this._split);this.leftDelay.connect(this._leftGain);this.rightDelay.connect(this._rightGain);this._leftGain.connect(this._leftFilter.input);this._rightGain.connect(this._rightFilter.input);this._merge.connect(this.output);this.output.connect(g.soundOut.input);this._leftFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime);this._rightFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime);
this.setType(0);this._maxDelay=this.leftDelay.delayTime.maxValue};g.Delay.prototype.process=function(a,c,d,e){d=d||0;c=c||0;if(1<=d)throw Error("Feedback value will force a positive feedback loop.");if(c>=this._maxDelay)throw Error("Delay Time exceeds maximum delay time of "+this._maxDelay+" second.");a.connect(this.input);this.leftDelay.delayTime.setValueAtTime(c,this.ac.currentTime);this.rightDelay.delayTime.setValueAtTime(c,this.ac.currentTime);this._leftGain.gain.setValueAtTime(d,this.ac.currentTime);
this._rightGain.gain.setValueAtTime(d,this.ac.currentTime);e&&(this._leftFilter.freq(e),this._rightFilter.freq(e))};g.Delay.prototype.delayTime=function(a){"number"!==typeof a?(a.connect(this.leftDelay.delayTime),a.connect(this.rightDelay.delayTime)):(this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.leftDelay.delayTime.linearRampToValueAtTime(a,this.ac.currentTime),this.rightDelay.delayTime.linearRampToValueAtTime(a,
this.ac.currentTime))};g.Delay.prototype.feedback=function(a){if("number"!==typeof a)a.connect(this._leftGain.gain),a.connect(this._rightGain.gain);else{if(1<=a)throw Error("Feedback value will force a positive feedback loop.");this._leftGain.gain.exponentialRampToValueAtTime(a,this.ac.currentTime);this._rightGain.gain.exponentialRampToValueAtTime(a,this.ac.currentTime)}};g.Delay.prototype.filter=function(a,c){this._leftFilter.set(a,c);this._rightFilter.set(a,c)};g.Delay.prototype.setType=function(a){1===
a&&(a="pingPong");this._split.disconnect();this._leftFilter.disconnect();this._rightFilter.disconnect();this._split.connect(this.leftDelay,0);this._split.connect(this.rightDelay,1);switch(a){case "pingPong":this._rightFilter.setType(this._leftFilter.biquad.type);this._leftFilter.output.connect(this._merge,0,0);this._rightFilter.output.connect(this._merge,0,1);this._leftFilter.output.connect(this.rightDelay);this._rightFilter.output.connect(this.leftDelay);break;default:this._leftFilter.output.connect(this._merge,
0,0),this._leftFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.leftDelay),this._leftFilter.output.connect(this.rightDelay)}};g.Delay.prototype.amp=function(c,d,e){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=this.output.gain.value;this.output.gain.cancelScheduledValues(g);this.output.gain.linearRampToValueAtTime(h,g+e+.001);this.output.gain.linearRampToValueAtTime(c,g+e+d+.001)};g.Delay.prototype.connect=function(a){this.output.connect(a||g.soundOut.input)};g.Delay.prototype.disconnect=
function(){this.output.disconnect()}})(a,h);(function(){g.Reverb=function(){this.ac=a.audiocontext;this.convolverNode=this.ac.createConvolver();this.input=this.ac.createGain();this.output=this.ac.createGain();this.input.gain.value=.5;this.input.connect(this.convolverNode);this.convolverNode.connect(this.output);this._seconds=3;this._decay=2;this._reverse=!1;this._buildImpulse();this.connect();a.soundArray.push(this)};g.Reverb.prototype.process=function(a,c,d,e){a.connect(this.input);a=!1;c&&(this._seconds=
c,a=!0);d&&(this._decay=d);e&&(this._reverse=e);a&&this._buildImpulse()};g.Reverb.prototype.set=function(a,c,d){var e=!1;a&&(this._seconds=a,e=!0);c&&(this._decay=c);d&&(this._reverse=d);e&&this._buildImpulse()};g.Reverb.prototype.amp=function(c,d,e){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=this.output.gain.value;this.output.gain.cancelScheduledValues(g);this.output.gain.linearRampToValueAtTime(h,g+e+.001);this.output.gain.linearRampToValueAtTime(c,g+e+d+.001)};g.Reverb.prototype.connect=
function(a){a=a||g.soundOut.input;this.output.connect(a.input?a.input:a)};g.Reverb.prototype.disconnect=function(){this.output.disconnect()};g.Reverb.prototype._buildImpulse=function(){var a=this.ac.sampleRate,c=a*this._seconds,d=this._decay,a=this.ac.createBuffer(2,c,a),e=a.getChannelData(0),g=a.getChannelData(1),h,k;for(k=0;k<c;k++)h=this.reverse?c-k:k,e[k]=(2*Math.random()-1)*Math.pow(1-h/c,d),g[k]=(2*Math.random()-1)*Math.pow(1-h/c,d);this.convolverNode.buffer=a};g.Reverb.prototype.dispose=function(){this.convolverNode=
this.convolverNode.buffer=null;"undefined"!==typeof this.output&&(this.output.disconnect(),this.output=null);"undefined"!==typeof this.panner&&(this.panner.disconnect(),this.panner=null)};g.Convolver=function(c,d){this.ac=a.audiocontext;this.convolverNode=this.ac.createConvolver();this.input=this.ac.createGain();this.output=this.ac.createGain();this.input.gain.value=.5;this.input.connect(this.convolverNode);this.convolverNode.connect(this.output);c?(this.impulses=[],this._loadBuffer(c,d)):(this._seconds=
3,this._decay=2,this._reverse=!1,this._buildImpulse());this.connect();a.soundArray.push(this)};g.Convolver.prototype=Object.create(g.Reverb.prototype);g.prototype.registerPreloadMethod("createConvolver");g.prototype.createConvolver=function(a,c){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");var d=new g.Convolver(a,c);d.impulses=[];return d};g.Convolver.prototype._loadBuffer=
function(a,c){a=g.prototype._checkFileFormats(a);var d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType="arraybuffer";var e=this;d.onload=function(){g.prototype.getAudioContext().decodeAudioData(d.response,function(d){var g={},h=a.split("/");g.name=h[h.length-1];g.audioBuffer=d;e.impulses.push(g);e.convolverNode.buffer=g.audioBuffer;c&&c(g)})};d.send()};g.Convolver.prototype.set=null;g.Convolver.prototype.process=function(a){a.connect(this.input)};g.Convolver.prototype.impulses=[];g.Convolver.prototype.addImpulse=
function(a,c){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");this._loadBuffer(a,c)};g.Convolver.prototype.resetImpulse=function(a,c){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");this.impulses=[];this._loadBuffer(a,c)};g.Convolver.prototype.toggleImpulse=
function(a){"number"===typeof a&&a<this.impulses.length&&(this.convolverNode.buffer=this.impulses[a].audioBuffer);if("string"===typeof a)for(var c=0;c<this.impulses.length;c++)if(this.impulses[c].name===a){this.convolverNode.buffer=this.impulses[c].audioBuffer;break}};g.Convolver.prototype.dispose=function(){for(var a in this.impulses)this.impulses[a]=null;this.convolverNode.disconnect();this.concolverNode=null;"undefined"!==typeof this.output&&(this.output.disconnect(),this.output=null);"undefined"!==
typeof this.panner&&(this.panner.disconnect(),this.panner=null)}})(a,p);var m;m=function(a){a.Clock=function(c,d){this._oscillator=null;this._jsNode=this.context.createScriptProcessor(this.bufferSize,1,1);this._jsNode.onaudioprocess=this._processBuffer.bind(this);this._controlSignal=new a.Signal(1);this._upTick=!1;this.tick=this.defaultArg(d,function(){});this._jsNode.noGC();this.setRate(c)};a.extend(a.Clock);a.Clock.prototype.setRate=function(a,c){var d=this.secondsToFrequency(this.toSeconds(a));
c?this._controlSignal.exponentialRampToValueNow(d,c):(this._controlSignal.cancelScheduledValues(0),this._controlSignal.setValue(d))};a.Clock.prototype.getRate=function(){return this._controlSignal.getValue()};a.Clock.prototype.start=function(a){this._oscillator=this.context.createOscillator();this._oscillator.type="square";this._oscillator.connect(this._jsNode);this._controlSignal.connect(this._oscillator.frequency);this._upTick=!1;a=this.toSeconds(a);this._oscillator.start(a);this._oscillator.onended=
function(){}};a.Clock.prototype.stop=function(a,c){var d=this.toSeconds(a);this._oscillator.onended=c;this._oscillator.stop(d)};a.Clock.prototype._processBuffer=function(a){var c=this.defaultArg(a.playbackTime,this.now()),d=this._jsNode.bufferSize;a=a.inputBuffer.getChannelData(0);for(var e=this._upTick,f=this,g=0;g<d;g++){var h=a[g];0<h&&!e?(e=!0,setTimeout(function(){var a=c+f.samplesToSeconds(g+2*d);return function(){f.tick(a)}}(),0)):0>h&&e&&(e=!1)}this._upTick=e};a.Clock.prototype.dispose=function(){this._jsNode.disconnect();
this._controlSignal.dispose();this._oscillator&&(this._oscillator.onended(),this._oscillator.disconnect());this._jsNode.onaudioprocess=function(){};this._oscillator=this._controlSignal=this._jsNode=null};return a.Clock}(e);(function(){var c=a.audiocontext;g.Metro=function(){this.clock=new m(c.sampleRate,this.ontick.bind(this));this.syncedParts=[];this.bpm=120;this._init();this.tickCallback=function(){}};var d=0,e=0;g.Metro.prototype.ontick=function(c){var f=c-a.audiocontext.currentTime;if(!(-.02>=
c-d-e)){d=c;for(var g in this.syncedParts){c=this.syncedParts[g];c.incrementStep(f);for(var h in c.phrases){var k=c.phrases[h],m=k.sequence,p=this.metroTicks%m.length;0!==m[p]&&(this.metroTicks<m.length||!k.looping)&&k.callback(m[p],f)}}this.metroTicks+=1;this.tickCallback(f)}};g.Metro.prototype.setBPM=function(c,d){var f=60/(c*this.tatums);e=f;this.clock.setRate(f,d+a.audiocontext.currentTime);this.bpm=c};g.Metro.prototype.getBPM=function(a){return this.clock.getRate()/this.tatums*60};g.Metro.prototype._init=
function(){this.metroTicks=0};g.Metro.prototype.resetSync=function(a){this.syncedParts=[a]};g.Metro.prototype.pushSync=function(a){this.syncedParts.push(a)};g.Metro.prototype.start=function(a){this.clock.start(a||0);this.setBPM(this.bpm)};g.Metro.prototype.stop=function(a){this.clock._oscillator&&this.clock.stop(a||0)};g.Metro.prototype.beatLength=function(a){this.tatums=1/a/4}})(a,m);(function(){var c=120;g.prototype.setBPM=function(d,e){c=d;for(var g in a.parts)a.parts[g].setBPM(c,e)};g.Phrase=
function(a,c,d){this.phraseStep=0;this.name=a;this.callback=c;this.sequence=d};g.Part=function(d,e){this.length=d||0;this.partStep=0;this.phrases=[];this.isPlaying=this.looping=!1;this.onended=function(){this.stop()};this.tatums=e||.0625;this.metro=new g.Metro;this.metro._init();this.metro.beatLength(this.tatums);this.metro.setBPM(c);a.parts.push(this);this.callback=function(){}};g.Part.prototype.setBPM=function(a,c){this.metro.setBPM(a,c)};g.Part.prototype.getBPM=function(){return this.metro.getBPM()};
g.Part.prototype.start=function(a){this.isPlaying||(this.isPlaying=!0,this.metro.resetSync(this),this.metro.start(a||0))};g.Part.prototype.loop=function(a){this.looping=!0;this.onended=function(){this.partStep=0};this.start(a||0)};g.Part.prototype.noLoop=function(){this.looping=!1;this.onended=function(){this.stop()}};g.Part.prototype.stop=function(a){this.partStep=0;this.pause(a)};g.Part.prototype.pause=function(a){this.isPlaying=!1;this.metro.stop(a||0)};g.Part.prototype.addPhrase=function(a,c,
d){var e;if(3===arguments.length)e=new g.Phrase(a,c,d);else if(arguments[0]instanceof g.Phrase)e=arguments[0];else throw"invalid input. addPhrase accepts name, callback, array or a p5.Phrase";this.phrases.push(e);e.sequence.length>this.length&&(this.length=e.sequence.length)};g.Part.prototype.removePhrase=function(a){for(var c in this.phrases)this.phrases[c].name===a&&this.phrases.split(c,1)};g.Part.prototype.getPhrase=function(a){for(var c in this.phrases)if(this.phrases[c].name===a)return this.phrases[c]};
g.Part.prototype.replaceSequence=function(a,c){for(var d in this.phrases)this.phrases[d].name===a&&(this.phrases[d].sequence=c)};g.Part.prototype.incrementStep=function(a){this.partStep<this.length-1?(this.callback(a),this.partStep+=1):(this.looping&&this.callback(a),this.onended(),this.partStep=0)};g.Part.prototype.onStep=function(a){this.callback=a};g.Score=function(){this.parts=[];this.currentPart=0;var a=this,c;for(c in arguments)this.parts[c]=arguments[c],this.parts[c].nextPart=this.parts[c+
1],this.parts[c].onended=function(){a.resetPart(c);var d=a;d.currentPart++;d.currentPart>=d.parts.length?(d.scoreStep=0,d.onended()):(d.scoreStep=0,d.parts[d.currentPart-1].stop(),d.parts[d.currentPart].start())};this.looping=!1};g.Score.prototype.onended=function(){this.looping?this.parts[0].start():this.parts[this.parts.length-1].onended=function(){this.stop();this.resetParts()};this.currentPart=0};g.Score.prototype.start=function(){this.parts[this.currentPart].start();this.scoreStep=0};g.Score.prototype.stop=
function(){this.parts[this.currentPart].stop();this.scoreStep=this.currentPart=0};g.Score.prototype.pause=function(){this.parts[this.currentPart].stop()};g.Score.prototype.loop=function(){this.looping=!0;this.start()};g.Score.prototype.noLoop=function(){this.looping=!1};g.Score.prototype.resetParts=function(){for(var a in this.parts)this.resetPart(a)};g.Score.prototype.resetPart=function(a){this.parts[a].stop();this.parts[a].partStep=0;for(var c in this.parts[a].phrases)this.parts[a].phrases[c].phraseStep=
0};g.Score.prototype.setBPM=function(a,c){for(var d in this.parts)this.parts[d].setBPM(a,c)}})(a);(function(){function c(a,d,e){for(var f=e.length,g=0;g<f;g++)a.setUint8(d+g,e.charCodeAt(g))}var d=a.audiocontext;g.SoundRecorder=function(){this.input=d.createGain();this.output=d.createGain();this.recording=!1;this.bufferSize=1024;this._channels=2;this._clear();this._jsNode=d.createScriptProcessor(this.bufferSize,this._channels,2);this._jsNode.onaudioprocess=this._audioprocess.bind(this);this._callback=
function(){};this._jsNode.connect(g.soundOut._silentNode);this.setInput();a.soundArray.push(this)};g.SoundRecorder.prototype.setInput=function(a){this.input.disconnect();this.input=null;this.input=d.createGain();this.input.connect(this._jsNode);this.input.connect(this.output);a?a.connect(this.input):g.soundOut.output.connect(this.input)};g.SoundRecorder.prototype.record=function(a,c,e){this.recording=!0;c&&(this.sampleLimit=Math.round(c*d.sampleRate));a&&e?this._callback=function(){this.buffer=this._getBuffer();
a.setBuffer(this.buffer);e()}:a&&(this._callback=function(){this.buffer=this._getBuffer();a.setBuffer(this.buffer)})};g.SoundRecorder.prototype.stop=function(){this.recording=!1;this._callback();this._clear()};g.SoundRecorder.prototype._clear=function(){this._leftBuffers=[];this._rightBuffers=[];this.recordedSamples=0;this.sampleLimit=null};g.SoundRecorder.prototype._audioprocess=function(a){if(!1!==this.recording&&!0===this.recording)if(this.sampleLimit&&this.recordedSamples>=this.sampleLimit)this.stop();
else{var c=a.inputBuffer.getChannelData(0);a=a.inputBuffer.getChannelData(1);this._leftBuffers.push(new Float32Array(c));this._rightBuffers.push(new Float32Array(a));this.recordedSamples+=this.bufferSize}};g.SoundRecorder.prototype._getBuffer=function(){var a=[];a.push(this._mergeBuffers(this._leftBuffers));a.push(this._mergeBuffers(this._rightBuffers));return a};g.SoundRecorder.prototype._mergeBuffers=function(a){for(var c=new Float32Array(this.recordedSamples),d=0,e=a.length,f=0;f<e;f++){var g=
a[f];c.set(g,d);d+=g.length}return c};g.SoundRecorder.prototype.dispose=function(){this._clear();this._callback=function(){};this.input&&this.input.disconnect();this._jsNode=this.input=null};g.prototype.saveSound=function(a,d){for(var e=a.buffer.getChannelData(0),h=a.buffer.getChannelData(1),k=e.length+h.length,l=new Float32Array(k),m=0,p=0;p<k;)l[p++]=e[m],l[p++]=h[m],m++;e=new ArrayBuffer(44+2*l.length);e=new DataView(e);c(e,0,"RIFF");e.setUint32(4,44+2*l.length,!0);c(e,8,"WAVE");c(e,12,"fmt ");
e.setUint32(16,16,!0);e.setUint16(20,1,!0);e.setUint16(22,2,!0);e.setUint32(24,44100,!0);e.setUint32(28,176400,!0);e.setUint16(32,4,!0);e.setUint16(34,16,!0);c(e,36,"data");e.setUint32(40,2*l.length,!0);h=l.length;k=44;for(m=0;m<h;m++)e.setInt16(k,32767*l[m],!0),k+=2;g.prototype.writeFile([e],d,"wav")}})(p,a);(function(){g.PeakDetect=function(a,c,d,e){this.framesPerPeak=e||5;this.framesSinceLastPeak=0;this.decayRate=.95;this.threshold=d||.25;this.penergy=this.energy=this.cutoff=0;this.isDetected=
!1;this.f1=a||40;this.f2=c||2E4;this._onPeak=function(){}};g.PeakDetect.prototype.update=function(a){a=this.energy=a.getEnergy(this.f1,this.f2)/255;a>this.cutoff&&a>this.threshold&&0<a-this.penergy?(this._onPeak(),this.isDetected=!0,this.cutoff=1.1*a,this.framesSinceLastPeak=0):(this.isDetected=!1,this.framesSinceLastPeak<=this.framesPerPeak?this.framesSinceLastPeak++:(this.cutoff*=this.decayRate,this.cutoff=Math.max(this.cutoff,this.threshold)));this.penergy=a};g.PeakDetect.prototype.onPeak=function(a,
c){var d=this;d._onPeak=function(){a(d.energy,c)}}})(a)});
