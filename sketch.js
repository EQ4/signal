(function(e,p){"function"===typeof define&&define.amd?define("p5",[],function(){return e.returnExportsGlobal=p()}):"object"===typeof exports?module.exports=p():e.p5=p()})(this,function(){var e={};e.shim=function(e){window.requestDraw=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,k){window.setTimeout(a,1E3/60)}}();"undefined"!==typeof Uint8ClampedArray&&(Uint8ClampedArray.prototype.slice=
Array.prototype.slice)}({});e.constants=function(e){e=Math.PI;return{P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:e/2,PI:e,QUARTER_PI:e/4,TAU:2*e,TWO_PI:2*e,DEGREES:"degrees",RADIANS:"radians",CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:"points",LINES:"lines",TRIANGLES:"triangles",TRIANGLE_FAN:"triangles_fan",TRIANGLE_STRIP:"triangles_strip",
QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"normal",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"source-over",
OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF"}}({});e.core=function(e,a,k){var c=
function(d,g,m){2===arguments.length&&"boolean"===typeof g&&(m=g,g=void 0);this._setupDone=!1;this.pixelDensity=window.devicePixelRatio||1;this._startTime=(new Date).getTime();this._userNode=g;this._curElement=null;this._elements=[];this._updateInterval=this._preloadCount=0;this._isGlobal=!1;this._loop=!0;this._styles=[];this._defaultCanvasSize={width:100,height:100};this._events={mousemove:null,mousedown:null,mouseup:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,
touchstart:null,touchmove:null,touchend:null,resize:null,blur:null};window.DeviceOrientationEvent?this._events.deviceorientation=null:window.DeviceMotionEvent?this._events.devicemotion=null:this._events.MozOrientation=null;/Firefox/i.test(navigator.userAgent)?this._events.DOMMouseScroll=null:this._events.mousewheel=null;this._loadingScreenId="p5_loading";this._start=function(){this._userNode&&"string"===typeof this._userNode&&(this._userNode=document.getElementById(this._userNode));this._loadingScreen=
document.getElementById(this._loadingScreenId);this._loadingScreen||(this._loadingScreen=document.createElement("loadingDiv"),this._loadingScreen.innerHTML="loading...",this._loadingScreen.style.position="absolute",(this._userNode||document.body).appendChild(this._loadingScreen));this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d",!0);var f=this.preload||window.preload,h=this._isGlobal?window:this;f?(this._preloadMethods.forEach(function(f){h[f]=function(){var l=Array.prototype.slice.call(arguments);
return h._preload(f,l)}}),f(),0===this._preloadCount&&(this._setup(),this._runFrames(),this._draw())):(this._setup(),this._runFrames(),this._draw())}.bind(this);this._preload=function(f,h){var l=this._isGlobal?window:this;l._setProperty("_preloadCount",l._preloadCount+1);h.push(function(f){l._setProperty("_preloadCount",l._preloadCount-1);0===l._preloadCount&&(l._setup(),l._runFrames(),l._draw())});return c.prototype[f].apply(l,h)}.bind(this);this._setup=function(){var f=this._isGlobal?window:this;
"function"===typeof f.preload&&this._preloadMethods.forEach(function(h){f[h]=c.prototype[h]});"function"===typeof f.setup&&f.setup();for(var h=new RegExp(/(^|\s)p5_hidden(?!\S)/g),l=document.getElementsByClassName("p5_hidden"),d=0;d<l.length;d++){var n=l[d];n.style.visibility="";n.className=n.className.replace(h,"")}this._setupDone=!0;this._loadingScreen.parentNode.removeChild(this._loadingScreen)}.bind(this);this._draw=function(){var f=(new Date).getTime();this._frameRate=1E3/(f-this._lastFrameTime);
this._lastFrameTime=f;this._setProperty("frameCount",this.frameCount+1);this._loop&&(this._drawInterval&&clearInterval(this._drawInterval),this._drawInterval=setTimeout(function(){window.requestDraw(this._draw.bind(this))}.bind(this),1E3/this._targetFrameRate));this.redraw();this._updatePAccelerations();this._updatePMouseCoords();this._updatePTouchCoords()}.bind(this);this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this);this._setProperty=function(f,h){this[f]=
h;this._isGlobal&&(window[f]=h)}.bind(this);this.remove=function(){if(this._curElement){this._loop=!1;this._drawInterval&&clearTimeout(this._drawInterval);this._updateInterval&&clearTimeout(this._updateInterval);for(var f in this._events)window.removeEventListener(f,this._events[f]);for(f=0;f<this._elements.length;f++){var h=this._elements[f];h.elt.parentNode&&h.elt.parentNode.removeChild(h.elt);for(var l in h._events)h.elt.removeEventListener(l,h._events[l])}var d=this;this._registeredMethods.remove.forEach(function(f){"undefined"!==
typeof f&&f.call(d)});if(this._isGlobal){for(var n in c.prototype)try{delete window[n]}catch(m){window[n]=void 0}for(var r in this)if(this.hasOwnProperty(r))try{delete window[r]}catch(g){window[r]=void 0}}}}.bind(this);for(var h in k)c.prototype[h]=k[h];if(d)d(this);else{this._isGlobal=!0;for(var n in c.prototype)"function"===typeof c.prototype[n]?(h=n.substring(2),this._events.hasOwnProperty(h)||(window[n]=c.prototype[n].bind(this))):window[n]=c.prototype[n];for(var f in this)this.hasOwnProperty(f)&&
(window[f]=this[f])}for(var l in this._events)if(n=this["_on"+l])n=n.bind(this),window.addEventListener(l,n),this._events[l]=n;var r=this;window.addEventListener("focus",function(){r._setProperty("focused",!0)});window.addEventListener("blur",function(){r._setProperty("focused",!1)});m?this._start():"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)};c.prototype._preloadMethods="loadJSON loadImage loadStrings loadXML loadShape loadTable loadFont".split(" ");
c.prototype._registeredMethods={pre:[],post:[],remove:[]};c.prototype.registerPreloadMethod=function(d){c.prototype._preloadMethods.push(d)}.bind(this);c.prototype.registerMethod=function(d,g){c.prototype._registeredMethods.hasOwnProperty(d)||(c.prototype._registeredMethods[d]=[]);c.prototype._registeredMethods[d].push(g)}.bind(this);return c}({},e.shim,e.constants);e.utilscolor_utils=function(e,a){a.ColorUtils={};a.ColorUtils.hsbaToRGBA=function(a){var c=a[0],d=a[1],g=a[2],c=c/255,d=d/255,g=g/255,
m=[];if(0===d)m=[Math.round(255*g),Math.round(255*g),Math.round(255*g),a[3]];else{var h=6*c;6===h&&(h=0);var n=Math.floor(h),c=g*(1-d),m=g*(1-d*(h-n)),d=g*(1-d*(1-(h-n)));0===n?(n=g,h=d,g=c):1===n?(n=m,h=g,g=c):2===n?(n=c,h=g,g=d):3===n?(n=c,h=m):4===n?(n=d,h=c):(n=g,h=c,g=m);m=[Math.round(255*n),Math.round(255*h),Math.round(255*g),a[3]]}return m};a.ColorUtils.rgbaToHSBA=function(a){var c=a[0]/255,d=a[1]/255,g=a[2]/255,m=Math.min(c,d,g),h=Math.max(c,d,g),n=h-m,f;if(0===n)m=f=0;else{var m=n/h,l=((h-
c)/6+n/2)/n,r=((h-d)/6+n/2)/n,n=((h-g)/6+n/2)/n;c===h?f=n-r:d===h?f=1/3+l-n:g===h&&(f=2/3+r-l);0>f&&(f+=1);1<f&&--f}return[Math.round(255*f),Math.round(255*m),Math.round(255*h),a[3]]};return a.ColorUtils}({},e.core);e.p5Color=function(e,a,k,c){a.Color=function(f,h){this.color_array=a.Color._getFormattedColor.apply(f,h);this._converted_color=this._convertTo255(f);f._colorMode===c.HSB?(this.hsba=this.color_array,this.rgba=k.hsbaToRGBA(this._converted_color)):this.rgba=this.color_array;return this};
a.Color.prototype._convertTo255=function(f){f=f._colorMode===c.RGB?f._maxRGB:f._maxHSB;var h=[];h[0]=255*this.color_array[0]/f[0];h[1]=255*this.color_array[1]/f[1];h[2]=255*this.color_array[2]/f[2];h[3]=255*this.color_array[3]/f[3];return h};a.Color.prototype.getHue=function(){this.hsba||(this.hsba=k.rgbaToHSBA(this._converted_color));return this.hsba[0]};a.Color.prototype.getSaturation=function(){this.hsba||(this.hsba=k.rgbaToHSBA(this._converted_color));return this.hsba[1]};a.Color.prototype.getBrightness=
function(){this.hsba||(this.hsba=k.rgbaToHSBA(this._converted_color));return this.hsba[2]};a.Color.prototype.getRed=function(){return this.rgba[0]};a.Color.prototype.getGreen=function(){return this.rgba[1]};a.Color.prototype.getBlue=function(){return this.rgba[2]};a.Color.prototype.getAlpha=function(){return this.hsba?this.hsba[3]:this.rgba[3]};a.Color.prototype.toString=function(){for(var f=this.rgba,h=0;3>h;h++)f[h]=Math.floor(f[h]);return"rgba("+f[0]+","+f[1]+","+f[2]+","+("undefined"!==typeof f[3]?
f[3]/255:1)+")"};e=/\s*/;var d=/(\d{1,3})/,g=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,m=new RegExp(g.source+"%"),h={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",
darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",
firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",
lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",
mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",
rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},
n=/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,f=/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,l=new RegExp(["^rgb\\(",d.source,",",d.source,",",d.source,"\\)$"].join(e.source),"i"),r=new RegExp(["^rgb\\(",m.source,",",m.source,",",m.source,"\\)$"].join(e.source),"i"),E=new RegExp(["^rgba\\(",d.source,",",d.source,",",d.source,",",g.source,"\\)$"].join(e.source),"i"),v=new RegExp(["^rgba\\(",m.source,",",m.source,",",m.source,",",g.source,"\\)$"].join(e.source),"i");a.Color._getFormattedColor=function(){var d,
m,g,k;if(3<=arguments.length)d=arguments[0],m=arguments[1],g=arguments[2],k="number"===typeof arguments[3]?arguments[3]:255;else{if("string"===typeof arguments[0]){d=arguments[0].trim().toLowerCase();if(h[d])return a.Color._getFormattedColor.apply(this,[h[d]]);d=n.test(d)?n.exec(d).slice(1).map(function(f){return parseInt(f+f,16)}):f.test(d)?f.exec(d).slice(1).map(function(f){return parseInt(f,16)}):l.test(d)?l.exec(d).slice(1).map(function(f){return parseInt(f,10)}):r.test(d)?r.exec(d).slice(1).map(function(f){return parseInt(parseFloat(f)/
100*255,10)}):E.test(d)?E.exec(d).slice(1).map(function(f,h){return 3===h?parseInt(255*parseFloat(f),10):parseInt(f,10)}):v.test(d)?v.exec(d).slice(1).map(function(f,h){return 3===h?parseInt(255*parseFloat(f),10):parseInt(parseFloat(f)/100*255,10)}):[255];return a.Color._getFormattedColor.apply(this,d)}this._colorMode===c.RGB?d=m=g=arguments[0]:(d=g=arguments[0],m=0);k="number"===typeof arguments[1]?arguments[1]:255}return[d,m,g,k]};return a.Color}({},e.core,e.utilscolor_utils,e.constants);e.p5Element=
function(e,a){function k(c,d,g){d=d.bind(g);g.elt.addEventListener(c,d,!1);g._events[c]=d}a.Element=function(c,d){this.elt=c;this._pInst=d;this._events={};this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight};a.Element.prototype.parent=function(c){"string"===typeof c?c=document.getElementById(c):c instanceof a.Element&&(c=c.elt);c.appendChild(this.elt);return this};a.Element.prototype.id=function(c){this.elt.id=c;return this};a.Element.prototype["class"]=function(c){this.elt.className+=
" "+c;return this};a.Element.prototype.mousePressed=function(c){k("mousedown",c,this);k("touchstart",c,this);return this};a.Element.prototype.mouseWheel=function(c){k("mousewheel",c,this);return this};a.Element.prototype.mouseReleased=function(c){k("mouseup",c,this);k("touchend",c,this);return this};a.Element.prototype.mouseClicked=function(c){k("click",c,this);return this};a.Element.prototype.mouseMoved=function(c){k("mousemove",c,this);k("touchmove",c,this);return this};a.Element.prototype.mouseOver=
function(c){k("mouseover",c,this);return this};a.Element.prototype.mouseOut=function(c){k("mouseout",c,this);return this};a.Element.prototype.touchStarted=function(c){k("touchstart",c,this);k("mousedown",c,this);return this};a.Element.prototype.touchMoved=function(c){k("touchmove",c,this);k("mousemove",c,this);return this};a.Element.prototype.touchEnded=function(c){k("touchend",c,this);k("mouseup",c,this);return this};a.Element.prototype.dragOver=function(c){k("dragover",c,this);return this};a.Element.prototype.dragLeave=
function(c){k("dragleave",c,this);return this};a.Element.prototype.drop=function(c,d){function g(d){var h=new a.File(d);return function(d){h.data=d.target.result;c(h)}}window.File&&window.FileReader&&window.FileList&&window.Blob?(k("dragover",function(d){d.stopPropagation();d.preventDefault()},this),k("dragleave",function(d){d.stopPropagation();d.preventDefault()},this),1<arguments.length&&k("drop",d,this),k("drop",function(d){d.stopPropagation();d.preventDefault();d=d.dataTransfer.files;for(var h=
0;h<d.length;h++){var c=d[h],f=new FileReader;f.onload=g(c);"text"===c.type?f.readAsText(c):f.readAsDataURL(c)}},this)):console.log("The File APIs are not fully supported in this browser.");return this};a.Element.prototype._setProperty=function(c,d){this[c]=d};return a.Element}({},e.core);e.p5Font=function(e,a,k){a.Font=function(c){this.parent=c;this.font=void 0};a.Font.prototype.renderPath=function(c,d,g,m,h){var n=this.parent,f,l,r;m=m||n._textSize;h=h||{};f=n.textWidth(c);l=n.textAscent();r=n.textDescent();
l+=r;n.drawingContext.textAlign===k.CENTER?d-=f/2:n.drawingContext.textAlign===k.RIGHT&&(d-=f);n.drawingContext.textBaseline===k.TOP?g+=l:n.drawingContext.textBaseline===k._CTX_MIDDLE?g+=l/2-r:n.drawingContext.textBaseline===k.BOTTOM&&(g-=r);c=this.font.getPath(c,d,g,m,h);n._doStroke&&n._strokeSet&&(c.strokeWidth=n.drawingContext.lineWidth,c.stroke=n.drawingContext.strokeStyle);n._doFill&&(c.fill=n._fillSet?n.drawingContext.fillStyle:k._DEFAULT_TEXT_FILL);c.draw(n.drawingContext)};a.Font.prototype.textBounds=
function(c,d,g,m){if(!this.parent._isOpenType())throw Error("not supported for system fonts");m=m||this.parent._textSize;var h=[],n=[],f=1/this.font.unitsPerEm*m;this.font.forEachGlyph(c,void 0!==d?d:0,void 0!==g?g:0,m,{},function(l,d,c){if("space"!==l.name){d=void 0!==d?d:0;c=void 0!==c?c:0;l=l.getMetrics();var m=c+-l.yMin*f,g=d+l.xMax*f;c+=-l.yMax*f;h.push(d+l.xMin*f);n.push(m);h.push(g);n.push(c)}});c=Math.min.apply(null,h);d=Math.min.apply(null,n);g=Math.max.apply(null,h);m=Math.max.apply(null,
n);return{x:c,y:d,w:g-c,h:m-d}};a.Font.prototype.list=function(){throw"not yet implemented";};return a.Font}({},e.core,e.constants);e.canvas=function(e,a){return{modeAdjust:function(k,c,d,g,m){if(m===a.CORNER)return{x:k,y:c,w:d,h:g};if(m===a.CORNERS)return{x:k,y:c,w:d-k,h:g-c};if(m===a.RADIUS)return{x:k-d,y:c-g,w:2*d,h:2*g};if(m===a.CENTER)return{x:k-.5*d,y:c-.5*g,w:d,h:g}},arcModeAdjust:function(k,c,d,g,m){if(m===a.CORNER)return{x:k+.5*d,y:c+.5*g,w:d,h:g};if(m===a.CORNERS)return{x:k,y:c,w:d+k,h:g+
c};if(m===a.RADIUS)return{x:k,y:c,w:2*d,h:2*g};if(m===a.CENTER)return{x:k,y:c,w:d,h:g}}}}({},e.constants);e.filters=function(e){var a={_toPixels:function(d){return d instanceof ImageData?d.data:d.getContext("2d").getImageData(0,0,d.width,d.height).data},_getARGB:function(d,h){var c=4*h;return d[c+3]<<24&4278190080|d[c]<<16&16711680|d[c+1]<<8&65280|d[c+2]&255},_setPixels:function(d,h){for(var c=0,f=0,l=d.length;f<l;f++)c=4*f,d[c+0]=(h[f]&16711680)>>>16,d[c+1]=(h[f]&65280)>>>8,d[c+2]=h[f]&255,d[c+3]=
(h[f]&4278190080)>>>24},_toImageData:function(d){return d instanceof ImageData?d:d.getContext("2d").getImageData(0,0,d.width,d.height)},_createImageData:function(d,h){a._tmpCanvas=document.createElement("canvas");a._tmpCtx=a._tmpCanvas.getContext("2d");return this._tmpCtx.createImageData(d,h)},apply:function(d,h,c){var f=d.getContext("2d"),l=f.getImageData(0,0,d.width,d.height);h=h(l,c);h instanceof ImageData?f.putImageData(h,0,0,0,0,d.width,d.height):f.putImageData(l,0,0,0,0,d.width,d.height)},threshold:function(d,
h){var c=a._toPixels(d);void 0===h&&(h=.5);for(var f=Math.floor(255*h),l=0;l<c.length;l+=4)c[l]=c[l+1]=c[l+2]=.2126*c[l]+.7152*c[l+1]+.0722*c[l+2]>=f?255:0},gray:function(d){d=a._toPixels(d);for(var h=0;h<d.length;h+=4)d[h]=d[h+1]=d[h+2]=.2126*d[h]+.7152*d[h+1]+.0722*d[h+2]},opaque:function(d){d=a._toPixels(d);for(var h=0;h<d.length;h+=4)d[h+3]=255;return d},invert:function(d){d=a._toPixels(d);for(var h=0;h<d.length;h+=4)d[h]=255-d[h],d[h+1]=255-d[h+1],d[h+2]=255-d[h+2]},posterize:function(d,h){var c=
a._toPixels(d);if(2>h||255<h)throw Error("Level must be greater than 2 and less than 255 for posterize");for(var f=h-1,l=0;l<c.length;l+=4){var r=c[l+1],g=c[l+2];c[l]=255*(c[l]*h>>8)/f;c[l+1]=255*(r*h>>8)/f;c[l+2]=255*(g*h>>8)/f}},dilate:function(d){for(var h=a._toPixels(d),c=0,f=h.length?h.length/4:0,l=new Int32Array(f),r,g,k,e,t,y,w,x,z,u,p,B;c<f;)for(r=c,g=c+d.width;c<g;)k=e=a._getARGB(h,c),y=c-1,t=c+1,w=c-d.width,x=c+d.width,y<r&&(y=c),t>=g&&(t=c),0>w&&(w=0),x>=f&&(x=c),w=a._getARGB(h,w),y=a._getARGB(h,
y),x=a._getARGB(h,x),t=a._getARGB(h,t),k=77*(k>>16&255)+151*(k>>8&255)+28*(k&255),u=77*(y>>16&255)+151*(y>>8&255)+28*(y&255),z=77*(t>>16&255)+151*(t>>8&255)+28*(t&255),p=77*(w>>16&255)+151*(w>>8&255)+28*(w&255),B=77*(x>>16&255)+151*(x>>8&255)+28*(x&255),u>k&&(e=y,k=u),z>k&&(e=t,k=z),p>k&&(e=w,k=p),B>k&&(e=x),l[c++]=e;a._setPixels(h,l)},erode:function(d){for(var h=a._toPixels(d),c=0,f=h.length?h.length/4:0,l=new Int32Array(f),r,g,k,e,t,y,w,x,z,u,p,B;c<f;)for(r=c,g=c+d.width;c<g;)k=e=a._getARGB(h,c),
y=c-1,t=c+1,w=c-d.width,x=c+d.width,y<r&&(y=c),t>=g&&(t=c),0>w&&(w=0),x>=f&&(x=c),w=a._getARGB(h,w),y=a._getARGB(h,y),x=a._getARGB(h,x),t=a._getARGB(h,t),k=77*(k>>16&255)+151*(k>>8&255)+28*(k&255),u=77*(y>>16&255)+151*(y>>8&255)+28*(y&255),z=77*(t>>16&255)+151*(t>>8&255)+28*(t&255),p=77*(w>>16&255)+151*(w>>8&255)+28*(w&255),B=77*(x>>16&255)+151*(x>>8&255)+28*(x&255),u<k&&(e=y,k=u),z<k&&(e=t,k=z),p<k&&(e=w,k=p),B<k&&(e=x),l[c++]=e;a._setPixels(h,l)}},k,c,d,g;a.blur=function(m,h){for(var n=a._toPixels(m),
f=m.width,l=m.height,r=f*l,E=new Int32Array(r),e=0;e<r;e++)E[e]=a._getARGB(n,e);var q,t,y,w,x,z,u,p,B,C,e=new Int32Array(r),J=new Int32Array(r),I=new Int32Array(r),r=new Int32Array(r),G=0;q=3.5*h|0;q=1>q?1:248>q?q:248;if(k!==q){k=q;c=1+k<<1;d=new Int32Array(c);g=Array(c);for(t=0;t<c;t++)g[t]=new Int32Array(256);x=1;for(z=q-1;x<q;x++){d[q+x]=d[z]=y=z*z;t=g[q+x];w=g[z--];for(var H=0;256>H;H++)t[H]=w[H]=y*H}y=d[q]=q*q;t=g[q];for(q=0;256>q;q++)t[q]=y*q}var K,M;for(K=0;K<l;K++){for(H=0;H<f;H++){w=y=t=
x=q=0;z=H-k;if(0>z)C=-z,z=0;else{if(z>=f)break;C=0}for(;C<c&&!(z>=f);C++)u=E[z+G],M=g[C],x+=M[(u&-16777216)>>>24],t+=M[(u&16711680)>>16],y+=M[(u&65280)>>8],w+=M[u&255],q+=d[C],z++;u=G+H;e[u]=x/q;J[u]=t/q;I[u]=y/q;r[u]=w/q}G+=f}G=0;p=-k;B=p*f;for(K=0;K<l;K++){for(H=0;H<f;H++){w=y=t=x=q=0;if(0>p)C=u=-p,z=H;else{if(p>=l)break;C=0;u=p;z=H+B}for(;C<c&&!(u>=l);C++)M=g[C],x+=M[e[z]],t+=M[J[z]],y+=M[I[z]],w+=M[r[z]],q+=d[C],u++,z+=f;E[H+G]=x/q<<24|t/q<<16|y/q<<8|w/q}G+=f;B+=f;p++}a._setPixels(n,E)};return a}({});
e.p5Graphics=function(e,a){a.Graphics=function(k,c,d){a.Element.call(this,k,c);this.canvas=k;this._pInst=c;d?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[])};a.Graphics.prototype=Object.create(a.Element.prototype);a.Graphics.prototype.resize=function(k,c){this.width=k;this.height=c;this.elt.width=
k*this._pInst.pixelDensity;this.elt.height=c*this._pInst.pixelDensity;this.elt.style.width=k+"px";this.elt.style.height=c+"px";this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height));this.drawingContext.scale(this._pInst.pixelDensity,this._pInst.pixelDensity)};return a.Graphics}({},e.core);e.p5Graphics2D=function(e,a,k,c,d,g){a.Graphics2D=function(d,h,c){a.Graphics.call(this,d,h,c);this.drawingContext=this.canvas.getContext("2d");this._pInst._setProperty("drawingContext",
this.drawingContext);return this};a.Graphics2D.prototype=Object.create(a.Graphics.prototype);a.Graphics2D.prototype._applyDefaults=function(){this.drawingContext.fillStyle=c._DEFAULT_FILL;this.drawingContext.strokeStyle=c._DEFAULT_STROKE;this.drawingContext.lineCap=c.ROUND;this.drawingContext.font="normal 12px sans-serif"};a.Graphics2D.prototype.background=function(){this.drawingContext.save();this.drawingContext.setTransform(1,0,0,1,0,0);this.drawingContext.scale(this._pInst.pixelDensity,this._pInst.pixelDensity);
if(arguments[0]instanceof a.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var d=this.drawingContext.fillStyle,h=this._pInst.color.apply(this._pInst,arguments).toString();this.drawingContext.fillStyle=h;this.drawingContext.fillRect(0,0,this.width,this.height);this.drawingContext.fillStyle=d}this.drawingContext.restore()};a.Graphics2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)};a.Graphics2D.prototype.fill=function(){var d=this.drawingContext,
h=this._pInst.color.apply(this._pInst,arguments);d.fillStyle=h.toString()};a.Graphics2D.prototype.stroke=function(){var d=this.drawingContext,h=this._pInst.color.apply(this._pInst,arguments);d.strokeStyle=h.toString()};a.Graphics2D.prototype.image=function(d,h,c,f,l){var r=d.canvas||d.elt;try{this._pInst._tint&&d.canvas?this.drawingContext.drawImage(this._getTintedImageCanvas(d),h,c,f,l):this.drawingContext.drawImage(r,h,c,f,l)}catch(g){if("NS_ERROR_NOT_AVAILABLE"!==g.name)throw g;}};a.Graphics2D.prototype._getTintedImageCanvas=
function(c){if(!c.canvas)return c;var h=d._toPixels(c.canvas),n=document.createElement("canvas");n.width=c.canvas.width;n.height=c.canvas.height;var f=n.getContext("2d");c=f.createImageData(c.canvas.width,c.canvas.height);for(var l=c.data,g=0;g<h.length;g+=4){var k=h[g+1],a=h[g+2],e=h[g+3];l[g]=h[g]*this._pInst._tint[0]/255;l[g+1]=k*this._pInst._tint[1]/255;l[g+2]=a*this._pInst._tint[2]/255;l[g+3]=e*this._pInst._tint[3]/255}f.putImageData(c,0,0);return n};a.Graphics2D.prototype.blend=function(){var d=
this.drawingContext.globalCompositeOperation,h=arguments[arguments.length-1],c=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=h;this._pInst.copy.apply(this._pInst,c);this.drawingContext.globalCompositeOperation=d};a.Graphics2D.prototype.copy=function(){var d,h,c,f,l,g,k,e,q;if(9===arguments.length)d=arguments[0],h=arguments[1],c=arguments[2],f=arguments[3],l=arguments[4],g=arguments[5],k=arguments[6],e=arguments[7],q=arguments[8];else if(8===
arguments.length)d=this._pInst,h=arguments[0],c=arguments[1],f=arguments[2],l=arguments[3],g=arguments[4],k=arguments[5],e=arguments[6],q=arguments[7];else throw Error("Signature not supported");a.Graphics2D._copyHelper(d,h,c,f,l,g,k,e,q)};a.Graphics2D._copyHelper=function(d,h,c,f,l,g,k,a,e){var t=d.canvas.width/d.width;this.drawingContext.drawImage(d.canvas,t*h,t*c,t*f,t*l,g,k,a,e)};a.Graphics2D.prototype.get=function(d,h,c,f){void 0===d&&void 0===h&&void 0===c&&void 0===f?(h=d=0,c=this.width,f=
this.height):void 0===c&&void 0===f&&(f=c=1);if(d>this.width||h>this.height||0>d||0>h)return[0,0,0,255];var l=this.pixelDensity||this._pInst.pixelDensity;if(1===c&&1===f){d=this.drawingContext.getImageData(d*l,h*l,c,f).data;l=[];for(h=0;h<d.length;h+=4)l.push(d[h],d[h+1],d[h+2],d[h+3]);return l}d*=l;h*=l;c=Math.min(c,this.width);f=Math.min(f,this.height);var g=c*l,l=f*l,k=new a.Image(c,f);k.canvas.getContext("2d").drawImage(this.canvas,d,h,g,l,0,0,c,f);return k};a.Graphics2D.prototype.loadPixels=
function(){var d=this.pixelDensity||this._pInst.pixelDensity,d=this.drawingContext.getImageData(0,0,this.width*d,this.height*d);this._pInst?(this._pInst._setProperty("imageData",d),this._pInst._setProperty("pixels",d.data)):(this._setProperty("imageData",d),this._setProperty("pixels",d.data))};a.Graphics2D.prototype.set=function(d,h,c){if(c instanceof a.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst.pixelDensity,this._pInst.pixelDensity),
this.drawingContext.drawImage(c.canvas,d,h),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var f=this._pInst||this,l=0,g=0,k=0,e=0,q=4*(h*f.pixelDensity*this.width*f.pixelDensity+d*f.pixelDensity);f.imageData||f.loadPixels.call(f);if("number"===typeof c)q<f.pixels.length&&(k=g=l=c,e=255);else if(c instanceof Array){if(4>c.length)throw Error("pixel array must be of the form [R, G, B, A]");q<f.pixels.length&&(l=c[0],g=c[1],k=c[2],e=c[3])}else c instanceof a.Color&&q<f.pixels.length&&
(l=c.rgba[0],g=c.rgba[1],k=c.rgba[2],e=c.rgba[3]);for(c=0;c<f.pixelDensity;c++)for(var t=0;t<f.pixelDensity;t++)q=4*((h*f.pixelDensity+t)*this.width*f.pixelDensity+(d*f.pixelDensity+c)),f.pixels[q]=l,f.pixels[q+1]=g,f.pixels[q+2]=k,f.pixels[q+3]=e}};a.Graphics2D.prototype.updatePixels=function(d,h,c,f){var l=this.pixelDensity||this._pInst.pixelDensity;void 0===d&&void 0===h&&void 0===c&&void 0===f&&(h=d=0,c=this.width,f=this.height);c*=l;f*=l;this._pInst?this.drawingContext.putImageData(this._pInst.imageData,
d,h,0,0,c,f):this.drawingContext.putImageData(this.imageData,d,h,0,0,c,f)};a.Graphics2D.prototype.arc=function(d,h,g,f,l,r,a,e){if(this._pInst._doStroke||this._pInst._doFill){var q=this.drawingContext,t=k.arcModeAdjust(d,h,g,f,this._pInst._ellipseMode),y=t.w/2,w=t.h/2;q.beginPath();e.forEach(function(f,h){0===h&&q.moveTo(t.x+f.x1*y,t.y+f.y1*w);q.bezierCurveTo(t.x+f.x2*y,t.y+f.y2*w,t.x+f.x3*y,t.y+f.y3*w,t.x+f.x4*y,t.y+f.y4*w)});if(this._pInst._doFill&&(a!==c.PIE&&null!=a||q.lineTo(t.x,t.y),q.closePath(),
q.fill(),this._pInst._doStroke&&(a===c.CHORD||a===c.PIE)))return q.stroke(),this;!this._pInst._doStroke||a!==c.OPEN&&null!=a||(q.beginPath(),e.forEach(function(f,h){0===h&&q.moveTo(t.x+f.x1*y,t.y+f.y1*w);q.bezierCurveTo(t.x+f.x2*y,t.y+f.y2*w,t.x+f.x3*y,t.y+f.y3*w,t.x+f.x4*y,t.y+f.y4*w)}),q.stroke());return this}};a.Graphics2D.prototype.ellipse=function(d,h,c,f){var l=this.drawingContext,g=this._pInst._doFill,a=this._pInst._doStroke;if(g&&!a){if("rgba(0,0,0,0)"===l.fillStyle)return this}else if(!g&&
a&&"rgba(0,0,0,0)"===l.strokeStyle)return this;d=k.modeAdjust(d,h,c,f,this._pInst._ellipseMode);h=d.w/2*.5522848;c=d.h/2*.5522848;f=d.x+d.w;var e=d.y+d.h,q=d.x+d.w/2,t=d.y+d.h/2;l.beginPath();l.moveTo(d.x,t);l.bezierCurveTo(d.x,t-c,q-h,d.y,q,d.y);l.bezierCurveTo(q+h,d.y,f,t-c,f,t);l.bezierCurveTo(f,t+c,q+h,e,q,e);l.bezierCurveTo(q-h,e,d.x,t+c,d.x,t);l.closePath();g&&l.fill();a&&l.stroke()};a.Graphics2D.prototype.line=function(d,h,c,f){var l=this.drawingContext;if(!this._pInst._doStroke||"rgba(0,0,0,0)"===
l.strokeStyle)return this;l.beginPath();l.moveTo(d,h);l.lineTo(c,f);l.stroke();return this};a.Graphics2D.prototype.point=function(d,h){var g=this.drawingContext,f=g.strokeStyle,l=g.fillStyle;if(!this._pInst._doStroke||"rgba(0,0,0,0)"===g.strokeStyle)return this;d=Math.round(d);h=Math.round(h);g.fillStyle=f;1<g.lineWidth?(g.beginPath(),g.arc(d,h,g.lineWidth/2,0,c.TWO_PI,!1),g.fill()):g.fillRect(d,h,1,1);g.fillStyle=l};a.Graphics2D.prototype.quad=function(d,h,c,f,l,g,k,a){var e=this.drawingContext,
t=this._pInst._doFill,y=this._pInst._doStroke;if(t&&!y){if("rgba(0,0,0,0)"===e.fillStyle)return this}else if(!t&&y&&"rgba(0,0,0,0)"===e.strokeStyle)return this;e.beginPath();e.moveTo(d,h);e.lineTo(c,f);e.lineTo(l,g);e.lineTo(k,a);e.closePath();t&&e.fill();y&&e.stroke();return this};a.Graphics2D.prototype.rect=function(d,h,c,f,l,g,a,e){var q=this.drawingContext,t=this._pInst._doFill,y=this._pInst._doStroke;if(t&&!y){if("rgba(0,0,0,0)"===q.fillStyle)return this}else if(!t&&y&&"rgba(0,0,0,0)"===q.strokeStyle)return this;
f=k.modeAdjust(d,h,c,f,this._pInst._rectMode);this._pInst._doStroke&&1===q.lineWidth%2&&q.translate(.5,.5);q.beginPath();"undefined"===typeof l?q.rect(f.x,f.y,f.w,f.h):("undefined"===typeof g&&(g=l),"undefined"===typeof a&&(a=g),"undefined"===typeof e&&(e=a),d=f.x,h=f.y,c=f.w,f=f.h,t=c/2,y=f/2,c<2*l&&(l=t),f<2*l&&(l=y),c<2*g&&(g=t),f<2*g&&(g=y),c<2*a&&(a=t),f<2*a&&(a=y),c<2*e&&(e=t),f<2*e&&(e=y),q.beginPath(),q.moveTo(d+l,h),q.arcTo(d+c,h,d+c,h+f,g),q.arcTo(d+c,h+f,d,h+f,a),q.arcTo(d,h+f,d,h,e),q.arcTo(d,
h,d+c,h,l),q.closePath());this._pInst._doFill&&q.fill();this._pInst._doStroke&&q.stroke();this._pInst._doStroke&&1===q.lineWidth%2&&q.translate(-.5,-.5);return this};a.Graphics2D.prototype.triangle=function(d,h,c,f,l,g){var a=this.drawingContext,k=this._pInst._doFill,e=this._pInst._doStroke;if(k&&!e){if("rgba(0,0,0,0)"===a.fillStyle)return this}else if(!k&&e&&"rgba(0,0,0,0)"===a.strokeStyle)return this;a.beginPath();a.moveTo(d,h);a.lineTo(c,f);a.lineTo(l,g);a.closePath();k&&a.fill();e&&a.stroke()};
a.Graphics2D.prototype.endShape=function(d,h,g,f,l,a,k){if(0===h.length||!this._pInst._doStroke&&!this._pInst._doFill)return this;(d=d===c.CLOSE)&&!a&&h.push(h[0]);a=h.length;if(!g||k!==c.POLYGON&&null!==k)if(!f||k!==c.POLYGON&&null!==k)if(!l||k!==c.POLYGON&&null!==k)if(k===c.POINTS)for(f=0;f<a;f++)g=h[f],this._pInst._doStroke&&this._pInst.stroke(g[6]),this._pInst.point(g[0],g[1]);else if(k===c.LINES)for(f=0;f+1<a;f+=2)g=h[f],this._pInst._doStroke&&this._pInst.stroke(h[f+1][6]),this._pInst.line(g[0],
g[1],h[f+1][0],h[f+1][1]);else if(k===c.TRIANGLES)for(f=0;f+2<a;f+=3)g=h[f],this.drawingContext.beginPath(),this.drawingContext.moveTo(g[0],g[1]),this.drawingContext.lineTo(h[f+1][0],h[f+1][1]),this.drawingContext.lineTo(h[f+2][0],h[f+2][1]),this.drawingContext.lineTo(g[0],g[1]),this._pInst._doFill&&(this._pInst.fill(h[f+2][5]),this.drawingContext.fill()),this._pInst._doStroke&&(this._pInst.stroke(h[f+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(k===c.TRIANGLE_STRIP)for(f=
0;f+1<a;f++)g=h[f],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[f+1][0],h[f+1][1]),this.drawingContext.lineTo(g[0],g[1]),this._pInst._doStroke&&this._pInst.stroke(h[f+1][6]),this._pInst._doFill&&this._pInst.fill(h[f+1][5]),f+2<a&&(this.drawingContext.lineTo(h[f+2][0],h[f+2][1]),this._pInst._doStroke&&this._pInst.stroke(h[f+2][6]),this._pInst._doFill&&this._pInst.fill(h[f+2][5])),this._doFillStrokeClose();else if(k===c.TRIANGLE_FAN){if(2<a)for(this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0][0],
h[0][1]),this.drawingContext.lineTo(h[1][0],h[1][1]),this.drawingContext.lineTo(h[2][0],h[2][1]),this._pInst._doFill&&this._pInst.fill(h[2][5]),this._pInst._doStroke&&this._pInst.stroke(h[2][6]),this._doFillStrokeClose(),f=3;f<a;f++)g=h[f],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0][0],h[0][1]),this.drawingContext.lineTo(h[f-1][0],h[f-1][1]),this.drawingContext.lineTo(g[0],g[1]),this._pInst._doFill&&this._pInst.fill(g[5]),this._pInst._doStroke&&this._pInst.stroke(g[6]),this._doFillStrokeClose()}else if(k===
c.QUADS)for(f=0;f+3<a;f+=4){g=h[f];this.drawingContext.beginPath();this.drawingContext.moveTo(g[0],g[1]);for(l=1;4>l;l++)this.drawingContext.lineTo(h[f+l][0],h[f+l][1]);this.drawingContext.lineTo(g[0],g[1]);this._pInst._doFill&&this._pInst.fill(h[f+3][5]);this._pInst._doStroke&&this._pInst.stroke(h[f+3][6]);this._doFillStrokeClose()}else if(k===c.QUAD_STRIP){if(3<a)for(f=0;f+1<a;f+=2)g=h[f],this.drawingContext.beginPath(),f+3<a?(this.drawingContext.moveTo(h[f+2][0],h[f+2][1]),this.drawingContext.lineTo(g[0],
g[1]),this.drawingContext.lineTo(h[f+1][0],h[f+1][1]),this.drawingContext.lineTo(h[f+3][0],h[f+3][1]),this._pInst._doFill&&this._pInst.fill(h[f+3][5]),this._pInst._doStroke&&this._pInst.stroke(h[f+3][6])):(this.drawingContext.moveTo(g[0],g[1]),this.drawingContext.lineTo(h[f+1][0],h[f+1][1])),this._doFillStrokeClose()}else{this.drawingContext.beginPath();this.drawingContext.moveTo(h[0][0],h[0][1]);for(f=1;f<a;f++)g=h[f],g.isVert&&(g.moveTo?this.drawingContext.moveTo(g[0],g[1]):this.drawingContext.lineTo(g[0],
g[1]));this._doFillStrokeClose()}else{this.drawingContext.beginPath();for(f=0;f<a;f++)h[f].isVert?h[f].moveTo?this.drawingContext.moveTo([0],h[f][1]):this.drawingContext.lineTo(h[f][0],h[f][1]):this.drawingContext.quadraticCurveTo(h[f][0],h[f][1],h[f][2],h[f][3]);this._doFillStrokeClose()}else{this.drawingContext.beginPath();for(f=0;f<a;f++)h[f].isVert?h[f].moveTo?this.drawingContext.moveTo(h[f][0],h[f][1]):this.drawingContext.lineTo(h[f][0],h[f][1]):this.drawingContext.bezierCurveTo(h[f][0],h[f][1],
h[f][2],h[f][3],h[f][4],h[f][5]);this._doFillStrokeClose()}else if(3<a){l=[];k=1-this._pInst._curveTightness;this.drawingContext.beginPath();this.drawingContext.moveTo(h[1][0],h[1][1]);for(f=1;f+2<a;f++)g=h[f],l[0]=[g[0],g[1]],l[1]=[g[0]+(k*h[f+1][0]-k*h[f-1][0])/6,g[1]+(k*h[f+1][1]-k*h[f-1][1])/6],l[2]=[h[f+1][0]+(k*h[f][0]-k*h[f+2][0])/6,h[f+1][1]+(k*h[f][1]-k*h[f+2][1])/6],l[3]=[h[f+1][0],h[f+1][1]],this.drawingContext.bezierCurveTo(l[1][0],l[1][1],l[2][0],l[2][1],l[3][0],l[3][1]);d&&this.drawingContext.lineTo(h[f+
1][0],h[f+1][1]);this._doFillStrokeClose()}d&&h.pop();return this};a.Graphics2D.prototype.noSmooth=function(){this.drawingContext.mozImageSmoothingEnabled=!1;this.drawingContext.webkitImageSmoothingEnabled=!1;return this};a.Graphics2D.prototype.smooth=function(){this.drawingContext.mozImageSmoothingEnabled=!0;this.drawingContext.webkitImageSmoothingEnabled=!0;return this};a.Graphics2D.prototype.strokeCap=function(d){if(d===c.ROUND||d===c.SQUARE||d===c.PROJECT)this.drawingContext.lineCap=d;return this};
a.Graphics2D.prototype.strokeJoin=function(d){if(d===c.ROUND||d===c.BEVEL||d===c.MITER)this.drawingContext.lineJoin=d;return this};a.Graphics2D.prototype.strokeWeight=function(d){this.drawingContext.lineWidth="undefined"===typeof d||0===d?1E-4:d;return this};a.Graphics2D.prototype._getFill=function(){return this.drawingContext.fillStyle};a.Graphics2D.prototype._getStroke=function(){return this.drawingContext.strokeStyle};a.Graphics2D.prototype.bezier=function(d,h,c,f,l,g,a,k){this._pInst.beginShape();
this._pInst.vertex(d,h);this._pInst.bezierVertex(c,f,l,g,a,k);this._pInst.endShape();return this};a.Graphics2D.prototype.curve=function(d,h,c,f,l,g,a,k){this._pInst.beginShape();this._pInst.curveVertex(d,h);this._pInst.curveVertex(c,f);this._pInst.curveVertex(l,g);this._pInst.curveVertex(a,k);this._pInst.endShape();return this};a.Graphics2D.prototype._doFillStrokeClose=function(){this._pInst._doFill&&this.drawingContext.fill();this._pInst._doStroke&&this.drawingContext.stroke();this.drawingContext.closePath()};
a.Graphics2D.prototype.applyMatrix=function(d,h,c,f,l,g){this.drawingContext.transform(d,h,c,f,l,g)};a.Graphics2D.prototype.resetMatrix=function(){this.drawingContext.setTransform(1,0,0,1,0,0);return this};a.Graphics2D.prototype.rotate=function(d){this.drawingContext.rotate(d)};a.Graphics2D.prototype.scale=function(){var d=1,h=1;1===arguments.length?d=h=arguments[0]:(d=arguments[0],h=arguments[1]);this.drawingContext.scale(d,h);return this};a.Graphics2D.prototype.shearX=function(d){this._pInst._angleMode===
c.DEGREES&&(d=this._pInst.radians(d));this.drawingContext.transform(1,0,this._pInst.tan(d),1,0,0);return this};a.Graphics2D.prototype.shearY=function(d){this._pInst._angleMode===c.DEGREES&&(d=this._pInst.radians(d));this.drawingContext.transform(1,this._pInst.tan(d),0,1,0,0);return this};a.Graphics2D.prototype.translate=function(d,h){this.drawingContext.translate(d,h);return this};a.Graphics2D.prototype.text=function(d,h,g,f,l){var a=this._pInst,k,e,q,t,y,w,x;if(a._doFill||a._doStroke){"string"!==
typeof d&&(d=d.toString());d=d.replace(/(\t)/g,"  ");d=d.split("\n");if("undefined"!==typeof f){for(e=x=0;e<d.length;e++)for(q="",w=d[e].split(" "),k=0;k<w.length;k++)t=q+w[k]+" ",y=this.textWidth(t),y>f?(q=w[k]+" ",x+=a.textLeading()):q=t;switch(this.drawingContext.textAlign){case c.CENTER:h+=f/2;break;case c.RIGHT:h+=f}if("undefined"!==typeof l)switch(this.drawingContext.textBaseline){case c.BOTTOM:g+=l-x;break;case c._CTX_MIDDLE:g+=(l-x)/2;break;case c.BASELINE:g+=l-x}for(e=0;e<d.length;e++){q=
"";w=d[e].split(" ");for(k=0;k<w.length;k++)t=q+w[k]+" ",y=this.textWidth(t),y>f?(this._renderText(a,q,h,g),q=w[k]+" ",g+=a.textLeading()):q=t;this._renderText(a,q,h,g);g+=a.textLeading()}}else for(f=0;f<d.length;f++)this._renderText(a,d[f],h,g),g+=a.textLeading();return a}};a.Graphics2D.prototype._renderText=function(d,h,g,f){if(d._isOpenType())return d._textFont.renderPath(h,g,f);d._doStroke&&d._strokeSet&&this.drawingContext.strokeText(h,g,f);d._doFill&&(this.drawingContext.fillStyle=d._fillSet?
this.drawingContext.fillStyle:c._DEFAULT_TEXT_FILL,this.drawingContext.fillText(h,g,f));return d};a.Graphics2D.prototype.textWidth=function(d){var h=this._pInst;return h._isOpenType()?h._textFont.textBounds(d,0,0).w:this.drawingContext.measureText(d).width};a.Graphics2D.prototype.textAlign=function(d,h){if(arguments.length){if(d===c.LEFT||d===c.RIGHT||d===c.CENTER)this.drawingContext.textAlign=d;if(h===c.TOP||h===c.BOTTOM||h===c.CENTER||h===c.BASELINE)this.drawingContext.textBaseline=h===c.CENTER?
c._CTX_MIDDLE:h;return this._pInst}var g=this.drawingContext.textBaseline;g===c._CTX_MIDDLE&&(g=c.CENTER);return{horizontal:this.drawingContext.textAlign,vertical:g}};a.Graphics2D.prototype._applyTextProperties=function(){var d,h=this._pInst;h._setProperty("_textAscent",null);h._setProperty("_textDescent",null);d=h._textFont;h._isOpenType()&&(d=h._textFont.font.familyName,h._setProperty("_textStyle",h._textFont.font.styleName));this.drawingContext.font=h._textStyle+" "+h._textSize+"px "+d;return h};
a.Graphics2D.prototype.push=function(){this.drawingContext.save()};a.Graphics2D.prototype.pop=function(){this.drawingContext.restore()};return a.Graphics2D}({},e.core,e.canvas,e.constants,e.filters,e.p5Graphics);e.shaders={defaultVertShader:"attribute vec3 a_VertexPosition;\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nvoid main(void) {\nvec3 zeroToOne = a_VertexPosition / 1000.0;\nvec3 zeroToTwo = zeroToOne * 2.0;\nvec3 clipSpace = zeroToTwo - 1.0;\ngl_Position = uPMatrix*uMVMatrix*vec4(clipSpace*vec3(1, -1, 1), 1.0);\n}",
defaultMatFragShader:"precision mediump float;\nuniform vec4 u_MaterialColor;\nvoid main(void) {\ngl_FragColor = u_MaterialColor;\n}"};e.mat4=function(e){var a="undefined"!==typeof Float32Array?Float32Array:Array;e={create:function(){var k=new a(16);k[0]=1;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=1;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=1;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k},clone:function(k){var c=new a(16);c[0]=k[0];c[1]=k[1];c[2]=k[2];c[3]=k[3];c[4]=k[4];c[5]=k[5];c[6]=k[6];c[7]=k[7];c[8]=k[8];
c[9]=k[9];c[10]=k[10];c[11]=k[11];c[12]=k[12];c[13]=k[13];c[14]=k[14];c[15]=k[15];return c},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,c){if(a===c){var d=c[1],g=c[2],m=c[3],
h=c[6],n=c[7],f=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=d;a[6]=c[9];a[7]=c[13];a[8]=g;a[9]=h;a[11]=c[14];a[12]=m;a[13]=n;a[14]=f}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a},invert:function(a,c){var d=c[0],g=c[1],m=c[2],h=c[3],n=c[4],f=c[5],l=c[6],r=c[7],e=c[8],v=c[9],q=c[10],t=c[11],y=c[12],w=c[13],x=c[14],z=c[15],u=d*f-g*n,p=d*l-m*n,B=d*r-h*n,C=g*l-m*f,
J=g*r-h*f,I=m*r-h*l,G=e*w-v*y,H=e*x-q*y,K=e*z-t*y,M=v*x-q*w,O=v*z-t*w,F=q*z-t*x,D=u*F-p*O+B*M+C*K-J*H+I*G;if(!D)return null;D=1/D;a[0]=(f*F-l*O+r*M)*D;a[1]=(m*O-g*F-h*M)*D;a[2]=(w*I-x*J+z*C)*D;a[3]=(q*J-v*I-t*C)*D;a[4]=(l*K-n*F-r*H)*D;a[5]=(d*F-m*K+h*H)*D;a[6]=(x*B-y*I-z*p)*D;a[7]=(e*I-q*B+t*p)*D;a[8]=(n*O-f*K+r*G)*D;a[9]=(g*K-d*O-h*G)*D;a[10]=(y*J-w*B+z*u)*D;a[11]=(v*B-e*J-t*u)*D;a[12]=(f*H-n*M-l*G)*D;a[13]=(d*M-g*H+m*G)*D;a[14]=(w*p-y*C-x*u)*D;a[15]=(e*C-v*p+q*u)*D;return a},adjoint:function(a,
c){var d=c[0],g=c[1],m=c[2],h=c[3],n=c[4],f=c[5],l=c[6],r=c[7],e=c[8],v=c[9],q=c[10],t=c[11],y=c[12],w=c[13],x=c[14],z=c[15];a[0]=f*(q*z-t*x)-v*(l*z-r*x)+w*(l*t-r*q);a[1]=-(g*(q*z-t*x)-v*(m*z-h*x)+w*(m*t-h*q));a[2]=g*(l*z-r*x)-f*(m*z-h*x)+w*(m*r-h*l);a[3]=-(g*(l*t-r*q)-f*(m*t-h*q)+v*(m*r-h*l));a[4]=-(n*(q*z-t*x)-e*(l*z-r*x)+y*(l*t-r*q));a[5]=d*(q*z-t*x)-e*(m*z-h*x)+y*(m*t-h*q);a[6]=-(d*(l*z-r*x)-n*(m*z-h*x)+y*(m*r-h*l));a[7]=d*(l*t-r*q)-n*(m*t-h*q)+e*(m*r-h*l);a[8]=n*(v*z-t*w)-e*(f*z-r*w)+y*(f*t-
r*v);a[9]=-(d*(v*z-t*w)-e*(g*z-h*w)+y*(g*t-h*v));a[10]=d*(f*z-r*w)-n*(g*z-h*w)+y*(g*r-h*f);a[11]=-(d*(f*t-r*v)-n*(g*t-h*v)+e*(g*r-h*f));a[12]=-(n*(v*x-q*w)-e*(f*x-l*w)+y*(f*q-l*v));a[13]=d*(v*x-q*w)-e*(g*x-m*w)+y*(g*q-m*v);a[14]=-(d*(f*x-l*w)-n*(g*x-m*w)+y*(g*l-m*f));a[15]=d*(f*q-l*v)-n*(g*q-m*v)+e*(g*l-m*f);return a},multiply:function(a,c,d){var g=c[0],m=c[1],h=c[2],n=c[3],f=c[4],l=c[5],r=c[6],e=c[7],v=c[8],q=c[9],t=c[10],y=c[11],w=c[12],x=c[13],z=c[14];c=c[15];var u=d[0],p=d[1],B=d[2],C=d[3];a[0]=
u*g+p*f+B*v+C*w;a[1]=u*m+p*l+B*q+C*x;a[2]=u*h+p*r+B*t+C*z;a[3]=u*n+p*e+B*y+C*c;u=d[4];p=d[5];B=d[6];C=d[7];a[4]=u*g+p*f+B*v+C*w;a[5]=u*m+p*l+B*q+C*x;a[6]=u*h+p*r+B*t+C*z;a[7]=u*n+p*e+B*y+C*c;u=d[8];p=d[9];B=d[10];C=d[11];a[8]=u*g+p*f+B*v+C*w;a[9]=u*m+p*l+B*q+C*x;a[10]=u*h+p*r+B*t+C*z;a[11]=u*n+p*e+B*y+C*c;u=d[12];p=d[13];B=d[14];C=d[15];a[12]=u*g+p*f+B*v+C*w;a[13]=u*m+p*l+B*q+C*x;a[14]=u*h+p*r+B*t+C*z;a[15]=u*n+p*e+B*y+C*c;return a}};e.mul=e.multiply;e.translate=function(a,c,d){var g=d[0],m=d[1];
d=d[2];var h,n,f,l,r,e,v,q,t,y,w,p;c===a?(a[12]=c[0]*g+c[4]*m+c[8]*d+c[12],a[13]=c[1]*g+c[5]*m+c[9]*d+c[13],a[14]=c[2]*g+c[6]*m+c[10]*d+c[14],a[15]=c[3]*g+c[7]*m+c[11]*d+c[15]):(h=c[0],n=c[1],f=c[2],l=c[3],r=c[4],e=c[5],v=c[6],q=c[7],t=c[8],y=c[9],w=c[10],p=c[11],a[0]=h,a[1]=n,a[2]=f,a[3]=l,a[4]=r,a[5]=e,a[6]=v,a[7]=q,a[8]=t,a[9]=y,a[10]=w,a[11]=p,a[12]=h*g+r*m+t*d+c[12],a[13]=n*g+e*m+y*d+c[13],a[14]=f*g+v*m+w*d+c[14],a[15]=l*g+q*m+p*d+c[15]);return a};e.scale=function(a,c,d){var g=d[0],m=d[1];d=
d[2];a[0]=c[0]*g;a[1]=c[1]*g;a[2]=c[2]*g;a[3]=c[3]*g;a[4]=c[4]*m;a[5]=c[5]*m;a[6]=c[6]*m;a[7]=c[7]*m;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};e.rotate=function(a,c,d,g){var m=g[0],h=g[1];g=g[2];var n=Math.sqrt(m*m+h*h+g*g),f,l,r,e,v,q,t,y,p,x,z,u,A,B,C,J,I,G,H,K;if(1E-6>Math.abs(n))return null;n=1/n;m*=n;h*=n;g*=n;f=Math.sin(d);l=Math.cos(d);r=1-l;d=c[0];n=c[1];e=c[2];v=c[3];q=c[4];t=c[5];y=c[6];p=c[7];x=c[8];z=c[9];u=c[10];A=c[11];
B=m*m*r+l;C=h*m*r+g*f;J=g*m*r-h*f;I=m*h*r-g*f;G=h*h*r+l;H=g*h*r+m*f;K=m*g*r+h*f;m=h*g*r-m*f;h=g*g*r+l;a[0]=d*B+q*C+x*J;a[1]=n*B+t*C+z*J;a[2]=e*B+y*C+u*J;a[3]=v*B+p*C+A*J;a[4]=d*I+q*G+x*H;a[5]=n*I+t*G+z*H;a[6]=e*I+y*G+u*H;a[7]=v*I+p*G+A*H;a[8]=d*K+q*m+x*h;a[9]=n*K+t*m+z*h;a[10]=e*K+y*m+u*h;a[11]=v*K+p*m+A*h;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};e.rotateX=function(a,c,d){var g=Math.sin(d);d=Math.cos(d);var m=c[4],h=c[5],n=c[6],f=c[7],l=c[8],r=c[9],e=c[10],v=c[11];c!==a&&
(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=m*d+l*g;a[5]=h*d+r*g;a[6]=n*d+e*g;a[7]=f*d+v*g;a[8]=l*d-m*g;a[9]=r*d-h*g;a[10]=e*d-n*g;a[11]=v*d-f*g;return a};e.rotateY=function(a,c,d){var g=Math.sin(d);d=Math.cos(d);var m=c[0],h=c[1],n=c[2],f=c[3],l=c[8],r=c[9],e=c[10],v=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=m*d-l*g;a[1]=h*d-r*g;a[2]=n*d-e*g;a[3]=f*d-v*g;a[8]=m*g+l*d;a[9]=h*g+r*d;
a[10]=n*g+e*d;a[11]=f*g+v*d;return a};e.rotateZ=function(a,c,d){var g=Math.sin(d);d=Math.cos(d);var m=c[0],h=c[1],n=c[2],f=c[3],l=c[4],r=c[5],e=c[6],v=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=m*d+l*g;a[1]=h*d+r*g;a[2]=n*d+e*g;a[3]=f*d+v*g;a[4]=l*d-m*g;a[5]=r*d-h*g;a[6]=e*d-n*g;a[7]=v*d-f*g;return a};e.frustum=function(a,c,d,g,m,h,n){var f=1/(d-c),l=1/(m-g),r=1/(h-n);a[0]=2*h*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*h*l;a[6]=0;a[7]=
0;a[8]=(d+c)*f;a[9]=(m+g)*l;a[10]=(n+h)*r;a[11]=-1;a[12]=0;a[13]=0;a[14]=n*h*2*r;a[15]=0;return a};e.perspective=function(a,c,d,g,m){c=1/Math.tan(c/2);var h=1/(g-m);a[0]=c/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(m+g)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*m*g*h;a[15]=0;return a};e.ortho=function(a,c,d,g,m,h,n){var f=1/(c-d),l=1/(g-m),r=1/(h-n);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*r;a[11]=0;a[12]=(c+d)*f;a[13]=(m+g)*l;a[14]=
(n+h)*r;a[15]=1;return a};return e}({});e.p5Graphics3D=function(e,a,k,c,d){var g,m,h,n,f=[],l={alpha:!1,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};a.Graphics3D=function(f,d,h){a.Graphics.call(this,f,d,h);try{this.drawingContext=this.canvas.getContext("webgl",l)||this.canvas.getContext("experimental-webgl",l);if(null===this.drawingContext)throw"Error creating webgl context";console.log("p5.Graphics3d: enabled webgl context")}catch(c){console.error(c)}this._pInst._setProperty("_graphics",
this);this.isP3D=!0;g=this.drawingContext;g.clearColor(1,1,1,1);g.clearDepth(1);g.enable(g.DEPTH_TEST);g.depthFunc(g.LEQUAL);g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT);g.viewport(0,0,this.width*this._pInst.pixelDensity,this.height*this._pInst.pixelDensity);this.initShaders();this.initMatrix();return this};a.Graphics3D.prototype=Object.create(a.Graphics.prototype);a.Graphics3D.prototype.initShaders=function(){var f=g.createShader(g.VERTEX_SHADER);g.shaderSource(f,k.defaultVertShader);g.compileShader(f);
if(!g.getShaderParameter(f,g.COMPILE_STATUS))return alert("Yikes! An error occurred compiling the shaders:"+g.getShaderInfoLog(f)),null;var d=g.createShader(g.FRAGMENT_SHADER);g.shaderSource(d,k.defaultMatFragShader);g.compileShader(d);if(!g.getShaderParameter(d,g.COMPILE_STATUS))return alert("Darn! An error occurred compiling the shaders:"+g.getShaderInfoLog(d)),null;m=g.createProgram();g.attachShader(m,f);g.attachShader(m,d);g.linkProgram(m);g.getProgramParameter(m,g.LINK_STATUS)||alert("Snap! Error linking shader program");
g.useProgram(m);m.vertexPositionAttribute=g.getAttribLocation(m,"a_VertexPosition");g.enableVertexAttribArray(m.vertexPositionAttribute);m.pMatrixUniform=g.getUniformLocation(m,"uPMatrix");m.mvMatrixUniform=g.getUniformLocation(m,"uMVMatrix");m.uMaterialColorLoc=g.getUniformLocation(m,"u_MaterialColor");g.uniform4f(m.uMaterialColorLoc,1,1,1,1)};a.Graphics3D.prototype.initMatrix=function(){h=d.create();n=d.create();d.perspective(n,60/180*Math.PI,this.width/this.height,.1,100)};a.Graphics3D.prototype.resetMatrix=
function(){d.identity(h)};a.Graphics3D.prototype.background=function(){var f=this._pInst.color.apply(this._pInst,arguments);g.clearColor(f.color_array[0]/255,f.color_array[1]/255,f.color_array[2]/255,f.color_array[3]/255);g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT)};a.Graphics3D.prototype.stroke=function(){this._stroke=this._pInst.color.apply(this._pInst,arguments)};a.Graphics3D.prototype.drawGeometry=function(f){var d=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,d);g.bufferData(g.ARRAY_BUFFER,
new Float32Array(f),g.STATIC_DRAW);g.vertexAttribPointer(m.vertexPositionAttribute,3,g.FLOAT,!1,0,0);g.uniformMatrix4fv(m.pMatrixUniform,!1,n);g.uniformMatrix4fv(m.mvMatrixUniform,!1,h);g.drawArrays(g.TRIANGLES,0,f.length/3);return this};a.Graphics3D.prototype.translate=function(f,a,c){d.translate(h,h,[f,a,c]);return this};a.Graphics3D.prototype.scale=function(f,a,c){d.scale(h,h,[f,a,c]);return this};a.Graphics3D.prototype.rotateX=function(f){d.rotateX(h,h,f);return this};a.Graphics3D.prototype.rotateY=
function(f){d.rotateY(h,h,f);return this};a.Graphics3D.prototype.rotateZ=function(f){d.rotateZ(h,h,f);return this};a.Graphics3D.prototype.push=function(){var a=d.create();d.copy(a,h);f.push(a)};a.Graphics3D.prototype.pop=function(){if(0===f.length)throw"Invalid popMatrix!";h=f.pop()};return a.Graphics3D}({},e.core,e.shaders,e.p5Graphics,e.mat4);e.p5Image=function(e,a,k){a.Image=function(a,d){this.width=a;this.height=d;this.canvas=document.createElement("canvas");this.canvas.width=this.width;this.canvas.height=
this.height;this.drawingContext=this.canvas.getContext("2d");this.pixelDensity=1;this.pixels=[]};a.Image.prototype._setProperty=function(a,d){this[a]=d};a.Image.prototype.loadPixels=function(){a.Graphics2D.prototype.loadPixels.call(this)};a.Image.prototype.updatePixels=function(c,d,g,m){a.Graphics2D.prototype.updatePixels.call(this,c,d,g,m)};a.Image.prototype.get=function(c,d,g,m){return a.Graphics2D.prototype.get.call(this,c,d,g,m)};a.Image.prototype.set=function(c,d,g){a.Graphics2D.prototype.set.call(this,
c,d,g)};a.Image.prototype.resize=function(a,d){a=a||this.canvas.width;d=d||this.canvas.height;var g=document.createElement("canvas");g.width=a;g.height=d;g.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,g.width,g.height);this.canvas.width=this.width=a;this.canvas.height=this.height=d;this.drawingContext.drawImage(g,0,0,a,d,0,0,a,d);0<this.pixels.length&&this.loadPixels()};a.Image.prototype.copy=function(){a.prototype.copy.apply(this,arguments)};a.Image.prototype.mask=
function(c){void 0===c&&(c=this);var d=this.drawingContext.globalCompositeOperation,g=1;c instanceof a.Graphics&&(g=c._pInst.pixelDensity);c=[c,0,0,g*c.width,g*c.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in";this.copy.apply(this,c);this.drawingContext.globalCompositeOperation=d};a.Image.prototype.filter=function(a,d){k.apply(this.canvas,k[a.toLowerCase()],d)};a.Image.prototype.blend=function(){a.prototype.blend.apply(this,arguments)};a.Image.prototype.save=
function(c,d){var g;if(d)switch(d.toLowerCase()){case "png":g="image/png";break;case "jpeg":g="image/jpeg";break;case "jpg":g="image/jpeg";break;default:g="image/png"}else d="png",g="image/png";var m=this.canvas.toDataURL(g),m=m.replace(g,"image/octet-stream");a.prototype.downloadFile(m,c,d)};return a.Image}({},e.core,e.filters);e.polargeometry=function(e){return{degreesToRadians:function(a){return 2*Math.PI*a/360},radiansToDegrees:function(a){return 360*a/(2*Math.PI)}}}({});e.p5Vector=function(e,
a,k,c){a.Vector=function(d,c,m){var h;d instanceof a?(this.p5=d,d=c[0]||0,h=c[1]||0,c=c[2]||0):(d=d||0,h=c||0,c=m||0);this.x=d;this.y=h;this.z=c};a.Vector.prototype.set=function(d,c,m){if(d instanceof a.Vector)return this.x=d.x||0,this.y=d.y||0,this.z=d.z||0,this;if(d instanceof Array)return this.x=d[0]||0,this.y=d[1]||0,this.z=d[2]||0,this;this.x=d||0;this.y=c||0;this.z=m||0;return this};a.Vector.prototype.copy=function(){return this.p5?new a.Vector(this.p5,[this.x,this.y,this.z]):new a.Vector(this.x,
this.y,this.z)};a.Vector.prototype.add=function(d,c,m){if(d instanceof a.Vector)return this.x+=d.x||0,this.y+=d.y||0,this.z+=d.z||0,this;if(d instanceof Array)return this.x+=d[0]||0,this.y+=d[1]||0,this.z+=d[2]||0,this;this.x+=d||0;this.y+=c||0;this.z+=m||0;return this};a.Vector.prototype.sub=function(d,c,m){if(d instanceof a.Vector)return this.x-=d.x||0,this.y-=d.y||0,this.z-=d.z||0,this;if(d instanceof Array)return this.x-=d[0]||0,this.y-=d[1]||0,this.z-=d[2]||0,this;this.x-=d||0;this.y-=c||0;this.z-=
m||0;return this};a.Vector.prototype.mult=function(d){this.x*=d||0;this.y*=d||0;this.z*=d||0;return this};a.Vector.prototype.div=function(d){this.x/=d;this.y/=d;this.z/=d;return this};a.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())};a.Vector.prototype.magSq=function(){var d=this.x,a=this.y,c=this.z;return d*d+a*a+c*c};a.Vector.prototype.dot=function(d,c,m){return d instanceof a.Vector?this.dot(d.x,d.y,d.z):this.x*(d||0)+this.y*(c||0)+this.z*(m||0)};a.Vector.prototype.cross=function(d){var c=
this.y*d.z-this.z*d.y,m=this.z*d.x-this.x*d.z;d=this.x*d.y-this.y*d.x;return this.p5?new a.Vector(this.p5,[c,m,d]):new a.Vector(c,m,d)};a.Vector.prototype.dist=function(d){return d.copy().sub(this).mag()};a.Vector.prototype.normalize=function(){return this.div(this.mag())};a.Vector.prototype.limit=function(d){var a=this.magSq();a>d*d&&(this.div(Math.sqrt(a)),this.mult(d));return this};a.Vector.prototype.setMag=function(d){return this.normalize().mult(d)};a.Vector.prototype.heading=function(){var d=
Math.atan2(this.y,this.x);return this.p5?this.p5._angleMode===c.RADIANS?d:k.radiansToDegrees(d):d};a.Vector.prototype.rotate=function(d){this.p5&&this.p5._angleMode===c.DEGREES&&(d=k.degreesToRadians(d));d=this.heading()+d;var a=this.mag();this.x=Math.cos(d)*a;this.y=Math.sin(d)*a;return this};a.Vector.prototype.lerp=function(d,c,m,h){if(d instanceof a.Vector)return this.lerp(d.x,d.y,d.z,c);this.x+=(d-this.x)*h||0;this.y+=(c-this.y)*h||0;this.z+=(m-this.z)*h||0;return this};a.Vector.prototype.array=
function(){return[this.x||0,this.y||0,this.z||0]};a.Vector.prototype.equals=function(d,c,m){d instanceof a.Vector?(d=d.x||0,c=d.y||0,m=d.z||0):d instanceof Array?(d=d[0]||0,c=d[1]||0,m=d[2]||0):(d=d||0,c=c||0,m=m||0);return this.x===d&&this.y===c&&this.z===m};a.Vector.fromAngle=function(d){this.p5&&this.p5._angleMode===c.DEGREES&&(d=k.degreesToRadians(d));return this.p5?new a.Vector(this.p5,[Math.cos(d),Math.sin(d),0]):new a.Vector(Math.cos(d),Math.sin(d),0)};a.Vector.random2D=function(){var d;d=
this.p5?this.p5._angleMode===c.DEGREES?this.p5.random(360):this.p5.random(c.TWO_PI):Math.random()*Math.PI*2;return this.fromAngle(d)};a.Vector.random3D=function(){var d,g;this.p5?(d=this.p5.random(0,c.TWO_PI),g=this.p5.random(-1,1)):(d=Math.random()*Math.PI*2,g=2*Math.random()-1);var m=Math.sqrt(1-g*g)*Math.cos(d);d=Math.sqrt(1-g*g)*Math.sin(d);return this.p5?new a.Vector(this.p5,[m,d,g]):new a.Vector(m,d,g)};a.Vector.add=function(d,a,c){c?c.set(d):c=d.copy();c.add(a);return c};a.Vector.sub=function(d,
a,c){c?c.set(d):c=d.copy();c.sub(a);return c};a.Vector.mult=function(d,a,c){c?c.set(d):c=d.copy();c.mult(a);return c};a.Vector.div=function(d,a,c){c?c.set(d):c=d.copy();c.div(a);return c};a.Vector.dot=function(d,a){return d.dot(a)};a.Vector.cross=function(d,a){return d.cross(a)};a.Vector.dist=function(d,a){return d.dist(a)};a.Vector.lerp=function(d,a,c,h){h?h.set(d):h=d.copy();h.lerp(a,c);return h};a.Vector.angleBetween=function(d,a){var m=Math.acos(d.dot(a)/(d.mag()*a.mag()));this.p5&&this.p5._angleMode===
c.DEGREES&&(m=k.radiansToDegrees(m));return m};return a.Vector}({},e.core,e.polargeometry,e.constants);e.p5TableRow=function(e,a){a.TableRow=function(a,c){var d=[],g={};a&&(d=a.split(c||","));for(var m=0;m<d.length;m++)g[m]=d[m];this.arr=d;this.obj=g;this.table=null};a.TableRow.prototype.set=function(a,c){if("string"===typeof a){var d=this.table.columns.indexOf(a);if(0<=d)this.obj[a]=c,this.arr[d]=c;else throw'This table has no column named "'+a+'"';}else if(a<this.table.columns.length)this.arr[a]=
c,this.obj[this.table.columns[a]]=c;else throw"Column #"+a+" is out of the range of this table";};a.TableRow.prototype.setNum=function(a,c){var d=parseFloat(c,10);this.set(a,d)};a.TableRow.prototype.setString=function(a,c){this.set(a,c.toString())};a.TableRow.prototype.get=function(a){return"string"===typeof a?this.obj[a]:this.arr[a]};a.TableRow.prototype.getNum=function(a){var c;c="string"===typeof a?parseFloat(this.obj[a],10):parseFloat(this.arr[a],10);if("NaN"===c.toString())throw"Error: "+this.obj[a]+
" is NaN (Not a Number)";return c};a.TableRow.prototype.getString=function(a){return"string"===typeof a?this.obj[a].toString():this.arr[a].toString()};return a.TableRow}({},e.core);e.p5Table=function(e,a){a.Table=function(a){this.columns=[];this.rows=[]};a.Table.prototype.addRow=function(e){e=e||new a.TableRow;if("undefined"===typeof e.arr||"undefined"===typeof e.obj)throw"invalid TableRow: "+e;e.table=this;this.rows.push(e);return e};a.Table.prototype.removeRow=function(a){this.rows[a].table=null;
a=this.rows.splice(a+1,this.rows.length);this.rows.pop();this.rows=this.rows.concat(a)};a.Table.prototype.getRow=function(a){return this.rows[a]};a.Table.prototype.getRows=function(){return this.rows};a.Table.prototype.findRow=function(a,c){if("string"===typeof c)for(var d=0;d<this.rows.length;d++){if(this.rows[d].obj[c]===a)return this.rows[d]}else for(d=0;d<this.rows.length;d++)if(this.rows[d].arr[c]===a)return this.rows[d];return null};a.Table.prototype.findRows=function(a,c){var d=[];if("string"===
typeof c)for(var g=0;g<this.rows.length;g++)this.rows[g].obj[c]===a&&d.push(this.rows[g]);else for(g=0;g<this.rows.length;g++)this.rows[g].arr[c]===a&&d.push(this.rows[g]);return d};a.Table.prototype.matchRow=function(a,c){if("number"===typeof c)for(var d=0;d<this.rows.length;d++){if(this.rows[d].arr[c].match(a))return this.rows[d]}else for(d=0;d<this.rows.length;d++)if(this.rows[d].obj[c].match(a))return this.rows[d];return null};a.Table.prototype.matchRows=function(a,c){var d=[];if("number"===typeof c)for(var g=
0;g<this.rows.length;g++)this.rows[g].arr[c].match(a)&&d.push(this.rows[g]);else for(g=0;g<this.rows.length;g++)this.rows[g].obj[c].match(a)&&d.push(this.rows[g]);return d};a.Table.prototype.getColumn=function(a){var c=[];if("string"===typeof a)for(var d=0;d<this.rows.length;d++)c.push(this.rows[d].obj[a]);else for(d=0;d<this.rows.length;d++)c.push(this.rows[d].arr[a]);return c};a.Table.prototype.clearRows=function(){delete this.rows;this.rows=[]};a.Table.prototype.addColumn=function(a){this.columns.push(a||
null)};a.Table.prototype.getColumnCount=function(){return this.columns.length};a.Table.prototype.getRowCount=function(){return this.rows.length};a.Table.prototype.removeTokens=function(a,c){for(var d=function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},g=[],e=0;e<a.length;e++)g.push(d(a.charAt(e)));d=new RegExp(g.join("|"),"g");if("undefined"===typeof c)for(g=0;g<this.columns.length;g++)for(e=0;e<this.rows.length;e++){var h=this.rows[e].arr[g],h=h.replace(d,"");this.rows[e].arr[g]=h;this.rows[e].obj[this.columns[g]]=
h}else if("string"===typeof c)for(g=0;g<this.rows.length;g++)e=this.rows[g].obj[c],e=e.replace(d,""),this.rows[g].obj[c]=e,h=this.columns.indexOf(c),this.rows[g].arr[h]=e;else for(g=0;g<this.rows.length;g++)e=this.rows[g].arr[c],e=e.replace(d,""),this.rows[g].arr[c]=e,this.rows[g].obj[this.columns[c]]=e};a.Table.prototype.trim=function(a){var c=RegExp(" ","g");if("undefined"===typeof a)for(a=0;a<this.columns.length;a++)for(var d=0;d<this.rows.length;d++){var g=this.rows[d].arr[a],g=g.replace(c,"");
this.rows[d].arr[a]=g;this.rows[d].obj[this.columns[a]]=g}else if("string"===typeof a)for(d=0;d<this.rows.length;d++){g=this.rows[d].obj[a];g=g.replace(c,"");this.rows[d].obj[a]=g;var e=this.columns.indexOf(a);this.rows[d].arr[e]=g}else for(d=0;d<this.rows.length;d++)g=this.rows[d].arr[a],g=g.replace(c,""),this.rows[d].arr[a]=g,this.rows[d].obj[this.columns[a]]=g};a.Table.prototype.removeColumn=function(a){var c,d;"string"===typeof a?(c=a,d=this.columns.indexOf(a),console.log("string")):(d=a,c=this.columns[a]);
a=this.columns.splice(d+1,this.columns.length);this.columns.pop();this.columns=this.columns.concat(a);for(a=0;a<this.rows.length;a++){var g=this.rows[a].arr,e=g.splice(d+1,g.length);g.pop();this.rows[a].arr=g.concat(e);delete this.rows[a].obj[c]}};a.Table.prototype.set=function(a,c,d){this.rows[a].set(c,d)};a.Table.prototype.setNum=function(a,c,d){this.rows[a].set(c,d)};a.Table.prototype.setString=function(a,c,d){this.rows[a].set(c,d)};a.Table.prototype.get=function(a,c){return this.rows[a].get(c)};
a.Table.prototype.getNum=function(a,c){return this.rows[a].getNum(c)};a.Table.prototype.getString=function(a,c){return this.rows[a].getString(c)};a.Table.prototype.getObject=function(a){for(var c={},d,g,e=0;e<this.rows.length;e++)if(d=this.rows[e].obj,"string"===typeof a)if(g=this.columns.indexOf(a),0<=g)g=d[a],c[g]=d;else throw'This table has no column named "'+a+'"';else c[e]=this.rows[e].obj;return c};a.Table.prototype.getArray=function(){for(var a=[],c=0;c<this.rows.length;c++)a.push(this.rows[c].arr);
return a};return a.Table}({},e.core);e.colorcreating_reading=function(e,a,k){a.prototype.alpha=function(c){if(c instanceof a.Color||c instanceof Array)return this.color(c).getAlpha();throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.blue=function(c){if(c instanceof a.Color||c instanceof Array)return this.color(c).getBlue();throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.brightness=function(c){if(c instanceof a.Color||c instanceof Array)return this.color(c).getBrightness();
throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.color=function(){if(arguments[0]instanceof a.Color)return arguments[0];if(arguments[0]instanceof Array)return new a.Color(this,arguments[0]);var c=Array.prototype.slice.call(arguments);return new a.Color(this,c)};a.prototype.green=function(c){if(c instanceof a.Color||c instanceof Array)return this.color(c).getGreen();throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.hue=function(c){if(!c instanceof a.Color)throw Error("Needs p5.Color as argument.");
return c.getHue()};a.prototype.lerpColor=function(c,d,g){g=Math.max(Math.min(g,1),0);if(c instanceof Array){for(var e=[],h=0;h<c.length;h++)e.push(Math.sqrt(a.prototype.lerp(c[h]*c[h],d[h]*d[h],g)));return e}if(c instanceof a.Color){e=[];for(h=0;4>h;h++)e.push(Math.sqrt(a.prototype.lerp(c.rgba[h]*c.rgba[h],d.rgba[h]*d.rgba[h],g)));return new a.Color(this,e)}return Math.sqrt(a.prototype.lerp(c*c,d*d,g))};a.prototype.red=function(c){if(c instanceof a.Color||c instanceof Array)return this.color(c).getRed();
throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.saturation=function(c){if(!c instanceof a.Color)throw Error("Needs p5.Color as argument.");return c.getSaturation()};return a}({},e.core,e.p5Color);e.colorsetting=function(e,a,k,c){a.prototype._doStroke=!0;a.prototype._doFill=!0;a.prototype._strokeSet=!1;a.prototype._fillSet=!1;a.prototype._colorMode=k.RGB;a.prototype._maxRGB=[255,255,255,255];a.prototype._maxHSB=[255,255,255,255];a.prototype.background=function(){arguments[0]instanceof
a.Image?this.image(arguments[0],0,0,this.width,this.height):this._graphics.background.apply(this._graphics,arguments);return this};a.prototype.clear=function(){this._graphics.clear();return this};a.prototype.colorMode=function(){if(arguments[0]===k.RGB||arguments[0]===k.HSB){this._colorMode=arguments[0];var a=this._colorMode===k.RGB?this._maxRGB:this._maxHSB;2===arguments.length?(a[0]=arguments[1],a[1]=arguments[1],a[2]=arguments[1],a[3]=arguments[1]):2<arguments.length&&(a[0]=arguments[1],a[1]=arguments[2],
a[2]=arguments[3]);5===arguments.length&&(a[3]=arguments[4])}return this};a.prototype.fill=function(){this._setProperty("_fillSet",!0);this._setProperty("_doFill",!0);this._graphics.fill.apply(this._graphics,arguments);return this};a.prototype.noFill=function(){this._setProperty("_doFill",!1);return this};a.prototype.noStroke=function(){this._setProperty("_doStroke",!1);return this};a.prototype.stroke=function(){this._setProperty("_strokeSet",!0);this._setProperty("_doStroke",!0);this._graphics.stroke.apply(this._graphics,
arguments);return this};return a}({},e.core,e.constants,e.p5Color);e.dataconversion=function(e,a){a.prototype["float"]=function(a){return parseFloat(a)};a.prototype["int"]=function(e,c){if("string"===typeof e)return c=c||10,parseInt(e,c);if("number"===typeof e)return e|0;if("boolean"===typeof e)return e?1:0;if(e instanceof Array)return e.map(function(d){return a.prototype["int"](d,c)})};a.prototype.str=function(e){return e instanceof Array?e.map(a.prototype.str):String(e)};a.prototype["boolean"]=
function(e){if("number"===typeof e)return 0!==e;if("string"===typeof e)return"true"===e.toLowerCase();if("boolean"===typeof e)return e;if(e instanceof Array)return e.map(a.prototype["boolean"])};a.prototype["byte"]=function(e){e=a.prototype["int"](e,10);if("number"===typeof e)return(e+128)%256-128;if(e instanceof Array)return e.map(a.prototype["byte"])};a.prototype["char"]=function(e){if("number"!==typeof e||isNaN(e)){if(e instanceof Array)return e.map(a.prototype["char"]);if("string"===typeof e)return a.prototype["char"](parseInt(e,
10))}else return String.fromCharCode(e)};a.prototype.unchar=function(e){if("string"===typeof e&&1===e.length)return e.charCodeAt(0);if(e instanceof Array)return e.map(a.prototype.unchar)};a.prototype.hex=function(e,c){c=void 0===c||null===c?c=8:c;if(e instanceof Array)return e.map(function(d){return a.prototype.hex(d,c)});if("number"===typeof e){0>e&&(e=4294967295+e+1);for(var d=Number(e).toString(16).toUpperCase();d.length<c;)d="0"+d;d.length>=c&&(d=d.substring(d.length-c,d.length));return d}};a.prototype.unhex=
function(e){return e instanceof Array?e.map(a.prototype.unhex):parseInt("0x"+e,16)};return a}({},e.core);e.dataarray_functions=function(e,a){a.prototype.append=function(a,c){a.push(c);return a};a.prototype.arrayCopy=function(a,c,d,g,e){"undefined"!==typeof e?(e=Math.min(e,a.length),a=a.slice(c,e+c)):(e="undefined"!==typeof d?Math.min(d,a.length):a.length,g=0,d=c,a=a.slice(0,e));Array.prototype.splice.apply(d,[g,e].concat(a))};a.prototype.concat=function(a,c){return a.concat(c)};a.prototype.reverse=
function(a){return a.reverse()};a.prototype.shorten=function(a){a.pop();return a};a.prototype.shuffle=function(a,c){a=c||ArrayBuffer.isView(a)?a:a.slice();for(var d,g,e=a.length;1<e;)d=Math.random()*e|0,g=a[--e],a[e]=a[d],a[d]=g;return a};a.prototype.sort=function(a,c){var d=c?a.slice(0,Math.min(c,a.length)):a,g=c?a.slice(Math.min(c,a.length)):[],d="string"===typeof d[0]?d.sort():d.sort(function(a,d){return a-d});return d.concat(g)};a.prototype.splice=function(a,c,d){Array.prototype.splice.apply(a,
[d,0].concat(c));return a};a.prototype.subset=function(a,c,d){return"undefined"!==typeof d?a.slice(c,c+d):a.slice(c,a.length)};return a}({},e.core);e.datastring_functions=function(e,a){function k(){var a=arguments[0],d=0>a,c=d?a.toString().substring(1):a.toString(),f=c.indexOf("."),a=-1!==f?c.substring(0,f):c,f=-1!==f?c.substring(f+1):"",d=d?"-":"";if(3===arguments.length){for(c=0;c<arguments[1]-a.length;c++)d+="0";d=d+a+".";d+=f;for(a=0;a<arguments[2]-f.length;a++)d+="0"}else{for(f=0;f<Math.max(arguments[1]-
a.length,0);f++)d+="0";d+=c}return d}function c(){var a=arguments[0].toString(),d=a.indexOf("."),c=-1!==d?a.substring(d):"",a=-1!==d?a.substring(0,d):a,a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");0===arguments[1]&&(c="");1<arguments.length&&(c=c.substring(0,arguments[1]+1));return a+c}function d(a){return 0<parseFloat(a)?"+"+a.toString():a.toString()}function g(a){return 0<parseFloat(a)?" "+a.toString():a.toString()}a.prototype.join=function(a,d){return a.join(d)};a.prototype.match=function(a,
d){return a.match(d)};a.prototype.matchAll=function(a,d){for(var c=new RegExp(d,"g"),f=c.exec(a),l=[];null!==f;)l.push(f),f=c.exec(a);return l};a.prototype.nf=function(){if(arguments[0]instanceof Array){var a=arguments[1],d=arguments[2];return arguments[0].map(function(c){return k(c,a,d)})}return k.apply(this,arguments)};a.prototype.nfc=function(){if(arguments[0]instanceof Array){var a=arguments[1];return arguments[0].map(function(d){return c(d,a)})}return c.apply(this,arguments)};a.prototype.nfp=
function(){var a=this.nf.apply(this,arguments);return a instanceof Array?a.map(d):d(a)};a.prototype.nfs=function(){var a=this.nf.apply(this,arguments);return a instanceof Array?a.map(g):g(a)};a.prototype.split=function(a,d){return a.split(d)};a.prototype.splitTokens=function(){return arguments[0].split(0<arguments.length?arguments[1]:/\s/g).filter(function(a){return a})};a.prototype.trim=function(a){return a instanceof Array?a.map(this.trim):a.trim()};return a}({},e.core);e.environment=function(e,
a,k){var c=[k.ARROW,k.CROSS,k.HAND,k.MOVE,k.TEXT,k.WAIT];a.prototype._frameRate=0;a.prototype._lastFrameTime=(new Date).getTime();a.prototype._targetFrameRate=60;a.prototype.print=window.console&&console.log?function(a){a=JSON.parse(JSON.stringify(a));console.log(a)}:function(){};a.prototype.println=a.prototype.print;a.prototype.frameCount=0;a.prototype.focused=!0;a.prototype.cursor=function(a,g,e){var h="auto",n=this._curElement.elt;-1<c.indexOf(a)?h=a:"string"===typeof a&&(h="",g&&e&&"number"===
typeof g&&"number"===typeof e&&(h=g+" "+e),h="http://"!==a.substring(0,6)?"url("+a+") "+h+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(a)?"url("+a+") "+h+", auto":a);n.style.cursor=h};a.prototype.frameRate=function(a){if("undefined"===typeof a)return this._frameRate;this._setProperty("_targetFrameRate",a);this._runFrames();return this};a.prototype.getFrameRate=function(){return this.frameRate()};a.prototype.setFrameRate=function(a){return this.frameRate(a)};a.prototype.noCursor=
function(){this._curElement.elt.style.cursor="none"};a.prototype.displayWidth=screen.width;a.prototype.displayHeight=screen.height;a.prototype.windowWidth=window.innerWidth;a.prototype.windowHeight=window.innerHeight;a.prototype._onresize=function(a){this._setProperty("windowWidth",window.innerWidth);this._setProperty("windowHeight",window.innerHeight);var c=this._isGlobal?window:this;"function"===typeof c.windowResized&&(c=c.windowResized(a),void 0===c||c||a.preventDefault())};a.prototype.width=
0;a.prototype.height=0;a.prototype.fullscreen=function(a){if("undefined"===typeof a)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(a){a=document.documentElement;if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw Error("Fullscreen not enabled in this browser.");a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():
a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()};a.prototype.devicePixelScaling=function(a){this.pixelDensity=a?"number"===typeof a?a:window.devicePixelRatio||1:1;this.resizeCanvas(this.width,this.height,!0)};a.prototype.getURL=
function(){return location.href};a.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(a){return""!==a})};a.prototype.getURLParams=function(){for(var a=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,c,e={};null!=(c=a.exec(location.search));)c.index===a.lastIndex&&a.lastIndex++,e[c[1]]=c[2];return e};return a}({},e.core,e.constants);e.imageimage=function(e,a,k){a.prototype._imageMode=k.CORNER;a.prototype._tint=null;a.prototype.createImage=function(d,c){return new a.Image(d,c)};var c=
[];a.prototype.saveCanvas=function(d,c,e){e||(e=a.prototype._checkFileExtension(c,e)[1],""===e&&(e="png"));var h;d?h=d:this._curElement&&this._curElement.elt&&(h=this._curElement.elt);if(a.prototype._isSafari())c="Hello, Safari user!\nNow capturing a screenshot...\nTo save this image,\n",c+="go to File --\x3e Save As.\n",alert(c),window.location.href=h.toDataURL();else{if("undefined"===typeof e)e="png",d="image/png";else switch(e){case "png":d="image/png";break;case "jpeg":d="image/jpeg";break;case "jpg":d=
"image/jpeg";break;default:d="image/png"}h=h.toDataURL(d);h=h.replace(d,"image/octet-stream");a.prototype.downloadFile(h,c,e)}};a.prototype.saveFrames=function(d,g,e,h,n){e=a.prototype.constrain(e||3,0,15);e*=1E3;h=a.prototype.constrain(h||15,0,22);var f=0,l=a.prototype._makeFrame,r=this._curElement.elt,k=setInterval(function(){l(d+f,g,r);f++},1E3/h);setTimeout(function(){clearInterval(k);if(n)n(c);else for(var f=0;f<c.length;f++){var d=c[f];a.prototype.downloadFile(d.imageData,d.filename,d.ext)}c=
[]},e+.01)};a.prototype._makeFrame=function(a,g,e){var h;h=this?this._curElement.elt:e;if(g)switch(g.toLowerCase()){case "png":e="image/png";break;case "jpeg":e="image/jpeg";break;case "jpg":e="image/jpeg";break;default:e="image/png"}else g="png",e="image/png";h=h.toDataURL(e);h=h.replace(e,"image/octet-stream");e={};e.imageData=h;e.filename=a;e.ext=g;c.push(e)};return a}({},e.core,e.constants);e.helpers=function(e,a){function k(a,f,d){"undefined"===h(d)?d="#B40033":"number"===h(d)&&(d=l[d]);console.log("%c> p5.js says: "+
a+"%c [http://p5js.org/reference/#p5/"+f+"]","background-color:"+d+";color:#FFF;","background-color:transparent;color:"+d+";")}for(var c={},d=c.toString,g="Boolean Number String Function Array Date RegExp Object Error".split(" "),m=0;m<g.length;m++)c["[object "+g[m]+"]"]=g[m].toLowerCase();var h=function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?c[d.call(a)]||"object":typeof a},n=Array.isArray||function(a){return"array"===h(a)},f=["Number","Integer","Number/Constant"],l=["#2D7BB6",
"#EE9900","#4DB200"];a.prototype._validateParameters=function(d,c,l){n(l[0])||(l=[l]);var g=Math.abs(c.length-l[0].length),e,m=0,w=1;for(e=l.length;w<e;w++){var p=Math.abs(c.length-l[w].length);p<=g&&(m=w,g=p)}0<g&&(e="You wrote "+d+"(",0<c.length&&(e+="X"+",X".repeat(c.length-1)),e+="). "+d+" was expecting "+l[m].length+" parameters. Try "+d+"(",0<l[m].length&&(e+="X"+",X".repeat(l[m].length-1)),e+=").",1<l.length&&(e+=" "+d+" takes different numbers of parameters depending on what you want to do. Click this link to learn more: "),
k(e,d,0));for(m=0;m<l.length;m++)for(g=0;g<l[m].length&&g<c.length;g++)if(e=l[m][g],w=h(c[g]),"undefined"===w||null===w)k("It looks like "+d+" received an empty variable in spot #"+(g+1)+". If not intentional, this is often a problem with scope: [link to scope].",d,1);else{var z=e,u=w,p=c[g];if(z.match(/^p5\./))z=z.split("."),p=p instanceof a[z[1]];else{if(!(u="Boolean"===z||z.toLowerCase()===u)){if(z=-1<f.indexOf(z))z=!n(p)&&0<=p-parseFloat(p)+1;u=z}p=u}p||(e=d+" was expecting a "+e.toLowerCase()+
" for parameter #"+(g+1)+", received ",e+="string"===w?'"'+c[g]+'"':c[g],e+=" instead.",1<l.length&&(e+=" "+d+" takes different numbers of parameters depending on what you want to do. Click this link to learn more:"),k(e,d,2))}};a.prototype._testColors=function(){k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#ED225D");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#2D7BB6");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer",
"println","#EE9900");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#A67F59");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#704F21");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#1CC581");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#FF6625");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#79EB22");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer",
"println","#B40033");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#084B7F");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#945F00");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#6B441D");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#2E1B00");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#008851");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer",
"println","#C83C00");k("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#4DB200")};return a}({},e.core);e.imageloading_displaying=function(e,a,k,c,d,g){a.prototype.loadImage=function(d,c,g){var f=new Image,l=new a.Image(1,1,this);f.onload=function(){l.width=l.canvas.width=f.width;l.height=l.canvas.height=f.height;l.canvas.getContext("2d").drawImage(f,0,0);"function"===typeof c&&c(l)};f.onerror=function(a){"function"===typeof g&&g(a)};0!==d.indexOf("data:image/")&&(f.crossOrigin=
"Anonymous");f.src=d;return l};a.prototype.image=function(a,d,g,f,l){this._validateParameters("image",arguments,[["p5.Image","Number","Number"],["p5.Image","Number","Number","Number","Number"]]);f=f||a.width;l=l||a.height;var e=c.modeAdjust(d||0,g||0,f,l,this._imageMode);this._graphics.image(a,e.x,e.y,e.w,e.h)};a.prototype.tint=function(){this._tint=this.color.apply(this,arguments).rgba};a.prototype.noTint=function(){this._tint=null};a.prototype._getTintedImageCanvas=function(a){if(!a.canvas)return a;
var d=k._toPixels(a.canvas),c=document.createElement("canvas");c.width=a.canvas.width;c.height=a.canvas.height;var f=c.getContext("2d");a=f.createImageData(a.canvas.width,a.canvas.height);for(var l=a.data,g=0;g<d.length;g+=4){var e=d[g+1],v=d[g+2],q=d[g+3];l[g]=d[g]*this._tint[0]/255;l[g+1]=e*this._tint[1]/255;l[g+2]=v*this._tint[2]/255;l[g+3]=q*this._tint[3]/255}f.putImageData(a,0,0);return c};a.prototype.imageMode=function(a){if(a===d.CORNER||a===d.CORNERS||a===d.CENTER)this._imageMode=a};return a}({},
e.core,e.filters,e.canvas,e.constants,e.helpers);e.imagepixels=function(e,a,k,c){a.prototype.pixels=[];a.prototype.blend=function(){this._graphics.blend.apply(this._graphics,arguments)};a.prototype.copy=function(){a.Graphics2D._copyHelper.apply(this,arguments)};a.prototype.filter=function(a,c){k.apply(this.canvas,k[a.toLowerCase()],c)};a.prototype.get=function(a,c,e,h){return this._graphics.get(a,c,e,h)};a.prototype.loadPixels=function(){this._graphics.loadPixels()};a.prototype.set=function(a,c,e){this._graphics.set(a,
c,e)};a.prototype.updatePixels=function(a,c,e,h){this._graphics.updatePixels(a,c,e,h)};return a}({},e.core,e.filters,e.p5Color);!function(e,a,k){"undefined"!=typeof module&&module.exports?module.exports=k():"function"==typeof define&&define.amd?define("reqwest",k):a[e]=k()}("reqwest",e,function(){function e(a,f,d){return function(){if(a._aborted)return d(a.request);if(a._timedOut)return d(a.request,"Request is aborted: timeout");if(a.request&&4==a.request.readyState){a.request.onreadystatechange=
I;var c=z.exec(a.url),c=c&&c[1]||window.location.protocol;(x.test(c)?u.test(a.request.status):a.request.response)?f(a.request):d(a.request)}}}function a(a,f){var d=f.headers||{},c;d.Accept=d.Accept||H.accept[f.type]||H.accept["*"];var h="function"===typeof FormData&&f.data instanceof FormData;f.crossOrigin||d["X-Requested-With"]||(d["X-Requested-With"]=H.requestedWith);d["Content-Type"]||h||(d["Content-Type"]=f.contentType||H.contentType);for(c in d)d.hasOwnProperty(c)&&"setRequestHeader"in a&&a.setRequestHeader(c,
d[c])}function k(a){J=a}function c(a,f){return a+(/\?/.test(a)?"&":"?")+f}function d(a,d,h,l){var g=B++,e=a.jsonpCallback||"callback";a=a.jsonpCallbackName||f.getcallbackPrefix(g);var r=new RegExp("((^|\\?|&)"+e+")=([^&]+)"),n=l.match(r),m=w.createElement("script"),v=0,q=-1!==navigator.userAgent.indexOf("MSIE 10.0");n?"?"===n[3]?l=l.replace(r,"$1="+a):a=n[3]:l=c(l,e+"="+a);y[a]=k;m.type="text/javascript";m.src=l;m.async=!0;"undefined"===typeof m.onreadystatechange||q||(m.htmlFor=m.id="_reqwest_"+
g);m.onload=m.onreadystatechange=function(){if(m.readyState&&"complete"!==m.readyState&&"loaded"!==m.readyState||v)return!1;m.onload=m.onreadystatechange=null;m.onclick&&m.onclick();d(J);J=void 0;A.removeChild(m);v=1};A.appendChild(m);return{abort:function(){m.onload=m.onreadystatechange=null;h({},"Request is aborted: timeout",{});J=void 0;A.removeChild(m);v=1}}}function g(h,l){var g=this.o,r=(g.method||"GET").toUpperCase(),n="string"===typeof g?g:g.url,m=!1!==g.processData&&g.data&&"string"!==typeof g.data?
f.toQueryString(g.data):g.data||null,k,v=!1;"jsonp"!=g.type&&"GET"!=r||!m||(n=c(n,m),m=null);if("jsonp"==g.type)return d(g,h,l,n);k=g.xhr&&g.xhr(g)||K(g);k.open(r,n,!1===g.async?!1:!0);a(k,g);"undefined"!==typeof g.withCredentials&&"undefined"!==typeof k.withCredentials&&(k.withCredentials=!!g.withCredentials);y.XDomainRequest&&k instanceof y.XDomainRequest?(k.onload=h,k.onerror=l,k.onprogress=function(){},v=!0):k.onreadystatechange=e(this,h,l);g.before&&g.before(k);v?setTimeout(function(){k.send(m)},
200):k.send(m);return k}function m(a,f){this.o=a;this.fn=f;n.apply(this,arguments)}function h(a){if(a.match("json"))return"json";if(a.match("javascript"))return"js";if(a.match("text"))return"html";if(a.match("xml"))return"xml"}function n(a,f){function d(f){a.timeout&&clearTimeout(l.timeout);for(l.timeout=null;0<l._completeHandlers.length;)l._completeHandlers.shift()(f)}function c(a,f,h){a=l.request;l._responseArgs.resp=a;l._responseArgs.msg=f;l._responseArgs.t=h;for(l._erred=!0;0<l._errorHandlers.length;)l._errorHandlers.shift()(a,
f,h);d(a)}this.url="string"==typeof a?a:a.url;this.timeout=null;this._fulfilled=!1;this._successHandler=function(){};this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=[];this._erred=!1;this._responseArgs={};var l=this;f=f||function(){};a.timeout&&(this.timeout=setTimeout(function(){l._timedOut=!0;l.request.abort()},a.timeout));a.success&&(this._successHandler=function(){a.success.apply(a,arguments)});a.error&&this._errorHandlers.push(function(){a.error.apply(a,arguments)});
a.complete&&this._completeHandlers.push(function(){a.complete.apply(a,arguments)});this.request=g.call(this,function(g){var e=a.type||g&&h(g.getResponseHeader("Content-Type"));g="jsonp"!==e?l.request:g;var r=M.dataFilter(g.responseText,e);try{g.responseText=r}catch(n){}if(r)switch(e){case "json":try{g=y.JSON?y.JSON.parse(r):eval("("+r+")")}catch(m){return c(g,"Could not parse JSON in response",m)}break;case "js":g=eval(r);break;case "html":g=r;break;case "xml":g=g.responseXML&&g.responseXML.parseError&&
g.responseXML.parseError.errorCode&&g.responseXML.parseError.reason?null:g.responseXML}l._responseArgs.resp=g;l._fulfilled=!0;f(g);for(l._successHandler(g);0<l._fulfillmentHandlers.length;)g=l._fulfillmentHandlers.shift()(g);d(g)},c)}function f(a,f){return new m(a,f)}function l(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function r(a,f){var d=a.name,c=a.tagName.toLowerCase(),h=function(a){a&&!a.disabled&&f(d,l(a.attributes.value&&a.attributes.value.specified?a.value:a.text))},g;if(!a.disabled&&d)switch(c){case "input":/reset|button|image|file/i.test(a.type)||
(h=/checkbox/i.test(a.type),c=/radio/i.test(a.type),g=a.value,(!h&&!c||a.checked)&&f(d,l(h&&""===g?"on":g)));break;case "textarea":f(d,l(a.value));break;case "select":if("select-one"===a.type.toLowerCase())h(0<=a.selectedIndex?a.options[a.selectedIndex]:null);else for(c=0;a.length&&c<a.length;c++)a.options[c].selected&&h(a.options[c])}}function E(){var a,f;for(f=0;f<arguments.length;f++){a=arguments[f];/input|select|textarea/i.test(a.tagName)&&r(a,this);for(var d=["input","select","textarea"],c=void 0,
h=void 0,l=void 0,c=0;c<d.length;c++)for(l=a.getElementsByTagName(d[c]),h=0;h<l.length;h++)r(l[h],this)}}function v(){return f.toQueryString(f.serializeArray.apply(null,arguments))}function q(){var a={};E.apply(function(f,d){f in a?(a[f]&&!G(a[f])&&(a[f]=[a[f]]),a[f].push(d)):a[f]=d},arguments);return a}function t(a,f,d,c){var h,l,g=/\[\]$/;if(G(f))for(h=0;f&&h<f.length;h++)l=f[h],d||g.test(a)?c(a,l):t(a+"["+("object"===typeof l?h:"")+"]",l,d,c);else if(f&&"[object Object]"===f.toString())for(h in f)t(a+
"["+h+"]",f[h],d,c);else c(a,f)}var y=window,w=document,x=/^http/,z=/(^\w+):\/\//,u=/^(20\d|1223)$/,A=w.getElementsByTagName("head")[0],B=0,C="reqwest_"+ +new Date,J,I=function(){},G="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},H={contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",
js:"application/javascript, text/javascript"}},K=function(a){if(!0===a.crossOrigin){if((a=y.XMLHttpRequest?new XMLHttpRequest:null)&&"withCredentials"in a)return a;if(y.XDomainRequest)return new XDomainRequest;throw Error("Browser does not support cross-origin requests");}return y.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},M={dataFilter:function(a){return a}};m.prototype={abort:function(){this._aborted=!0;this.request.abort()},retry:function(){n.call(this,this.o,this.fn)},
then:function(a,f){a=a||function(){};f=f||function(){};this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?f(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(f));return this},always:function(a){this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a);return this},fail:function(a){this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):
this._errorHandlers.push(a);return this},"catch":function(a){return this.fail(a)}};f.serializeArray=function(){var a=[];E.apply(function(f,d){a.push({name:f,value:d})},arguments);return a};f.serialize=function(){if(0===arguments.length)return"";var a,d=Array.prototype.slice.call(arguments,0);(a=d.pop())&&a.nodeType&&d.push(a)&&(a=null);a&&(a=a.type);return("map"==a?q:"array"==a?f.serializeArray:v).apply(null,d)};f.toQueryString=function(a,f){var d,c=f||!1,h=[],l=encodeURIComponent,g=function(a,f){f=
"function"===typeof f?f():null==f?"":f;h[h.length]=l(a)+"="+l(f)};if(G(a))for(d=0;a&&d<a.length;d++)g(a[d].name,a[d].value);else for(d in a)a.hasOwnProperty(d)&&t(d,a[d],c,g);return h.join("&").replace(/%20/g,"+")};f.getcallbackPrefix=function(){return C};f.compat=function(a,f){a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp));return new m(a,f)};f.ajaxSetup=
function(a){a=a||{};for(var f in a)M[f]=a[f]};return f});e.inputfiles=function(e,a,k){function c(a,d){var f={};d=d||[];if("undefined"===typeof d)for(var c=0;c<a.length;c++)d[c.toString()]=c;for(c=0;c<d.length;c++)f[d[c]]=a[c];return f}function d(a,d){d&&!0!==d&&"true"!==d||(d="");a||(a="untitled");var f="";a&&-1<a.indexOf(".")&&(f=a.split(".").pop());d&&f!==d&&(f=d,a=a+"."+f);return[a,f]}function g(a){document.body.removeChild(a.target)}a.prototype.loadFont=function(d,c){var f=new a.Font(this);opentype.load(d,
function(a,d){if(a)throw Error(a);f.font=d;"undefined"!==typeof c&&c(f)});return f};a.prototype.createInput=function(){throw"not yet implemented";};a.prototype.createReader=function(){throw"not yet implemented";};a.prototype.loadBytes=function(){throw"not yet implemented";};a.prototype.loadJSON=function(a,d,f){var c=[],g="json";"string"!==typeof f||"jsonp"!==f&&"json"!==f||(g=f);k({url:a,type:g,crossOrigin:!0}).then(function(a){for(var f in a)c[f]=a[f];"undefined"!==typeof d&&d(a)});return c};a.prototype.loadStrings=
function(a,d){var f=[],c=new XMLHttpRequest;c.open("GET",a,!0);c.onreadystatechange=function(){if(4===c.readyState&&(200===c.status||0===c.status)){var a=c.responseText.match(/[^\r\n]+/g),h;for(h in a)f[h]=a[h];"undefined"!==typeof d&&d(f)}};c.send(null);return f};a.prototype.loadTable=function(d){for(var g=null,f=[],l=!1,e=",",m=!1,v=1;v<arguments.length;v++)if("function"===typeof arguments[v])g=arguments[v];else if("string"===typeof arguments[v])if(f.push(arguments[v]),"header"===arguments[v]&&
(l=!0),"csv"===arguments[v]){if(m)throw Error("Cannot set multiple separator types.");e=",";m=!0}else if("tsv"===arguments[v]){if(m)throw Error("Cannot set multiple separator types.");e="\t";m=!0}var q=new a.Table;k({url:d,crossOrigin:!0,type:"csv"}).then(function(f){f=f.responseText;for(var d={},h=[],m=0,k=null,E,p=function(){d.currentState=4;h.push(k);k=null},B=function(){k.push(d.token);d.currentState=0;d.token=""};;){E=f[m++];if(null==E){if(d.escaped)throw Error("Unclosed quote in file.");if(k){B();
p();break}}null===k&&(d.escaped=!1,k=[],d.currentState=0,d.token="");if(0===d.currentState){if('"'===E){d.escaped=!0;d.currentState=1;continue}d.currentState=1}1===d.currentState&&d.escaped?'"'===E?'"'===f[m]?(d.token+='"',m++):(d.escaped=!1,d.currentState=2):d.token+=E:"\r"===E?("\n"===f[m]&&m++,B(),p()):"\n"===E?(B(),p()):E===e?B():1===d.currentState&&(d.token+=E)}if(l)q.columns=h.shift();else for(v=0;v<h.length;v++)q.columns[v]=v.toString();for(v=0;v<h.length&&(v!==h.length-1||1!==h[v].length||
"undefined"!==h[v][0]);v++)f=new a.TableRow,f.arr=h[v],f.obj=c(h[v],q.columns),q.addRow(f);null!==g&&g(q)}).fail(function(a,f){"undefined"!==typeof g&&g(!1)});return q};a.prototype.loadXML=function(a,d){k({url:a,type:"xml",crossOrigin:!0}).then(function(a){d(a)});return[]};a.prototype.parseXML=function(){throw"not yet implemented";};a.prototype.selectFolder=function(){throw"not yet implemented";};a.prototype.selectInput=function(){throw"not yet implemented";};a.prototype.httpGet=function(){var d=
Array.prototype.slice.call(arguments);d.push("GET");a.prototype.httpDo.apply(this,d)};a.prototype.httpPost=function(){var d=Array.prototype.slice.call(arguments);d.push("POST");a.prototype.httpDo.apply(this,d)};a.prototype.httpDo=function(){for(var a="GET",d=arguments[0],f={},c="",g,e=1;e<arguments.length;e++){var m=arguments[e];"string"===typeof m?"GET"===m||"POST"===m||"PUT"===m?a=m:c=m:"object"===typeof m?f=m:"function"===typeof m&&(g=m)}""===c&&(c=-1!==d.indexOf("json")?"json":-1!==d.indexOf("xml")?
"xml":"text");k({url:d,method:a,data:f,type:c,crossOrigin:!0,success:function(a){"undefined"!==typeof g&&("text"===c?g(a.response):g(a))}})};window.URL=window.URL||window.webkitURL;a.prototype._pWriters=[];a.prototype.beginRaw=function(){throw"not yet implemented";};a.prototype.beginRecord=function(){throw"not yet implemented";};a.prototype.createOutput=function(){throw"not yet implemented";};a.prototype.createWriter=function(d,c){for(var f in a.prototype._pWriters)if(a.prototype._pWriters[f].name===
d)return f=new a.PrintWriter(d+window.millis(),c),a.prototype._pWriters.push(f),f;f=new a.PrintWriter(d,c);a.prototype._pWriters.push(f);return f};a.prototype.endRaw=function(){throw"not yet implemented";};a.prototype.endRecord=function(){throw"not yet implemented";};a.PrintWriter=function(d,c){var f=this;this.name=d;this.content="";this.print=function(a){this.content+=a};this.println=function(a){this.content+=a+"\n"};this.flush=function(){this.content=""};this.close=function(){var l=[];l.push(this.content);
a.prototype.writeFile(l,d,c);for(var g in a.prototype._pWriters)a.prototype._pWriters[g].name===this.name&&a.prototype._pWriters.splice(g,1);f.flush();f={}}};a.prototype.saveBytes=function(){throw"not yet implemented";};a.prototype.save=function(c,g,f){var l=arguments,e=this._curElement.elt;if(0===l.length)a.prototype.saveCanvas(e);else if(l[0]instanceof a.Graphics)a.prototype.saveCanvas(l[0].elt,l[1],l[2]);else if(1===l.length&&"string"===typeof l[0])a.prototype.saveCanvas(e,l[0]);else switch(d(l[1],
l[2])[1]){case "json":a.prototype.saveJSON(l[0],l[1],l[2]);break;case "txt":a.prototype.saveStrings(l[0],l[1],l[2]);break;default:l[0]instanceof Array?a.prototype.saveStrings(l[0],l[1],l[2]):l[0]instanceof a.Table?a.prototype.saveTable(l[0],l[1],l[2],l[3]):l[0]instanceof a.Image?a.prototype.saveCanvas(l[0].canvas,l[1]):l[0]instanceof a.SoundFile&&a.prototype.saveSound(l[0],l[1],l[2],l[3])}};a.prototype.saveJSON=function(a,d,f){a=f?JSON.stringify(a):JSON.stringify(a,void 0,2);console.log(a);this.saveStrings(a.split("\n"),
d,"json")};a.prototype.saveJSONObject=a.prototype.saveJSON;a.prototype.saveJSONArray=a.prototype.saveJSON;a.prototype.saveStream=function(){throw"not yet implemented";};a.prototype.saveStrings=function(a,d,f){d=this.createWriter(d,f||"txt");for(var c in a)c<a.length-1?d.println(a[c]):d.print(a[c]);d.close();d.flush()};a.prototype.saveXML=function(){throw"not yet implemented";};a.prototype.selectOutput=function(){throw"not yet implemented";};a.prototype.saveTable=function(a,d,f){d=this.createWriter(d,
f);var c=a.columns,g=",";"tsv"===f&&(g="\t");if("html"!==f){if("0"!==c[0])for(f=0;f<c.length;f++)f<c.length-1?d.print(c[f]+g):d.println(c[f]);for(c=0;c<a.rows.length;c++)for(f=0;f<a.rows[c].arr.length;f++)f<a.rows[c].arr.length-1?d.print(a.rows[c].arr[f]+g):c<a.rows.length-1?d.println(a.rows[c].arr[f]):d.print(a.rows[c].arr[f])}else{d.println("<html>");d.println("<head>");d.println('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />');d.println("</head>");d.println("<body>");d.println("  <table>");
if("0"!==c[0]){d.println("    <tr>");for(g=0;g<c.length;g++)f=m(c[g]),d.println("      <td>"+f),d.println("      </td>");d.println("    </tr>")}for(c=0;c<a.rows.length;c++){d.println("    <tr>");for(g=0;g<a.columns.length;g++)f=a.rows[c].getString(g),f=m(f),d.println("      <td>"+f),d.println("      </td>");d.println("    </tr>")}d.println("  </table>");d.println("</body>");d.print("</html>")}d.close();d.flush()};var m=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,
"&quot;").replace(/'/g,"&#039;")};a.prototype.writeFile=function(d,c,f){var l="application/octet-stream";a.prototype._isSafari()&&(l="text/plain");d=new Blob(d,{type:l});d=window.URL.createObjectURL(d);a.prototype.downloadFile(d,c,f)};a.prototype.downloadFile=function(c,e,f){f=d(e,f);e=f[0];f=f[1];var l=document.createElement("a");l.href=c;l.download=e;l.onclick=g;l.style.display="none";document.body.appendChild(l);a.prototype._isSafari()&&(c='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n',
c+='3. Name it with this extension: ."'+f+'"',alert(c));l.click()};a.prototype._checkFileExtension=d;a.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};return a}({},e.core,e.reqwest);e.inputkeyboard=function(e,a){var k={};a.prototype.isKeyPressed=!1;a.prototype.keyIsPressed=!1;a.prototype.key="";a.prototype.keyCode=0;a.prototype._onkeydown=function(a){this._setProperty("isKeyPressed",!0);this._setProperty("keyIsPressed",!0);this._setProperty("keyCode",
a.which);k[a.which]=!0;var d=String.fromCharCode(a.which);d||(d=a.which);this._setProperty("key",d);d=this.keyPressed||window.keyPressed;"function"!==typeof d||a.charCode||!1===d(a)&&a.preventDefault()};a.prototype._onkeyup=function(a){var d=this.keyReleased||window.keyReleased;this._setProperty("isKeyPressed",!1);this._setProperty("keyIsPressed",!1);k[a.which]=!1;var g=String.fromCharCode(a.which);g||(g=a.which);this._setProperty("key",g);this._setProperty("keyCode",a.which);"function"===typeof d&&
!1===d(a)&&a.preventDefault()};a.prototype._onkeypress=function(a){this._setProperty("keyCode",a.which);this._setProperty("key",String.fromCharCode(a.which));var d=this.keyTyped||window.keyTyped;"function"===typeof d&&!1===d(a)&&a.preventDefault()};a.prototype._onblur=function(a){k={}};a.prototype.keyIsDown=function(a){return k[a]};return a}({},e.core);e.inputacceleration=function(e,a){a.prototype.deviceOrientation=void 0;a.prototype.accelerationX=0;a.prototype.accelerationY=0;a.prototype.accelerationZ=
0;a.prototype.pAccelerationX=0;a.prototype.pAccelerationY=0;a.prototype.pAccelerationZ=0;a.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX);this._setProperty("pAccelerationY",this.accelerationY);this._setProperty("pAccelerationZ",this.accelerationZ)};var k=.5;a.prototype.setMoveThreshold=function(a){"number"===typeof a&&(k=a)};var c="",d="";a.prototype._ondeviceorientation=function(a){this._setProperty("accelerationX",a.beta);this._setProperty("accelerationY",
a.gamma);this._setProperty("accelerationZ",a.alpha);this._handleMotion()};a.prototype._ondevicemotion=function(a){this._setProperty("accelerationX",2*a.acceleration.x);this._setProperty("accelerationY",2*a.acceleration.y);this._setProperty("accelerationZ",2*a.acceleration.z);this._handleMotion()};a.prototype._onMozOrientation=function(a){this._setProperty("accelerationX",a.x);this._setProperty("accelerationY",a.y);this._setProperty("accelerationZ",a.z);this._handleMotion()};a.prototype._handleMotion=
function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var a=this.onDeviceMove||window.onDeviceMove;"function"===typeof a&&(Math.abs(this.accelerationX-this.pAccelerationX)>k||Math.abs(this.accelerationY-this.pAccelerationY)>k||Math.abs(this.accelerationZ-this.pAccelerationZ)>k)&&a();a=this.onDeviceTurn||
window.onDeviceTurn;if("function"===typeof a){var e=0;Math.abs(this.accelerationX)>e&&(e=this.accelerationX,d="x");Math.abs(this.accelerationY)>e&&(e=this.accelerationY,d="y");Math.abs(this.accelerationZ)>e&&(d="z");""!==c&&c!==d&&a(d);c=d}};return a}({},e.core);e.inputmouse=function(e,a,k){a.prototype.mouseX=0;a.prototype.mouseY=0;a.prototype.pmouseX=0;a.prototype.pmouseY=0;a.prototype.winMouseX=0;a.prototype.winMouseY=0;a.prototype.pwinMouseX=0;a.prototype.pwinMouseY=0;a.prototype.mouseButton=0;
a.prototype.mouseIsPressed=!1;a.prototype.isMousePressed=!1;a.prototype._updateMouseCoords=function(a){var d,g;"touchstart"===a.type||"touchmove"===a.type||"touchend"===a.type?(this._setProperty("mouseX",this.touchX),this._setProperty("mouseY",this.touchY)):null!==this._curElement&&(g=this._curElement.elt.getBoundingClientRect(),d=a.clientX-g.left,g=a.clientY-g.top,this._setProperty("mouseX",d),this._setProperty("mouseY",g));this._setProperty("winMouseX",a.pageX);this._setProperty("winMouseY",a.pageY)};
a.prototype._updatePMouseCoords=function(a){this._setProperty("pmouseX",this.mouseX);this._setProperty("pmouseY",this.mouseY);this._setProperty("pwinMouseX",this.winMouseX);this._setProperty("pwinMouseY",this.winMouseY)};a.prototype._setMouseButton=function(a){if(1===a.button)this._setProperty("mouseButton",k.CENTER);else if(2===a.button)this._setProperty("mouseButton",k.RIGHT);else if(this._setProperty("mouseButton",k.LEFT),"touchstart"===a.type||"touchmove"===a.type)this._setProperty("mouseX",this.touchX),
this._setProperty("mouseY",this.touchY)};a.prototype._onmousemove=function(a){var d=this._isGlobal?window:this;this._updateMouseCoords(a);this.isMousePressed?"function"===typeof d.mouseDragged?(d=d.mouseDragged(a),!1===d&&a.preventDefault()):"function"===typeof d.touchMoved&&(d=d.touchMoved(a),!1===d&&a.preventDefault(),this._updateTouchCoords(a)):"function"===typeof d.mouseMoved&&(d=d.mouseMoved(a),!1===d&&a.preventDefault())};a.prototype._onmousedown=function(a){var d=this._isGlobal?window:this;
this._setProperty("isMousePressed",!0);this._setProperty("mouseIsPressed",!0);this._setMouseButton(a);this._updateMouseCoords(a);"function"===typeof d.mousePressed?(d=d.mousePressed(a),!1===d&&a.preventDefault()):"function"===typeof d.touchStarted&&(d=d.touchStarted(a),!1===d&&a.preventDefault(),this._updateTouchCoords(a))};a.prototype._onmouseup=function(a){var d=this._isGlobal?window:this;this._setProperty("isMousePressed",!1);this._setProperty("mouseIsPressed",!1);"function"===typeof d.mouseReleased?
(d=d.mouseReleased(a),!1===d&&a.preventDefault()):"function"===typeof d.touchEnded&&(d=d.touchEnded(a),!1===d&&a.preventDefault(),this._updateTouchCoords(a))};a.prototype._onclick=function(a){var d=this._isGlobal?window:this;"function"===typeof d.mouseClicked&&!1===d.mouseClicked(a)&&a.preventDefault()};a.prototype._onmousewheel=a.prototype._onDOMMouseScroll=function(a){var d=this._isGlobal?window:this;"function"===typeof d.mouseWheel&&!1===d.mouseWheel(a)&&a.preventDefault()};return a}({},e.core,
e.constants);e.inputtime_date=function(e,a){a.prototype.day=function(){return(new Date).getDate()};a.prototype.hour=function(){return(new Date).getHours()};a.prototype.minute=function(){return(new Date).getMinutes()};a.prototype.millis=function(){return(new Date).getTime()-this._startTime};a.prototype.month=function(){return(new Date).getMonth()+1};a.prototype.second=function(){return(new Date).getSeconds()};a.prototype.year=function(){return(new Date).getFullYear()};return a}({},e.core);e.inputtouch=
function(e,a){function k(a,d,g){g=g||0;a=a.getBoundingClientRect();d=d.touches[g]||d.changedTouches[g];return{x:d.clientX-a.left,y:d.clientY-a.top}}a.prototype.touchX=0;a.prototype.touchY=0;a.prototype.ptouchX=0;a.prototype.ptouchY=0;a.prototype.touches=[];a.prototype.touchIsDown=!1;a.prototype._updateTouchCoords=function(a){if("mousedown"===a.type||"mousemove"===a.type||"mouseup"===a.type)this._setProperty("touchX",this.mouseX),this._setProperty("touchY",this.mouseY);else{var d=k(this._curElement.elt,
a,0);this._setProperty("touchX",d.x);this._setProperty("touchY",d.y);for(var d=[],g=0;g<a.touches.length;g++){var e=k(this._curElement.elt,a,g);d[g]={x:e.x,y:e.y}}this._setProperty("touches",d)}};a.prototype._updatePTouchCoords=function(){this._setProperty("ptouchX",this.touchX);this._setProperty("ptouchY",this.touchY)};a.prototype._ontouchstart=function(a){var d=this._isGlobal?window:this;this._updateTouchCoords(a);this._setProperty("touchIsDown",!0);"function"===typeof d.touchStarted?(d=d.touchStarted(a),
!1===d&&a.preventDefault()):"function"===typeof d.mousePressed&&(d=d.mousePressed(a),!1===d&&a.preventDefault())};a.prototype._ontouchmove=function(a){var d=this._isGlobal?window:this;this._updateTouchCoords(a);"function"===typeof d.touchMoved?(d=d.touchMoved(a),!1===d&&a.preventDefault()):"function"===typeof d.mouseDragged&&(d=d.mouseDragged(a),!1===d&&a.preventDefault(),this._updateMouseCoords(a))};a.prototype._ontouchend=function(a){this._updateTouchCoords(a);0===this.touches.length&&this._setProperty("touchIsDown",
!1);var d=this._isGlobal?window:this;"function"===typeof d.touchEnded?(d=d.touchEnded(a),!1===d&&a.preventDefault()):"function"===typeof d.mouseReleased&&(d=d.mouseReleased(a),!1===d&&a.preventDefault(),this._updateMouseCoords(a))};return a}({},e.core);e.mathmath=function(e,a){a.prototype.createVector=function(e,c,d){return this instanceof a?new a.Vector(this,arguments):new a.Vector(e,c,d)};return a}({},e.core);e.mathcalculation=function(e,a){a.prototype.abs=Math.abs;a.prototype.ceil=Math.ceil;a.prototype.constrain=
function(a,c,d){return Math.max(Math.min(a,d),c)};a.prototype.dist=function(a,c,d,g){return Math.sqrt((d-a)*(d-a)+(g-c)*(g-c))};a.prototype.exp=Math.exp;a.prototype.floor=Math.floor;a.prototype.lerp=function(a,c,d){return d*(c-a)+a};a.prototype.log=Math.log;a.prototype.mag=function(a,c){return Math.sqrt(a*a+c*c)};a.prototype.map=function(a,c,d,g,e){return(a-c)/(d-c)*(e-g)+g};a.prototype.max=function(){return arguments[0]instanceof Array?Math.max.apply(null,arguments[0]):Math.max.apply(null,arguments)};
a.prototype.min=function(){return arguments[0]instanceof Array?Math.min.apply(null,arguments[0]):Math.min.apply(null,arguments)};a.prototype.norm=function(a,c,d){return this.map(a,c,d,0,1)};a.prototype.pow=Math.pow;a.prototype.round=Math.round;a.prototype.sq=function(a){return a*a};a.prototype.sqrt=Math.sqrt;return a}({},e.core);e.mathrandom=function(e,a){var k=!1,c=function(){var a,d;return{setSeed:function(c){d=a=(null==c?4294967296*Math.random():c)>>>0},getSeed:function(){return a},rand:function(){d=
(1664525*d+1013904223)%4294967296;return d/4294967296}}}();a.prototype.randomSeed=function(a){c.setSeed(a);k=!0};a.prototype.random=function(a,d){var g;g=k?c.rand():Math.random();if(0===arguments.length)return g;if(1===arguments.length)return g*a;if(a>d){var f=a;a=d;d=f}return g*(d-a)+a};var d,g=!1;a.prototype.randomGaussian=function(a,c){var e,f,l;if(g)e=d,g=!1;else{do e=this.random(2)-1,f=this.random(2)-1,l=e*e+f*f;while(1<=l);l=Math.sqrt(-2*Math.log(l)/l);e*=l;d=f*l;g=!0}return e*(c||1)+(a||0)};
return a}({},e.core);e.mathnoise=function(e,a){for(var k=4,c=.5,d=Math.floor(720),g=Array(d),m=Array(d),h=Math.PI/180,n=0;n<d;n++)g[n]=Math.sin(n*h*.5),m[n]=Math.cos(n*h*.5);var f=d,f=f>>1,l;a.prototype.noise=function(a,h,g){h=h||0;g=g||0;if(null==l){l=Array(4096);for(var e=0;4096>e;e++)l[e]=Math.random()}0>a&&(a=-a);0>h&&(h=-h);0>g&&(g=-g);var e=Math.floor(a),n=Math.floor(h),y=Math.floor(g);a-=e;h-=n;g-=y;for(var p,x,z=0,u=.5,A,B,C,J=function(a){return.5*(1-m[Math.floor(a*f)%d])},I=0;I<k;I++){var G=
e+(n<<4)+(y<<8);p=J(a);x=J(h);A=l[G&4095];A+=p*(l[G+1&4095]-A);B=l[G+16&4095];B+=p*(l[G+16+1&4095]-B);A+=x*(B-A);G+=256;B=l[G&4095];B+=p*(l[G+1&4095]-B);C=l[G+16&4095];C+=p*(l[G+16+1&4095]-C);B+=x*(C-B);A+=J(g)*(B-A);z+=A*u;u*=c;e<<=1;a*=2;n<<=1;h*=2;y<<=1;g*=2;1<=a&&(e++,a--);1<=h&&(n++,h--);1<=g&&(y++,g--)}return z};a.prototype.noiseDetail=function(a,f){0<a&&(k=a);0<f&&(c=f)};a.prototype.noiseSeed=function(a){var f=function(){var a,f;return{setSeed:function(d){f=a=(null==d?4294967296*Math.random():
d)>>>0},getSeed:function(){return a},rand:function(){f=(1664525*f+1013904223)%4294967296;return f/4294967296}}}();f.setSeed(a);l=Array(4096);for(a=0;4096>a;a++)l[a]=f.rand()};return a}({},e.core);e.mathtrigonometry=function(e,a,k,c){a.prototype._angleMode=c.RADIANS;a.prototype.acos=function(a){return this._angleMode===c.RADIANS?Math.acos(a):k.radiansToDegrees(Math.acos(a))};a.prototype.asin=function(a){return this._angleMode===c.RADIANS?Math.asin(a):k.radiansToDegrees(Math.asin(a))};a.prototype.atan=
function(a){return this._angleMode===c.RADIANS?Math.atan(a):k.radiansToDegrees(Math.atan(a))};a.prototype.atan2=function(a,g){return this._angleMode===c.RADIANS?Math.atan2(a,g):k.radiansToDegrees(Math.atan2(a,g))};a.prototype.cos=function(a){return this._angleMode===c.RADIANS?Math.cos(a):Math.cos(this.radians(a))};a.prototype.sin=function(a){return this._angleMode===c.RADIANS?Math.sin(a):Math.sin(this.radians(a))};a.prototype.tan=function(a){return this._angleMode===c.RADIANS?Math.tan(a):Math.tan(this.radians(a))};
a.prototype.degrees=function(a){return k.radiansToDegrees(a)};a.prototype.radians=function(a){return k.degreesToRadians(a)};a.prototype.angleMode=function(a){if(a===c.DEGREES||a===c.RADIANS)this._angleMode=a};return a}({},e.core,e.polargeometry,e.constants);e.renderingrendering=function(e,a,k,c,d){a.prototype.createCanvas=function(d,c,h,e){h=h||k.P2D;var f;e&&(f="boolean"===typeof e?e:!1);h===k.WEBGL?((e=document.getElementById("defaultCanvas"))&&e.parentNode.removeChild(e),e=document.createElement("canvas"),
e.id="defaultCanvas"):f?(e=document.createElement("canvas"),e.id="defaultCanvas"):e=this.canvas;this._setupDone||(e.className+=" p5_hidden",e.style.visibility="hidden");this._userNode?this._userNode.appendChild(e):document.body.appendChild(e);h===k.WEBGL?this._defaultGraphics||(this._defaultGraphics=this._graphics=new a.Graphics3D(e,this,!0),this._elements.push(this._defaultGraphics)):this._defaultGraphics||(this._defaultGraphics=this._graphics=new a.Graphics2D(e,this,!0),this._elements.push(this._defaultGraphics));
this._defaultGraphics.resize(d,c);this._defaultGraphics._applyDefaults();return this._defaultGraphics};a.prototype.resizeCanvas=function(a,d,c){this._graphics&&(this._graphics.resize(a,d),this._graphics._applyDefaults(),c||this.redraw())};a.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)};a.prototype.createGraphics=function(a,d,c){return c===k.WEBGL?this._createGraphics3D(a,d):this._createGraphics2D(a,d)};a.prototype._createGraphics2D=function(d,c){var h=
document.createElement("canvas");(this._userNode||document.body).appendChild(h);h=new a.Graphics2D(h,this,!1);this._elements.push(h);for(var e in a.prototype)h[e]||(h[e]="function"===typeof a.prototype[e]?a.prototype[e].bind(h):a.prototype[e]);h.resize(d,c);h._applyDefaults();return h};a.prototype._createGraphics3D=function(d,c){var h=document.createElement("canvas");(this._userNode||document.body).appendChild(h);h=new a.Graphics3D(h,this,!1);this._elements.push(h);for(var e in a.prototype)h.hasOwnProperty(e)||
(h[e]="function"===typeof a.prototype[e]?a.prototype[e].bind(h):a.prototype[e]);h.resize(d,c);h._applyDefaults();return h};a.prototype.blendMode=function(a){if(a===k.BLEND||a===k.DARKEST||a===k.LIGHTEST||a===k.DIFFERENCE||a===k.MULTIPLY||a===k.EXCLUSION||a===k.SCREEN||a===k.REPLACE||a===k.OVERLAY||a===k.HARD_LIGHT||a===k.SOFT_LIGHT||a===k.DODGE||a===k.BURN||a===k.ADD||a===k.NORMAL)this.drawingContext.globalCompositeOperation=a;else throw Error("Mode "+a+" not recognized.");};return a}({},e.core,e.constants,
e.p5Graphics2D,e.p5Graphics3D);e.shape2d_primitives=function(e,a,k,c){a.prototype._createArc=function(a,c,e){var h=[],n=Math.PI/2,f=c<e?1:-1,l=c;for(c=Math.min(2*Math.PI,Math.abs(e-c));1E-5<c;)e=l+f*Math.min(c,n),h.push(this._createSmallArc(a,l,e)),c-=Math.abs(e-l),l=e;return h};a.prototype._createSmallArc=function(a,c,e){var h=(e-c)/2,n=a*Math.cos(h),f=a*Math.sin(h),l=-f,r=.5522847498*Math.tan(h),f=n+r*f,n=l+r*n,l=-n,r=h+c,h=Math.cos(r),r=Math.sin(r);return{x1:a*Math.cos(c),y1:a*Math.sin(c),x2:f*
h-n*r,y2:f*r+n*h,x3:f*h-l*r,y3:f*r+l*h,x4:a*Math.cos(e),y4:a*Math.sin(e)}};a.prototype.arc=function(a,c,e,h,n,f,l){if(!this._doStroke&&!this._doFill)return this;this._angleMode===k.DEGREES&&(n=this.radians(n),f=this.radians(f));var r=this._createArc(1,n,f);this._graphics.arc(a,c,e,h,n,f,l,r);return this};a.prototype.ellipse=function(a,c,e,h){this._validateParameters("ellipse",arguments,["Number","Number","Number","Number"]);if(!this._doStroke&&!this._doFill)return this;e=Math.abs(e);h=Math.abs(h);
this._graphics.ellipse(a,c,e,h);return this};a.prototype.line=function(){this._validateParameters("line",arguments,[["Number","Number","Number","Number"],"Number Number Number Number Number Number".split(" ")]);if(!this._doStroke)return this;this._graphics.isP3D?this._graphics.line(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]):this._graphics.line(arguments[0],arguments[1],arguments[2],arguments[3])};a.prototype.point=function(a,c){this._validateParameters("point",
arguments,["Number","Number"]);if(!this._doStroke)return this;this._graphics.point(a,c);return this};a.prototype.quad=function(a,c,e,h,n,f,l,r){this._validateParameters("quad",arguments,"Number Number Number Number Number Number Number Number".split(" "));if(!this._doStroke&&!this._doFill)return this;this._graphics.quad(a,c,e,h,n,f,l,r);return this};a.prototype.rect=function(a,c,e,h,n,f,l,r){this._validateParameters("rect",arguments,[["Number","Number","Number","Number"],["Number","Number","Number",
"Number","Number"],"Number Number Number Number Number Number Number Number Number".split(" ")]);if(this._doStroke||this._doFill)return this._graphics.rect(a,c,e,h,n,f,l,r),this};a.prototype.triangle=function(a,c,e,h,n,f){this._validateParameters("triangle",arguments,"Number Number Number Number Number Number".split(" "));if(!this._doStroke&&!this._doFill)return this;this._graphics.triangle(a,c,e,h,n,f);return this};return a}({},e.core,e.constants,e.helpers);e.shape3d_primitives=function(e,a){function k(a,
d){var g=[];a.forEach(function(a){a.forEach(function(a){d[a].forEach(function(a){g.push(a)})})});return g}a.prototype.Geometry3D=function(){this.vertices=[];this.faces=[];this.faceNormals=[];this.uvs=[]};a.prototype.plane=function(c,d,g,e){a.prototype.Geometry3D.call(this);c=c||1;d=d||1;g=g||1;e=e||1;for(var h=0;h<=e;h++)for(var n=h/e,f=0;f<=g;f++){var l=f/g;this.vertices.push([2*c*l-c,2*d*n-d,0]);this.uvs.push([l,n]);this.faceNormals.push([0,0,1]);f<g&&h<e&&(l=f+h*(g+1),this.faces.push([l,l+1,l+
g+1]),this.faces.push([l+g+1,l+1,l+g+2]))}c=k(this.faces,this.vertices);this._graphics.drawGeometry(c);return this};a.prototype.cube=function(c,d,g,e,h,n){a.prototype.Geometry3D.call(this);c=c||1;d=d||1;g=g||1;e=e||1;h=h||1;for(n=0;n<=h;n++)for(var f=n/h,l=0;l<=e;l++){var r=l/e;this.vertices.push([2*c*r-c,2*d*f-d,g/2]);this.uvs.push([r,f]);this.faceNormals.push([0,0,1]);l<e&&n<h&&(r=l+n*(e+1),this.faces.push([r,r+1,r+e+1]),this.faces.push([r+e+1,r+1,r+e+2]))}for(n=0;n<=h;n++)for(f=n/h,l=0;l<=e;l++)r=
l/e,this.vertices.push([2*c*r-c,2*d*f-d,-g/2]),this.uvs.push([r,f]),this.faceNormals.push([0,0,-1]),l<e&&n<h&&(r=l+n*(e+1),this.faces.push([r,r+1,r+e+1]),this.faces.push([r+e+1,r+1,r+e+2]));c=k(this.faces,this.vertices);this._graphics.drawGeometry(c);return this};a.prototype.sphere=function(c,d,g,e){a.prototype.Geometry3D.call(this);c=k(this.faces,this.vertices);this._graphics.drawGeometry(c);return this};return a}({},e.core);e.shapeattributes=function(e,a,k){a.prototype._rectMode=k.CORNER;a.prototype._ellipseMode=
k.CENTER;a.prototype.ellipseMode=function(a){if(a===k.CORNER||a===k.CORNERS||a===k.RADIUS||a===k.CENTER)this._ellipseMode=a;return this};a.prototype.noSmooth=function(){this._graphics.noSmooth();return this};a.prototype.rectMode=function(a){if(a===k.CORNER||a===k.CORNERS||a===k.RADIUS||a===k.CENTER)this._rectMode=a;return this};a.prototype.smooth=function(){this._graphics.smooth();return this};a.prototype.strokeCap=function(a){a!==k.ROUND&&a!==k.SQUARE&&a!==k.PROJECT||this._graphics.strokeCap(a);
return this};a.prototype.strokeJoin=function(a){a!==k.ROUND&&a!==k.BEVEL&&a!==k.MITER||this._graphics.strokeJoin(a);return this};a.prototype.strokeWeight=function(a){this._graphics.strokeWeight(a);return this};return a}({},e.core,e.constants);e.shapecurves=function(e,a,k){a.prototype._curveTightness=0;a.prototype.bezier=function(a,d,g,e,h,n,f,l){this._validateParameters("bezier",arguments,"Number Number Number Number Number Number Number Number".split(" "));if(!this._doStroke)return this;this._graphics.bezier(a,
d,g,e,h,n,f,l);return this};a.prototype.bezierDetail=function(a){return this};a.prototype.bezierPoint=function(a,d,e,m,h){var n=1-h;return Math.pow(n,3)*a+3*Math.pow(n,2)*h*d+3*n*Math.pow(h,2)*e+Math.pow(h,3)*m};a.prototype.bezierTangent=function(a,d,e,m,h){var n=1-h;return 3*m*Math.pow(h,2)-3*e*Math.pow(h,2)+6*e*n*h-6*d*n*h+3*d*Math.pow(n,2)-3*a*Math.pow(n,2)};a.prototype.curve=function(a,d,e,m,h,n,f,l){this._validateParameters("curve",arguments,"Number Number Number Number Number Number Number Number".split(" "));
if(this._doStroke)return this._graphics.curve(a,d,e,m,h,n,f,l),this};a.prototype.curveDetail=function(a){return this};a.prototype.curveTightness=function(a){this._setProperty("_curveTightness",a)};a.prototype.curvePoint=function(a,d,e,m,h){var n=h*h*h,f=h*h;return a*(-.5*n+f-.5*h)+d*(1.5*n-2.5*f+1)+e*(-1.5*n+2*f+.5*h)+m*(.5*n-.5*f)};a.prototype.curveTangent=function(a,d,e,m,h){var n=h*h;return a*(-3*n/2+2*h-.5)+d*(9*n/2-5*h)+e*(-9*n/2+4*h+.5)+m*(3*n/2-h)};return a}({},e.core,e.helpers);e.shapevertex=
function(e,a,k){var c=null,d=[],g=[],m=!1,h=!1,n=!1,f=!1;a.prototype.beginContour=function(){g=[];f=!0;return this};a.prototype.beginShape=function(a){c=a===k.POINTS||a===k.LINES||a===k.TRIANGLES||a===k.TRIANGLE_FAN||a===k.TRIANGLE_STRIP||a===k.QUADS||a===k.QUAD_STRIP?a:null;d=[];g=[];return this};a.prototype.bezierVertex=function(a,c,h,e,n,k){if(0===d.length)throw"vertex() must be used once before calling bezierVertex()";m=!0;for(var y=[],p=0;p<arguments.length;p++)y[p]=arguments[p];y.isVert=!1;
f?g.push(y):d.push(y);return this};a.prototype.curveVertex=function(a,f){h=!0;this.vertex(a,f);return this};a.prototype.endContour=function(){var a=g[0].slice();a.isVert=g[0].isVert;a.moveTo=!1;g.push(a);d.push(d[0]);for(a=0;a<g.length;a++)d.push(g[a]);return this};a.prototype.endShape=function(a){if(0===d.length||!this._doStroke&&!this._doFill)return this;var e=a===k.CLOSE;e&&!f&&d.push(d[0]);this._graphics.endShape(a,d,h,m,n,f,c);f=n=m=h=!1;e&&d.pop();return this};a.prototype.quadraticVertex=function(a,
c,h,e){if(this._contourInited){var m={};m.x=a;m.y=c;m.x3=h;m.y3=e;m.type=k.QUADRATIC;this._contourVertices.push(m);return this}if(0<d.length){n=!0;for(var m=[],t=0;t<arguments.length;t++)m[t]=arguments[t];m.isVert=!1;f?g.push(m):d.push(m)}else throw"vertex() must be used once before calling quadraticVertex()";return this};a.prototype.vertex=function(a,c,h){var e=[];e.isVert=!0;e[0]=a;e[1]=c;e[2]=0;e[3]=0;e[4]=0;e[5]=this._graphics._getFill();e[6]=this._graphics._getStroke();h&&(e.moveTo=h);f?(0===
g.length&&(e.moveTo=!0),g.push(e)):d.push(e);return this};return a}({},e.core,e.constants);e.structure=function(e,a){a.prototype.exit=function(){throw"exit() not implemented, see remove()";};a.prototype.noLoop=function(){this._loop=!1;this._drawInterval&&clearInterval(this._drawInterval)};a.prototype.loop=function(){this._loop=!0;this._draw()};a.prototype.push=function(){this._graphics.push();this._styles.push({doStroke:this._doStroke,doFill:this._doFill,tint:this._tint,imageMode:this._imageMode,
rectMode:this._rectMode,ellipseMode:this._ellipseMode,colorMode:this._colorMode,textFont:this.textFont,textLeading:this.textLeading,textSize:this.textSize,textStyle:this.textStyle})};a.prototype.pop=function(){this._graphics.pop();var a=this._styles.pop();this._doStroke=a.doStroke;this._doFill=a.doFill;this._tint=a.tint;this._imageMode=a.imageMode;this._rectMode=a.rectMode;this._ellipseMode=a.ellipseMode;this._colorMode=a.colorMode;this.textFont=a.textFont;this.textLeading=a.textLeading;this.textSize=
a.textSize;this.textStyle=a.textStyle};a.prototype.pushStyle=function(){throw Error("pushStyle() not used, see push()");};a.prototype.popStyle=function(){throw Error("popStyle() not used, see pop()");};a.prototype.redraw=function(){var a=this.setup||window.setup,c=this.draw||window.draw;"function"===typeof c&&(this.push(),"undefined"===typeof a&&this.scale(this.pixelDensity,this.pixelDensity),this._registeredMethods.pre.forEach(function(a){a.call(this)}),c(),this._registeredMethods.post.forEach(function(a){a.call(this)}),
this.pop())};a.prototype.size=function(){throw"size() not implemented, see createCanvas()";};return a}({},e.core);e.transform=function(e,a,k){a.prototype.applyMatrix=function(a,d,e,m,h,n){this._graphics.applyMatrix(a,d,e,m,h,n);return this};a.prototype.popMatrix=function(){throw Error("popMatrix() not used, see pop()");};a.prototype.printMatrix=function(){throw Error("printMatrix() not implemented");};a.prototype.pushMatrix=function(){throw Error("pushMatrix() not used, see push()");};a.prototype.resetMatrix=
function(){this._graphics.resetMatrix();return this};a.prototype.rotate=function(a){this._angleMode===k.DEGREES&&(a=this.radians(a));this._graphics.rotate(a);return this};a.prototype.rotateX=function(a){if(this._graphics.isP3D)this._graphics.rotateX(a);else throw"not yet implemented.";return this};a.prototype.rotateY=function(a){if(this._graphics.isP3D)this._graphics.rotateY(a);else throw"not yet implemented.";return this};a.prototype.rotateZ=function(a){if(this._graphics.isP3D)this._graphics.rotateZ(a);
else throw"not supported in p2d. Please use webgl mode";return this};a.prototype.scale=function(){this._graphics.isP3D?this._graphics.scale(arguments[0],arguments[1],arguments[2]):this._graphics.scale.apply(this._graphics,arguments);return this};a.prototype.shearX=function(a){this._angleMode===k.DEGREES&&(a=this.radians(a));this._graphics.shearX(a);return this};a.prototype.shearY=function(a){this._angleMode===k.DEGREES&&(a=this.radians(a));this._graphics.shearY(a);return this};a.prototype.translate=
function(a,d,e){this._graphics.isP3D?this._graphics.translate(a,d,e):this._graphics.translate(a,d);return this};return a}({},e.core,e.constants);e.typographyattributes=function(e,a,k){a.prototype._textSize=12;a.prototype._textLeading=15;a.prototype._textFont="sans-serif";a.prototype._textStyle=k.NORMAL;a.prototype._textAscent=null;a.prototype._textDescent=null;a.prototype.textAlign=function(a,d){return this._graphics.textAlign(a,d)};a.prototype.textLeading=function(a){return arguments.length?(this._setProperty("_textLeading",
a),this):this._textLeading};a.prototype.textSize=function(a){return arguments.length?(this._setProperty("_textSize",a),this._setProperty("_textLeading",a*k._DEFAULT_LEADMULT),this._graphics._applyTextProperties()):this._textSize};a.prototype.textStyle=function(a){return arguments.length?(a!==k.NORMAL&&a!==k.ITALIC&&a!==k.BOLD||this._setProperty("_textStyle",a),this._graphics._applyTextProperties()):this._textStyle};a.prototype.textWidth=function(a){return this._graphics.textWidth(a)};a.prototype.textAscent=
function(){null===this._textAscent&&this._updateTextMetrics();return this._textAscent};a.prototype.textDescent=function(){null===this._textDescent&&this._updateTextMetrics();return this._textDescent};a.prototype._isOpenType=function(a){a=a||this._textFont;return"object"===typeof a&&a.font&&a.font.supported};a.prototype._updateTextMetrics=function(){if(this._isOpenType()){var a=this._textFont.textBounds("ABCjgq|",0,0);this._setProperty("_textAscent",Math.abs(a.y));this._setProperty("_textDescent",
a.h-Math.abs(a.y));return this}var d=document.createElement("span");d.style.fontFamily=this._textFont;d.style.fontSize=this._textSize+"px";d.innerHTML="ABCjgq|";var e=document.createElement("div");e.style.display="inline-block";e.style.width="1px";e.style.height="0px";a=document.createElement("div");a.appendChild(d);a.appendChild(e);a.style.height="0px";a.style.overflow="hidden";document.body.appendChild(a);e.style.verticalAlign="baseline";var m=this._calculateOffset(e),h=this._calculateOffset(d),
n=m[1]-h[1];e.style.verticalAlign="bottom";m=this._calculateOffset(e);h=this._calculateOffset(d);d=m[1]-h[1]-n;document.body.removeChild(a);this._setProperty("_textAscent",n);this._setProperty("_textDescent",d);return this};a.prototype._calculateOffset=function(a){var d=0,e=0;if(a.offsetParent){do d+=a.offsetLeft,e+=a.offsetTop;while(a=a.offsetParent)}else d+=a.offsetLeft,e+=a.offsetTop;return[d,e]};return a}({},e.core,e.constants);e.typographyloading_displaying=function(e,a,k,c){a.prototype.text=
function(a,c,e,h,n){this._validateParameters("text",arguments,[["String","Number","Number"],["String","Number","Number","Number","Number"]]);return this._doFill||this._doStroke?this._graphics.text.apply(this._graphics,arguments):this};a.prototype.textFont=function(a,c){if(arguments.length){if(!a)throw Error("null font passed to textFont");this._setProperty("_textFont",a);c&&(this._setProperty("_textSize",c),this._setProperty("_textLeading",c*k._DEFAULT_LEADMULT));return this._graphics._applyTextProperties()}return this};
return a}({},e.core,e.constants,e.helpers);e.src_app=function(e,a,k,c,d,g,m,h,n,f,l,r,E,v,q,t,y,w,x,z,u,A,B,C,J,I,G,H,K,M,O,F,D,P,L,X,Q,aa,W,Y,Z,ba,ca){e=function(){window.PHANTOMJS||window.mocha||(window.setup&&"function"===typeof window.setup||window.draw&&"function"===typeof window.draw)&&new a};"complete"===document.readyState?e():window.addEventListener("load",e,!1);return a}({},e.core,e.p5Color,e.p5Element,e.p5Font,e.p5Graphics2D,e.p5Graphics3D,e.p5Image,e.p5Vector,e.p5TableRow,e.p5Table,e.colorcreating_reading,
e.colorsetting,e.constants,e.dataconversion,e.dataarray_functions,e.datastring_functions,e.environment,e.imageimage,e.imageloading_displaying,e.imagepixels,e.inputfiles,e.inputkeyboard,e.inputacceleration,e.inputmouse,e.inputtime_date,e.inputtouch,e.mathmath,e.mathcalculation,e.mathrandom,e.mathnoise,e.mathtrigonometry,e.renderingrendering,e.shape2d_primitives,e.shape3d_primitives,e.shapeattributes,e.shapecurves,e.shapevertex,e.structure,e.transform,e.typographyattributes,e.typographyloading_displaying,
e.shaders);return e.src_app});
(function(e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).opentype=e()})(function(){return function p(a,k,c){function d(h,n){if(!k[h]){if(!a[h]){var f="function"==typeof require&&require;if(!n&&f)return f(h,!0);if(g)return g(h,!0);f=Error("Cannot find module '"+h+"'");throw f.code="MODULE_NOT_FOUND",f;}f=k[h]={exports:{}};
a[h][0].call(f.exports,function(f){var c=a[h][1][f];return d(c?c:f)},f,f.exports,p,a,k,c)}return k[h].exports}for(var g="function"==typeof require&&require,m=0;m<c.length;m++)d(c[m]);return d}({1:[function(p,a,k){k.argument=function(a,d){if(!a)throw Error(d);};k.assert=k.argument},{}],2:[function(p,a,k){k.line=function(a,d,g,m,h){a.beginPath();a.moveTo(d,g);a.lineTo(m,h);a.stroke()}},{}],3:[function(p,a,k){function c(a){this.font=a}function d(a){this.cmap=a}function g(a,d){this.encoding=a;this.charset=
d}function m(a){var d;switch(a.version){case 1:this.names=k.standardNames.slice();break;case 2:this.names=Array(a.numberOfGlyphs);for(d=0;d<a.numberOfGlyphs;d++)this.names[d]=a.glyphNameIndex[d]<k.standardNames.length?k.standardNames[a.glyphNameIndex[d]]:a.names[a.glyphNameIndex[d]-k.standardNames.length];break;case 2.5:this.names=Array(a.numberOfGlyphs);for(d=0;d<a.numberOfGlyphs;d++)this.names[d]=k.standardNames[d+a.glyphNameIndex[d]];break;case 3:this.names=[]}}c.prototype.charToGlyphIndex=function(a){a=
a.charCodeAt(0);var d=this.font.glyphs;if(!d)return null;for(var f=0;f<d.length;f+=1)for(var c=d[f],g=0;g<c.unicodes.length;g+=1)if(c.unicodes[g]===a)return f};d.prototype.charToGlyphIndex=function(a){return this.cmap.glyphIndexMap[a.charCodeAt(0)]||0};g.prototype.charToGlyphIndex=function(a){a=a.charCodeAt(0);return this.charset.indexOf(this.encoding[a])};m.prototype.nameToGlyphIndex=function(a){return this.names.indexOf(a)};m.prototype.glyphIndexToName=function(a){return this.names[a]};k.cffStandardStrings=
".notdef;space;exclam;quotedbl;numbersign;dollar;percent;ampersand;quoteright;parenleft;parenright;asterisk;plus;comma;hyphen;period;slash;zero;one;two;three;four;five;six;seven;eight;nine;colon;semicolon;less;equal;greater;question;at;A;B;C;D;E;F;G;H;I;J;K;L;M;N;O;P;Q;R;S;T;U;V;W;X;Y;Z;bracketleft;backslash;bracketright;asciicircum;underscore;quoteleft;a;b;c;d;e;f;g;h;i;j;k;l;m;n;o;p;q;r;s;t;u;v;w;x;y;z;braceleft;bar;braceright;asciitilde;exclamdown;cent;sterling;fraction;yen;florin;section;currency;quotesingle;quotedblleft;guillemotleft;guilsinglleft;guilsinglright;fi;fl;endash;dagger;daggerdbl;periodcentered;paragraph;bullet;quotesinglbase;quotedblbase;quotedblright;guillemotright;ellipsis;perthousand;questiondown;grave;acute;circumflex;tilde;macron;breve;dotaccent;dieresis;ring;cedilla;hungarumlaut;ogonek;caron;emdash;AE;ordfeminine;Lslash;Oslash;OE;ordmasculine;ae;dotlessi;lslash;oslash;oe;germandbls;onesuperior;logicalnot;mu;trademark;Eth;onehalf;plusminus;Thorn;onequarter;divide;brokenbar;degree;thorn;threequarters;twosuperior;registered;minus;eth;multiply;threesuperior;copyright;Aacute;Acircumflex;Adieresis;Agrave;Aring;Atilde;Ccedilla;Eacute;Ecircumflex;Edieresis;Egrave;Iacute;Icircumflex;Idieresis;Igrave;Ntilde;Oacute;Ocircumflex;Odieresis;Ograve;Otilde;Scaron;Uacute;Ucircumflex;Udieresis;Ugrave;Yacute;Ydieresis;Zcaron;aacute;acircumflex;adieresis;agrave;aring;atilde;ccedilla;eacute;ecircumflex;edieresis;egrave;iacute;icircumflex;idieresis;igrave;ntilde;oacute;ocircumflex;odieresis;ograve;otilde;scaron;uacute;ucircumflex;udieresis;ugrave;yacute;ydieresis;zcaron;exclamsmall;Hungarumlautsmall;dollaroldstyle;dollarsuperior;ampersandsmall;Acutesmall;parenleftsuperior;parenrightsuperior;266 ff;onedotenleader;zerooldstyle;oneoldstyle;twooldstyle;threeoldstyle;fouroldstyle;fiveoldstyle;sixoldstyle;sevenoldstyle;eightoldstyle;nineoldstyle;commasuperior;threequartersemdash;periodsuperior;questionsmall;asuperior;bsuperior;centsuperior;dsuperior;esuperior;isuperior;lsuperior;msuperior;nsuperior;osuperior;rsuperior;ssuperior;tsuperior;ff;ffi;ffl;parenleftinferior;parenrightinferior;Circumflexsmall;hyphensuperior;Gravesmall;Asmall;Bsmall;Csmall;Dsmall;Esmall;Fsmall;Gsmall;Hsmall;Ismall;Jsmall;Ksmall;Lsmall;Msmall;Nsmall;Osmall;Psmall;Qsmall;Rsmall;Ssmall;Tsmall;Usmall;Vsmall;Wsmall;Xsmall;Ysmall;Zsmall;colonmonetary;onefitted;rupiah;Tildesmall;exclamdownsmall;centoldstyle;Lslashsmall;Scaronsmall;Zcaronsmall;Dieresissmall;Brevesmall;Caronsmall;Dotaccentsmall;Macronsmall;figuredash;hypheninferior;Ogoneksmall;Ringsmall;Cedillasmall;questiondownsmall;oneeighth;threeeighths;fiveeighths;seveneighths;onethird;twothirds;zerosuperior;foursuperior;fivesuperior;sixsuperior;sevensuperior;eightsuperior;ninesuperior;zeroinferior;oneinferior;twoinferior;threeinferior;fourinferior;fiveinferior;sixinferior;seveninferior;eightinferior;nineinferior;centinferior;dollarinferior;periodinferior;commainferior;Agravesmall;Aacutesmall;Acircumflexsmall;Atildesmall;Adieresissmall;Aringsmall;AEsmall;Ccedillasmall;Egravesmall;Eacutesmall;Ecircumflexsmall;Edieresissmall;Igravesmall;Iacutesmall;Icircumflexsmall;Idieresissmall;Ethsmall;Ntildesmall;Ogravesmall;Oacutesmall;Ocircumflexsmall;Otildesmall;Odieresissmall;OEsmall;Oslashsmall;Ugravesmall;Uacutesmall;Ucircumflexsmall;Udieresissmall;Yacutesmall;Thornsmall;Ydieresissmall;001.000;001.001;001.002;001.003;Black;Bold;Book;Light;Medium;Regular;Roman;Semibold".split(";");
k.cffStandardEncoding="                                space exclam quotedbl numbersign dollar percent ampersand quoteright parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore quoteleft a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde                                   exclamdown cent sterling fraction yen florin section currency quotesingle quotedblleft guillemotleft guilsinglleft guilsinglright fi fl  endash dagger daggerdbl periodcentered  paragraph bullet quotesinglbase quotedblbase quotedblright guillemotright ellipsis perthousand  questiondown  grave acute circumflex tilde macron breve dotaccent dieresis  ring cedilla  hungarumlaut ogonek caron emdash                 AE  ordfeminine     Lslash Oslash OE ordmasculine      ae    dotlessi   lslash oslash oe germandbls".split(" ");
k.cffExpertEncoding="                                space exclamsmall Hungarumlautsmall  dollaroldstyle dollarsuperior ampersandsmall Acutesmall parenleftsuperior parenrightsuperior twodotenleader onedotenleader comma hyphen period fraction zerooldstyle oneoldstyle twooldstyle threeoldstyle fouroldstyle fiveoldstyle sixoldstyle sevenoldstyle eightoldstyle nineoldstyle colon semicolon commasuperior threequartersemdash periodsuperior questionsmall  asuperior bsuperior centsuperior dsuperior esuperior   isuperior   lsuperior msuperior nsuperior osuperior   rsuperior ssuperior tsuperior  ff fi fl ffi ffl parenleftinferior  parenrightinferior Circumflexsmall hyphensuperior Gravesmall Asmall Bsmall Csmall Dsmall Esmall Fsmall Gsmall Hsmall Ismall Jsmall Ksmall Lsmall Msmall Nsmall Osmall Psmall Qsmall Rsmall Ssmall Tsmall Usmall Vsmall Wsmall Xsmall Ysmall Zsmall colonmonetary onefitted rupiah Tildesmall                                   exclamdownsmall centoldstyle Lslashsmall   Scaronsmall Zcaronsmall Dieresissmall Brevesmall Caronsmall  Dotaccentsmall   Macronsmall   figuredash hypheninferior   Ogoneksmall Ringsmall Cedillasmall    onequarter onehalf threequarters questiondownsmall oneeighth threeeighths fiveeighths seveneighths onethird twothirds   zerosuperior onesuperior twosuperior threesuperior foursuperior fivesuperior sixsuperior sevensuperior eightsuperior ninesuperior zeroinferior oneinferior twoinferior threeinferior fourinferior fiveinferior sixinferior seveninferior eightinferior nineinferior centinferior dollarinferior periodinferior commainferior Agravesmall Aacutesmall Acircumflexsmall Atildesmall Adieresissmall Aringsmall AEsmall Ccedillasmall Egravesmall Eacutesmall Ecircumflexsmall Edieresissmall Igravesmall Iacutesmall Icircumflexsmall Idieresissmall Ethsmall Ntildesmall Ogravesmall Oacutesmall Ocircumflexsmall Otildesmall Odieresissmall OEsmall Oslashsmall Ugravesmall Uacutesmall Ucircumflexsmall Udieresissmall Yacutesmall Thornsmall Ydieresissmall".split(" ");
k.standardNames=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(" ");
k.DefaultEncoding=c;k.CmapEncoding=d;k.CffEncoding=g;k.GlyphNames=m;k.addGlyphNames=function(a){for(var d,f=a.tables.cmap.glyphIndexMap,c=Object.keys(f),g=0;g<c.length;g+=1){var m=c[g];d=a.glyphs[f[m]];d.addUnicode(parseInt(m))}for(g=0;g<a.glyphs.length;g+=1)d=a.glyphs[g],d.name=a.cffEncoding?a.cffEncoding.charset[g]:a.glyphNames.glyphIndexToName(g)}},{}],4:[function(p,a,k){function c(a){a=a||{};this.familyName=a.familyName||" ";this.styleName=a.styleName||" ";this.designer=a.designer||" ";this.designerURL=
a.designerURL||" ";this.manufacturer=a.manufacturer||" ";this.manufacturerURL=a.manufacturerURL||" ";this.license=a.license||" ";this.licenseURL=a.licenseURL||" ";this.version=a.version||"Version 0.1";this.description=a.description||" ";this.copyright=a.copyright||" ";this.trademark=a.trademark||" ";this.unitsPerEm=a.unitsPerEm||1E3;this.ascender=a.ascender;this.descender=a.descender;this.supported=!0;this.glyphs=a.glyphs||[];this.encoding=new m.DefaultEncoding(this);this.tables={}}var d=p("./path"),
g=p("./tables/sfnt"),m=p("./encoding");c.prototype.hasChar=function(a){return null!==this.encoding.charToGlyphIndex(a)};c.prototype.charToGlyphIndex=function(a){return this.encoding.charToGlyphIndex(a)};c.prototype.charToGlyph=function(a){a=this.charToGlyphIndex(a);a=this.glyphs[a];return a||(a=this.glyphs[0]),a};c.prototype.stringToGlyphs=function(a){for(var d=[],f=0;f<a.length;f+=1)d.push(this.charToGlyph(a[f]));return d};c.prototype.nameToGlyphIndex=function(a){return this.glyphNames.nameToGlyphIndex(a)};
c.prototype.nameToGlyph=function(a){a=this.nametoGlyphIndex(a);a=this.glyphs[a];return a||(a=this.glyphs[0]),a};c.prototype.glyphIndexToName=function(a){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(a):""};c.prototype.getKerningValue=function(a,d){a=a.index||a;d=d.index||d;var f=this.getGposKerningValue;return f?f(a,d):this.kerningPairs[a+","+d]||0};c.prototype.forEachGlyph=function(a,d,f,c,g,m){if(this.supported){d=void 0!==d?d:0;f=void 0!==f?f:0;c=void 0!==c?c:72;g=g||
{};var k=void 0===g.kerning?!0:g.kerning,q=1/this.unitsPerEm*c;a=this.stringToGlyphs(a);for(var t=0;t<a.length;t+=1){var y=a[t];if(m(y,d,f,c,g),y.advanceWidth&&(d+=y.advanceWidth*q),k&&t<a.length-1)y=this.getKerningValue(y,a[t+1]),d+=y*q}}};c.prototype.getPath=function(a,c,f,l,g){var m=new d.Path;return this.forEachGlyph(a,c,f,l,g,function(a,f,d,c){a=a.getPath(f,d,c);m.extend(a)}),m};c.prototype.draw=function(a,d,f,c,g,m){this.getPath(d,f,c,g,m).draw(a)};c.prototype.drawPoints=function(a,d,f,c,g,
m){this.forEachGlyph(d,f,c,g,m,function(f,d,c,l){f.drawPoints(a,d,c,l)})};c.prototype.drawMetrics=function(a,d,f,c,g,m){this.forEachGlyph(d,f,c,g,m,function(f,d,c,l){f.drawMetrics(a,d,c,l)})};c.prototype.validate=function(){function a(c){f[c]&&0<f[c].trim().length||d.push("No "+c+" specified.")}var d=[],f=this;a("familyName");a("weightName");a("manufacturer");a("copyright");a("version");0<this.unitsPerEm||d.push("No unitsPerEm specified.")};c.prototype.toTables=function(){return g.fontToTable(this)};
c.prototype.toBuffer=function(){for(var a=this.toTables().encode(),d=new ArrayBuffer(a.length),f=new Uint8Array(d),c=0;c<a.length;c++)f[c]=a[c];return d};c.prototype.download=function(){var a=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf",d=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;window.requestFileSystem(window.TEMPORARY,d.byteLength,function(f){f.root.getFile(a,{create:!0},function(a){a.createWriter(function(f){var c=new DataView(d),
c=new Blob([c],{type:"font/opentype"});f.write(c);f.addEventListener("writeend",function(){location.href=a.toURL()},!1)})})},function(a){throw a;})};k.Font=c},{"./encoding":3,"./path":8,"./tables/sfnt":23}],5:[function(p,a,k){function c(a){this.font=a.font||null;this.index=a.index||0;this.name=a.name||null;this.unicode=a.unicode||void 0;this.unicodes=a.unicodes||void 0!==a.unicode?[a.unicode]:[];this.xMin=a.xMin||0;this.yMin=a.yMin||0;this.xMax=a.xMax||0;this.yMax=a.yMax||0;this.advanceWidth=a.advanceWidth||
0;this.path=a.path||null}var d=p("./check"),g=p("./draw"),m=p("./path");c.prototype.addUnicode=function(a){0===this.unicodes.length&&(this.unicode=a);this.unicodes.push(a)};c.prototype.getPath=function(a,d,f){a=void 0!==a?a:0;d=void 0!==d?d:0;f=1/this.font.unitsPerEm*(void 0!==f?f:72);for(var c=new m.Path,g=this.path.commands,k=0;k<g.length;k+=1){var v=g[k];"M"===v.type?c.moveTo(a+v.x*f,d+-v.y*f):"L"===v.type?c.lineTo(a+v.x*f,d+-v.y*f):"Q"===v.type?c.quadraticCurveTo(a+v.x1*f,d+-v.y1*f,a+v.x*f,d+
-v.y*f):"C"===v.type?c.curveTo(a+v.x1*f,d+-v.y1*f,a+v.x2*f,d+-v.y2*f,a+v.x*f,d+-v.y*f):"Z"===v.type&&c.closePath()}return c};c.prototype.getContours=function(){if(void 0===this.points)return[];for(var a=[],c=[],f=0;f<this.points.length;f+=1){var l=this.points[f];c.push(l);l.lastPointOfContour&&(a.push(c),c=[])}return d.argument(0===c.length,"There are still points left in the current contour."),a};c.prototype.getMetrics=function(){for(var a=this.path.commands,d=[],f=[],c=0;c<a.length;c+=1){var g=
a[c];"Z"!==g.type&&(d.push(g.x),f.push(g.y));"Q"!==g.type&&"C"!==g.type||(d.push(g.x1),f.push(g.y1));"C"===g.type&&(d.push(g.x2),f.push(g.y2))}a={xMin:Math.min.apply(null,d),yMin:Math.min.apply(null,f),xMax:Math.max.apply(null,d),yMax:Math.max.apply(null,f),leftSideBearing:0};return a.rightSideBearing=this.advanceWidth-a.leftSideBearing-(a.xMax-a.xMin),a};c.prototype.draw=function(a,d,f,c){this.getPath(d,f,c).draw(a)};c.prototype.drawPoints=function(a,d,f,c){function g(f,d,c,l){var r=2*Math.PI;a.beginPath();
for(var n=0;n<f.length;n+=1)a.moveTo(d+f[n].x*l,c+f[n].y*l),a.arc(d+f[n].x*l,c+f[n].y*l,2,0,r,!1);a.closePath();a.fill()}d=void 0!==d?d:0;f=void 0!==f?f:0;c=1/this.font.unitsPerEm*(void 0!==c?c:24);for(var m=[],k=[],q=this.path,t=0;t<q.commands.length;t+=1){var y=q.commands[t];void 0!==y.x&&m.push({x:y.x,y:-y.y});void 0!==y.x1&&k.push({x:y.x1,y:-y.y1});void 0!==y.x2&&k.push({x:y.x2,y:-y.y2})}a.fillStyle="blue";g(m,d,f,c);a.fillStyle="red";g(k,d,f,c)};c.prototype.drawMetrics=function(a,d,f,c){d=void 0!==
d?d:0;f=void 0!==f?f:0;c=1/this.font.unitsPerEm*(void 0!==c?c:24);a.lineWidth=1;a.strokeStyle="black";g.line(a,d,-1E4,d,1E4);g.line(a,-1E4,f,1E4,f);a.strokeStyle="blue";g.line(a,d+this.xMin*c,-1E4,d+this.xMin*c,1E4);g.line(a,d+this.xMax*c,-1E4,d+this.xMax*c,1E4);g.line(a,-1E4,f+-this.yMin*c,1E4,f+-this.yMin*c);g.line(a,-1E4,f+-this.yMax*c,1E4,f+-this.yMax*c);a.strokeStyle="green";g.line(a,d+this.advanceWidth*c,-1E4,d+this.advanceWidth*c,1E4)};k.Glyph=c},{"./check":1,"./draw":2,"./path":8}],6:[function(p,
a,k){function c(a,f){p("fs").readFile(a,function(a,d){var c;if(a)c=f(a.message);else{c=new ArrayBuffer(d.length);for(var l=new Uint8Array(c),g=0;g<d.length;g+=1)l[g]=d[g];c=void f(null,c)}return c})}function d(a,f){var d=new XMLHttpRequest;d.open("get",a,!0);d.responseType="arraybuffer";d.onload=function(){return 200!==d.status?f("Font could not be loaded: "+d.statusText):f(null,d.response)};d.send()}function g(a){var d,f,c,g,k,p,O,F=new h.Font;a=new DataView(a,0);var D=n.getFixed(a,0);if(1===D)F.outlinesFormat=
"truetype";else{if(D=n.getTag(a,0),"OTTO"!==D)throw Error("Unsupported OpenType version "+D);F.outlinesFormat="cff"}for(var D=n.getUShort(a,4),P=12,L=0;D>L;L+=1){var X=n.getTag(a,P),Q=n.getULong(a,P+8);switch(X){case "cmap":F.tables.cmap=l.parse(a,Q);F.encoding=new m.CmapEncoding(F.tables.cmap);F.encoding||(F.supported=!1);break;case "head":F.tables.head=q.parse(a,Q);F.unitsPerEm=F.tables.head.unitsPerEm;d=F.tables.head.indexToLocFormat;break;case "hhea":F.tables.hhea=t.parse(a,Q);F.ascender=F.tables.hhea.ascender;
F.descender=F.tables.hhea.descender;F.numberOfHMetrics=F.tables.hhea.numberOfHMetrics;break;case "hmtx":f=Q;break;case "maxp":F.tables.maxp=z.parse(a,Q);F.numGlyphs=F.tables.maxp.numGlyphs;break;case "name":F.tables.name=u.parse(a,Q);F.familyName=F.tables.name.fontFamily;F.styleName=F.tables.name.fontSubfamily;break;case "OS/2":F.tables.os2=A.parse(a,Q);break;case "post":F.tables.post=B.parse(a,Q);F.glyphNames=new m.GlyphNames(F.tables.post);break;case "glyf":c=Q;break;case "loca":g=Q;break;case "CFF ":k=
Q;break;case "kern":p=Q;break;case "GPOS":O=Q}P+=16}c&&g?(d=x.parse(a,g,F.numGlyphs,0===d),F.glyphs=E.parse(a,c,d,F),y.parse(a,f,F.numberOfHMetrics,F.numGlyphs,F.glyphs),m.addGlyphNames(F)):k?(r.parse(a,k,F),m.addGlyphNames(F)):F.supported=!1;return F.supported&&(F.kerningPairs=p?w.parse(a,p):{},O&&v.parse(a,O,F)),F}var m=p("./encoding"),h=p("./font");a=p("./glyph");var n=p("./parse"),f=p("./path"),l=p("./tables/cmap"),r=p("./tables/cff"),E=p("./tables/glyf"),v=p("./tables/gpos"),q=p("./tables/head"),
t=p("./tables/hhea"),y=p("./tables/hmtx"),w=p("./tables/kern"),x=p("./tables/loca"),z=p("./tables/maxp"),u=p("./tables/name"),A=p("./tables/os2"),B=p("./tables/post");k._parse=n;k.Font=h.Font;k.Glyph=a.Glyph;k.Path=f.Path;k.parse=g;k.load=function(a,f){("undefined"==typeof window?c:d)(a,function(a,d){if(a)return f(a);var c=g(d);return c.supported?f(null,c):f("Font is not supported (is this a Postscript font?)")})}},{"./encoding":3,"./font":4,"./glyph":5,"./parse":7,"./path":8,"./tables/cff":10,"./tables/cmap":11,
"./tables/glyf":12,"./tables/gpos":13,"./tables/head":14,"./tables/hhea":15,"./tables/hmtx":16,"./tables/kern":17,"./tables/loca":18,"./tables/maxp":19,"./tables/name":20,"./tables/os2":21,"./tables/post":22,fs:void 0}],7:[function(p,a,k){function c(a,d){this.data=a;this.offset=d;this.relativeOffset=0}k.getByte=function(a,d){return a.getUint8(d)};k.getCard8=k.getByte;k.getUShort=function(a,d){return a.getUint16(d,!1)};k.getCard16=k.getUShort;k.getShort=function(a,d){return a.getInt16(d,!1)};k.getULong=
function(a,d){return a.getUint32(d,!1)};k.getFixed=function(a,d){var c=a.getInt16(d,!1),n=a.getUint16(d+2,!1);return c+n/65535};k.getTag=function(a,d){for(var c="",n=d;d+4>n;n+=1)c+=String.fromCharCode(a.getInt8(n));return c};k.getOffset=function(a,d,c){for(var n=0,f=0;c>f;f+=1)n<<=8,n+=a.getUint8(d+f);return n};k.getBytes=function(a,d,c){for(var n=[];c>d;d+=1)n.push(a.getUint8(d));return n};k.bytesToString=function(a){for(var d="",c=0;c<a.length;c+=1)d+=String.fromCharCode(a[c]);return d};var d=
{"byte":1,uShort:2,"short":2,uLong:4,fixed:4,longDateTime:8,tag:4};c.prototype.parseByte=function(){var a=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a};c.prototype.parseChar=function(){var a=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a};c.prototype.parseCard8=c.prototype.parseByte;c.prototype.parseUShort=function(){var a=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a};c.prototype.parseCard16=
c.prototype.parseUShort;c.prototype.parseSID=c.prototype.parseUShort;c.prototype.parseOffset16=c.prototype.parseUShort;c.prototype.parseShort=function(){var a=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a};c.prototype.parseF2Dot14=function(){var a=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,a};c.prototype.parseULong=function(){var a=k.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,
a};c.prototype.parseFixed=function(){var a=k.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a};c.prototype.parseOffset16List=c.prototype.parseUShortList=function(a){for(var d=Array(a),c=this.data,n=this.offset+this.relativeOffset,f=0;a>f;f++)d[f]=k.getUShort(c,n),n+=2;return this.relativeOffset+=2*a,d};c.prototype.parseString=function(a){var d=this.data,c=this.offset+this.relativeOffset,n="";this.relativeOffset+=a;for(var f=0;a>f;f++)n+=String.fromCharCode(d.getUint8(c+
f));return n};c.prototype.parseTag=function(){return this.parseString(4)};c.prototype.parseLongDateTime=function(){var a=k.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,a};c.prototype.parseFixed=function(){var a=k.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a/65536};c.prototype.parseVersion=function(){var a=k.getUShort(this.data,this.offset+this.relativeOffset),d=k.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=
4,a+d/4096/10};c.prototype.skip=function(a,c){void 0===c&&(c=1);this.relativeOffset+=d[a]*c};k.Parser=c},{}],8:[function(p,a,k){function c(){this.commands=[];this.fill="black";this.stroke=null;this.strokeWidth=1}c.prototype.moveTo=function(a,c){this.commands.push({type:"M",x:a,y:c})};c.prototype.lineTo=function(a,c){this.commands.push({type:"L",x:a,y:c})};c.prototype.curveTo=c.prototype.bezierCurveTo=function(a,c,m,h,n,f){this.commands.push({type:"C",x1:a,y1:c,x2:m,y2:h,x:n,y:f})};c.prototype.quadTo=
c.prototype.quadraticCurveTo=function(a,c,m,h){this.commands.push({type:"Q",x1:a,y1:c,x:m,y:h})};c.prototype.close=c.prototype.closePath=function(){this.commands.push({type:"Z"})};c.prototype.extend=function(a){a.commands&&(a=a.commands);Array.prototype.push.apply(this.commands,a)};c.prototype.draw=function(a){a.beginPath();for(var c=0;c<this.commands.length;c+=1){var m=this.commands[c];"M"===m.type?a.moveTo(m.x,m.y):"L"===m.type?a.lineTo(m.x,m.y):"C"===m.type?a.bezierCurveTo(m.x1,m.y1,m.x2,m.y2,
m.x,m.y):"Q"===m.type?a.quadraticCurveTo(m.x1,m.y1,m.x,m.y):"Z"===m.type&&a.closePath()}this.fill&&(a.fillStyle=this.fill,a.fill());this.stroke&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeWidth,a.stroke())};c.prototype.toPathData=function(a){function c(){for(var f="",l=0;l<arguments.length;l+=1){var g=arguments[l];0<=g&&0<l&&(f+=" ");g=Math.round(g)===g?""+Math.round(g):g.toFixed(a);f+=g}return f}a=void 0!==a?a:2;for(var m="",h=0;h<this.commands.length;h+=1){var n=this.commands[h];"M"===n.type?
m+="M"+c(n.x,n.y):"L"===n.type?m+="L"+c(n.x,n.y):"C"===n.type?m+="C"+c(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?m+="Q"+c(n.x1,n.y1,n.x,n.y):"Z"===n.type&&(m+="Z")}return m};c.prototype.toSVG=function(a){var c='<path d="';return c+=this.toPathData(a),c+='"',this.fill&"black"!==this.fill&&(c+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(c+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),c+"/>"};k.Path=c},{}],9:[function(p,a,k){function c(a,d,f){var c;for(c=
0;c<d.length;c+=1){var g=d[c];this[g.name]=g.value}if(this.tableName=a,this.fields=d,f)for(a=Object.keys(f),c=0;c<a.length;c+=1)d=a[c],g=f[d],void 0!==this[d]&&(this[d]=g)}var d=p("./check"),g=p("./types").encode,m=p("./types").sizeOf;c.prototype.sizeOf=function(){for(var a=0,c=0;c<this.fields.length;c+=1){var f=this.fields[c],l=this[f.name];if(void 0===l&&(l=f.value),"function"==typeof l.sizeOf)a+=l.sizeOf();else{var g=m[f.type];d.assert("function"==typeof g,"Could not find sizeOf function for field"+
f.name);a+=g(l)}}return a};c.prototype.encode=function(){return g.TABLE(this)};k.Table=c},{"./check":1,"./types":24}],10:[function(p,a,k){function c(a,d){if(a===d)return!0;if(Array.isArray(a)&&Array.isArray(d)){if(a.length!==d.length)return!1;for(var f=0;f<a.length;f+=1)if(!c(a[f],d[f]))return!1;return!0}return!1}function d(a,d,f){var c,l,g,h=[],r=[];g=w.getCard16(a,d);if(0!==g){var n=w.getByte(a,d+2);l=d+(g+1)*n+2;var m=d+3;for(c=0;g+1>c;c+=1)h.push(w.getOffset(a,m,n)),m+=n;g=l+h[g]}else g=d+2;for(c=
0;c<h.length-1;c+=1)n=w.getBytes(a,l+h[c],l+h[c+1]),f&&(n=f(n)),r.push(n);return{objects:r,startOffset:d,endOffset:g}}function g(a,d){var f,c,l,g;if(28===d)return f=a.parseByte(),c=a.parseByte(),f<<8|c;if(29===d)return f=a.parseByte(),c=a.parseByte(),l=a.parseByte(),g=a.parseByte(),f<<24|c<<16|l<<8|g;if(30===d){f="";for(c=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){g=a.parseByte();l=g>>4;g&=15;if(15===l)break;if(f+=c[l],15===g)break;f+=c[g]}return parseFloat(f)}if(32<=d&&246>=
d)return d-139;if(247<=d&&250>=d)return f=a.parseByte(),256*(d-247)+f+108;if(251<=d&&254>=d)return f=a.parseByte(),256*-(d-251)-f-108;throw Error("Invalid b0 "+d);}function m(a,d,f){var c=new w.Parser(a,void 0!==d?d:0);d=[];var l=[];for(f=void 0!==f?f:a.length;c.relativeOffset<f;)a=c.parseByte(),21>=a?(12===a&&(a=1200+c.parseByte()),d.push([a,l]),l=[]):l.push(g(c,a));f={};for(a=0;a<d.length;a+=1){c=d[a][0];l=d[a][1];if(l=1===l.length?l[0]:l,f.hasOwnProperty(c))throw Error("Object "+f+" already has key "+
c);f[c]=l}return f}function h(a,d){return 390>=d?t.cffStandardStrings[d]:a[d-391]}function n(a,d,f){for(var c={},l=0;l<d.length;l+=1){var g=d[l],r=a[g.op];void 0===r&&(r=void 0!==g.value?g.value:null);"SID"===g.type&&(r=h(f,r));c[g.name]=r}return c}function f(a,d,f){function c(a,d){z&&k.closePath();k.moveTo(a,d);z=!0}function l(){0!==q.length%2&&!E&&(t=q.shift()+d.nominalWidthX);v+=q.length>>1;q.length=0;E=!0}function g(a){for(var y,B,w,x,A,V,S,T,R,U,N=0;N<a.length;)switch(A=a[N],N+=1,A){case 1:l();
break;case 3:l();break;case 4:1<q.length&&!E&&(t=q.shift()+d.nominalWidthX,E=!0);p+=q.pop();c(u,p);break;case 5:for(;0<q.length;)u+=q.shift(),p+=q.shift(),k.lineTo(u,p);break;case 6:for(;0<q.length&&(u+=q.shift(),k.lineTo(u,p),0!==q.length);)p+=q.shift(),k.lineTo(u,p);break;case 7:for(;0<q.length&&(p+=q.shift(),k.lineTo(u,p),0!==q.length);)u+=q.shift(),k.lineTo(u,p);break;case 8:for(;0<q.length;)h=u+q.shift(),r=p+q.shift(),n=h+q.shift(),m=r+q.shift(),u=n+q.shift(),p=m+q.shift(),k.curveTo(h,r,n,m,
u,p);break;case 10:A=q.pop()+d.subrsBias;(A=d.subrs[A])&&g(A);break;case 11:return;case 12:switch(A=a[N],N+=1,A){case 35:h=u+q.shift();r=p+q.shift();n=h+q.shift();m=r+q.shift();A=n+q.shift();V=m+q.shift();S=A+q.shift();T=V+q.shift();R=S+q.shift();U=T+q.shift();u=R+q.shift();p=U+q.shift();q.shift();k.curveTo(h,r,n,m,A,V);k.curveTo(S,T,R,U,u,p);break;case 34:h=u+q.shift();r=p;n=h+q.shift();m=r+q.shift();A=n+q.shift();V=m;S=A+q.shift();T=m;R=S+q.shift();U=p;u=R+q.shift();k.curveTo(h,r,n,m,A,V);k.curveTo(S,
T,R,U,u,p);break;case 36:h=u+q.shift();r=p+q.shift();n=h+q.shift();m=r+q.shift();A=n+q.shift();V=m;S=A+q.shift();T=m;R=S+q.shift();U=T+q.shift();u=R+q.shift();k.curveTo(h,r,n,m,A,V);k.curveTo(S,T,R,U,u,p);break;case 37:h=u+q.shift();r=p+q.shift();n=h+q.shift();m=r+q.shift();A=n+q.shift();V=m+q.shift();S=A+q.shift();T=V+q.shift();R=S+q.shift();U=T+q.shift();Math.abs(R-u)>Math.abs(U-p)?u=R+q.shift():p=U+q.shift();k.curveTo(h,r,n,m,A,V);k.curveTo(S,T,R,U,u,p);break;default:console.log("Glyph "+f+": unknown operator 1200"+
A),q.length=0}break;case 14:0<q.length&&!E&&(t=q.shift()+d.nominalWidthX,E=!0);z&&(k.closePath(),z=!1);break;case 18:l();break;case 19:case 20:l();N+=v+7>>3;break;case 21:2<q.length&&!E&&(t=q.shift()+d.nominalWidthX,E=!0);p+=q.pop();u+=q.pop();c(u,p);break;case 22:1<q.length&&!E&&(t=q.shift()+d.nominalWidthX,E=!0);u+=q.pop();c(u,p);break;case 23:l();break;case 24:for(;2<q.length;)h=u+q.shift(),r=p+q.shift(),n=h+q.shift(),m=r+q.shift(),u=n+q.shift(),p=m+q.shift(),k.curveTo(h,r,n,m,u,p);u+=q.shift();
p+=q.shift();k.lineTo(u,p);break;case 25:for(;6<q.length;)u+=q.shift(),p+=q.shift(),k.lineTo(u,p);h=u+q.shift();r=p+q.shift();n=h+q.shift();m=r+q.shift();u=n+q.shift();p=m+q.shift();k.curveTo(h,r,n,m,u,p);break;case 26:for(q.length%2&&(u+=q.shift());0<q.length;)h=u,r=p+q.shift(),n=h+q.shift(),m=r+q.shift(),u=n,p=m+q.shift(),k.curveTo(h,r,n,m,u,p);break;case 27:for(q.length%2&&(p+=q.shift());0<q.length;)h=u+q.shift(),r=p,n=h+q.shift(),m=r+q.shift(),u=n+q.shift(),p=m,k.curveTo(h,r,n,m,u,p);break;case 28:y=
a[N];B=a[N+1];q.push((y<<24|B<<16)>>16);N+=2;break;case 29:A=q.pop()+d.gsubrsBias;(A=d.gsubrs[A])&&g(A);break;case 30:for(;0<q.length&&(h=u,r=p+q.shift(),n=h+q.shift(),m=r+q.shift(),u=n+q.shift(),p=m+(1===q.length?q.shift():0),k.curveTo(h,r,n,m,u,p),0!==q.length);)h=u+q.shift(),r=p,n=h+q.shift(),m=r+q.shift(),p=m+q.shift(),u=n+(1===q.length?q.shift():0),k.curveTo(h,r,n,m,u,p);break;case 31:for(;0<q.length&&(h=u+q.shift(),r=p,n=h+q.shift(),m=r+q.shift(),p=m+q.shift(),u=n+(1===q.length?q.shift():0),
k.curveTo(h,r,n,m,u,p),0!==q.length);)h=u,r=p+q.shift(),n=h+q.shift(),m=r+q.shift(),u=n+q.shift(),p=m+(1===q.length?q.shift():0),k.curveTo(h,r,n,m,u,p);break;default:32>A?console.log("Glyph "+f+": unknown operator "+A):247>A?q.push(A-139):251>A?(y=a[N],N+=1,q.push(256*(A-247)+y+108)):255>A?(y=a[N],N+=1,q.push(256*-(A-251)-y-108)):(y=a[N],B=a[N+1],w=a[N+2],x=a[N+3],N+=4,q.push((y<<24|B<<16|w<<8|x)/65536))}}var h,r,n,m,k=new x.Path,q=[],v=0,E=!1,t=d.defaultWidthX,z=!1,u=0,p=0;g(a);a=new y.Glyph({font:d,
index:f});return a.path=k,a.advanceWidth=t,a}function l(a){return 1240>a.length?107:33900>a.length?1131:32768}function r(a,d){var f,c=t.cffStandardStrings.indexOf(a);return c=d.indexOf(a),0<=c?f=c+t.cffStandardStrings.length:(f=t.cffStandardStrings.length+d.length,d.push(a)),f}function E(a,d,f){for(var l={},h=0;h<a.length;h+=1){var g=a[h],n=d[g.name];void 0===n||c(n,g.value)||("SID"===g.type&&(n=r(n,f)),l[g.op]={name:g.name,type:g.type,value:n})}return l}function v(a,d){var f=new z.Table("Top DICT",
[{name:"dict",type:"DICT",value:{}}]);return f.dict=E(u,a,d),f}function q(a){var d=new z.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return d.topDicts=[{name:"topDict_0",type:"TABLE",value:a}],d}var t=p("../encoding"),y=p("../glyph"),w=p("../parse"),x=p("../path"),z=p("../table"),u=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},
{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:"real real real real real real".split(" "),value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number",
"number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],A=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];k.parse=function(a,
c,g){g.tables.cff={};var r;r={};r=(r.formatMajor=w.getCard8(a,c),r.formatMinor=w.getCard8(a,c+1),r.size=w.getCard8(a,c+2),r.offsetSize=w.getCard8(a,c+3),r.startOffset=c,r.endOffset=c+4,r);r=d(a,r.endOffset,w.bytesToString);r=d(a,r.endOffset);var q=d(a,r.endOffset,w.bytesToString),k=d(a,q.endOffset);g.gsubrs=k.objects;g.gsubrsBias=l(g.gsubrs);k=new DataView((new Uint8Array(r.objects[0])).buffer);r=q.objects;k=m(k,0,k.byteLength);k=n(k,u,r);g.tables.cff.topDict=k;r=c+k["private"][1];var v;v=q.objects;
var E=m(a,r,k["private"][0]);v=n(E,A,v);(g.defaultWidthX=v.defaultWidthX,g.nominalWidthX=v.nominalWidthX,0!==v.subrs)?(r=d(a,r+v.subrs),g.subrs=r.objects,g.subrsBias=l(g.subrs)):(g.subrs=[],g.subrsBias=0);r=d(a,c+k.charStrings);g.nGlyphs=r.objects.length;v=g.nGlyphs;var E=q.objects,z,p,y,x=new w.Parser(a,c+k.charset);--v;q=[".notdef"];z=x.parseCard8();if(0===z)for(z=0;v>z;z+=1)p=x.parseSID(),q.push(h(E,p));else if(1===z)for(;q.length<=v;)for(p=x.parseSID(),y=x.parseCard8(),z=0;y>=z;z+=1)q.push(h(E,
p)),p+=1;else{if(2!==z)throw Error("Unknown charset format "+z);for(;q.length<=v;)for(p=x.parseSID(),y=x.parseCard16(),z=0;y>=z;z+=1)q.push(h(E,p)),p+=1}if(0===k.encoding)a=new t.CffEncoding(t.cffStandardEncoding,q);else if(1===k.encoding)a=new t.CffEncoding(t.cffExpertEncoding,q);else{v={};a=new w.Parser(a,c+k.encoding);c=a.parseCard8();if(0===c)for(E=a.parseCard8(),c=0;E>c;c+=1)k=a.parseCard8(),v[k]=c;else{if(1!==c)throw Error("Unknown encoding format "+c);E=a.parseCard8();k=1;for(c=0;E>c;c+=1)for(x=
a.parseCard8(),z=a.parseCard8(),p=x;x+z>=p;p+=1)v[p]=k,k+=1}a=new t.CffEncoding(v,q)}g.cffEncoding=a;g.encoding=g.encoding||g.cffEncoding;g.glyphs=[];for(a=0;a<g.nGlyphs;a+=1)g.glyphs.push(f(r.objects[a],g,a))};k.make=function(a,d){for(var f=new z.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",
type:"TABLE"}]),c={version:d.version,fullName:d.fullName,familyName:d.familyName,weight:d.weightName,charset:999,encoding:0,charStrings:999,"private":[0,999]},l=[],g=1;g<a.length;g+=1)l.push(a[g].name);g=[];f.header=new z.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]);var h=[d.postScriptName],n=new z.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);n.names=[];for(var m=0;m<
h.length;m+=1)n.names.push({name:"name_"+m,type:"NAME",value:h[m]});f.nameIndex=n;h=v(c,g);f.topDictIndex=q(h);f.globalSubrIndex=new z.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]);n=new z.Table("Charsets",[{name:"format",type:"Card8",value:0}]);for(m=0;m<l.length;m+=1){var k=r(l[m],g);n.fields.push({name:"glyph_"+m,type:"SID",value:k})}f.charsets=n;l=new z.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(n=0;n<a.length;n+=1){var m=a[n],k=[],t=m.path;
k.push({name:"width",type:"NUMBER",value:m.advanceWidth});for(var p=0,u=0,y=0;y<t.commands.length;y+=1){var x=t.commands[y];if("Q"===x.type)var w=1/3,W=2/3,x={type:"C",x:x.x,y:x.y,x1:w*p+W*x.x1,y1:w*u+W*x.y1,x2:w*x.x+W*x.x1,y2:w*x.y+W*x.y1};if("M"===x.type)p=Math.round(x.x-p),u=Math.round(x.y-u),k.push({name:"dx",type:"NUMBER",value:p}),k.push({name:"dy",type:"NUMBER",value:u}),k.push({name:"rmoveto",type:"OP",value:21}),p=Math.round(x.x),u=Math.round(x.y);else if("L"===x.type)p=Math.round(x.x-p),
u=Math.round(x.y-u),k.push({name:"dx",type:"NUMBER",value:p}),k.push({name:"dy",type:"NUMBER",value:u}),k.push({name:"rlineto",type:"OP",value:5}),p=Math.round(x.x),u=Math.round(x.y);else if("C"===x.type){var w=Math.round(x.x1-p),W=Math.round(x.y1-u),Y=Math.round(x.x2-x.x1),Z=Math.round(x.y2-x.y1),p=Math.round(x.x-x.x2),u=Math.round(x.y-x.y2);k.push({name:"dx1",type:"NUMBER",value:w});k.push({name:"dy1",type:"NUMBER",value:W});k.push({name:"dx2",type:"NUMBER",value:Y});k.push({name:"dy2",type:"NUMBER",
value:Z});k.push({name:"dx",type:"NUMBER",value:p});k.push({name:"dy",type:"NUMBER",value:u});k.push({name:"rrcurveto",type:"OP",value:8});p=Math.round(x.x);u=Math.round(x.y)}}k=(k.push({name:"endchar",type:"OP",value:14}),k);l.charStrings.push({name:m.name,type:"CHARSTRING",value:k})}f.charStringsIndex=l;l=new z.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);l=(l.dict=E(A,{},g),l);n=new z.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);l=(n.privateDicts=[{name:"privateDict_0",
type:"TABLE",value:l}],n);f.privateDictIndex=l;l=new z.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);l.strings=[];for(n=0;n<g.length;n+=1)l.strings.push({name:"string_"+n,type:"STRING",value:g[n]});f.stringIndex=l;l=f.header.sizeOf()+f.nameIndex.sizeOf()+f.topDictIndex.sizeOf()+f.stringIndex.sizeOf()+f.globalSubrIndex.sizeOf();return c.charset=l,c.encoding=0,c.charStrings=c.charset+f.charsets.sizeOf(),c["private"][1]=c.charStrings+f.charStringsIndex.sizeOf(),h=v(c,g),f.topDictIndex=
q(h),f}},{"../encoding":3,"../glyph":5,"../parse":7,"../path":8,"../table":9}],11:[function(p,a,k){function c(a,d,f){a.segments.push({end:d,start:d,delta:-(d-f),offset:0})}var d=p("../check"),g=p("../parse"),m=p("../table");k.parse=function(a,c){var f,l={};l.version=g.getUShort(a,c);d.argument(0===l.version,"cmap table version should be 0.");l.numTables=g.getUShort(a,c+2);var r=-1;for(f=0;f<l.numTables;f+=1){var m=g.getUShort(a,c+4+8*f),k=g.getUShort(a,c+4+8*f+2);if(3===m&&(1===k||0===k)){r=g.getULong(a,
c+4+8*f+4);break}}if(-1===r)return null;f=new g.Parser(a,c+r);l.format=f.parseUShort();d.argument(4===l.format,"Only format 4 cmap tables are supported.");l.length=f.parseUShort();l.language=f.parseUShort();l.segCount=m=f.parseUShort()>>1;f.skip("uShort",3);l.glyphIndexMap={};var k=new g.Parser(a,c+r+14),q=new g.Parser(a,c+r+16+2*m),t=new g.Parser(a,c+r+16+4*m),p=new g.Parser(a,c+r+16+6*m),r=c+r+16+8*m;for(f=0;m-1>f;f+=1)for(var w,x=k.parseUShort(),z=q.parseUShort(),u=t.parseShort(),A=p.parseUShort(),
B=z;x>=B;B+=1)0!==A?(r=p.offset+p.relativeOffset-2,r+=A,r+=2*(B-z),w=g.getUShort(a,r),0!==w&&(w=w+u&65535)):w=B+u&65535,l.glyphIndexMap[B]=w;return l};k.make=function(a){var d,f=new m.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",
value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);f.segments=[];for(d=0;d<a.length;d+=1){for(var l=a[d],g=0;g<l.unicodes.length;g+=1)c(f,l.unicodes[g],d);f.segments=f.segments.sort(function(a,d){return a.start-d.start})}f.segments.push({end:65535,start:65535,delta:1,offset:0});a=f.segments.length;f.segCountX2=2*a;f.searchRange=2*Math.pow(2,Math.floor(Math.log(a)/Math.log(2)));
f.entrySelector=Math.log(f.searchRange/2)/Math.log(2);f.rangeShift=f.segCountX2-f.searchRange;var l=[],g=[],k=[],v=[],q=[];for(d=0;a>d;d+=1){var t=f.segments[d],l=l.concat({name:"end_"+d,type:"USHORT",value:t.end}),g=g.concat({name:"start_"+d,type:"USHORT",value:t.start}),k=k.concat({name:"idDelta_"+d,type:"SHORT",value:t.delta}),v=v.concat({name:"idRangeOffset_"+d,type:"USHORT",value:t.offset});void 0!==t.glyphId&&(q=q.concat({name:"glyph_"+d,type:"USHORT",value:t.glyphId}))}return f.fields=f.fields.concat(l),
f.fields.push({name:"reservedPad",type:"USHORT",value:0}),f.fields=f.fields.concat(g),f.fields=f.fields.concat(k),f.fields=f.fields.concat(v),f.fields=f.fields.concat(q),f.length=2*l.length+16+2*g.length+2*k.length+2*v.length+2*q.length,f}},{"../check":1,"../parse":7,"../table":9}],12:[function(p,a,k){function c(a,d,c,g,h){var q;return 0<(d&g)?(q=a.parseByte(),0===(d&h)&&(q=-q),q=c+q):q=0<(d&h)?c:c+a.parseShort(),q}function d(a,d,r,n){a=new h.Parser(a,d);r=new m.Glyph({font:n,index:r});r.numberOfContours=
a.parseShort();r.xMin=a.parseShort();r.yMin=a.parseShort();r.xMax=a.parseShort();r.yMax=a.parseShort();var k;if(0<r.numberOfContours){var q=r.endPointIndices=[];for(d=0;d<r.numberOfContours;d+=1)q.push(a.parseUShort());r.instructionLength=a.parseUShort();r.instructions=[];for(d=0;d<r.instructionLength;d+=1)r.instructions.push(a.parseByte());var t=q[q.length-1]+1;n=[];for(d=0;t>d;d+=1)if(k=a.parseByte(),n.push(k),0<(8&k))for(var p=a.parseByte(),w=0;p>w;w+=1)n.push(k),d+=1;if(g.argument(n.length===
t,"Bad flags."),0<q.length){w=[];if(0<t){for(d=0;t>d;d+=1)k=n[d],p={},p.onCurve=!!(1&k),p.lastPointOfContour=0<=q.indexOf(d),w.push(p);for(d=q=0;t>d;d+=1)k=n[d],p=w[d],p.x=c(a,k,q,2,16),q=p.x;for(d=q=0;t>d;d+=1)k=n[d],p=w[d],p.y=c(a,k,q,4,32),q=p.y}r.points=w}else r.points=[]}else if(0===r.numberOfContours)r.points=[];else for(r.isComposite=!0,r.points=[],r.components=[],k=!0;k;)n=a.parseUShort(),k={glyphIndex:a.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0},0<(1&n)?(k.dx=a.parseShort(),
k.dy=a.parseShort()):(k.dx=a.parseChar(),k.dy=a.parseChar()),0<(8&n)?k.xScale=k.yScale=a.parseF2Dot14():0<(64&n)?(k.xScale=a.parseF2Dot14(),k.yScale=a.parseF2Dot14()):0<(128&n)&&(k.xScale=a.parseF2Dot14(),k.scale01=a.parseF2Dot14(),k.scale10=a.parseF2Dot14(),k.yScale=a.parseF2Dot14()),r.components.push(k),k=!!(32&n);return r}var g=p("../check"),m=p("../glyph"),h=p("../parse"),n=p("../path");k.parse=function(a,c,h,k){var v,q=[];for(v=0;v<h.length-1;v+=1){var t=h[v];q.push(t!==h[v+1]?d(a,c+t,v,k):new m.Glyph({font:k,
index:v}))}for(v=0;v<q.length;v+=1){c=q[v];if(c.isComposite)for(a=0;a<c.components.length;a+=1)if(k=c.components[a],h=q[k.glyphIndex],h.points){h=h.points;for(var t=[],p=0;p<h.length;p+=1){var w=h[p];t.push({x:k.xScale*w.x+k.scale01*w.y+k.dx,y:k.scale10*w.x+k.yScale*w.y+k.dy,onCurve:w.onCurve,lastPointOfContour:w.lastPointOfContour})}c.points=c.points.concat(t)}a=c;h=c.points;c=new n.Path;if(h){k=[];t=[];for(p=0;p<h.length;p+=1)w=h[p],t.push(w),w.lastPointOfContour&&(k.push(t),t=[]);h=(g.argument(0===
t.length,"There are still points left in the current contour."),k);for(k=0;k<h.length;k+=1){var x,z,t=h[k],p=t[0],w=t[t.length-1];p.onCurve?(x=null,z=!0):(p=w.onCurve?w:{x:(p.x+w.x)/2,y:(p.y+w.y)/2},x=p,z=!1);c.moveTo(p.x,p.y);for(var u=z?1:0;u<t.length;u+=1){var A=t[u],B=0===u?p:t[u-1];if(B.onCurve&&A.onCurve)c.lineTo(A.x,A.y);else if(B.onCurve&&!A.onCurve)x=A;else if(B.onCurve||A.onCurve){if(B.onCurve||!A.onCurve)throw Error("Invalid state.");c.quadraticCurveTo(x.x,x.y,A.x,A.y);x=null}else c.quadraticCurveTo(B.x,
B.y,(B.x+A.x)/2,(B.y+A.y)/2),x=A}p!==w&&(x?c.quadraticCurveTo(x.x,x.y,p.x,p.y):c.lineTo(p.x,p.y))}c=(c.closePath(),c)}a.path=c}return q}},{"../check":1,"../glyph":5,"../parse":7,"../path":8}],13:[function(p,a,k){function c(a,d){for(var c=new f.Parser(a,d),g=c.parseUShort(),h=[],k=0;g>k;k++)h[c.parseTag()]={offset:c.parseUShort()};return h}function d(a,d){var c=new f.Parser(a,d),g=c.parseUShort(),h=c.parseUShort();if(1===g)return c.parseUShortList(h);if(2===g){for(g=[];h--;)for(var k=c.parseUShort(),
n=c.parseUShort(),m=c.parseUShort();n>=k;k++)g[m++]=k;return g}}function g(a,d){var c=new f.Parser(a,d),g=c.parseUShort();if(1===g){var h=c.parseUShort(),g=c.parseUShort(),k=c.parseUShortList(g);return function(a){return k[a-h]||0}}if(2===g){for(var g=c.parseUShort(),n=[],m=[],p=[],z=0;g>z;z++)n[z]=c.parseUShort(),m[z]=c.parseUShort(),p[z]=c.parseUShort();return function(a){for(var d=0,f=n.length-1;f>d;){var c=d+f+1>>1;a<n[c]?f=c-1:d=c}return n[d]<=a&&a<=m[d]?p[d]||0:0}}}function m(a,c){var h,k=new f.Parser(a,
c),n=k.parseUShort(),m=k.parseUShort(),m=d(a,c+m),p=k.parseUShort(),w=k.parseUShort();if(4===p&&0===w){var x={};if(1===n){for(var n=k.parseUShort(),z=[],u=k.parseOffset16List(n),A=0;n>A;A++){var B=u[A],C=x[B];if(!C)for(C={},k.relativeOffset=B,B=k.parseUShort();B--;){var J=k.parseUShort();p&&(h=k.parseShort());w&&k.parseShort();C[J]=h}z[m[A]]=C}return function(a,d){var f=z[a];return f?f[d]:void 0}}if(2===n){for(var u=k.parseUShort(),A=k.parseUShort(),x=k.parseUShort(),n=k.parseUShort(),I=g(a,c+u),
G=g(a,c+A),H=[],u=0;x>u;u++)for(A=H[u]=[],C=0;n>C;C++)p&&(h=k.parseShort()),w&&k.parseShort(),A[C]=h;for(var K={},u=0;u<m.length;u++)K[m[u]]=1;return function(a,d){if(K[a]){var f=I(a),c=G(d);return(f=H[f])?f[c]:void 0}}}}}function h(a,d){var c=new f.Parser(a,d),g=c.parseUShort(),h=c.parseUShort(),k=16&h,n=c.parseUShort(),p=c.parseOffset16List(n),c={lookupType:g,lookupFlag:h,markFilteringSet:k?c.parseUShort():-1};if(2===g){for(var x=[],g=0;n>g;g++)x.push(m(a,d+p[g]));c.getKerningValue=function(a,d){for(var f=
x.length;f--;){var c=x[f](a,d);if(void 0!==c)return c}return 0}}return c}var n=p("../check"),f=p("../parse");k.parse=function(a,d,g){var k=new f.Parser(a,d),m=k.parseFixed();n.argument(1===m,"Unsupported GPOS table version.");c(a,d+k.parseUShort());c(a,d+k.parseUShort());var p=k.parseUShort();k.relativeOffset=p;m=k.parseUShort();k=k.parseOffset16List(m);d+=p;for(p=0;m>p;p++){var y=h(a,d+k[p]);2!==y.lookupType||g.getGposKerningValue||(g.getGposKerningValue=y.getKerningValue)}}},{"../check":1,"../parse":7}],
14:[function(p,a,k){var c=p("../check"),d=p("../parse"),g=p("../table");k.parse=function(a,g){var k={},f=new d.Parser(a,g);return k.version=f.parseVersion(),k.fontRevision=Math.round(1E3*f.parseFixed())/1E3,k.checkSumAdjustment=f.parseULong(),k.magicNumber=f.parseULong(),c.argument(1594834165===k.magicNumber,"Font header has wrong magic number."),k.flags=f.parseUShort(),k.unitsPerEm=f.parseUShort(),k.created=f.parseLongDateTime(),k.modified=f.parseLongDateTime(),k.xMin=f.parseShort(),k.yMin=f.parseShort(),
k.xMax=f.parseShort(),k.yMax=f.parseShort(),k.macStyle=f.parseUShort(),k.lowestRecPPEM=f.parseUShort(),k.fontDirectionHint=f.parseShort(),k.indexToLocFormat=f.parseShort(),k.glyphDataFormat=f.parseShort(),k};k.make=function(a){return new g.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",
value:1E3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],a)}},{"../check":1,"../parse":7,
"../table":9}],15:[function(p,a,k){var c=p("../parse"),d=p("../table");k.parse=function(a,d){var h={},k=new c.Parser(a,d);return h.version=k.parseVersion(),h.ascender=k.parseShort(),h.descender=k.parseShort(),h.lineGap=k.parseShort(),h.advanceWidthMax=k.parseUShort(),h.minLeftSideBearing=k.parseShort(),h.minRightSideBearing=k.parseShort(),h.xMaxExtent=k.parseShort(),h.caretSlopeRise=k.parseShort(),h.caretSlopeRun=k.parseShort(),h.caretOffset=k.parseShort(),k.relativeOffset+=8,h.metricDataFormat=k.parseShort(),
h.numberOfHMetrics=k.parseUShort(),h};k.make=function(a){return new d.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",
value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],a)}},{"../parse":7,"../table":9}],16:[function(p,a,k){var c=p("../parse"),d=p("../table");k.parse=function(a,d,h,k,f){var l,r;a=new c.Parser(a,d);for(d=0;k>d;d+=1){h>d&&(l=a.parseUShort(),r=a.parseShort());
var p=f[d];p.advanceWidth=l;p.leftSideBearing=r}};k.make=function(a){for(var c=new d.Table("hmtx",[]),h=0;h<a.length;h+=1){var k=a[h],f=k.leftSideBearing||0;c.fields.push({name:"advanceWidth_"+h,type:"USHORT",value:k.advanceWidth||0});c.fields.push({name:"leftSideBearing_"+h,type:"SHORT",value:f})}return c}},{"../parse":7,"../table":9}],17:[function(p,a,k){var c=p("../check"),d=p("../parse");k.parse=function(a,k){var h={},n=new d.Parser(a,k),f=n.parseUShort();c.argument(0===f,"Unsupported kern table version.");
n.skip("uShort",1);f=n.parseUShort();c.argument(0===f,"Unsupported kern sub-table version.");n.skip("uShort",2);f=n.parseUShort();n.skip("uShort",3);for(var l=0;f>l;l+=1){var r=n.parseUShort(),p=n.parseUShort(),v=n.parseShort();h[r+","+p]=v}return h}},{"../check":1,"../parse":7}],18:[function(p,a,k){var c=p("../parse");k.parse=function(a,g,k,h){a=new c.Parser(a,g);g=h?a.parseUShort:a.parseULong;for(var n=[],f=0;k+1>f;f+=1){var l=g.call(a);h&&(l*=2);n.push(l)}return n}},{"../parse":7}],19:[function(p,
a,k){var c=p("../parse"),d=p("../table");k.parse=function(a,d){var h={},k=new c.Parser(a,d);return h.version=k.parseVersion(),h.numGlyphs=k.parseUShort(),1===h.version&&(h.maxPoints=k.parseUShort(),h.maxContours=k.parseUShort(),h.maxCompositePoints=k.parseUShort(),h.maxCompositeContours=k.parseUShort(),h.maxZones=k.parseUShort(),h.maxTwilightPoints=k.parseUShort(),h.maxStorage=k.parseUShort(),h.maxFunctionDefs=k.parseUShort(),h.maxInstructionDefs=k.parseUShort(),h.maxStackElements=k.parseUShort(),
h.maxSizeOfInstructions=k.parseUShort(),h.maxComponentElements=k.parseUShort(),h.maxComponentDepth=k.parseUShort()),h};k.make=function(a){return new d.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:a}])}},{"../parse":7,"../table":9}],20:[function(p,a,k){function c(a,d,c,g,h,k){return new m.Table("NameRecord",[{name:"platformID",type:"USHORT",value:a},{name:"encodingID",type:"USHORT",value:d},{name:"languageID",type:"USHORT",value:c},{name:"nameID",type:"USHORT",
value:g},{name:"length",type:"USHORT",value:h},{name:"offset",type:"USHORT",value:k}])}var d=p("../types").encode,g=p("../parse"),m=p("../table"),h="copyright fontFamily fontSubfamily uniqueID fullName version postScriptName trademark manufacturer designer description manufacturerURL designerURL licence licenceURL reserved preferredFamily preferredSubfamily compatibleFullName sampleText postScriptFindFontName wwsFamily wwsSubfamily".split(" ");k.parse=function(a,d){var c={},k=new g.Parser(a,d);c.format=
k.parseUShort();for(var m=k.parseUShort(),p=k.offset+k.parseUShort(),q=0,t=0;m>t;t++){var y=k.parseUShort(),w=k.parseUShort(),x=k.parseUShort(),z=k.parseUShort(),z=h[z],u=k.parseUShort(),A=k.parseUShort();if(3===y&&1===w&&1033===x){y=[];w=u/2;for(x=0;w>x;x++,A+=2)y[x]=g.getShort(a,p+A);A=String.fromCharCode.apply(null,y);z?c[z]=A:(q++,c["unknown"+q]=A)}}return 1===c.format&&(c.langTagCount=k.parseUShort()),c};k.make=function(a){var f=new m.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",
type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]);f.records=[];f.strings=[];var g,k,p=0;for(g=0;g<h.length;g+=1)if(void 0!==a[h[g]]){k=a[h[g]];var v=f,q=g;k=d.STRING(k);p=(v.records.push(c(1,0,0,q,k.length,p)),v.strings.push(k),p+k.length)}for(g=0;g<h.length;g+=1)void 0!==a[h[g]]&&(k=a[h[g]],v=f,q=g,k=d.UTF16(k),p=(v.records.push(c(3,1,1033,q,k.length,p)),v.strings.push(k),p+k.length));f.count=f.records.length;f.stringOffset=6+12*f.count;for(g=0;g<f.records.length;g+=1)f.fields.push({name:"record_"+
g,type:"TABLE",value:f.records[g]});for(g=0;g<f.strings.length;g+=1)f.fields.push({name:"string_"+g,type:"LITERAL",value:f.strings[g]});return f}},{"../parse":7,"../table":9,"../types":24}],21:[function(p,a,k){var c=p("../parse"),d=p("../table"),g=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,
end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,
end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,
end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,
end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},
{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66E3,end:66047},{begin:66208,end:66271},
{begin:127024,end:127135}];k.unicodeRanges=g;k.getUnicodeRange=function(a){for(var d=0;d<g.length;d+=1){var c=g[d];if(a>=c.begin&&a<c.end)return d}return-1};k.parse=function(a,d){var g={},f=new c.Parser(a,d);g.version=f.parseUShort();g.xAvgCharWidth=f.parseShort();g.usWeightClass=f.parseUShort();g.usWidthClass=f.parseUShort();g.fsType=f.parseUShort();g.ySubscriptXSize=f.parseShort();g.ySubscriptYSize=f.parseShort();g.ySubscriptXOffset=f.parseShort();g.ySubscriptYOffset=f.parseShort();g.ySuperscriptXSize=
f.parseShort();g.ySuperscriptYSize=f.parseShort();g.ySuperscriptXOffset=f.parseShort();g.ySuperscriptYOffset=f.parseShort();g.yStrikeoutSize=f.parseShort();g.yStrikeoutPosition=f.parseShort();g.sFamilyClass=f.parseShort();g.panose=[];for(var l=0;10>l;l++)g.panose[l]=f.parseByte();return g.ulUnicodeRange1=f.parseULong(),g.ulUnicodeRange2=f.parseULong(),g.ulUnicodeRange3=f.parseULong(),g.ulUnicodeRange4=f.parseULong(),g.achVendID=String.fromCharCode(f.parseByte(),f.parseByte(),f.parseByte(),f.parseByte()),
g.fsSelection=f.parseUShort(),g.usFirstCharIndex=f.parseUShort(),g.usLastCharIndex=f.parseUShort(),g.sTypoAscender=f.parseShort(),g.sTypoDescender=f.parseShort(),g.sTypoLineGap=f.parseShort(),g.usWinAscent=f.parseUShort(),g.usWinDescent=f.parseUShort(),1<=g.version&&(g.ulCodePageRange1=f.parseULong(),g.ulCodePageRange2=f.parseULong()),2<=g.version&&(g.sxHeight=f.parseShort(),g.sCapHeight=f.parseShort(),g.usDefaultChar=f.parseUShort(),g.usBreakChar=f.parseUShort(),g.usMaxContent=f.parseUShort()),g};
k.make=function(a){return new d.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",
type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",
value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",
type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},
{name:"usMaxContext",type:"USHORT",value:0}],a)}},{"../parse":7,"../table":9}],22:[function(p,a,k){var c=p("../encoding"),d=p("../parse"),g=p("../table");k.parse=function(a,g){var k,f={},l=new d.Parser(a,g);switch(f.version=l.parseVersion(),f.italicAngle=l.parseFixed(),f.underlinePosition=l.parseShort(),f.underlineThickness=l.parseShort(),f.isFixedPitch=l.parseULong(),f.minMemType42=l.parseULong(),f.maxMemType42=l.parseULong(),f.minMemType1=l.parseULong(),f.maxMemType1=l.parseULong(),f.version){case 1:f.names=
c.standardNames.slice();break;case 2:f.numberOfGlyphs=l.parseUShort();f.glyphNameIndex=Array(f.numberOfGlyphs);for(k=0;k<f.numberOfGlyphs;k++)f.glyphNameIndex[k]=l.parseUShort();f.names=[];for(k=0;k<f.numberOfGlyphs;k++)if(f.glyphNameIndex[k]>=c.standardNames.length){var r=l.parseChar();f.names.push(l.parseString(r))}break;case 2.5:for(f.numberOfGlyphs=l.parseUShort(),f.offset=Array(f.numberOfGlyphs),k=0;k<f.numberOfGlyphs;k++)f.offset[k]=l.parseChar()}return f};k.make=function(){return new g.Table("post",
[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},{"../encoding":3,"../parse":7,"../table":9}],23:[function(p,a,k){function c(a){for(;0!==a.length%4;)a.push(0);
for(var d=0,f=0;f<a.length;f+=4)d+=(a[f]<<24)+(a[f+1]<<16)+(a[f+2]<<8)+a[f+3];return d%Math.pow(2,32)}function d(a,d,f,c){return new n.Table("Table Record",[{name:"tag",type:"TAG",value:void 0!==a?a:""},{name:"checkSum",type:"ULONG",value:void 0!==d?d:0},{name:"offset",type:"ULONG",value:void 0!==f?f:0},{name:"length",type:"ULONG",value:void 0!==c?c:0}])}function g(a){var f=new n.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",
value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);f.tables=a;f.numTables=a.length;var g=Math.pow(2,Math.log(f.numTables)/Math.log(2)|0);f.searchRange=16*g;f.entrySelector=Math.log(g)/Math.log(2)|0;f.rangeShift=16*f.numTables-f.searchRange;for(var g=[],l=[],k=f.sizeOf()+d().sizeOf()*f.numTables;0!==k%4;)k+=1,l.push({name:"padding",type:"BYTE",value:0});for(var r=0;r<a.length;r+=1){var q=a[r];h.argument(4===q.tableName.length,"Table name"+q.tableName+
" is invalid.");var m=q.sizeOf(),p=d(q.tableName,c(q.encode()),k,m);g.push({name:p.tag+" Table Record",type:"TABLE",value:p});l.push({name:q.tableName+" table",type:"TABLE",value:q});k+=m;for(h.argument(!isNaN(k),"Something went wrong calculating the offset.");0!==k%4;)k+=1,l.push({name:"padding",type:"BYTE",value:0})}return g.sort(function(a,d){return a.value.tag>d.value.tag?1:-1}),f.fields=f.fields.concat(g),f.fields=f.fields.concat(l),f}function m(a,d,f){for(var c=0;c<d.length;c+=1){var g=a.charToGlyphIndex(d[c]);
if(0<g)return a.glyphs[g].getMetrics()}return f}var h=p("../check"),n=p("../table"),f=p("./cmap"),l=p("./cff"),r=p("./head"),E=p("./hhea"),v=p("./hmtx"),q=p("./maxp"),t=p("./name"),y=p("./os2"),w=p("./post");k.computeCheckSum=c;k.make=g;k.fontToTable=function(a){for(var d=[],h=[],k=[],n=[],p=[],J=[],I=[],G=null,H=0,K=0,M=0,O=0,F=0,D=0;D<a.glyphs.length;D+=1){var P=a.glyphs[D],L=0|P.unicode;(G>L||null===G)&&(G=L);L>H&&(H=L);L=y.getUnicodeRange(L);if(32>L)K|=1<<L;else if(64>L)M|=1<<L-32;else if(96>
L)O|=1<<L-64;else{if(!(123>L))throw Error("Unicode ranges bits > 123 are reserved for internal usage");F|=1<<L-96}".notdef"!==P.name&&(L=P.getMetrics(),d.push(L.xMin),h.push(L.yMin),k.push(L.xMax),n.push(L.yMax),J.push(L.leftSideBearing),I.push(L.rightSideBearing),p.push(P.advanceWidth))}D=Math.min.apply(null,d);h=Math.min.apply(null,h);k=Math.max.apply(null,k);n=Math.max.apply(null,n);d=Math.max.apply(null,p);for(L=P=0;L<p.length;L+=1)P+=p[L];D={xMin:D,yMin:h,xMax:k,yMax:n,advanceWidthMax:d,advanceWidthAvg:P/
p.length,minLeftSideBearing:Math.min.apply(null,J),maxLeftSideBearing:Math.max.apply(null,J),minRightSideBearing:Math.min.apply(null,I)};D.ascender=void 0!==a.ascender?a.ascender:D.yMax;D.descender=void 0!==a.descender?a.descender:D.yMin;p=r.make({unitsPerEm:a.unitsPerEm,xMin:D.xMin,yMin:D.yMin,xMax:D.xMax,yMax:D.yMax});J=E.make({ascender:D.ascender,descender:D.descender,advanceWidthMax:D.advanceWidthMax,minLeftSideBearing:D.minLeftSideBearing,minRightSideBearing:D.minRightSideBearing,xMaxExtent:D.maxLeftSideBearing+
(D.xMax-D.xMin),numberOfHMetrics:a.glyphs.length});I=q.make(a.glyphs.length);G=y.make({xAvgCharWidth:Math.round(D.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:G,usLastCharIndex:H,ulUnicodeRange1:K,ulUnicodeRange2:M,ulUnicodeRange3:O,ulUnicodeRange4:F,sTypoAscender:D.ascender,sTypoDescender:D.descender,sTypoLineGap:0,usWinAscent:D.ascender,usWinDescent:-D.descender,sxHeight:m(a,"xyvw",{yMax:0}).yMax,sCapHeight:m(a,"HIKLEFJMNTZBDPRAGOQSUVWXY",D).yMax,usBreakChar:a.hasChar(" ")?
32:0});H=v.make(a.glyphs);K=f.make(a.glyphs);F=a.familyName+" "+a.styleName;D=a.familyName.replace(/\s/g,"")+"-"+a.styleName;M=t.make({copyright:a.copyright,fontFamily:a.familyName,fontSubfamily:a.styleName,uniqueID:a.manufacturer+":"+F,fullName:F,version:a.version,postScriptName:D,trademark:a.trademark,manufacturer:a.manufacturer,designer:a.designer,description:a.description,manufacturerURL:a.manufacturerURL,designerURL:a.designerURL,license:a.license,licenseURL:a.licenseURL,preferredFamily:a.familyName,
preferredSubfamily:a.styleName});O=w.make();a=l.make(a.glyphs,{version:a.version,fullName:F,familyName:a.familyName,weightName:a.styleName,postScriptName:D});a=g([p,J,I,G,M,K,O,a,H]);G=a.encode();G=c(G);H=a.fields;K=!1;for(D=0;D<H.length;D+=1)if("head table"===H[D].name){H[D].value.checkSumAdjustment=2981146554-G;K=!0;break}if(!K)throw Error("Could not find head table with checkSum to adjust.");return a}},{"../check":1,"../table":9,"./cff":10,"./cmap":11,"./head":14,"./hhea":15,"./hmtx":16,"./maxp":19,
"./name":20,"./os2":21,"./post":22}],24:[function(p,a,k){function c(a){return function(){return a}}var d=p("./check"),g={};p={};g.BYTE=function(a){return d.argument(0<=a&&255>=a,"Byte value should be between 0 and 255."),[a]};p.BYTE=c(1);g.CHAR=function(a){return[a.charCodeAt(0)]};p.BYTE=c(1);g.CHARARRAY=function(a){for(var d=[],f=0;f<a.length;f+=1)d.push(a.charCodeAt(f));return d};p.CHARARRAY=function(a){return a.length};g.USHORT=function(a){return[a>>8&255,255&a]};p.USHORT=c(2);g.SHORT=function(a){return 32768<=
a&&(a=-(65536-a)),[a>>8&255,255&a]};p.SHORT=c(2);g.UINT24=function(a){return[a>>16&255,a>>8&255,255&a]};p.UINT24=c(3);g.ULONG=function(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]};p.ULONG=c(4);g.LONG=function(a){return 2147483648<=a&&(a=-(4294967296-a)),[a>>24&255,a>>16&255,a>>8&255,255&a]};p.LONG=c(4);g.FIXED=g.ULONG;p.FIXED=p.ULONG;g.FWORD=g.SHORT;p.FWORD=p.SHORT;g.UFWORD=g.USHORT;p.UFWORD=p.USHORT;g.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]};p.LONGDATETIME=c(8);g.TAG=function(a){return d.argument(4===
a.length,"Tag should be exactly 4 ASCII characters."),[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]};p.TAG=c(4);g.Card8=g.BYTE;p.Card8=p.BYTE;g.Card16=g.USHORT;p.Card16=p.USHORT;g.OffSize=g.BYTE;p.OffSize=p.BYTE;g.SID=g.USHORT;p.SID=p.USHORT;g.NUMBER=function(a){return-107<=a&&107>=a?[a+139]:108<=a&&1131>=a?(a-=108,[(a>>8)+247,255&a]):-1131<=a&&-108>=a?(a=-a-108,[(a>>8)+251,255&a]):-32768<=a&&32767>=a?g.NUMBER16(a):g.NUMBER32(a)};p.NUMBER=function(a){return g.NUMBER(a).length};
g.NUMBER16=function(a){return[28,a>>8&255,255&a]};p.NUMBER16=c(2);g.NUMBER32=function(a){return[29,a>>24&255,a>>16&255,a>>8&255,255&a]};p.NUMBER32=c(4);g.NAME=g.CHARARRAY;p.NAME=p.CHARARRAY;g.STRING=g.CHARARRAY;p.STRING=p.CHARARRAY;g.UTF16=function(a){for(var d=[],f=0;f<a.length;f+=1)d.push(0),d.push(a.charCodeAt(f));return d};p.UTF16=function(a){return 2*a.length};g.INDEX=function(a){var d,f=1,c=[f],k=[],m=0;for(d=0;d<a.length;d+=1){var p=g.OBJECT(a[d]);Array.prototype.push.apply(k,p);m+=p.length;
f+=p.length;c.push(f)}if(0===k.length)return[0,0];f=[];m=1+Math.floor(Math.log(m)/Math.log(2))/8|0;p=[void 0,g.BYTE,g.USHORT,g.UINT24,g.ULONG][m];for(d=0;d<c.length;d+=1){var q=p(c[d]);Array.prototype.push.apply(f,q)}return Array.prototype.concat(g.Card16(a.length),g.OffSize(m),f,k)};p.INDEX=function(a){return g.INDEX(a).length};g.DICT=function(a){for(var d=[],f=Object.keys(a),c=f.length,k=0;c>k;k+=1)var m=parseInt(f[k],0),p=a[m],d=d.concat(g.OPERAND(p.value,p.type)),d=d.concat(g.OPERATOR(m));return d};
p.DICT=function(a){return g.DICT(a).length};g.OPERATOR=function(a){return 1200>a?[a]:[12,a-1200]};g.OPERAND=function(a,c){var f=[];if(Array.isArray(c))for(var l=0;l<c.length;l+=1)d.argument(a.length===c.length,"Not enough arguments given for type"+c),f=f.concat(g.OPERAND(a[l],c[l]));else f=f.concat("SID"===c?g.NUMBER(a):"offset"===c?g.NUMBER32(a):g.NUMBER(a));return f};g.OP=g.BYTE;p.OP=p.BYTE;var m="function"==typeof WeakMap&&new WeakMap;g.CHARSTRING=function(a){if(m&&m.has(a))return m.get(a);for(var d=
[],f=a.length,c=0;f>c;c+=1)var k=a[c],d=d.concat(g[k.type](k.value));return m&&m.set(a,d),d};p.CHARSTRING=function(a){return g.CHARSTRING(a).length};g.OBJECT=function(a){var c=g[a.type];return d.argument(void 0!==c,"No encoding function for type "+a.type),c(a.value)};g.TABLE=function(a){for(var c=[],f=a.fields.length,l=0;f>l;l+=1){var k=a.fields[l],m=g[k.type];d.argument(void 0!==m,"No encoding function for field type "+k.type);var p=a[k.name];void 0===p&&(p=k.value);k=m(p);c=c.concat(k)}return c};
g.LITERAL=function(a){return a};p.LITERAL=function(a){return a.length};k.decode={};k.encode=g;k.sizeOf=p},{"./check":1}]},{},[6])(6)});var fft_analyzer=function(){function e(){g.isPlaying()?(g.stop(),fileinput.hide(),d.setInput(c),c.connect(d),button.html("mic"),fileinput.hide()):(g.isLoaded()&&(g.play(),d.setInput(g),c.disconnect()),button.html("file"),fileinput.show())}function p(a){g.stop();g=null;g=loadSound(a.data);button.html("loading...");file_polling=setInterval(function(){g.isLoaded()&&(button.html("click to play"),clearInterval(file_polling))},100)}function a(){for(;u<z.length&&z[u].time<performance.now()-x;)z[u].time>
performance.now()-x-50&&(z[u].play=notes[z[u].note],z[u].play.amp(z[u].amp/65536),z[u].play.play()),u++;u>=z.length&&(clearInterval(A),h=!1,button_play.html("Play"),loop())}function k(){var a="";z.forEach(function(d){a+=" ~ "+C[(d.note-12-1)%12]+" ["+Math.floor((d.note-12-1)/12)+"] "});return a}start_a_old=start_a=800;var c,d,g,m=!1,h=!1,n="",f=0;trigger_amp=.4;harmonic_filter=20;var l=Math.ceil(Math.log(22E3/Math.floor(440*Math.pow(2,-38/12)))/Math.log(2)*576),r=new Int32Array(l),E=new Int32Array(l),
v=new Int32Array(l),q=new Int32Array(108),t=new Int32Array(108),y=new Set,w=8,x,z=[],u=0,A,B=new Int8Array(108),C="1 1# 2 2# 3 4 4# 5 5# 6 6# 7".split(" "),J="C C# D D# E F F# G G# A A# B".split(" "),I=null;touchStarted=function(){start_a_old=start_a;I=null};touchEnded=function(){null!=I&&(start_a=start_a_old+I-touchX);I=null};touchMoved=function(){null==I&&(I=touchX);start_a=start_a_old+I-touchX};preload=function(){notes=[];g=new p5.SoundFile("");for(var a=32;108>=a;a++)notes[a]=new p5.SoundFile("./sound/"+
a.toString()+".ogg")};setup=function(){createElement("h2","Music Analyzer - Homework for Signal & Systems");createElement("h","Input:");button=createButton("mic");button.mousePressed(e);createElement("h","Record: ");button_mode=createButton("Start");button_mode.mousePressed(function(){(m=!m)?(button_mode.html("Stop"),canvas.hide(),z=[],result.html("--"),timestamp=0,x=Math.floor(performance.now())):(canvas.show(),button_mode.html("Start"))});fileinput=createFileInput(p);fileinput.hide();createElement("br");
createElement("h","Identified notes: ");linear_identify=createElement("h","--");createElement("br");createElement("i","High amplitude notes: ");amp_identify=createElement("i"," (may be incorrect) ");createElement("br");createElement("br");canvas=createCanvas(1200,500);createElement("br");createElement("br");button_play=createButton("Play");button_play.mousePressed(function(){m?alert("Stop record first!"):(0>=z.length?alert("No record!"):h=!h,h?(noLoop(),m=!1,button_play.html("Stop"),u=0,x=Math.floor(performance.now()),
A=setInterval(a,10)):(button_play.html("Play"),clearInterval(A),loop()))});silder=createSlider(0,20,8);silder.mousePressed(function(){w=silder.value();console.log(w)});result=createElement("h","--");noFill();c=new p5.AudioIn;c.start();c.disconnect();d=new p5.FFT(0,8192);d.setInput(c)};draw=function(){for(var a=d.analyze(),c=0;c<l;c++){var g=Math.floor(440*Math.pow(2,-38/12)*Math.pow(2,c/576)*8192/22E3);E[c]=0;for(b=Math.floor(g/Math.pow(2,1/576));b<=Math.ceil(g);b++)E[c]=max(E[c],a[b]*a[b]);v[c]=
E[c]-r[c]}r.set(E);a=1;for(c=0;c<v.length;c++)a<v[c]&&(a=v[c]);for(c=0;c<v.length;c++)v[c]=Math.floor(v[c]/a*E[c]*1.3),0>v[c]&&(v[c]=0);a=Math.floor(2/12*576);g=new Int8Array(v.length);for(c=0;c<v.length;c++)if(v[c]>65536*trigger_amp)for(var e=0,h=1;h<harmonic_filter;e=Math.floor(576*Math.log(++h)/Math.log(2)))max([v[c-e-1],v[c-e],v[c-e+1]])>65536*trigger_amp&&g[c-e]++;var p=0;y.clear();for(h=0;108>h;h++){e=h+34;q[e]=0;t[e]=0;for(var c=Math.floor(a+576*h/12),u=c-Math.floor(12)-1;u<c+Math.floor(12)+
1;u++)1<=g[u]&&(y.add(e),q[e]=max(q[e],g[u]*g[u]*g[u]*E[u]),t[e]=max(t[e],E[u]),p=max(p,q[e]))}var A="",I=new Set;0<y.size&&y.forEach(function(a){B[a]||(A+=C[(a-12-1)%12]+" ["+Math.floor((a-12-1)/12)+"] /"+Math.round(q[a]/p*100)+"%/  ",q[a]>.9*p&&I.add(a))});n!=A&&(""==n&&f++,amp_identify.html(A));n=A;for(e=0;e<B.length;e++)B[e]&&B[e]--;linear_identify.html("");0<I.size&&I.forEach(function(a){B[a]=w-2;B[a+12]=w;B[a+12+7]=w;B[a+12+12]=w;linear_identify.html(linear_identify.html()+" "+J[(a-12-1)%12]+
" ["+Math.floor((a-12-1)/12)+"]")});I.forEach(function(a){3>=(a-12-1)/12&&I["delete"](a);7<(I-12-1)/12&&I["delete"](a)});m&&0<I.size&&(I.forEach(function(a){z[z.length]={time:Math.floor(performance.now())-x,note:a,amp:t[a]}}),result.html(k()));if(!m){background(200);stroke("red");beginShape();for(c=0;c<width;c++)vertex(c,map(v[c+start_a],0,65536,height,0));endShape();stroke("black");beginShape();for(c=0;c<width;c++)vertex(c,map(E[c+start_a],0,65536,height,0));endShape();beginShape();for(e=0;108>e;e++){c=
Math.floor(a+576*e/12);switch(e%12){case 3:stroke("black");text((Math.floor(e/12)+2).toString(),c-start_a+3,10);stroke("blue");line(c-start_a,0,c-start_a,height);break;case 0:stroke("black"),text("A",c-start_a+3,10),stroke("green"),line(c-start_a,0,c-start_a,height)}stroke("black");text(C[(e+21)%12],c-start_a+3,30);stroke("white");line(c-start_a,0,c-start_a,100)}endShape();beginShape();strokeWeight(10);stroke("purple");for(e=0;108>e;e++)c=Math.floor(a+576*e/12),line(c-start_a,0,c-start_a,Math.ceil(q[e+
34]/p*100));strokeWeight(1);endShape()}}}();(function(e,p){"function"===typeof define&&define.amd?define("p5.dom",["p5"],function(a){p(a)}):"object"===typeof exports?p(require("../p5")):p(e.p5)})(this,function(e){function p(a){return"VIDEO"===a.tagName||"AUDIO"===a.tagName?new e.MediaElement(a):new e.Element(a)}function a(a,c,k){(c._userNode?c._userNode:document.body).appendChild(a);a=k?new e.MediaElement(a):new e.Element(a);c._elements.push(a);return a}function k(d,c,e,h){var k=document.createElement(c);"string"===typeof e&&(e=[e]);for(c=
0;c<e.length;c++){var f=document.createElement("source");f.src=e[c];k.appendChild(f)}"undefined"!==typeof h&&k.addEventListener("canplaythrough",function(){h()});var l=a(k,d,!0);l.loadedmetadata=!1;k.addEventListener("loadedmetadata",function(){l.width=k.videoWidth;l.height=k.videoHeight;l.loadedmetadata=!0});return l}e.prototype.getElement=function(a){return(a=document.getElementById(a))?p(a):null};e.prototype.getElements=function(a){var c=[];if(a=document.getElementsByClassName(a))for(var e=0;e<
a.length;e++){var h=p(a[e]);c.push(h)}return c};e.prototype.removeElements=function(a){for(a=0;a<this._elements.length;a++)this._elements[a].elt instanceof HTMLCanvasElement||this._elements[a].remove()};["div","p","span"].forEach(function(d){var c="create"+d.charAt(0).toUpperCase()+d.slice(1);e.prototype[c]=function(c){var g=document.createElement(d);g.innerHTML=void 0===typeof c?"":c;return a(g,this)}});e.prototype.createImg=function(d,c){var e=document.createElement("img");e.src=d;"undefined"!==
typeof c&&(e.alt=c);return a(e,this)};e.prototype.createA=function(d,c,e){var h=document.createElement("a");h.href=d;h.innerHTML=c;e&&(h.target=e);return a(h,this)};e.prototype.createSlider=function(d,c,e,h){var k=document.createElement("input");k.type="range";k.min=d;k.max=c;h&&(k.step=h);e&&(k.value=e);return a(k,this)};e.prototype.createButton=function(d,c){var e=document.createElement("button");e.innerHTML=d;if(e.value=c)e.value=c;return a(e,this)};e.prototype.createInput=function(d){var c=document.createElement("input");
c.type="text";d&&(c.value=d);return a(c,this)};e.prototype.createFileInput=function(d,c){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var k=document.createElement("input");k.type="file";c&&(k.multiple="multiple");k.addEventListener("change",function(a){a=a.target.files;for(var c=0;c<a.length;c++){var f=a[c],g=new FileReader;g.onload=function(a){var c=new e.File(a);return function(a){c.data=a.target.result;d(c)}}(f);"text"===f.type?g.readAsText(f):g.readAsDataURL(f)}},!1);return a(k,
this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")};e.prototype.createVideo=function(a,c){return k(this,"video",a,c)};e.prototype.createAudio=function(a,c){return k(this,"audio",a,c)};e.prototype.VIDEO="video";e.prototype.AUDIO="audio";navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;e.prototype.createCapture=function(){for(var d=!0,c=!0,k,h,n=0;n<arguments.length;n++)arguments[n]===
e.prototype.VIDEO?c=!1:arguments[n]===e.prototype.AUDIO?d=!1:"object"===typeof arguments[n]?k=arguments[n]:"function"===typeof arguments[n]&&(h=arguments[n]);if(navigator.getUserMedia){var f=document.createElement("video");k||(k={video:d,audio:c});navigator.getUserMedia(k,function(a){f.src=window.URL.createObjectURL(a);f.play();h&&h(a)},function(a){console.log(a)})}else throw"getUserMedia not supported in this browser";var l=a(f,this,!0);l.loadedmetadata=!1;f.addEventListener("loadedmetadata",function(){l.width=
f.videoWidth;l.height=f.videoHeight;l.loadedmetadata=!0});return l};e.prototype.createElement=function(d,c){var e=document.createElement(d);"undefined"!==typeof c&&(e.innerHTML=c);return a(e,this)};e.Element.prototype.addClass=function(a){this.elt.className=this.elt.className?this.elt.className+" "+a:a;return this};e.Element.prototype.removeClass=function(a){this.elt.className=this.elt.className.replace(new RegExp("(?:^|\\s)"+a+"(?!\\S)"),"");this.elt.className=this.elt.className.replace(/^\s+|\s+$/g,
"");return this};e.Element.prototype.child=function(a){"string"===typeof a?a=document.getElementById(a):a instanceof e.Element&&(a=a.elt);this.elt.appendChild(a);return this};e.Element.prototype.html=function(a){return"undefined"!==typeof a?(this.elt.innerHTML=a,this):this.elt.innerHTML};e.Element.prototype.position=function(a,c){this.elt.style.position="absolute";this.elt.style.left=a+"px";this.elt.style.top=c+"px";return this};e.Element.prototype.style=function(a,c){if("undefined"===typeof c)for(var e=
a.split(";"),h=0;h<e.length;h++){var k=e[h].split(":");k[0]&&k[1]&&(this.elt.style[k[0].trim()]=k[1].trim())}else this.elt.style[a]=c;return this};e.Element.prototype.attribute=function(a,c){if("undefined"===typeof c)return this.elt.getAttribute(a);this.elt.setAttribute(a,c);return this};e.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value};e.Element.prototype.show=function(){this.elt.style.display=
"block";return this};e.Element.prototype.hide=function(){this.elt.style.display="none";return this};e.Element.prototype.size=function(a,c){var k=a,h=c,n=e.prototype.AUTO;if(k!==n||h!==n){k===n?k=c*this.width/this.height:h===n&&(h=a*this.height/this.width);if(this.elt instanceof HTMLCanvasElement){var n={},f=this.elt.getContext("2d"),l;for(l in f)n[l]=f[l];this.elt.setAttribute("width",k*this._pInst.pixelDensity);this.elt.setAttribute("height",h*this._pInst.pixelDensity);this.elt.setAttribute("style",
"width:"+k+"px !important; height:"+h+"px !important;");this._pInst.scale(this._pInst.pixelDensity,this._pInst.pixelDensity);for(l in n)this.elt.getContext("2d")[l]=n[l]}else this.elt.style.width=k+"px !important",this.elt.style.height=h+"px !important",this.elt.width=k,this.elt.height=h;this.elt.style.overflow="hidden";this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight;this._pInst&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",
this.elt.offsetHeight))}return this};e.Element.prototype.remove=function(){for(var a in this._events)this.elt.removeEventListener(a,this._events[a]);this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)};e.MediaElement=function(a,c){e.Element.call(this,a,c);this._cueIDCounter=this._prevTime=0;this._cues=[]};e.MediaElement.prototype=Object.create(e.Element.prototype);e.MediaElement.prototype.play=function(){this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0);1<this.elt.readyState||
this.elt.load();this.elt.play();return this};e.MediaElement.prototype.stop=function(){this.elt.pause();this.elt.currentTime=0;return this};e.MediaElement.prototype.pause=function(){this.elt.pause();return this};e.MediaElement.prototype.loop=function(){this.elt.setAttribute("loop",!0);this.play();return this};e.MediaElement.prototype.noLoop=function(){this.elt.setAttribute("loop",!1);return this};e.MediaElement.prototype.autoplay=function(a){this.elt.setAttribute("autoplay",a);return this};e.MediaElement.prototype.volume=
function(a){if("undefined"===typeof a)return this.elt.volume;this.elt.volume=a};e.MediaElement.prototype.time=function(a){if("undefined"===typeof a)return this.elt.currentTime;this.elt.currentTime=a};e.MediaElement.prototype.duration=function(){return this.elt.duration};e.MediaElement.prototype.pixels=[];e.MediaElement.prototype.loadPixels=function(){this.loadedmetadata&&(this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=
this.canvas.getContext("2d")),this.drawingContext.drawImage(this.elt,0,0,this.width,this.height),e.prototype.loadPixels.call(this));return this};e.MediaElement.prototype.updatePixels=function(a,c,k,h){this.loadedmetadata&&e.prototype.updatePixels.call(this,a,c,k,h);return this};e.MediaElement.prototype.get=function(a,c,k,h){return this.loadedmetadata?e.prototype.get.call(this,a,c,k,h):[0,0,0,255]};e.MediaElement.prototype.set=function(a,c,k){this.loadedmetadata&&e.prototype.set.call(this,a,c,k)};
e.MediaElement.prototype.connect=function(a){var c,k;if("function"===typeof e.prototype.getAudioContext)c=e.prototype.getAudioContext(),k=e.soundOut.input;else try{c=a.context,k=c.destination}catch(h){throw"connect() is meant to be used with Web Audio API or p5.sound.js";}this.audioSourceNode||(this.audioSourceNode=c.createMediaElementSource(this.elt),this.audioSourceNode.connect(k));a?a.input?this.audioSourceNode.connect(a.input):this.audioSourceNode.connect(a):this.audioSourceNode.connect(k)};e.MediaElement.prototype.disconnect=
function(){if(this.audioSourceNode)this.audioSourceNode.disconnect();else throw"nothing to disconnect";};e.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit";this.elt.controls=!0};e.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};e.MediaElement.prototype.addCue=function(a,e,k){var h=this._cueIDCounter++;a=new c(e,a,h,k);this._cues.push(a);this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this));return h};e.MediaElement.prototype.removeCue=
function(a){for(var c=0;c<this._cues.length;c++)this._cues[c].id===a&&this.cues.splice(c,1);0===this._cues.length&&(this.elt.ontimeupdate=null)};e.MediaElement.prototype.clearCues=function(){this._cues=[];this.elt.ontimeupdate=null};e.MediaElement.prototype._onTimeUpdate=function(){for(var a=this.time(),c=0;c<this._cues.length;c++){var e=this._cues[c].time,h=this._cues[c].val;this._prevTime<e&&e<=a&&this._cues[c].callback(h)}this._prevTime=a};var c=function(a,c,e,h){this.callback=a;this.time=c;this.id=
e;this.val=h};e.File=function(a,c){this.file=a;this._pInst=c;var e=a.type.split("/");this.type=e[0];this.subtype=e[1];this.name=a.name;this.size=a.size;this.data=void 0}});(function(e,p){"function"===typeof define&&define.amd?define("p5.sound",["p5"],function(a){p(a)}):"object"===typeof exports?p(require("../p5")):p(e.p5)})(this,function(e){var p;p=function(){window.AudioContext=window.AudioContext||window.webkitAudioContext;var a=new window.AudioContext;e.prototype.getAudioContext=function(){return a};"function"!==typeof a.createGain&&(window.audioContext.createGain=window.audioContext.createGainNode);"function"!==typeof a.createDelay&&(window.audioContext.createDelay=
window.audioContext.createDelayNode);"function"!==typeof window.AudioBufferSourceNode.prototype.start&&(window.AudioBufferSourceNode.prototype.start=window.AudioBufferSourceNode.prototype.noteGrainOn);"function"!==typeof window.AudioBufferSourceNode.prototype.stop&&(window.AudioBufferSourceNode.prototype.stop=window.AudioBufferSourceNode.prototype.noteOff);"function"!==typeof window.OscillatorNode.prototype.start&&(window.OscillatorNode.prototype.start=window.OscillatorNode.prototype.noteOn);"function"!==
typeof window.OscillatorNode.prototype.stop&&(window.OscillatorNode.prototype.stop=window.OscillatorNode.prototype.noteOff);window.AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(window.AudioContext.prototype.createScriptProcessor=window.AudioContext.prototype.createJavaScriptNode);navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var c=document.createElement("audio");e.prototype.isSupported=function(){return!!c.canPlayType};
e.prototype.isFileSupported=function(a){switch(a.toLowerCase()){case "mp3":return!!c.canPlayType&&c.canPlayType("audio/mpeg;");case "wav":return!!c.canPlayType&&c.canPlayType('audio/wav; codecs="1"');case "ogg":return!!c.canPlayType&&c.canPlayType('audio/ogg; codecs="vorbis"');case "aac","m4a","mp4":return!!c.canPlayType&&(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/aac;"));case "aif","aiff":return!!c.canPlayType&&c.canPlayType("audio/x-aiff;");default:return!1}};navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&
window.addEventListener("touchstart",function(){var c=a.createBuffer(1,1,22050),d=a.createBufferSource();d.buffer=c;d.connect(a.destination);d.start(0)},!1)}();var a;a=function(){var a=new function(){var a=e.prototype.getAudioContext();this.input=a.createGain();this.output=a.createGain();this.limiter=a.createDynamicsCompressor();this.limiter.threshold.value=0;this.limiter.ratio.value=100;this.audiocontext=a;this.output.disconnect();this.inputSources=[];this.input.connect(this.limiter);this.limiter.connect(this.output);
this.meter=a.createGain();this.fftMeter=a.createGain();this.output.connect(this.meter);this.output.connect(this.fftMeter);this.output.connect(this.audiocontext.destination);this.soundArray=[];this.parts=[];this.extensions=[]};e.prototype.getMasterVolume=function(){return a.output.gain.value};e.prototype.masterVolume=function(c,d,e){if("number"===typeof c){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=a.output.gain.value;a.output.gain.cancelScheduledValues(g+e);a.output.gain.linearRampToValueAtTime(h,
g+e);a.output.gain.linearRampToValueAtTime(c,g+e+d)}else if(c)c.connect(a.output.gain);else return a.output.gain};e.soundOut=a;e.soundOut._silentNode=a.audiocontext.createGain();e.soundOut._silentNode.gain.value=0;e.soundOut._silentNode.connect(a.audiocontext.destination);return a}(p);(function(){e.prototype.sampleRate=function(){return a.audiocontext.sampleRate};e.prototype.freqToMidi=function(a){a=Math.log(a/440)/Math.log(2);return Math.round(12*a)+57};e.prototype.midiToFreq=function(a){return 440*
Math.pow(2,(a-69)/12)};e.prototype.soundFormats=function(){a.extensions=[];for(var c=0;c<arguments.length;c++)if(arguments[c]=arguments[c].toLowerCase(),-1<["mp3","wav","ogg","m4a","aac"].indexOf(arguments[c]))a.extensions.push(arguments[c]);else throw arguments[c]+" is not a valid sound format!";};e.prototype.disposeSound=function(){for(var c=0;c<a.soundArray.length;c++)a.soundArray[c].dispose()};e.prototype.registerMethod("remove",e.prototype.disposeSound);e.prototype._checkFileFormats=function(c){var d;
if("string"===typeof c){d=c;var g=d.split(".").pop();if(-1<["mp3","wav","ogg","m4a","aac"].indexOf(g)){var h=e.prototype.isFileSupported(g);if(!h)for(c=d.split("."),h=c[c.length-1],g=0;g<a.extensions.length;g++){var k=a.extensions[g];if(h=e.prototype.isFileSupported(k)){h="";2===c.length&&(h+=c[0]);for(g=1;g<=c.length-2;g++)h+="."+c[g];d=h+".";d=d+=k;break}}}else for(g=0;g<a.extensions.length;g++)if(k=a.extensions[g],h=e.prototype.isFileSupported(k)){d=d+"."+k;break}}else if("object"===typeof c)for(g=
0;g<c.length;g++)if(k=c[g].split(".").pop(),h=e.prototype.isFileSupported(k)){d=c[g];break}return d};e.prototype._mathChain=function(a,c,d,e,g){for(var h in a.mathOps)a.mathOps[h]instanceof g&&(a.mathOps[h].dispose(),d=h,d<a.mathOps.length-1&&(e=a.mathOps[h+1]));a.mathOps[d-1].disconnect();a.mathOps[d-1].connect(c);c.connect(e);a.mathOps[d]=c;return a}})(a);(function(){var c=a.audiocontext;e.Panner=function(a,d,e){this.input=c.createGain();a.connect(this.input);this.left=c.createGain();this.right=
c.createGain();this.left.channelInterpretation="discrete";this.right.channelInterpretation="discrete";1<e?(this.splitter=c.createChannelSplitter(2),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0)):(this.input.connect(this.left),this.input.connect(this.right));this.output=c.createChannelMerger(2);this.left.connect(this.output,0,1);this.right.connect(this.output,0,0);this.output.connect(d)};e.Panner.prototype.pan=function(a,d){var e=c.currentTime+
(d||0),g=(a+1)/2,h=Math.cos(g*Math.PI/2),g=Math.sin(g*Math.PI/2);this.left.gain.linearRampToValueAtTime(g,e);this.right.gain.linearRampToValueAtTime(h,e)};e.Panner.prototype.inputChannels=function(a){1===a?(this.input.disconnect(),this.input.connect(this.left),this.input.connect(this.right)):2===a&&(typeof("undefined"===this.splitter)&&(this.splitter=c.createChannelSplitter(2)),this.input.disconnect(),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,
0))};e.Panner.prototype.connect=function(a){this.output.connect(a)};e.Panner.prototype.disconnect=function(a){this.output.disconnect()};e.Panner3D=function(a,d){var e=c.createPanner();e.panningModel="HRTF";e.distanceModel="linear";e.setPosition(0,0,0);a.connect(e);e.connect(d);e.pan=function(a,c,d){e.setPosition(a,c,d)};return e}})(a);(function(){function c(a,d){for(var f={},e=a.length,g=0;g<e;g++){if(a[g]>d){var h=new n(a[g],g);f[g]=h;g+=6E3}g++}return f}function d(a){for(var c=[],f=Object.keys(a).sort(),
e=0;e<f.length;e++)for(var g=0;10>g;g++){var h=a[f[e]],l=a[f[e+g]];if(h&&l){var k=l.sampleIndex-h.sampleIndex;0<k&&h.intervals.push(k);c.some(function(a,c){if(a.interval===k)return a.count++,a})||c.push({interval:k,count:1})}}return c}function g(a,c){var d=[];a.forEach(function(a,f){try{var e=Math.abs(60/(a.interval/c)),e=k(e);d.some(function(c){if(c.tempo===e)return c.count+=a.count})||isNaN(e)||d.push({tempo:Math.round(e),count:a.count})}catch(g){throw g;}});return d}function h(a,c,d,f){for(var e=
[],g=Object.keys(a).sort(),l=0;l<g.length;l++)for(var r=a[g[l]],q=0;q<r.intervals.length;q++){var m=Math.round(Math.abs(60/(r.intervals[q]/d))),m=k(m);Math.abs(m-c)<f&&e.push(r.sampleIndex/44100)}return e=e.filter(function(a,c,d){if(.01<d[c+1]-a)return!0})}function k(a){if(isFinite(a)&&0!=a){for(;90>a;)a*=2;for(;180<a&&90<a;)a/=2;return a}}var q=a.audiocontext;e.SoundFile=function(c,d,f){if("undefined"!==typeof c){if("string"==typeof c||"string"==typeof c[0])this.url=e.prototype._checkFileFormats(c);
else if("object"==typeof c&&!(window.File&&window.FileReader&&window.FileList&&window.Blob))throw"Unable to load file because the File API is not supported";c.file&&(c=c.file);this.file=c}this._paused=this._playing=this._looping=!1;this._pauseTime=0;this._cues=[];this._lastPos=0;this._counterNode;this._scopeNode;this.bufferSourceNodes=[];this.buffer=this.bufferSourceNode=null;this.gain=this.playbackRate=1;this.input=a.audiocontext.createGain();this.output=a.audiocontext.createGain();this.reversed=
!1;this.startTime=0;this.endTime=null;this.pauseTime=0;this.mode="sustain";this.startMillis=null;this.amplitude=new e.Amplitude;this.output.connect(this.amplitude.input);this.panPosition=0;this.panner=new e.Panner(this.output,a.input,2);(this.url||this.file)&&this.load(d);a.soundArray.push(this);this.whileLoading="function"===typeof f?f:function(){}};e.prototype.registerPreloadMethod("loadSound");e.prototype.loadSound=function(a,c,d){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&
alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");return new e.SoundFile(a,c,d)};e.SoundFile.prototype.load=function(a){if(void 0!=this.url&&""!=this.url){var c=this,d=new XMLHttpRequest;d.addEventListener("progress",function(a){c._updateProgress(a)},!1);d.open("GET",this.url,!0);d.responseType="arraybuffer";var f=this;d.onload=function(){q.decodeAudioData(d.response,function(c){f.buffer=c;f.panner.inputChannels(c.numberOfChannels);a&&a(f)})};d.send()}else if(void 0!=
this.file){var e=new FileReader,f=this;e.onload=function(){q.decodeAudioData(e.result,function(c){f.buffer=c;f.panner.inputChannels(c.numberOfChannels);a&&a(f)})};e.readAsArrayBuffer(this.file)}};e.SoundFile.prototype._updateProgress=function(a){a.lengthComputable?(a=Math.log(a.loaded/a.total*9.9),this.whileLoading(a)):console.log("size unknown")};e.SoundFile.prototype.isLoaded=function(){return this.buffer?!0:!1};e.SoundFile.prototype.play=function(c,d,f,e,g){var h=this,l=a.audiocontext.currentTime;
c=c||0;0>c&&(c=0);c+=l;if(this.buffer){this._pauseTime=0;"restart"===this.mode&&this.buffer&&this.bufferSourceNode&&(l=a.audiocontext.currentTime,this.bufferSourceNode.stop(c),this._counterNode.stop(c));this.bufferSourceNode=this._initSourceNode();this._counterNode=this._initCounterNode();if(e){if(!(0<=e&&e<this.buffer.duration))throw"start time out of range";}else e=0;g=g?g<=this.buffer.duration-e?g:this.buffer.duration:this.buffer.duration-e;f=f||1;this.bufferSourceNode.connect(this.output);this.output.gain.value=
f;d=d||Math.abs(this.playbackRate);this.bufferSourceNode.playbackRate.setValueAtTime(d,l);this._paused?(this.bufferSourceNode.start(c,this.pauseTime,g),this._counterNode.start(c,this.pauseTime,g)):(this.bufferSourceNode.start(c,e,g),this._counterNode.start(c,e,g));this._playing=!0;this._paused=!1;this.bufferSourceNodes.push(this.bufferSourceNode);this.bufferSourceNode._arrayIndex=this.bufferSourceNodes.length-1;this.bufferSourceNode.onended=function(a){var c=this;this._playing=!1;setTimeout(function(){h.bufferSourceNodes.splice(c._arrayIndex,
1);0===h.bufferSourceNodes.length&&(h._playing=!1)},1)}}else throw"not ready to play file, buffer has yet to load. Try preload()";this.bufferSourceNode.loop=this._looping;this._counterNode.loop=this._looping;!0===this._looping&&(c=e+g,this.bufferSourceNode.loopStart=e,this.bufferSourceNode.loopEnd=c,this._counterNode.loopStart=e,this._counterNode.loopEnd=c)};e.SoundFile.prototype.playMode=function(c){c=c.toLowerCase();if("restart"===c&&this.buffer&&this.bufferSourceNode)for(var d=0;d<this.bufferSourceNodes.length-
1;d++)this.bufferSourceNodes[d].stop(a.audiocontext.currentTime);if("restart"===c||"sustain"===c)this.mode=c;else throw'Invalid play mode. Must be either "restart" or "sustain"';};e.SoundFile.prototype.pause=function(c){var d=a.audiocontext.currentTime;c=(c||0)+d;this.isPlaying()&&this.buffer&&this.bufferSourceNode?(this.pauseTime=this.currentTime(),this.bufferSourceNode.stop(c),this._counterNode.stop(c),this._paused=!0,this._playing=!1,this._pauseTime=this.currentTime()):this._pauseTime=0};e.SoundFile.prototype.loop=
function(a,c,d,f,e){this._looping=!0;this.play(a,c,d,f,e)};e.SoundFile.prototype.setLoop=function(a){if(!0===a)this._looping=!0;else if(!1===a)this._looping=!1;else throw"Error: setLoop accepts either true or false";this.bufferSourceNode&&(this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping)};e.SoundFile.prototype.isLooping=function(){return this.bufferSourceNode?!0===this._looping&&!0===this.isPlaying()?!0:!1:!1};e.SoundFile.prototype.isPlaying=function(){return this._playing};
e.SoundFile.prototype.isPaused=function(){return this._paused};e.SoundFile.prototype.stop=function(c){var d=c||0;"sustain"==this.mode?(this.stopAll(d),this._playing=!1,this.pauseTime=0,this._paused=!1):this.buffer&&this.bufferSourceNode&&(c=a.audiocontext.currentTime,d=d||0,this.pauseTime=0,this.bufferSourceNode.stop(c+d),this._counterNode.stop(c+d),this._paused=this._playing=!1)};e.SoundFile.prototype.stopAll=function(c){var d=a.audiocontext.currentTime;c=c||0;if(this.buffer&&this.bufferSourceNode){for(var f=
0;f<this.bufferSourceNodes.length;f++)if(void 0!=typeof this.bufferSourceNodes[f])try{this.bufferSourceNodes[f].stop(d+c)}catch(e){}this._counterNode.stop(d+c)}};e.SoundFile.prototype.setVolume=function(c,d,f){if("number"===typeof c){d=d||0;f=f||0;var e=a.audiocontext.currentTime,g=this.output.gain.value;this.output.gain.cancelScheduledValues(e+f);this.output.gain.linearRampToValueAtTime(g,e+f);this.output.gain.linearRampToValueAtTime(c,e+f+d)}else if(c)c.connect(this.output.gain);else return this.output.gain};
e.SoundFile.prototype.amp=e.SoundFile.prototype.setVolume;e.SoundFile.prototype.fade=e.SoundFile.prototype.setVolume;e.SoundFile.prototype.getVolume=function(){return this.output.gain.value};e.SoundFile.prototype.pan=function(a,c){this.panPosition=a;this.panner.pan(a,c)};e.SoundFile.prototype.getPan=function(){return this.panPosition};e.SoundFile.prototype.rate=function(c){if(this.playbackRate!==c||!this.bufferSourceNode||this.bufferSourceNode.playbackRate.value!==c){var d=this.playbackRate=c;0===
this.playbackRate&&this._playing&&this.pause();if(0>this.playbackRate&&!this.reversed){var f=this.currentTime();this.reverseBuffer();d=Math.abs(c);this.pauseTime=(f-this.duration())/d}else 0<this.playbackRate&&this.reversed&&this.reverseBuffer();this.bufferSourceNode&&(c=a.audiocontext.currentTime,this.bufferSourceNode.playbackRate.cancelScheduledValues(c),this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(d),c),this._counterNode.playbackRate.cancelScheduledValues(c),this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(d),
c))}};e.SoundFile.prototype.setPitch=function(a){a=midiToFreq(a)/midiToFreq(60);this.rate(a)};e.SoundFile.prototype.getPlaybackRate=function(){return this.playbackRate};e.SoundFile.prototype.duration=function(){return this.buffer?this.buffer.duration:0};e.SoundFile.prototype.currentTime=function(){return 0<this._pauseTime?this._pauseTime:this._lastPos/q.sampleRate};e.SoundFile.prototype.jump=function(a,c){if(0>a||a>this.buffer.duration)throw"jump time out of range";if(c>this.buffer.duration-a)throw"end time out of range";
var d=a||0,f=c||this.buffer.duration-a;this.isPlaying()&&this.stop();this.play(0,this.playbackRate,this.output.gain.value,d,f)};e.SoundFile.prototype.channels=function(){return this.buffer.numberOfChannels};e.SoundFile.prototype.sampleRate=function(){return this.buffer.sampleRate};e.SoundFile.prototype.frames=function(){return this.buffer.length};e.SoundFile.prototype.getPeaks=function(a){if(this.buffer){if(a||(a=5*window.width),this.buffer){for(var c=this.buffer,d=c.length/a,f=~~(d/10)||1,e=c.numberOfChannels,
g=new Float32Array(Math.round(a)),h=0;h<e;h++)for(var l=c.getChannelData(h),k=0;k<a;k++){for(var r=~~(k*d),q=~~(r+d),m=0;r<q;r+=f){var n=l[r];n>m?m=n:-n>m&&(m=n)}if(0===h||Math.abs(m)>g[k])g[k]=m}return g}}else throw"Cannot load peaks yet, buffer is not loaded";};e.SoundFile.prototype.reverseBuffer=function(){var a=this.getVolume();this.setVolume(0,.01,0);this.pause();if(this.buffer){for(var c=0;c<this.buffer.numberOfChannels;c++)Array.prototype.reverse.call(this.buffer.getChannelData(c));this.reversed=
!this.reversed}else throw"SoundFile is not done loading";this.setVolume(a,.01,.0101);this.play()};e.SoundFile.prototype._onEnded=function(c){c.onended=function(c){c.stop(a.audiocontext.currentTime)}};e.SoundFile.prototype.add=function(){};e.SoundFile.prototype.dispose=function(){var c=a.audiocontext.currentTime;this.stop(c);if(this.buffer&&this.bufferSourceNode){for(var d=0;d<this.bufferSourceNodes.length-1;d++)null!==this.bufferSourceNodes[d]&&(this.bufferSourceNodes[d].stop(c),this.bufferSourceNodes[d]=
null);if(this.isPlaying()){try{this._counterNode.stop(c)}catch(f){console.log(f)}this._counterNode=null}}this.output&&(this.output.disconnect(),this.output=null);this.panner&&(this.panner.disconnect(),this.panner=null)};e.SoundFile.prototype.connect=function(c){c?c.hasOwnProperty("input")?this.panner.connect(c.input):this.panner.connect(c):this.panner.connect(a.input)};e.SoundFile.prototype.disconnect=function(a){this.panner.disconnect(a)};e.SoundFile.prototype.getLevel=function(a){a&&(this.amplitude.smoothing=
a);return this.amplitude.getLevel()};e.SoundFile.prototype.setPath=function(a,c){this.url=e.prototype._checkFileFormats(a);this.load(c)};e.SoundFile.prototype.setBuffer=function(a){var c=a.length,d=q.createBuffer(c,a[0].length,q.sampleRate);!a[0]instanceof Float32Array&&(a[0]=new Float32Array(a[0]));for(var f=0;f<c;f++)d.getChannelData(f).set(a[f]);this.buffer=d;this.panner.inputChannels(c)};e.SoundFile.prototype._initCounterNode=function(){var a=this,c=q.currentTime,d=q.createBufferSource();a._scopeNode&&
(a._scopeNode.disconnect(),a._scopeNode=null);a._scopeNode=q.createScriptProcessor(256,1,1);d.buffer=m(a.buffer);d.playbackRate.setValueAtTime(a.playbackRate,c);d.connect(a._scopeNode);a._scopeNode.connect(e.soundOut._silentNode);a._scopeNode.onaudioprocess=function(c){c=c.inputBuffer.getChannelData(0);a._lastPos=c[c.length-1]||0;a._onTimeUpdate(a._lastPos)};return d};e.SoundFile.prototype._initSourceNode=function(){var a=q.currentTime,c=q.createBufferSource();c.buffer=this.buffer;c.playbackRate.setValueAtTime(this.playbackRate,
a);return c};var m=function(a){for(var c=new Float32Array(a.length),d=q.createBuffer(1,a.length,44100),f=0;f<a.length;f++)c[f]=f;d.getChannelData(0).set(c);return d};e.SoundFile.prototype.processPeaks=function(a,e,k,q){var m=this.buffer,n=e||.9,t=k||.22,v=q||200;e=new OfflineAudioContext(1,this.buffer.length,this.buffer.sampleRate);k=e.createBufferSource();k.buffer=m;m=e.createBiquadFilter();m.type="lowpass";k.connect(m);m.connect(e.destination);k.start(0);e.startRendering();e.oncomplete=function(e){e=
e.renderedBuffer;var k=e.getChannelData(0);do p=c(k,n),n-=.005;while(Object.keys(p).length<v&&n>=t);k=d(p);k=g(k,e.sampleRate).sort(function(a,c){return c.count-a.count}).splice(0,5);this.tempo=k[0].tempo;e=h(p,k[0].tempo,e.sampleRate,5);a(e)}};var n=function(a,c){this.sampleIndex=c;this.amplitude=a;this.tempos=[];this.intervals=[]},p=[];e.SoundFile.prototype.addCue=function(a,c,d){var f=this._cueIDCounter++;a=new x(c,a,f,d);this._cues.push(a);return f};e.SoundFile.prototype.removeCue=function(a){for(var c=
0;c<this._cues.length;c++)this._cues[c].id===a&&this.cues.splice(c,1)};e.SoundFile.prototype.clearCues=function(){this._cues=[]};e.SoundFile.prototype._onTimeUpdate=function(a){a/=this.buffer.sampleRate;for(var c=0;c<this._cues.length;c++){var d=this._cues[c].time,f=this._cues[c].val;this._prevTime<d&&d<=a&&this._cues[c].callback(f)}this._prevTime=a};var x=function(a,c,d,f){this.callback=a;this.time=c;this.id=d;this.val=f}})(p,a);(function(){e.Amplitude=function(c){this.bufferSize=2048;this.audiocontext=
a.audiocontext;this.input=this.processor=this.audiocontext.createScriptProcessor(this.bufferSize,2,1);this.output=this.audiocontext.createGain();this.smoothing=c||0;this.average=this.volume=0;this.stereoVol=[0,0];this.stereoAvg=[0,0];this.stereoVolNorm=[0,0];this.volMax=.001;this.normalize=!1;this.processor.onaudioprocess=this._audioProcess.bind(this);this.processor.connect(this.output);this.output.gain.value=0;this.output.connect(this.audiocontext.destination);a.meter.connect(this.processor)};e.Amplitude.prototype.setInput=
function(c,d){a.meter.disconnect();d&&(this.smoothing=d);null==c?(console.log("Amplitude input source is not ready! Connecting to master output instead"),a.meter.connect(this.processor)):c instanceof e.Signal?c.output.connect(this.processor):c?(c.connect(this.processor),this.processor.disconnect(),this.processor.connect(this.output)):a.meter.connect(this.processor)};e.Amplitude.prototype.connect=function(c){c?c.hasOwnProperty("input")?this.output.connect(c.input):this.output.connect(c):this.output.connect(this.panner.connect(a.input))};
e.Amplitude.prototype.disconnect=function(a){this.output.disconnect()};e.Amplitude.prototype._audioProcess=function(a){for(var c=0;c<a.inputBuffer.numberOfChannels;c++){for(var d=a.inputBuffer.getChannelData(c),e=d.length,g=0,h=0,k,m=0;m<e;m++)k=d[m],this.normalize?(g+=Math.max(Math.min(k/this.volMax,1),-1),h+=Math.max(Math.min(k/this.volMax,1),-1)*Math.max(Math.min(k/this.volMax,1),-1)):(g+=k,h+=k*k);d=g/e;e=Math.sqrt(h/e);this.stereoVol[c]=Math.max(e,this.stereoVol[c]*this.smoothing);this.stereoAvg[c]=
Math.max(d,this.stereoVol[c]*this.smoothing);this.volMax=Math.max(this.stereoVol[c],this.volMax)}var n=this;this.volume=this.stereoVol.reduce(function(a,c,d){n.stereoVolNorm[d-1]=Math.max(Math.min(n.stereoVol[d-1]/n.volMax,1),0);n.stereoVolNorm[d]=Math.max(Math.min(n.stereoVol[d]/n.volMax,1),0);return a+c})/this.stereoVol.length;this.volNorm=Math.max(Math.min(this.volume/this.volMax,1),0)};e.Amplitude.prototype.getLevel=function(a){return"undefined"!==typeof a?this.normalize?this.stereoVolNorm[a]:
this.stereoVol[a]:this.normalize?this.volNorm:this.volume};e.Amplitude.prototype.toggleNormalize=function(a){this.normalize="boolean"===typeof a?a:!this.normalize};e.Amplitude.prototype.smooth=function(a){0<=a&&1>a?this.smoothing=a:console.log("Error: smoothing must be between 0 and 1")}})(a);(function(){e.FFT=function(c,d){var e=c||.8;0===c&&(e=c);var g=2*d||2048;this.input=this.analyser=a.audiocontext.createAnalyser();a.output.connect(this.analyser);this.analyser.smoothingTimeConstant=e;this.analyser.fftSize=
g;this.freqDomain=new Uint8Array(this.analyser.frequencyBinCount);this.timeDomain=new Uint8Array(this.analyser.frequencyBinCount);this.bass=[20,140];this.lowMid=[140,400];this.mid=[400,2600];this.highMid=[2600,5200];this.treble=[5200,14E3]};e.FFT.prototype.setInput=function(a,c){c&&(this.analyser.fftSize=2*c);a.output?a.output.connect(this.analyser):a.connect(this.analyser)};e.FFT.prototype.waveform=function(a){a&&(this.analyser.fftSize=2*a);this.analyser.getByteTimeDomainData(this.timeDomain);a=
Array.apply([],this.timeDomain);a.length===this.analyser.fftSize;a.constructor===Array;return a};e.FFT.prototype.analyze=function(a){a&&(this.analyser.fftSize=2*a);this.analyser.getByteFrequencyData(this.freqDomain);a=Array.apply([],this.freqDomain);a.length===this.analyser.fftSize;a.constructor===Array;return a};e.FFT.prototype.getEnergy=function(c,d){var e=a.audiocontext.sampleRate/2;"bass"===c?(c=this.bass[0],d=this.bass[1]):"lowMid"===c?(c=this.lowMid[0],d=this.lowMid[1]):"mid"===c?(c=this.mid[0],
d=this.mid[1]):"highMid"===c?(c=this.highMid[0],d=this.highMid[1]):"treble"===c&&(c=this.treble[0],d=this.treble[1]);if("number"!==typeof c)throw"invalid input for getEnergy()";if(d){if(c&&d){if(c>d){var g=d;d=c;c=g}for(var g=Math.round(c/e*this.freqDomain.length),e=Math.round(d/e*this.freqDomain.length),h=0,k=0;g<=e;g++)h+=this.freqDomain[g],k+=1;return h/k}throw"invalid input for getEnergy()";}g=Math.round(c/e*this.freqDomain.length);return this.freqDomain[g]};e.FFT.prototype.getFreq=function(a,
c){console.log("getFreq() is deprecated. Please use getEnergy() instead.");return this.getEnergy(a,c)};e.FFT.prototype.smooth=function(a){this.analyser.smoothingTimeConstant=a}})(a);var k;k=function(){function a(c){return void 0===c}var c;a(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext);a(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext);if(a(AudioContext))throw Error("Web Audio is not supported in this browser");c=new AudioContext;"function"!==
typeof AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode);"function"!==typeof AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode);"function"!==typeof AudioContext.prototype.createPeriodicWave&&(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable);"function"!==typeof AudioBufferSourceNode.prototype.start&&(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn);
"function"!==typeof AudioBufferSourceNode.prototype.stop&&(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff);"function"!==typeof OscillatorNode.prototype.start&&(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn);"function"!==typeof OscillatorNode.prototype.stop&&(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff);"function"!==typeof OscillatorNode.prototype.setPeriodicWave&&(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable);
AudioNode.prototype._nativeConnect=AudioNode.prototype.connect;AudioNode.prototype.connect=function(c,d,e){if(c.input)Array.isArray(c.input)?(a(e)&&(e=0),this.connect(c.input[e])):this.connect(c.input,d,e);else try{c instanceof AudioNode?this._nativeConnect(c,d,e):this._nativeConnect(c,d)}catch(g){throw Error("error connecting to node: "+c);}};var d=function(c,d){a(c)||1===c?this.input=this.context.createGain():1<c&&(this.input=Array(c));a(d)||1===d?this.output=this.context.createGain():1<d&&(this.output=
Array(c))};d.context=c;d.prototype.context=d.context;d.prototype.bufferSize=2048;d.prototype.bufferTime=d.prototype.bufferSize/d.context.sampleRate;d.prototype.connect=function(a,c,d){Array.isArray(this.output)?(c=this.defaultArg(c,0),this.output[c].connect(a,0,d)):this.output.connect(a,c,d)};d.prototype.disconnect=function(a){Array.isArray(this.output)?(a=this.defaultArg(a,0),this.output[a].disconnect()):this.output.disconnect()};d.prototype.connectSeries=function(){if(1<arguments.length)for(var a=
arguments[0],c=1;c<arguments.length;c++){var d=arguments[c];a.connect(d);a=d}};d.prototype.connectParallel=function(){var a=arguments[0];if(1<arguments.length)for(var c=1;c<arguments.length;c++)a.connect(arguments[c])};d.prototype.chain=function(){if(0<arguments.length)for(var a=this,c=0;c<arguments.length;c++){var d=arguments[c];a.connect(d);a=d}};d.prototype.fan=function(){if(0<arguments.length)for(var a=1;a<arguments.length;a++)this.connect(arguments[a])};AudioNode.prototype.chain=d.prototype.chain;
AudioNode.prototype.fan=d.prototype.fan;d.prototype.defaultArg=function(c,d){if("object"===typeof c&&"object"===typeof d){var e={},g;for(g in c)e[g]=this.defaultArg(c[g],c[g]);for(var h in d)e[h]=this.defaultArg(c[h],d[h]);return e}return a(c)?d:c};d.prototype.optionsObject=function(a,c,d){var f={};if(1===a.length&&"object"===typeof a[0])f=a[0];else for(var e=0;e<c.length;e++)f[c[e]]=a[e];return this.isUndef(d)?f:this.defaultArg(f,d)};d.prototype.isUndef=a;d.prototype.equalPowerScale=function(a){return Math.sin(.5*
a*Math.PI)};d.prototype.logScale=function(a){return Math.max(this.normalize(this.gainToDb(a),-100,0),0)};d.prototype.expScale=function(a){return this.dbToGain(this.interpolate(a,-100,0))};d.prototype.dbToGain=function(a){return Math.pow(2,a/6)};d.prototype.gainToDb=function(a){return 20*(Math.log(a)/Math.LN10)};d.prototype.interpolate=function(a,c,d){return a*(d-c)+c};d.prototype.normalize=function(a,c,d){if(c>d){var f=d;d=c;c=f}else if(c==d)return 0;return(a-c)/(d-c)};d.prototype.dispose=function(){this.isUndef(this.input)||
(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null);this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null)};var e=null;d.prototype.noGC=function(){this.output.connect(e)};AudioNode.prototype.noGC=function(){this.connect(e)};d.prototype.now=function(){return this.context.currentTime};d.prototype.samplesToSeconds=function(a){return a/this.context.sampleRate};d.prototype.toSamples=function(a){a=this.toSeconds(a);return Math.round(a*
this.context.sampleRate)};d.prototype.toSeconds=function(a,c){c=this.defaultArg(c,this.now());if("number"===typeof a)return a;if("string"===typeof a){var d=0;"+"===a.charAt(0)&&(a=a.slice(1),d=c);return parseFloat(a)+d}return c};d.prototype.frequencyToSeconds=function(a){return 1/parseFloat(a)};d.prototype.secondsToFrequency=function(a){return 1/a};var g=[];d._initAudioContext=function(a){a(d.context);g.push(a)};d.setContext=function(a){d.prototype.context=a;d.context=a;for(var c=0;c<g.length;c++)g[c](a)};
d.extend=function(c,e){function g(){}a(e)&&(e=d);g.prototype=e.prototype;c.prototype=new g;c.prototype.constructor=c};d.startMobile=function(){var a=d.context.createOscillator(),c=d.context.createGain();c.gain.value=0;a.connect(c);c.connect(d.context.destination);c=d.context.currentTime;a.start(c);a.stop(c+1)};d._initAudioContext(function(a){d.prototype.bufferTime=d.prototype.bufferSize/a.sampleRate;e=a.createGain();e.gain.value=0;e.connect(a.destination)});return d}();(function(a){a.SignalBase=function(){};
a.extend(a.SignalBase);a.SignalBase.prototype.connect=function(c,d,e){c instanceof a.Signal?c.setValue(0):c instanceof AudioParam&&(c.value=0);a.prototype.connect.call(this,c,d,e)};a.SignalBase.prototype.dispose=function(){a.prototype.dispose.call(this)};return a.SignalBase})(k);(function(a){a.WaveShaper=function(a,c){this._shaper=this.input=this.output=this.context.createWaveShaper();this._curve=null;Array.isArray(a)?this.setCurve(a):isFinite(a)||this.isUndef(a)?this._curve=new Float32Array(this.defaultArg(a,
1024)):"function"===typeof a&&(this._curve=new Float32Array(this.defaultArg(c,1024)),this.setMap(a))};a.extend(a.WaveShaper,a.SignalBase);a.WaveShaper.prototype.setMap=function(a){for(var c=0,d=this._curve.length;c<d;c++)this._curve[c]=a(c/d*2-1,c,c/(d-1)*2-1);this._shaper.curve=this._curve};a.WaveShaper.prototype.setCurve=function(a){this._isSafari()&&a.unshift(a[0]);this._curve=new Float32Array(a);this._shaper.curve=this._curve};a.WaveShaper.prototype.setOversample=function(a){this._shaper.oversample=
a};a.WaveShaper.prototype._isSafari=function(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")};a.WaveShaper.prototype.dispose=function(){a.prototype.dispose.call(this);this._shaper.disconnect();this._curve=this._shaper=null};return a.WaveShaper})(k);var c;c=function(a){a.Signal=function(c){this._scalar=this.context.createGain();this.input=this.output=this.context.createGain();this._syncRatio=1;this.value=this.defaultArg(c,0);a.Signal._constant.chain(this._scalar,
this.output)};a.extend(a.Signal,a.SignalBase);a.Signal.prototype.getValue=function(){return this._scalar.gain.value};a.Signal.prototype.setValue=function(a){a=0===this._syncRatio?0:a*this._syncRatio;this._scalar.gain.value=a};a.Signal.prototype.setValueAtTime=function(a,c){a*=this._syncRatio;this._scalar.gain.setValueAtTime(a,this.toSeconds(c))};a.Signal.prototype.setCurrentValueNow=function(a){a=this.defaultArg(a,this.now());var c=this.getValue();this.cancelScheduledValues(a);this._scalar.gain.setValueAtTime(c,
a);return c};a.Signal.prototype.linearRampToValueAtTime=function(a,c){a*=this._syncRatio;this._scalar.gain.linearRampToValueAtTime(a,this.toSeconds(c))};a.Signal.prototype.exponentialRampToValueAtTime=function(a,c){a*=this._syncRatio;try{this._scalar.gain.exponentialRampToValueAtTime(a,this.toSeconds(c))}catch(d){this._scalar.gain.linearRampToValueAtTime(a,this.toSeconds(c))}};a.Signal.prototype.exponentialRampToValueNow=function(a,c){var d=this.now();this.setCurrentValueNow(d);"+"===c.toString().charAt(0)&&
(c=c.substr(1));this.exponentialRampToValueAtTime(a,d+this.toSeconds(c))};a.Signal.prototype.linearRampToValueNow=function(a,c){var d=this.now();this.setCurrentValueNow(d);a*=this._syncRatio;"+"===c.toString().charAt(0)&&(c=c.substr(1));this._scalar.gain.linearRampToValueAtTime(a,d+this.toSeconds(c))};a.Signal.prototype.setTargetAtTime=function(a,c,d){a*=this._syncRatio;this._scalar.gain.setTargetAtTime(a,this.toSeconds(c),d)};a.Signal.prototype.setValueCurveAtTime=function(a,c,d){for(var f=0;f<a.length;f++)a[f]*=
this._syncRatio;this._scalar.gain.setValueCurveAtTime(a,this.toSeconds(c),this.toSeconds(d))};a.Signal.prototype.cancelScheduledValues=function(a){this._scalar.gain.cancelScheduledValues(this.toSeconds(a))};a.Signal.prototype.sync=function(a,c){c?this._syncRatio=c:0!==a.getValue()?this._syncRatio=this.getValue()/a.getValue():this._syncRatio=0;this._scalar.disconnect();this._scalar=this.context.createGain();this.connectSeries(a,this._scalar,this.output);this._scalar.gain.value=this._syncRatio};a.Signal.prototype.unsync=
function(){var c=this.getValue();this._scalar.disconnect();this._scalar=this.context.createGain();this._scalar.gain.value=c/this._syncRatio;this._syncRatio=1;a.Signal._constant.chain(this._scalar,this.output)};a.Signal.prototype.dispose=function(){a.prototype.dispose.call(this);this._scalar.disconnect();this._scalar=null};Object.defineProperty(a.Signal.prototype,"value",{get:function(){return this.getValue()},set:function(a){this.setValue(a)}});a.Signal._generator=null;a.Signal._constant=null;a._initAudioContext(function(c){a.Signal._generator=
c.createOscillator();a.Signal._constant=new a.WaveShaper([1,1]);a.Signal._generator.connect(a.Signal._constant);a.Signal._generator.start(0);a.Signal._generator.noGC()});return a.Signal}(k);var d;d=function(a){a.Add=function(c){a.call(this,2,0);this._sum=this.input[0]=this.input[1]=this.output=this.context.createGain();this._value=null;isFinite(c)&&(this._value=new a.Signal(c),this._value.connect(this._sum))};a.extend(a.Add,a.SignalBase);a.Add.prototype.setValue=function(a){if(null!==this._value)this._value.setValue(a);
else throw Error("cannot switch from signal to number");};a.Add.prototype.dispose=function(){a.prototype.dispose.call(this);this._sum=null;this._value&&(this._value.dispose(),this._value=null)};return a.Add}(k);var g;g=function(a){a.Multiply=function(c){a.call(this,2,0);this._mult=this.input[0]=this.output=this.context.createGain();this._factor=this.input[1]=this.output.gain;this._factor.value=this.defaultArg(c,0)};a.extend(a.Multiply,a.SignalBase);a.Multiply.prototype.setValue=function(a){this._factor.value=
a};a.Multiply.prototype.dispose=function(){a.prototype.dispose.call(this);this._factor=this._mult=null};return a.Multiply}(k);var m;m=function(a){a.Scale=function(c,d){this._outputMin=this.defaultArg(c,0);this._outputMax=this.defaultArg(d,1);this._scale=this.input=new a.Multiply(1);this._add=this.output=new a.Add(0);this._scale.connect(this._add);this._setRange()};a.extend(a.Scale,a.SignalBase);a.Scale.prototype.setMin=function(a){this._outputMin=a;this._setRange()};a.Scale.prototype.setMax=function(a){this._outputMax=
a;this._setRange()};a.Scale.prototype._setRange=function(){this._add.setValue(this._outputMin);this._scale.setValue(this._outputMax-this._outputMin)};a.Scale.prototype.dispose=function(){a.prototype.dispose.call(this);this._add.dispose();this._add=null;this._scale.dispose();this._scale=null};return a.Scale}(k,d,g);(function(){k.setContext(a.audiocontext);e.Signal=function(a){return new c(a)};c.prototype.fade=c.prototype.linearRampToValueAtTime;g.prototype.fade=c.prototype.fade;d.prototype.fade=c.prototype.fade;
m.prototype.fade=c.prototype.fade;c.prototype.setInput=function(a){a.connect(this)};g.prototype.setInput=c.prototype.setInput;d.prototype.setInput=c.prototype.setInput;m.prototype.setInput=c.prototype.setInput;c.prototype.add=function(a){a=new d(a);this.connect(a);return a};g.prototype.add=c.prototype.add;d.prototype.add=c.prototype.add;m.prototype.add=c.prototype.add;c.prototype.mult=function(a){a=new g(a);this.connect(a);return a};g.prototype.mult=c.prototype.mult;d.prototype.mult=c.prototype.mult;
m.prototype.mult=c.prototype.mult;c.prototype.scale=function(a,c,d,g){var h,k;4===arguments.length?(h=e.prototype.map(d,a,c,0,1)-.5,k=e.prototype.map(g,a,c,0,1)-.5):(h=arguments[0],k=arguments[1]);h=new m(h,k);this.connect(h);return h};g.prototype.scale=c.prototype.scale;d.prototype.scale=c.prototype.scale;m.prototype.scale=c.prototype.scale})(c,d,g,m,k,a);var h;h=function(){e.Oscillator=function(c,d){if("string"===typeof c){var f=d;d=c;c=f}"number"===typeof d&&(f=d,d=c,c=f);this.started=!1;this.oscillator=
a.audiocontext.createOscillator();this.f=c||440;this.oscillator.frequency.setValueAtTime(this.f,a.audiocontext.currentTime);this.oscillator.type=d||"sine";this.input=a.audiocontext.createGain();this.output=a.audiocontext.createGain();this._freqMods=[];this.output.gain.value=.5;this.output.gain.setValueAtTime(.5,a.audiocontext.currentTime);this.oscillator.connect(this.output);this.panPosition=0;this.connection=a.input;this.panner=new e.Panner(this.output,this.connection,1);this.mathOps=[this.output];
a.soundArray.push(this)};e.Oscillator.prototype.start=function(c,d){this.started&&this.stop(a.audiocontext.currentTime);if(!this.started){var f=d||this.f,e=this.oscillator.type;this.oscillator=a.audiocontext.createOscillator();this.oscillator.frequency.exponentialRampToValueAtTime(Math.abs(f),a.audiocontext.currentTime);this.oscillator.type=e;this.oscillator.connect(this.output);this.oscillator.start((c||0)+a.audiocontext.currentTime);this.freqNode=this.oscillator.frequency;for(var g in this._freqMods)"undefined"!==
typeof this._freqMods[g].connect&&this._freqMods[g].connect(this.oscillator.frequency);this.started=!0}};e.Oscillator.prototype.stop=function(c){this.started&&(this.oscillator.stop((c||0)+a.audiocontext.currentTime),this.started=!1)};e.Oscillator.prototype.amp=function(c,d,f){if("number"===typeof c){d=d||0;f=f||0;var e=a.audiocontext.currentTime,g=this.output.gain.value;this.output.gain.cancelScheduledValues(e);this.output.gain.linearRampToValueAtTime(g,e+f);this.output.gain.linearRampToValueAtTime(c,
e+f+d)}else if(c)console.log(c),c.connect(this.output.gain);else return this.output.gain};e.Oscillator.prototype.fade=e.Oscillator.prototype.amp;e.Oscillator.prototype.getAmp=function(){return this.output.gain.value};e.Oscillator.prototype.freq=function(c,d,f){if("number"!==typeof c||isNaN(c))if(c)c.output&&(c=c.output),c.connect(this.oscillator.frequency),this._freqMods.push(c);else return this.oscillator.frequency;else{this.f=c;var e=a.audiocontext.currentTime;d=d||0;f=f||0;var g=this.oscillator.frequency.value;
this.oscillator.frequency.cancelScheduledValues(e);this.oscillator.frequency.setValueAtTime(g,e+f);0<c?this.oscillator.frequency.exponentialRampToValueAtTime(c,f+d+e):this.oscillator.frequency.linearRampToValueAtTime(c,f+d+e)}};e.Oscillator.prototype.getFreq=function(){return this.oscillator.frequency.value};e.Oscillator.prototype.setType=function(a){this.oscillator.type=a};e.Oscillator.prototype.getType=function(){return this.oscillator.type};e.Oscillator.prototype.connect=function(c){c?c.hasOwnProperty("input")?
(this.panner.connect(c.input),this.connection=c.input):(this.panner.connect(c),this.connection=c):this.panner.connect(a.input)};e.Oscillator.prototype.disconnect=function(a){this.output.disconnect();this.panner.disconnect();this.output.connect(this.panner);this.oscMods=[]};e.Oscillator.prototype.pan=function(a,c){this.panPosition=a;this.panner.pan(a,c)};e.Oscillator.prototype.getPan=function(){return this.panPosition};e.Oscillator.prototype.dispose=function(){this.oscillator&&(this.stop(a.audiocontext.currentTime),
this.disconnect(),this.oscillator.disconnect(),this.oscillator=this.panner=null);this.osc2&&this.osc2.dispose()};e.Oscillator.prototype.phase=function(c){this.dNode||(this.dNode=a.audiocontext.createDelay(),this.output.disconnect(),this.output.connect(this.dNode),this.dNode.connect(this.panner));var d=a.audiocontext.currentTime;this.dNode.delayTime.linearRampToValueAtTime(e.prototype.map(c,0,1,0,1/this.oscillator.frequency.value),d)};var c=function(a,c,d,f,e){var g=a.oscillator,h;for(h in a.mathOps)a.mathOps[h]instanceof
e&&(g.disconnect(),a.mathOps[h].dispose(),d=h,d<a.mathOps.length-2&&(f=a.mathOps[h+1]));d==a.mathOps.length-1&&a.mathOps.push(f);0<h&&(g=a.mathOps[h-1]);g.disconnect();g.connect(c);c.connect(f);a.mathOps[d]=c;return a};e.Oscillator.prototype.add=function(a){a=new d(a);return c(this,a,this.mathOps.length-1,this.output,d)};e.Oscillator.prototype.mult=function(a){a=new g(a);return c(this,a,this.mathOps.length-1,this.output,g)};e.Oscillator.prototype.scale=function(a,d,g,h){var k,n;4===arguments.length?
(k=e.prototype.map(g,a,d,0,1)-.5,n=e.prototype.map(h,a,d,0,1)-.5):(k=arguments[0],n=arguments[1]);k=new m(k,n);return c(this,k,this.mathOps.length-1,this.output,m)};e.SinOsc=function(a){e.Oscillator.call(this,a,"sine")};e.SinOsc.prototype=Object.create(e.Oscillator.prototype);e.TriOsc=function(a){e.Oscillator.call(this,a,"triangle")};e.TriOsc.prototype=Object.create(e.Oscillator.prototype);e.SawOsc=function(a){e.Oscillator.call(this,a,"sawtooth")};e.SawOsc.prototype=Object.create(e.Oscillator.prototype);
e.SqrOsc=function(a){e.Oscillator.call(this,a,"square")};e.SqrOsc.prototype=Object.create(e.Oscillator.prototype)}(a,c,d,g,m);(function(){k.setContext(a.audiocontext);var c=null,h=!1;e.Env=function(c,d,f,g,h,k,l,m){this.aTime=c;this.aLevel=d;this.dTime=f||0;this.dLevel=g||0;this.sTime=h||0;this.sLevel=k||0;this.rTime=l||0;this.rLevel=m||0;this.output=a.audiocontext.createGain();this.control=new e.Signal;this.control.connect(this.output);this.connection=null;this.mathOps=[this.control];a.soundArray.push(this)};
e.Env.prototype.set=function(a,c,d,f,e,g,h,k){this.aTime=a;this.aLevel=c;this.dTime=d||0;this.dLevel=f||0;this.sTime=e||0;this.sLevel=g||0;this.rTime=h||0;this.rLevel=k||0};e.Env.prototype.setInput=function(a){for(var c=0;c<arguments.length;c++)this.connect(arguments[c])};e.Env.prototype.ctrl=function(a){this.connect(a)};e.Env.prototype.play=function(c,d){var f=a.audiocontext.currentTime+(d||0);c&&this.connection!==c&&this.connect(c);var e=this.control.getValue();this.control.cancelScheduledValues(f);
this.control.linearRampToValueAtTime(e,f);this.control.linearRampToValueAtTime(this.aLevel,f+this.aTime);this.control.linearRampToValueAtTime(this.dLevel,f+this.aTime+this.dTime);this.control.linearRampToValueAtTime(this.sLevel,f+this.aTime+this.dTime+this.sTime);this.control.linearRampToValueAtTime(this.rLevel,f+this.aTime+this.dTime+this.sTime+this.rTime)};e.Env.prototype.triggerAttack=function(c,d){var f=a.audiocontext.currentTime+(d||0);this.lastAttack=f;h=!0;var e=this.control.getValue();console.log(e);
this.control.cancelScheduledValues(f);this.control.linearRampToValueAtTime(e,f);c&&this.connection!==c&&this.connect(c);this.control.linearRampToValueAtTime(this.aLevel,f+this.aTime);this.control.linearRampToValueAtTime(this.aLevel,f+this.aTime);this.control.linearRampToValueAtTime(this.dLevel,f+this.aTime+this.dTime);this.control.linearRampToValueAtTime(this.sLevel,f+this.aTime+this.dTime+this.sTime)};e.Env.prototype.triggerRelease=function(d,e){if(h){var g=a.audiocontext.currentTime,k=g+(e||0);
d&&this.connection!==d&&this.connect(d);this.control.cancelScheduledValues(k);g-this.lastAttack<this.aTime?(g=this.aTime-(k-this.lastAttack),this.control.linearRampToValueAtTime(this.aLevel,k+g),this.control.linearRampToValueAtTime(this.dLevel,k+g+this.dTime),this.control.linearRampToValueAtTime(this.sLevel,k+g+this.dTime+this.sTime),this.control.linearRampToValueAtTime(this.rLevel,k+g+this.dTime+this.sTime+this.rTime)):g-this.lastAttack<this.aTime+this.dTime?(g=this.aTime+this.dTime-(g-this.lastAttack),
this.control.linearRampToValueAtTime(this.dLevel,k+g),this.control.linearRampToValueAtTime(this.sLevel,k+g+.01),this.control.linearRampToValueAtTime(this.rLevel,k+g+.01+this.rTime)):g-this.lastAttack<this.aTime+this.dTime+this.sTime?(g=this.aTime+this.dTime+this.sTime-(g-this.lastAttack),this.control.linearRampToValueAtTime(this.sLevel,k+g),this.control.linearRampToValueAtTime(this.rLevel,k+g+this.rTime)):(this.control.linearRampToValueAtTime(this.sLevel,k),this.control.linearRampToValueAtTime(this.rLevel,
k+this.rTime));k=k+this.aTime+this.dTime+this.sTime+this.rTime;this.connection&&this.connection.hasOwnProperty("oscillator")?(c=this.connection.oscillator,c.stop(k+.01)):this.connect&&this.connection.hasOwnProperty("source")&&(c=this.connection.source,c.stop(k+.01));h=!1}};e.Env.prototype.connect=function(c){this.connection=c;if(c instanceof e.Oscillator||c instanceof e.SoundFile||c instanceof e.AudioIn||c instanceof e.Reverb||c instanceof e.Noise||c instanceof e.Filter||c instanceof e.Delay)c=c.output.gain;
c instanceof AudioParam&&c.setValueAtTime(0,a.audiocontext.currentTime);c instanceof e.Signal&&c.setValue(0);this.output.connect(c)};e.Env.prototype.disconnect=function(a){this.output.disconnect()};e.Env.prototype.add=function(a){a=new d(a);return e.prototype._mathChain(this,a,this.mathOps.length,this.output,d)};e.Env.prototype.mult=function(a){a=new g(a);return e.prototype._mathChain(this,a,this.mathOps.length,this.output,g)};e.Env.prototype.scale=function(a,c,d,f){a=new m(a,c,d,f);return e.prototype._mathChain(this,
a,this.mathOps.length,this.output,m)};e.Env.prototype.dispose=function(){this.disconnect();try{this.control.dispose(),this.control=null}catch(a){}for(var c=1;c<this.mathOps.length;c++)mathOps[c].dispose()}})(a,d,g,m,k);(function(){function c(){for(var a=d.audiocontext,f=a.createBuffer(1,2048,a.sampleRate),e=f.getChannelData(0),g=0;2048>g;g++)e[g]=1;a=a.createBufferSource();a.buffer=f;a.loop=!0;return a}var d=a;e.Pulse=function(a,g){e.Oscillator.call(this,a,"sawtooth");this.w=g||0;this.osc2=new e.SawOsc(a);
this.dNode=d.audiocontext.createDelay();this.dcOffset=c();this.dcGain=d.audiocontext.createGain();this.dcOffset.connect(this.dcGain);this.dcGain.connect(this.output);this.f=a||440;this.dNode.delayTime.value=this.w/this.oscillator.frequency.value;this.dcGain.gain.value=1.7*(.5-this.w);this.osc2.disconnect();this.osc2.output.gain.minValue=-10;this.osc2.output.gain.maxValue=10;this.osc2.panner.disconnect();this.osc2.amp(-1);this.osc2.output.connect(this.dNode);this.dNode.connect(this.output);this.output.gain.value=
1;this.output.connect(this.panner)};e.Pulse.prototype=Object.create(e.Oscillator.prototype);e.Pulse.prototype.width=function(a){if("number"===typeof a)1>=a&&0<=a&&(this.w=a,this.dNode.delayTime.value=this.w/this.oscillator.frequency.value),this.dcGain.gain.value=1.7*(.5-this.w);else{a.connect(this.dNode.delayTime);var c=new e.SignalAdd(-.5);c.setInput(a);c=c.mult(-1);c=c.mult(1.7);c.connect(this.dcGain.gain)}};e.Pulse.prototype.start=function(a,e){var g=d.audiocontext.currentTime,h=e||0;if(!this.started){var k=
a||this.f,m=this.oscillator.type;this.oscillator=d.audiocontext.createOscillator();this.oscillator.frequency.setValueAtTime(k,g);this.oscillator.type=m;this.oscillator.connect(this.output);this.oscillator.start(h+g);this.osc2.oscillator=d.audiocontext.createOscillator();this.osc2.oscillator.frequency.setValueAtTime(k,h+g);this.osc2.oscillator.type=m;this.osc2.oscillator.connect(this.osc2.output);this.osc2.start(h+g);this.freqNode=[this.oscillator.frequency,this.osc2.oscillator.frequency];this.dcOffset=
c();this.dcOffset.connect(this.dcGain);this.dcOffset.start(h+g);void 0!==this.mods&&void 0!==this.mods.frequency&&(this.mods.frequency.connect(this.freqNode[0]),this.mods.frequency.connect(this.freqNode[1]));this.started=!0;this.osc2.started=!0}};e.Pulse.prototype.stop=function(a){if(this.started){a=a||0;var c=d.audiocontext.currentTime;this.oscillator.stop(a+c);this.osc2.oscillator.stop(a+c);this.dcOffset.stop(a+c);this.started=!1;this.osc2.started=!1}};e.Pulse.prototype.freq=function(a,c,f){if("number"===
typeof a){this.f=a;var e=d.audiocontext.currentTime;c=c||0;f=f||0;var g=this.oscillator.frequency.value;this.oscillator.frequency.cancelScheduledValues(e);this.oscillator.frequency.setValueAtTime(g,e+f);this.oscillator.frequency.exponentialRampToValueAtTime(a,f+c+e);this.osc2.oscillator.frequency.cancelScheduledValues(e);this.osc2.oscillator.frequency.setValueAtTime(g,e+f);this.osc2.oscillator.frequency.exponentialRampToValueAtTime(a,f+c+e);this.freqMod&&(this.freqMod.output.disconnect(),this.freqMod=
null)}else a.output&&(a.output.disconnect(),a.output.connect(this.oscillator.frequency),a.output.connect(this.osc2.oscillator.frequency),this.freqMod=a)}})(a,h);(function(){e.Noise=function(a){e.Oscillator.call(this);delete this.f;delete this.freq;delete this.oscillator;this.buffer=c};e.Noise.prototype=Object.create(e.Oscillator.prototype);var c=function(){for(var c=2*a.audiocontext.sampleRate,d=a.audiocontext.createBuffer(1,c,a.audiocontext.sampleRate),f=d.getChannelData(0),e=0;e<c;e++)f[e]=2*Math.random()-
1;d.type="white";return d}(),d=function(){for(var c=2*a.audiocontext.sampleRate,d=a.audiocontext.createBuffer(1,c,a.audiocontext.sampleRate),f=d.getChannelData(0),e,g,h,k,l,m,n,p=e=g=h=k=l=m=n=0;p<c;p++){var r=2*Math.random()-1;e=.99886*e+.0555179*r;g=.99332*g+.0750759*r;h=.969*h+.153852*r;k=.8665*k+.3104856*r;l=.55*l+.5329522*r;m=-.7616*m-.016898*r;f[p]=e+g+h+k+l+m+n+.5362*r;f[p]*=.11;n=.115926*r}d.type="pink";return d}(),g=function(){for(var c=2*a.audiocontext.sampleRate,d=a.audiocontext.createBuffer(1,
c,a.audiocontext.sampleRate),f=d.getChannelData(0),e=0,g=0;g<c;g++){var h=2*Math.random()-1;f[g]=(e+.02*h)/1.02;e=f[g];f[g]*=3.5}d.type="brown";return d}();e.Noise.prototype.setType=function(e){switch(e){case "white":this.buffer=c;break;case "pink":this.buffer=d;break;case "brown":this.buffer=g;break;default:this.buffer=c}this.started&&(e=a.audiocontext.currentTime,this.stop(e),this.start(e+.01))};e.Noise.prototype.getType=function(){return this.buffer.type};e.Noise.prototype.start=function(){this.started&&
this.stop();this.noise=a.audiocontext.createBufferSource();this.noise.buffer=this.buffer;this.noise.loop=!0;this.noise.connect(this.output);this.noise.start(a.audiocontext.currentTime);this.started=!0};e.Noise.prototype.stop=function(){var c=a.audiocontext.currentTime;this.noise&&(this.noise.stop(c),this.started=!1)};e.Noise.prototype.dispose=function(){var c=a.audiocontext.currentTime;this.noise&&(this.noise.disconnect(),this.stop(c));this.output&&this.output.disconnect();this.panner&&this.panner.disconnect();
this.noise=this.buffer=this.panner=this.output=null}})(a);(function(){e.AudioIn=function(){this.input=a.audiocontext.createGain();this.output=a.audiocontext.createGain();this.mediaStream=this.stream=null;this.currentSource=0;this.enabled=!1;this.amplitude=new e.Amplitude;this.output.connect(this.amplitude.input);"undefined"===typeof window.MediaStreamTrack?window.alert("This browser does not support MediaStreamTrack"):"undefined"!==typeof window.MediaStreamTrack.getSources&&window.MediaStreamTrack.getSources(this._gotSources);
a.soundArray.push(this)};e.AudioIn.prototype.start=function(){var c=this;a.inputSources[c.currentSource]?navigator.getUserMedia({audio:{optional:[{sourceId:a.inputSources[c.currentSource].id}]}},this._onStream=function(d){c.stream=d;c.enabled=!0;c.mediaStream=a.audiocontext.createMediaStreamSource(d);c.mediaStream.connect(c.output);c.amplitude.setInput(c.output)},this._onStreamError=function(a){console.error(a)}):window.navigator.getUserMedia({audio:!0},this._onStream=function(d){c.stream=d;c.enabled=
!0;c.mediaStream=a.audiocontext.createMediaStreamSource(d);c.mediaStream.connect(c.output);c.amplitude.setInput(c.output)},this._onStreamError=function(a){console.error(a)})};e.AudioIn.prototype.stop=function(){this.stream&&this.stream.stop()};e.AudioIn.prototype.connect=function(c){c?c.hasOwnProperty("input")?this.output.connect(c.input):c.hasOwnProperty("analyser")?this.output.connect(c.analyser):this.output.connect(c):this.output.connect(a.input)};e.AudioIn.prototype.disconnect=function(a){this.output.disconnect(a);
this.output.connect(this.amplitude.input)};e.AudioIn.prototype.getLevel=function(a){a&&(this.amplitude.smoothing=a);return this.amplitude.getLevel()};e.AudioIn.prototype._gotSources=function(c){for(var d=0;d!==c.length;d++){var e=c[d];"audio"===e.kind&&a.inputSources.push(e)}};e.AudioIn.prototype.amp=function(c,d){if(d){var e=d||0,g=this.output.gain.value;this.output.gain.cancelScheduledValues(a.audiocontext.currentTime);this.output.gain.setValueAtTime(g,a.audiocontext.currentTime);this.output.gain.linearRampToValueAtTime(c,
e+a.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(a.audiocontext.currentTime),this.output.gain.setValueAtTime(c,a.audiocontext.currentTime)};e.AudioIn.prototype.listSources=function(){console.log("input sources: ");console.log(a.inputSources);return 0<a.inputSources.length?a.inputSources:"This browser does not support MediaStreamTrack.getSources()"};e.AudioIn.prototype.setSource=function(c){0<a.inputSources.length&&c<a.inputSources.length?(this.currentSource=c,console.log("set source to "+
a.inputSources[this.currentSource].id)):console.log("unable to set input source")};e.AudioIn.prototype.dispose=function(){this.stop();this.output&&this.output.disconnect();this.amplitude&&this.amplitude.disconnect();this.output=this.amplitude=null}})(a);h=function(){e.Filter=function(c){this.ac=a.audiocontext;this.input=this.ac.createGain();this.output=this.ac.createGain();this.biquad=this.ac.createBiquadFilter();this.input.connect(this.biquad);this.biquad.connect(this.output);this.connect();c&&this.setType(c)};
e.Filter.prototype.process=function(a,c,d){a.connect(this.input);this.set(c,d)};e.Filter.prototype.set=function(a,c,d){a&&this.freq(a,d);c&&this.res(c,d)};e.Filter.prototype.freq=function(a,c){var d=c||0;0>=a&&(a=1);"number"===typeof a?(this.biquad.frequency.value=a,this.biquad.frequency.cancelScheduledValues(this.ac.currentTime+.01+d),this.biquad.frequency.exponentialRampToValueAtTime(a,this.ac.currentTime+.02+d)):a&&a.connect(this.biquad.frequency);return this.biquad.frequency.value};e.Filter.prototype.res=
function(a,c){var d=c||0;"number"==typeof a?(this.biquad.Q.value=a,this.biquad.Q.cancelScheduledValues(this.ac.currentTime+.01+d),this.biquad.Q.linearRampToValueAtTime(a,this.ac.currentTime+.02+d)):a&&freq.connect(this.biquad.Q);return this.biquad.Q.value};e.Filter.prototype.setType=function(a){this.biquad.type=a};e.Filter.prototype.amp=function(c,d,e){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=this.output.gain.value;this.output.gain.cancelScheduledValues(g);this.output.gain.linearRampToValueAtTime(h,
g+e+.001);this.output.gain.linearRampToValueAtTime(c,g+e+d+.001)};e.Filter.prototype.connect=function(a){this.output.connect(a||e.soundOut.input)};e.Filter.prototype.disconnect=function(){this.output.disconnect()};e.LowPass=function(){e.Filter.call(this,"lowpass")};e.LowPass.prototype=Object.create(e.Filter.prototype);e.HighPass=function(){e.Filter.call(this,"highpass")};e.HighPass.prototype=Object.create(e.Filter.prototype);e.BandPass=function(){e.Filter.call(this,"bandpass")};e.BandPass.prototype=
Object.create(e.Filter.prototype)}(a);(function(){e.Delay=function(){this.ac=a.audiocontext;this.input=this.ac.createGain();this.output=this.ac.createGain();this._split=this.ac.createChannelSplitter(2);this._merge=this.ac.createChannelMerger(2);this._leftGain=this.ac.createGain();this._rightGain=this.ac.createGain();this.leftDelay=this.ac.createDelay();this.rightDelay=this.ac.createDelay();this._leftFilter=new e.Filter;this._rightFilter=new e.Filter;this._leftFilter.disconnect();this._rightFilter.disconnect();
this.lowPass=this._leftFilter;this._leftFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime);this._rightFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime);this._leftFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime);this._rightFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime);this.input.connect(this._split);this.leftDelay.connect(this._leftGain);this.rightDelay.connect(this._rightGain);this._leftGain.connect(this._leftFilter.input);this._rightGain.connect(this._rightFilter.input);
this._merge.connect(this.output);this.output.connect(e.soundOut.input);this._leftFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime);this._rightFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime);this.setType(0);this._maxDelay=this.leftDelay.delayTime.maxValue};e.Delay.prototype.process=function(a,c,d,e){d=d||0;c=c||0;if(1<=d)throw Error("Feedback value will force a positive feedback loop.");if(c>=this._maxDelay)throw Error("Delay Time exceeds maximum delay time of "+this._maxDelay+" second.");
a.connect(this.input);this.leftDelay.delayTime.setValueAtTime(c,this.ac.currentTime);this.rightDelay.delayTime.setValueAtTime(c,this.ac.currentTime);this._leftGain.gain.setValueAtTime(d,this.ac.currentTime);this._rightGain.gain.setValueAtTime(d,this.ac.currentTime);e&&(this._leftFilter.freq(e),this._rightFilter.freq(e))};e.Delay.prototype.delayTime=function(a){"number"!==typeof a?(a.connect(this.leftDelay.delayTime),a.connect(this.rightDelay.delayTime)):(this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime),
this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.leftDelay.delayTime.linearRampToValueAtTime(a,this.ac.currentTime),this.rightDelay.delayTime.linearRampToValueAtTime(a,this.ac.currentTime))};e.Delay.prototype.feedback=function(a){if("number"!==typeof a)a.connect(this._leftGain.gain),a.connect(this._rightGain.gain);else{if(1<=a)throw Error("Feedback value will force a positive feedback loop.");this._leftGain.gain.exponentialRampToValueAtTime(a,this.ac.currentTime);this._rightGain.gain.exponentialRampToValueAtTime(a,
this.ac.currentTime)}};e.Delay.prototype.filter=function(a,c){this._leftFilter.set(a,c);this._rightFilter.set(a,c)};e.Delay.prototype.setType=function(a){1===a&&(a="pingPong");this._split.disconnect();this._leftFilter.disconnect();this._rightFilter.disconnect();this._split.connect(this.leftDelay,0);this._split.connect(this.rightDelay,1);switch(a){case "pingPong":this._rightFilter.setType(this._leftFilter.biquad.type);this._leftFilter.output.connect(this._merge,0,0);this._rightFilter.output.connect(this._merge,
0,1);this._leftFilter.output.connect(this.rightDelay);this._rightFilter.output.connect(this.leftDelay);break;default:this._leftFilter.output.connect(this._merge,0,0),this._leftFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.leftDelay),this._leftFilter.output.connect(this.rightDelay)}};e.Delay.prototype.amp=function(c,d,e){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=this.output.gain.value;this.output.gain.cancelScheduledValues(g);this.output.gain.linearRampToValueAtTime(h,
g+e+.001);this.output.gain.linearRampToValueAtTime(c,g+e+d+.001)};e.Delay.prototype.connect=function(a){this.output.connect(a||e.soundOut.input)};e.Delay.prototype.disconnect=function(){this.output.disconnect()}})(a,h);(function(){e.Reverb=function(){this.ac=a.audiocontext;this.convolverNode=this.ac.createConvolver();this.input=this.ac.createGain();this.output=this.ac.createGain();this.input.gain.value=.5;this.input.connect(this.convolverNode);this.convolverNode.connect(this.output);this._seconds=
3;this._decay=2;this._reverse=!1;this._buildImpulse();this.connect();a.soundArray.push(this)};e.Reverb.prototype.process=function(a,c,d,e){a.connect(this.input);a=!1;c&&(this._seconds=c,a=!0);d&&(this._decay=d);e&&(this._reverse=e);a&&this._buildImpulse()};e.Reverb.prototype.set=function(a,c,d){var e=!1;a&&(this._seconds=a,e=!0);c&&(this._decay=c);d&&(this._reverse=d);e&&this._buildImpulse()};e.Reverb.prototype.amp=function(c,d,e){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=this.output.gain.value;
this.output.gain.cancelScheduledValues(g);this.output.gain.linearRampToValueAtTime(h,g+e+.001);this.output.gain.linearRampToValueAtTime(c,g+e+d+.001)};e.Reverb.prototype.connect=function(a){a=a||e.soundOut.input;this.output.connect(a.input?a.input:a)};e.Reverb.prototype.disconnect=function(){this.output.disconnect()};e.Reverb.prototype._buildImpulse=function(){var a=this.ac.sampleRate,c=a*this._seconds,d=this._decay,a=this.ac.createBuffer(2,c,a),e=a.getChannelData(0),g=a.getChannelData(1),h,k;for(k=
0;k<c;k++)h=this.reverse?c-k:k,e[k]=(2*Math.random()-1)*Math.pow(1-h/c,d),g[k]=(2*Math.random()-1)*Math.pow(1-h/c,d);this.convolverNode.buffer=a};e.Reverb.prototype.dispose=function(){this.convolverNode&&(this.convolverNode=this.convolverNode.buffer=null);"undefined"!==typeof this.output&&(this.output.disconnect(),this.output=null);"undefined"!==typeof this.panner&&(this.panner.disconnect(),this.panner=null)};e.Convolver=function(c,d){this.ac=a.audiocontext;this.convolverNode=this.ac.createConvolver();
this.input=this.ac.createGain();this.output=this.ac.createGain();this.input.gain.value=.5;this.input.connect(this.convolverNode);this.convolverNode.connect(this.output);c?(this.impulses=[],this._loadBuffer(c,d)):(this._seconds=3,this._decay=2,this._reverse=!1,this._buildImpulse());this.connect();a.soundArray.push(this)};e.Convolver.prototype=Object.create(e.Reverb.prototype);e.prototype.registerPreloadMethod("createConvolver");e.prototype.createConvolver=function(a,c){-1<window.location.origin.indexOf("file://")&&
"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");var d=new e.Convolver(a,c);d.impulses=[];return d};e.Convolver.prototype._loadBuffer=function(a,c){a=e.prototype._checkFileFormats(a);var d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType="arraybuffer";var g=this;d.onload=function(){e.prototype.getAudioContext().decodeAudioData(d.response,function(d){var e={},h=a.split("/");e.name=h[h.length-1];e.audioBuffer=d;g.impulses.push(e);
g.convolverNode.buffer=e.audioBuffer;c&&c(e)})};d.send()};e.Convolver.prototype.set=null;e.Convolver.prototype.process=function(a){a.connect(this.input)};e.Convolver.prototype.impulses=[];e.Convolver.prototype.addImpulse=function(a,c){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");this._loadBuffer(a,c)};e.Convolver.prototype.resetImpulse=function(a,c){-1<window.location.origin.indexOf("file://")&&
"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");this.impulses=[];this._loadBuffer(a,c)};e.Convolver.prototype.toggleImpulse=function(a){"number"===typeof a&&a<this.impulses.length&&(this.convolverNode.buffer=this.impulses[a].audioBuffer);if("string"===typeof a)for(var c=0;c<this.impulses.length;c++)if(this.impulses[c].name===a){this.convolverNode.buffer=this.impulses[c].audioBuffer;break}};e.Convolver.prototype.dispose=
function(){for(var a in this.impulses)this.impulses[a]=null;this.convolverNode.disconnect();this.concolverNode=null;"undefined"!==typeof this.output&&(this.output.disconnect(),this.output=null);"undefined"!==typeof this.panner&&(this.panner.disconnect(),this.panner=null)}})(a,p);var n;n=function(a){a.Clock=function(c,d){this._oscillator=null;this._jsNode=this.context.createScriptProcessor(this.bufferSize,1,1);this._jsNode.onaudioprocess=this._processBuffer.bind(this);this._controlSignal=new a.Signal(1);
this._upTick=!1;this.tick=this.defaultArg(d,function(){});this._jsNode.noGC();this.setRate(c)};a.extend(a.Clock);a.Clock.prototype.setRate=function(a,c){var d=this.secondsToFrequency(this.toSeconds(a));c?this._controlSignal.exponentialRampToValueNow(d,c):(this._controlSignal.cancelScheduledValues(0),this._controlSignal.setValue(d))};a.Clock.prototype.getRate=function(){return this._controlSignal.getValue()};a.Clock.prototype.start=function(a){this._oscillator=this.context.createOscillator();this._oscillator.type=
"square";this._oscillator.connect(this._jsNode);this._controlSignal.connect(this._oscillator.frequency);this._upTick=!1;a=this.toSeconds(a);this._oscillator.start(a);this._oscillator.onended=function(){}};a.Clock.prototype.stop=function(a,c){var d=this.toSeconds(a);this._oscillator.onended=c;this._oscillator.stop(d)};a.Clock.prototype._processBuffer=function(a){var c=this.defaultArg(a.playbackTime,this.now()),d=this._jsNode.bufferSize;a=a.inputBuffer.getChannelData(0);for(var e=this._upTick,f=this,
g=0;g<d;g++){var h=a[g];0<h&&!e?(e=!0,setTimeout(function(){var a=c+f.samplesToSeconds(g+2*d);return function(){f.tick(a)}}(),0)):0>h&&e&&(e=!1)}this._upTick=e};a.Clock.prototype.dispose=function(){this._jsNode.disconnect();this._controlSignal.dispose();this._oscillator&&(this._oscillator.onended(),this._oscillator.disconnect());this._jsNode.onaudioprocess=function(){};this._oscillator=this._controlSignal=this._jsNode=null};return a.Clock}(k);(function(){var c=a.audiocontext;e.Metro=function(){this.clock=
new n(c.sampleRate,this.ontick.bind(this));this.syncedParts=[];this.bpm=120;this._init();this.tickCallback=function(){}};var d=0,g=0;e.Metro.prototype.ontick=function(c){var e=c-a.audiocontext.currentTime;if(!(-.02>=c-d-g)){d=c;for(var f in this.syncedParts){c=this.syncedParts[f];c.incrementStep(e);for(var h in c.phrases){var k=c.phrases[h],m=k.sequence,n=this.metroTicks%m.length;0!==m[n]&&(this.metroTicks<m.length||!k.looping)&&k.callback(e,m[n])}}this.metroTicks+=1;this.tickCallback(e)}};e.Metro.prototype.setBPM=
function(c,d){var e=60/(c*this.tatums);g=e;this.clock.setRate(e,d+a.audiocontext.currentTime);this.bpm=c};e.Metro.prototype.getBPM=function(a){return this.clock.getRate()/this.tatums*60};e.Metro.prototype._init=function(){this.metroTicks=0};e.Metro.prototype.resetSync=function(a){this.syncedParts=[a]};e.Metro.prototype.pushSync=function(a){this.syncedParts.push(a)};e.Metro.prototype.start=function(a){this.clock.start(a||0);this.setBPM(this.bpm)};e.Metro.prototype.stop=function(a){this.clock._oscillator&&
this.clock.stop(a||0)};e.Metro.prototype.beatLength=function(a){this.tatums=1/a/4}})(a,n);(function(){var c=120;e.prototype.setBPM=function(d,e){c=d;for(var g in a.parts)a.parts[g].setBPM(c,e)};e.Phrase=function(a,c,d){this.phraseStep=0;this.name=a;this.callback=c;this.sequence=d};e.Part=function(d,g){this.length=d||0;this.partStep=0;this.phrases=[];this.isPlaying=this.looping=!1;this.onended=function(){this.stop()};this.tatums=g||.0625;this.metro=new e.Metro;this.metro._init();this.metro.beatLength(this.tatums);
this.metro.setBPM(c);a.parts.push(this);this.callback=function(){}};e.Part.prototype.setBPM=function(a,c){this.metro.setBPM(a,c)};e.Part.prototype.getBPM=function(){return this.metro.getBPM()};e.Part.prototype.start=function(a){this.isPlaying||(this.isPlaying=!0,this.metro.resetSync(this),this.metro.start(a||0))};e.Part.prototype.loop=function(a){this.looping=!0;this.onended=function(){this.partStep=0};this.start(a||0)};e.Part.prototype.noLoop=function(){this.looping=!1;this.onended=function(){this.stop()}};
e.Part.prototype.stop=function(a){this.partStep=0;this.pause(a)};e.Part.prototype.pause=function(a){this.isPlaying=!1;this.metro.stop(a||0)};e.Part.prototype.addPhrase=function(a,c,d){var f;if(3===arguments.length)f=new e.Phrase(a,c,d);else if(arguments[0]instanceof e.Phrase)f=arguments[0];else throw"invalid input. addPhrase accepts name, callback, array or a p5.Phrase";this.phrases.push(f);f.sequence.length>this.length&&(this.length=f.sequence.length)};e.Part.prototype.removePhrase=function(a){for(var c in this.phrases)this.phrases[c].name===
a&&this.phrases.split(c,1)};e.Part.prototype.getPhrase=function(a){for(var c in this.phrases)if(this.phrases[c].name===a)return this.phrases[c]};e.Part.prototype.replaceSequence=function(a,c){for(var d in this.phrases)this.phrases[d].name===a&&(this.phrases[d].sequence=c)};e.Part.prototype.incrementStep=function(a){this.partStep<this.length-1?(this.callback(a),this.partStep+=1):(this.looping&&this.callback(a),this.onended(),this.partStep=0)};e.Part.prototype.onStep=function(a){this.callback=a};e.Score=
function(){this.parts=[];this.currentPart=0;var a=this,c;for(c in arguments)this.parts[c]=arguments[c],this.parts[c].nextPart=this.parts[c+1],this.parts[c].onended=function(){a.resetPart(c);var d=a;d.currentPart++;d.currentPart>=d.parts.length?(d.scoreStep=0,d.onended()):(d.scoreStep=0,d.parts[d.currentPart-1].stop(),d.parts[d.currentPart].start())};this.looping=!1};e.Score.prototype.onended=function(){this.looping?this.parts[0].start():this.parts[this.parts.length-1].onended=function(){this.stop();
this.resetParts()};this.currentPart=0};e.Score.prototype.start=function(){this.parts[this.currentPart].start();this.scoreStep=0};e.Score.prototype.stop=function(){this.parts[this.currentPart].stop();this.scoreStep=this.currentPart=0};e.Score.prototype.pause=function(){this.parts[this.currentPart].stop()};e.Score.prototype.loop=function(){this.looping=!0;this.start()};e.Score.prototype.noLoop=function(){this.looping=!1};e.Score.prototype.resetParts=function(){for(var a in this.parts)this.resetPart(a)};
e.Score.prototype.resetPart=function(a){this.parts[a].stop();this.parts[a].partStep=0;for(var c in this.parts[a].phrases)this.parts[a].phrases[c].phraseStep=0};e.Score.prototype.setBPM=function(a,c){for(var d in this.parts)this.parts[d].setBPM(a,c)}})(a);(function(){function c(a,d,e){for(var f=e.length,g=0;g<f;g++)a.setUint8(d+g,e.charCodeAt(g))}var d=a.audiocontext;e.SoundRecorder=function(){this.input=d.createGain();this.output=d.createGain();this.recording=!1;this.bufferSize=1024;this._channels=
2;this._clear();this._jsNode=d.createScriptProcessor(this.bufferSize,this._channels,2);this._jsNode.onaudioprocess=this._audioprocess.bind(this);this._callback=function(){};this._jsNode.connect(e.soundOut._silentNode);this.setInput();a.soundArray.push(this)};e.SoundRecorder.prototype.setInput=function(a){this.input.disconnect();this.input=null;this.input=d.createGain();this.input.connect(this._jsNode);this.input.connect(this.output);a?a.connect(this.input):e.soundOut.output.connect(this.input)};e.SoundRecorder.prototype.record=
function(a,c,e){this.recording=!0;c&&(this.sampleLimit=Math.round(c*d.sampleRate));a&&e?this._callback=function(){this.buffer=this._getBuffer();a.setBuffer(this.buffer);e()}:a&&(this._callback=function(){this.buffer=this._getBuffer();a.setBuffer(this.buffer)})};e.SoundRecorder.prototype.stop=function(){this.recording=!1;this._callback();this._clear()};e.SoundRecorder.prototype._clear=function(){this._leftBuffers=[];this._rightBuffers=[];this.recordedSamples=0;this.sampleLimit=null};e.SoundRecorder.prototype._audioprocess=
function(a){if(!1!==this.recording&&!0===this.recording)if(this.sampleLimit&&this.recordedSamples>=this.sampleLimit)this.stop();else{var c=a.inputBuffer.getChannelData(0);a=a.inputBuffer.getChannelData(1);this._leftBuffers.push(new Float32Array(c));this._rightBuffers.push(new Float32Array(a));this.recordedSamples+=this.bufferSize}};e.SoundRecorder.prototype._getBuffer=function(){var a=[];a.push(this._mergeBuffers(this._leftBuffers));a.push(this._mergeBuffers(this._rightBuffers));return a};e.SoundRecorder.prototype._mergeBuffers=
function(a){for(var c=new Float32Array(this.recordedSamples),d=0,e=a.length,f=0;f<e;f++){var g=a[f];c.set(g,d);d+=g.length}return c};e.SoundRecorder.prototype.dispose=function(){this._clear();this._callback=function(){};this.input&&this.input.disconnect();this._jsNode=this.input=null};e.prototype.saveSound=function(a,d){for(var g=a.buffer.getChannelData(0),h=a.buffer.getChannelData(1),k=g.length+h.length,l=new Float32Array(k),m=0,n=0;n<k;)l[n++]=g[m],l[n++]=h[m],m++;g=new ArrayBuffer(44+2*l.length);
g=new DataView(g);c(g,0,"RIFF");g.setUint32(4,44+2*l.length,!0);c(g,8,"WAVE");c(g,12,"fmt ");g.setUint32(16,16,!0);g.setUint16(20,1,!0);g.setUint16(22,2,!0);g.setUint32(24,44100,!0);g.setUint32(28,176400,!0);g.setUint16(32,4,!0);g.setUint16(34,16,!0);c(g,36,"data");g.setUint32(40,2*l.length,!0);h=l.length;k=44;for(m=0;m<h;m++)g.setInt16(k,32767*l[m],!0),k+=2;e.prototype.writeFile([g],d,"wav")}})(p,a);(function(){e.PeakDetect=function(a,c,d,e){this.framesPerPeak=e||5;this.framesSinceLastPeak=0;this.decayRate=
.95;this.threshold=d||.25;this.penergy=this.energy=this.cutoff=0;this.isDetected=!1;this.f1=a||40;this.f2=c||2E4;this._onPeak=function(){}};e.PeakDetect.prototype.update=function(a){a=this.energy=a.getEnergy(this.f1,this.f2)/255;a>this.cutoff&&a>this.threshold&&0<a-this.penergy?(this._onPeak(),this.isDetected=!0,this.cutoff=1.1*a,this.framesSinceLastPeak=0):(this.isDetected=!1,this.framesSinceLastPeak<=this.framesPerPeak?this.framesSinceLastPeak++:(this.cutoff*=this.decayRate,this.cutoff=Math.max(this.cutoff,
this.threshold)));this.penergy=a};e.PeakDetect.prototype.onPeak=function(a,c){var d=this;d._onPeak=function(){a(d.energy,c)}}})(a);(function(){e.Gain=function(){this.ac=a.audiocontext;this.input=this.ac.createGain();this.output=this.ac.createGain();this.input.gain.value=.5;this.input.connect(this.output)};e.Gain.prototype.setInput=function(a){a.connect(this.input)};e.Gain.prototype.connect=function(a){a=a||e.soundOut.input;this.output.connect(a.input?a.input:a)};e.Gain.prototype.disconnect=function(){this.output.disconnect()};
e.Gain.prototype.amp=function(c,d,e){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=this.output.gain.value;this.output.gain.cancelScheduledValues(g);this.output.gain.linearRampToValueAtTime(h,g+e);this.output.gain.linearRampToValueAtTime(c,g+e+d)}})(a,p)});
