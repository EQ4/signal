(function(e,n){"function"===typeof define&&define.amd?define("p5",[],function(){return e.returnExportsGlobal=n()}):"object"===typeof exports?module.exports=n():e.p5=n()})(this,function(){var e={};e.shim=function(e){window.requestDraw=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,g){window.setTimeout(a,1E3/60)}}();"undefined"!==typeof Uint8ClampedArray&&(Uint8ClampedArray.prototype.slice=
Array.prototype.slice)}({});e.constants=function(e){e=Math.PI;return{P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:e/2,PI:e,QUARTER_PI:e/4,TAU:2*e,TWO_PI:2*e,DEGREES:"degrees",RADIANS:"radians",CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:"points",LINES:"lines",TRIANGLES:"triangles",TRIANGLE_FAN:"triangles_fan",TRIANGLE_STRIP:"triangles_strip",
QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"normal",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"source-over",
OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF"}}({});e.core=function(e,a,g){var c=
function(d,h,p){2===arguments.length&&"boolean"===typeof h&&(p=h,h=void 0);this._setupDone=!1;this.pixelDensity=window.devicePixelRatio||1;this._startTime=(new Date).getTime();this._userNode=h;this._curElement=null;this._elements=[];this._updateInterval=this._preloadCount=0;this._isGlobal=!1;this._loop=!0;this._styles=[];this._defaultCanvasSize={width:100,height:100};this._events={mousemove:null,mousedown:null,mouseup:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,
touchstart:null,touchmove:null,touchend:null,resize:null,blur:null};window.DeviceOrientationEvent?this._events.deviceorientation=null:window.DeviceMotionEvent?this._events.devicemotion=null:this._events.MozOrientation=null;/Firefox/i.test(navigator.userAgent)?this._events.DOMMouseScroll=null:this._events.mousewheel=null;this._loadingScreenId="p5_loading";this._start=function(){this._userNode&&"string"===typeof this._userNode&&(this._userNode=document.getElementById(this._userNode));this._loadingScreen=
document.getElementById(this._loadingScreenId);this._loadingScreen||(this._loadingScreen=document.createElement("loadingDiv"),this._loadingScreen.innerHTML="loading...",this._loadingScreen.style.position="absolute",(this._userNode||document.body).appendChild(this._loadingScreen));this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d",!0);var f=this.preload||window.preload,k=this._isGlobal?window:this;f?(this._preloadMethods.forEach(function(f){k[f]=function(){var l=Array.prototype.slice.call(arguments);
return k._preload(f,l)}}),f(),0===this._preloadCount&&(this._setup(),this._runFrames(),this._draw())):(this._setup(),this._runFrames(),this._draw())}.bind(this);this._preload=function(f,k){var l=this._isGlobal?window:this;l._setProperty("_preloadCount",l._preloadCount+1);k.push(function(f){l._setProperty("_preloadCount",l._preloadCount-1);0===l._preloadCount&&(l._setup(),l._runFrames(),l._draw())});return c.prototype[f].apply(l,k)}.bind(this);this._setup=function(){var f=this._isGlobal?window:this;
"function"===typeof f.preload&&this._preloadMethods.forEach(function(k){f[k]=c.prototype[k]});"function"===typeof f.setup&&f.setup();for(var k=new RegExp(/(^|\s)p5_hidden(?!\S)/g),l=document.getElementsByClassName("p5_hidden"),d=0;d<l.length;d++){var m=l[d];m.style.visibility="";m.className=m.className.replace(k,"")}this._setupDone=!0;this._loadingScreen.parentNode.removeChild(this._loadingScreen)}.bind(this);this._draw=function(){var f=(new Date).getTime();this._frameRate=1E3/(f-this._lastFrameTime);
this._lastFrameTime=f;this._setProperty("frameCount",this.frameCount+1);this._loop&&(this._drawInterval&&clearInterval(this._drawInterval),this._drawInterval=setTimeout(function(){window.requestDraw(this._draw.bind(this))}.bind(this),1E3/this._targetFrameRate));this.redraw();this._updatePAccelerations();this._updatePMouseCoords();this._updatePTouchCoords()}.bind(this);this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this);this._setProperty=function(f,k){this[f]=
k;this._isGlobal&&(window[f]=k)}.bind(this);this.remove=function(){if(this._curElement){this._loop=!1;this._drawInterval&&clearTimeout(this._drawInterval);this._updateInterval&&clearTimeout(this._updateInterval);for(var f in this._events)window.removeEventListener(f,this._events[f]);for(f=0;f<this._elements.length;f++){var k=this._elements[f];k.elt.parentNode&&k.elt.parentNode.removeChild(k.elt);for(var l in k._events)k.elt.removeEventListener(l,k._events[l])}var d=this;this._registeredMethods.remove.forEach(function(f){"undefined"!==
typeof f&&f.call(d)});if(this._isGlobal){for(var m in c.prototype)try{delete window[m]}catch(p){window[m]=void 0}for(var t in this)if(this.hasOwnProperty(t))try{delete window[t]}catch(h){window[t]=void 0}}}}.bind(this);for(var k in g)c.prototype[k]=g[k];if(d)d(this);else{this._isGlobal=!0;for(var m in c.prototype)"function"===typeof c.prototype[m]?(k=m.substring(2),this._events.hasOwnProperty(k)||(window[m]=c.prototype[m].bind(this))):window[m]=c.prototype[m];for(var f in this)this.hasOwnProperty(f)&&
(window[f]=this[f])}for(var l in this._events)if(m=this["_on"+l])m=m.bind(this),window.addEventListener(l,m),this._events[l]=m;var t=this;window.addEventListener("focus",function(){t._setProperty("focused",!0)});window.addEventListener("blur",function(){t._setProperty("focused",!1)});p?this._start():"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)};c.prototype._preloadMethods="loadJSON loadImage loadStrings loadXML loadShape loadTable loadFont".split(" ");
c.prototype._registeredMethods={pre:[],post:[],remove:[]};c.prototype.registerPreloadMethod=function(d){c.prototype._preloadMethods.push(d)}.bind(this);c.prototype.registerMethod=function(d,h){c.prototype._registeredMethods.hasOwnProperty(d)||(c.prototype._registeredMethods[d]=[]);c.prototype._registeredMethods[d].push(h)}.bind(this);return c}({},e.shim,e.constants);e.utilscolor_utils=function(e,a){a.ColorUtils={};a.ColorUtils.hsbaToRGBA=function(g){var c=g[0],d=g[1],h=g[2],c=c/255,d=d/255,h=h/255,
p=[];if(0===d)p=[Math.round(255*h),Math.round(255*h),Math.round(255*h),g[3]];else{var k=6*c;6===k&&(k=0);var m=Math.floor(k),c=h*(1-d),p=h*(1-d*(k-m)),d=h*(1-d*(1-(k-m)));0===m?(m=h,k=d,h=c):1===m?(m=p,k=h,h=c):2===m?(m=c,k=h,h=d):3===m?(m=c,k=p):4===m?(m=d,k=c):(m=h,k=c,h=p);p=[Math.round(255*m),Math.round(255*k),Math.round(255*h),g[3]]}return p};a.ColorUtils.rgbaToHSBA=function(g){var c=g[0]/255,d=g[1]/255,h=g[2]/255,p=Math.min(c,d,h),k=Math.max(c,d,h),m=k-p,f;if(0===m)p=f=0;else{var p=m/k,l=((k-
c)/6+m/2)/m,t=((k-d)/6+m/2)/m,m=((k-h)/6+m/2)/m;c===k?f=m-t:d===k?f=1/3+l-m:h===k&&(f=2/3+t-l);0>f&&(f+=1);1<f&&--f}return[Math.round(255*f),Math.round(255*p),Math.round(255*k),g[3]]};return a.ColorUtils}({},e.core);e.p5Color=function(e,a,g,c){a.Color=function(f,k){this.color_array=a.Color._getFormattedColor.apply(f,k);this._converted_color=this._convertTo255(f);f._colorMode===c.HSB?(this.hsba=this.color_array,this.rgba=g.hsbaToRGBA(this._converted_color)):this.rgba=this.color_array;return this};
a.Color.prototype._convertTo255=function(f){f=f._colorMode===c.RGB?f._maxRGB:f._maxHSB;var k=[];k[0]=255*this.color_array[0]/f[0];k[1]=255*this.color_array[1]/f[1];k[2]=255*this.color_array[2]/f[2];k[3]=255*this.color_array[3]/f[3];return k};a.Color.prototype.getHue=function(){this.hsba||(this.hsba=g.rgbaToHSBA(this._converted_color));return this.hsba[0]};a.Color.prototype.getSaturation=function(){this.hsba||(this.hsba=g.rgbaToHSBA(this._converted_color));return this.hsba[1]};a.Color.prototype.getBrightness=
function(){this.hsba||(this.hsba=g.rgbaToHSBA(this._converted_color));return this.hsba[2]};a.Color.prototype.getRed=function(){return this.rgba[0]};a.Color.prototype.getGreen=function(){return this.rgba[1]};a.Color.prototype.getBlue=function(){return this.rgba[2]};a.Color.prototype.getAlpha=function(){return this.hsba?this.hsba[3]:this.rgba[3]};a.Color.prototype.toString=function(){for(var f=this.rgba,k=0;3>k;k++)f[k]=Math.floor(f[k]);return"rgba("+f[0]+","+f[1]+","+f[2]+","+("undefined"!==typeof f[3]?
f[3]/255:1)+")"};e=/\s*/;var d=/(\d{1,3})/,h=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp(h.source+"%"),k={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",
darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",
firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",
lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",
mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",
rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},
m=/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,f=/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,l=new RegExp(["^rgb\\(",d.source,",",d.source,",",d.source,"\\)$"].join(e.source),"i"),t=new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(e.source),"i"),F=new RegExp(["^rgba\\(",d.source,",",d.source,",",d.source,",",h.source,"\\)$"].join(e.source),"i"),q=new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",h.source,"\\)$"].join(e.source),"i");a.Color._getFormattedColor=function(){var d,
p,h,g;if(3<=arguments.length)d=arguments[0],p=arguments[1],h=arguments[2],g="number"===typeof arguments[3]?arguments[3]:255;else{if("string"===typeof arguments[0]){d=arguments[0].trim().toLowerCase();if(k[d])return a.Color._getFormattedColor.apply(this,[k[d]]);d=m.test(d)?m.exec(d).slice(1).map(function(f){return parseInt(f+f,16)}):f.test(d)?f.exec(d).slice(1).map(function(f){return parseInt(f,16)}):l.test(d)?l.exec(d).slice(1).map(function(f){return parseInt(f,10)}):t.test(d)?t.exec(d).slice(1).map(function(f){return parseInt(parseFloat(f)/
100*255,10)}):F.test(d)?F.exec(d).slice(1).map(function(f,k){return 3===k?parseInt(255*parseFloat(f),10):parseInt(f,10)}):q.test(d)?q.exec(d).slice(1).map(function(f,k){return 3===k?parseInt(255*parseFloat(f),10):parseInt(parseFloat(f)/100*255,10)}):[255];return a.Color._getFormattedColor.apply(this,d)}this._colorMode===c.RGB?d=p=h=arguments[0]:(d=h=arguments[0],p=0);g="number"===typeof arguments[1]?arguments[1]:255}return[d,p,h,g]};return a.Color}({},e.core,e.utilscolor_utils,e.constants);e.p5Element=
function(e,a){function g(c,d,h){d=d.bind(h);h.elt.addEventListener(c,d,!1);h._events[c]=d}a.Element=function(c,d){this.elt=c;this._pInst=d;this._events={};this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight};a.Element.prototype.parent=function(c){"string"===typeof c?c=document.getElementById(c):c instanceof a.Element&&(c=c.elt);c.appendChild(this.elt);return this};a.Element.prototype.id=function(c){this.elt.id=c;return this};a.Element.prototype["class"]=function(c){this.elt.className+=
" "+c;return this};a.Element.prototype.mousePressed=function(c){g("mousedown",c,this);g("touchstart",c,this);return this};a.Element.prototype.mouseWheel=function(c){g("mousewheel",c,this);return this};a.Element.prototype.mouseReleased=function(c){g("mouseup",c,this);g("touchend",c,this);return this};a.Element.prototype.mouseClicked=function(c){g("click",c,this);return this};a.Element.prototype.mouseMoved=function(c){g("mousemove",c,this);g("touchmove",c,this);return this};a.Element.prototype.mouseOver=
function(c){g("mouseover",c,this);return this};a.Element.prototype.mouseOut=function(c){g("mouseout",c,this);return this};a.Element.prototype.touchStarted=function(c){g("touchstart",c,this);g("mousedown",c,this);return this};a.Element.prototype.touchMoved=function(c){g("touchmove",c,this);g("mousemove",c,this);return this};a.Element.prototype.touchEnded=function(c){g("touchend",c,this);g("mouseup",c,this);return this};a.Element.prototype.dragOver=function(c){g("dragover",c,this);return this};a.Element.prototype.dragLeave=
function(c){g("dragleave",c,this);return this};a.Element.prototype.drop=function(c,d){function h(d){var k=new a.File(d);return function(d){k.data=d.target.result;c(k)}}window.File&&window.FileReader&&window.FileList&&window.Blob?(g("dragover",function(d){d.stopPropagation();d.preventDefault()},this),g("dragleave",function(d){d.stopPropagation();d.preventDefault()},this),1<arguments.length&&g("drop",d,this),g("drop",function(d){d.stopPropagation();d.preventDefault();d=d.dataTransfer.files;for(var k=
0;k<d.length;k++){var c=d[k],f=new FileReader;f.onload=h(c);"text"===c.type?f.readAsText(c):f.readAsDataURL(c)}},this)):console.log("The File APIs are not fully supported in this browser.");return this};a.Element.prototype._setProperty=function(c,d){this[c]=d};return a.Element}({},e.core);e.p5Font=function(e,a,g){a.Font=function(c){this.parent=c;this.font=void 0};a.Font.prototype.renderPath=function(c,d,h,p,k){var m=this.parent,f,l,t;p=p||m._textSize;k=k||{};f=m.textWidth(c);l=m.textAscent();t=m.textDescent();
l+=t;m.drawingContext.textAlign===g.CENTER?d-=f/2:m.drawingContext.textAlign===g.RIGHT&&(d-=f);m.drawingContext.textBaseline===g.TOP?h+=l:m.drawingContext.textBaseline===g._CTX_MIDDLE?h+=l/2-t:m.drawingContext.textBaseline===g.BOTTOM&&(h-=t);c=this.font.getPath(c,d,h,p,k);m._doStroke&&m._strokeSet&&(c.strokeWidth=m.drawingContext.lineWidth,c.stroke=m.drawingContext.strokeStyle);m._doFill&&(c.fill=m._fillSet?m.drawingContext.fillStyle:g._DEFAULT_TEXT_FILL);c.draw(m.drawingContext)};a.Font.prototype.textBounds=
function(c,d,h,p){if(!this.parent._isOpenType())throw Error("not supported for system fonts");p=p||this.parent._textSize;var k=[],m=[],f=1/this.font.unitsPerEm*p;this.font.forEachGlyph(c,void 0!==d?d:0,void 0!==h?h:0,p,{},function(l,d,c){if("space"!==l.name){d=void 0!==d?d:0;c=void 0!==c?c:0;l=l.getMetrics();var p=c+-l.yMin*f,h=d+l.xMax*f;c+=-l.yMax*f;k.push(d+l.xMin*f);m.push(p);k.push(h);m.push(c)}});c=Math.min.apply(null,k);d=Math.min.apply(null,m);h=Math.max.apply(null,k);p=Math.max.apply(null,
m);return{x:c,y:d,w:h-c,h:p-d}};a.Font.prototype.list=function(){throw"not yet implemented";};return a.Font}({},e.core,e.constants);e.canvas=function(e,a){return{modeAdjust:function(g,c,d,h,p){if(p===a.CORNER)return{x:g,y:c,w:d,h:h};if(p===a.CORNERS)return{x:g,y:c,w:d-g,h:h-c};if(p===a.RADIUS)return{x:g-d,y:c-h,w:2*d,h:2*h};if(p===a.CENTER)return{x:g-.5*d,y:c-.5*h,w:d,h:h}},arcModeAdjust:function(g,c,d,h,p){if(p===a.CORNER)return{x:g+.5*d,y:c+.5*h,w:d,h:h};if(p===a.CORNERS)return{x:g,y:c,w:d+g,h:h+
c};if(p===a.RADIUS)return{x:g,y:c,w:2*d,h:2*h};if(p===a.CENTER)return{x:g,y:c,w:d,h:h}}}}({},e.constants);e.filters=function(e){var a={_toPixels:function(d){return d instanceof ImageData?d.data:d.getContext("2d").getImageData(0,0,d.width,d.height).data},_getARGB:function(d,k){var c=4*k;return d[c+3]<<24&4278190080|d[c]<<16&16711680|d[c+1]<<8&65280|d[c+2]&255},_setPixels:function(d,k){for(var c=0,f=0,l=d.length;f<l;f++)c=4*f,d[c+0]=(k[f]&16711680)>>>16,d[c+1]=(k[f]&65280)>>>8,d[c+2]=k[f]&255,d[c+3]=
(k[f]&4278190080)>>>24},_toImageData:function(d){return d instanceof ImageData?d:d.getContext("2d").getImageData(0,0,d.width,d.height)},_createImageData:function(d,k){a._tmpCanvas=document.createElement("canvas");a._tmpCtx=a._tmpCanvas.getContext("2d");return this._tmpCtx.createImageData(d,k)},apply:function(d,k,c){var f=d.getContext("2d"),l=f.getImageData(0,0,d.width,d.height);k=k(l,c);k instanceof ImageData?f.putImageData(k,0,0,0,0,d.width,d.height):f.putImageData(l,0,0,0,0,d.width,d.height)},threshold:function(d,
k){var c=a._toPixels(d);void 0===k&&(k=.5);for(var f=Math.floor(255*k),l=0;l<c.length;l+=4)c[l]=c[l+1]=c[l+2]=.2126*c[l]+.7152*c[l+1]+.0722*c[l+2]>=f?255:0},gray:function(d){d=a._toPixels(d);for(var k=0;k<d.length;k+=4)d[k]=d[k+1]=d[k+2]=.2126*d[k]+.7152*d[k+1]+.0722*d[k+2]},opaque:function(d){d=a._toPixels(d);for(var k=0;k<d.length;k+=4)d[k+3]=255;return d},invert:function(d){d=a._toPixels(d);for(var k=0;k<d.length;k+=4)d[k]=255-d[k],d[k+1]=255-d[k+1],d[k+2]=255-d[k+2]},posterize:function(d,k){var c=
a._toPixels(d);if(2>k||255<k)throw Error("Level must be greater than 2 and less than 255 for posterize");for(var f=k-1,l=0;l<c.length;l+=4){var t=c[l+1],h=c[l+2];c[l]=255*(c[l]*k>>8)/f;c[l+1]=255*(t*k>>8)/f;c[l+2]=255*(h*k>>8)/f}},dilate:function(d){for(var k=a._toPixels(d),c=0,f=k.length?k.length/4:0,l=new Int32Array(f),t,h,g,e,u,z,x,w,y,v,n,B;c<f;)for(t=c,h=c+d.width;c<h;)g=e=a._getARGB(k,c),z=c-1,u=c+1,x=c-d.width,w=c+d.width,z<t&&(z=c),u>=h&&(u=c),0>x&&(x=0),w>=f&&(w=c),x=a._getARGB(k,x),z=a._getARGB(k,
z),w=a._getARGB(k,w),u=a._getARGB(k,u),g=77*(g>>16&255)+151*(g>>8&255)+28*(g&255),v=77*(z>>16&255)+151*(z>>8&255)+28*(z&255),y=77*(u>>16&255)+151*(u>>8&255)+28*(u&255),n=77*(x>>16&255)+151*(x>>8&255)+28*(x&255),B=77*(w>>16&255)+151*(w>>8&255)+28*(w&255),v>g&&(e=z,g=v),y>g&&(e=u,g=y),n>g&&(e=x,g=n),B>g&&(e=w),l[c++]=e;a._setPixels(k,l)},erode:function(d){for(var k=a._toPixels(d),c=0,f=k.length?k.length/4:0,l=new Int32Array(f),t,h,g,e,u,z,x,w,y,v,n,B;c<f;)for(t=c,h=c+d.width;c<h;)g=e=a._getARGB(k,c),
z=c-1,u=c+1,x=c-d.width,w=c+d.width,z<t&&(z=c),u>=h&&(u=c),0>x&&(x=0),w>=f&&(w=c),x=a._getARGB(k,x),z=a._getARGB(k,z),w=a._getARGB(k,w),u=a._getARGB(k,u),g=77*(g>>16&255)+151*(g>>8&255)+28*(g&255),v=77*(z>>16&255)+151*(z>>8&255)+28*(z&255),y=77*(u>>16&255)+151*(u>>8&255)+28*(u&255),n=77*(x>>16&255)+151*(x>>8&255)+28*(x&255),B=77*(w>>16&255)+151*(w>>8&255)+28*(w&255),v<g&&(e=z,g=v),y<g&&(e=u,g=y),n<g&&(e=x,g=n),B<g&&(e=w),l[c++]=e;a._setPixels(k,l)}},g,c,d,h;a.blur=function(p,k){for(var m=a._toPixels(p),
f=p.width,l=p.height,t=f*l,F=new Int32Array(t),e=0;e<t;e++)F[e]=a._getARGB(m,e);var r,u,z,x,w,y,v,n,B,D,e=new Int32Array(t),H=new Int32Array(t),L=new Int32Array(t),t=new Int32Array(t),G=0;r=3.5*k|0;r=1>r?1:248>r?r:248;if(g!==r){g=r;c=1+g<<1;d=new Int32Array(c);h=Array(c);for(u=0;u<c;u++)h[u]=new Int32Array(256);w=1;for(y=r-1;w<r;w++){d[r+w]=d[y]=z=y*y;u=h[r+w];x=h[y--];for(var I=0;256>I;I++)u[I]=x[I]=z*I}z=d[r]=r*r;u=h[r];for(r=0;256>r;r++)u[r]=z*r}var K,M;for(K=0;K<l;K++){for(I=0;I<f;I++){x=z=u=
w=r=0;y=I-g;if(0>y)D=-y,y=0;else{if(y>=f)break;D=0}for(;D<c&&!(y>=f);D++)v=F[y+G],M=h[D],w+=M[(v&-16777216)>>>24],u+=M[(v&16711680)>>16],z+=M[(v&65280)>>8],x+=M[v&255],r+=d[D],y++;v=G+I;e[v]=w/r;H[v]=u/r;L[v]=z/r;t[v]=x/r}G+=f}G=0;n=-g;B=n*f;for(K=0;K<l;K++){for(I=0;I<f;I++){x=z=u=w=r=0;if(0>n)D=v=-n,y=I;else{if(n>=l)break;D=0;v=n;y=I+B}for(;D<c&&!(v>=l);D++)M=h[D],w+=M[e[y]],u+=M[H[y]],z+=M[L[y]],x+=M[t[y]],r+=d[D],v++,y+=f;F[I+G]=w/r<<24|u/r<<16|z/r<<8|x/r}G+=f;B+=f;n++}a._setPixels(m,F)};return a}({});
e.p5Graphics=function(e,a){a.Graphics=function(g,c,d){a.Element.call(this,g,c);this.canvas=g;this._pInst=c;d?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[])};a.Graphics.prototype=Object.create(a.Element.prototype);a.Graphics.prototype.resize=function(g,c){this.width=g;this.height=c;this.elt.width=
g*this._pInst.pixelDensity;this.elt.height=c*this._pInst.pixelDensity;this.elt.style.width=g+"px";this.elt.style.height=c+"px";this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height));this.drawingContext.scale(this._pInst.pixelDensity,this._pInst.pixelDensity)};return a.Graphics}({},e.core);e.p5Graphics2D=function(e,a,g,c,d,h){a.Graphics2D=function(d,k,c){a.Graphics.call(this,d,k,c);this.drawingContext=this.canvas.getContext("2d");this._pInst._setProperty("drawingContext",
this.drawingContext);return this};a.Graphics2D.prototype=Object.create(a.Graphics.prototype);a.Graphics2D.prototype._applyDefaults=function(){this.drawingContext.fillStyle=c._DEFAULT_FILL;this.drawingContext.strokeStyle=c._DEFAULT_STROKE;this.drawingContext.lineCap=c.ROUND;this.drawingContext.font="normal 12px sans-serif"};a.Graphics2D.prototype.background=function(){this.drawingContext.save();this.drawingContext.setTransform(1,0,0,1,0,0);this.drawingContext.scale(this._pInst.pixelDensity,this._pInst.pixelDensity);
if(arguments[0]instanceof a.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var d=this.drawingContext.fillStyle,k=this._pInst.color.apply(this._pInst,arguments).toString();this.drawingContext.fillStyle=k;this.drawingContext.fillRect(0,0,this.width,this.height);this.drawingContext.fillStyle=d}this.drawingContext.restore()};a.Graphics2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)};a.Graphics2D.prototype.fill=function(){var d=this.drawingContext,
k=this._pInst.color.apply(this._pInst,arguments);d.fillStyle=k.toString()};a.Graphics2D.prototype.stroke=function(){var d=this.drawingContext,k=this._pInst.color.apply(this._pInst,arguments);d.strokeStyle=k.toString()};a.Graphics2D.prototype.image=function(d,k,c,f,l){var t=d.canvas||d.elt;try{this._pInst._tint&&d.canvas?this.drawingContext.drawImage(this._getTintedImageCanvas(d),k,c,f,l):this.drawingContext.drawImage(t,k,c,f,l)}catch(h){if("NS_ERROR_NOT_AVAILABLE"!==h.name)throw h;}};a.Graphics2D.prototype._getTintedImageCanvas=
function(c){if(!c.canvas)return c;var k=d._toPixels(c.canvas),m=document.createElement("canvas");m.width=c.canvas.width;m.height=c.canvas.height;var f=m.getContext("2d");c=f.createImageData(c.canvas.width,c.canvas.height);for(var l=c.data,t=0;t<k.length;t+=4){var h=k[t+1],g=k[t+2],a=k[t+3];l[t]=k[t]*this._pInst._tint[0]/255;l[t+1]=h*this._pInst._tint[1]/255;l[t+2]=g*this._pInst._tint[2]/255;l[t+3]=a*this._pInst._tint[3]/255}f.putImageData(c,0,0);return m};a.Graphics2D.prototype.blend=function(){var d=
this.drawingContext.globalCompositeOperation,k=arguments[arguments.length-1],c=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=k;this._pInst.copy.apply(this._pInst,c);this.drawingContext.globalCompositeOperation=d};a.Graphics2D.prototype.copy=function(){var d,k,c,f,l,t,h,g,e;if(9===arguments.length)d=arguments[0],k=arguments[1],c=arguments[2],f=arguments[3],l=arguments[4],t=arguments[5],h=arguments[6],g=arguments[7],e=arguments[8];else if(8===
arguments.length)d=this._pInst,k=arguments[0],c=arguments[1],f=arguments[2],l=arguments[3],t=arguments[4],h=arguments[5],g=arguments[6],e=arguments[7];else throw Error("Signature not supported");a.Graphics2D._copyHelper(d,k,c,f,l,t,h,g,e)};a.Graphics2D._copyHelper=function(d,k,c,f,l,h,g,a,e){var u=d.canvas.width/d.width;this.drawingContext.drawImage(d.canvas,u*k,u*c,u*f,u*l,h,g,a,e)};a.Graphics2D.prototype.get=function(d,k,c,f){void 0===d&&void 0===k&&void 0===c&&void 0===f?(k=d=0,c=this.width,f=
this.height):void 0===c&&void 0===f&&(f=c=1);if(d>this.width||k>this.height||0>d||0>k)return[0,0,0,255];var l=this.pixelDensity||this._pInst.pixelDensity;if(1===c&&1===f){d=this.drawingContext.getImageData(d*l,k*l,c,f).data;l=[];for(k=0;k<d.length;k+=4)l.push(d[k],d[k+1],d[k+2],d[k+3]);return l}d*=l;k*=l;c=Math.min(c,this.width);f=Math.min(f,this.height);var h=c*l,l=f*l,g=new a.Image(c,f);g.canvas.getContext("2d").drawImage(this.canvas,d,k,h,l,0,0,c,f);return g};a.Graphics2D.prototype.loadPixels=
function(){var d=this.pixelDensity||this._pInst.pixelDensity,d=this.drawingContext.getImageData(0,0,this.width*d,this.height*d);this._pInst?(this._pInst._setProperty("imageData",d),this._pInst._setProperty("pixels",d.data)):(this._setProperty("imageData",d),this._setProperty("pixels",d.data))};a.Graphics2D.prototype.set=function(d,k,c){if(c instanceof a.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst.pixelDensity,this._pInst.pixelDensity),
this.drawingContext.drawImage(c.canvas,d,k),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var f=this._pInst||this,l=0,h=0,g=0,e=0,r=4*(k*f.pixelDensity*this.width*f.pixelDensity+d*f.pixelDensity);f.imageData||f.loadPixels.call(f);if("number"===typeof c)r<f.pixels.length&&(g=h=l=c,e=255);else if(c instanceof Array){if(4>c.length)throw Error("pixel array must be of the form [R, G, B, A]");r<f.pixels.length&&(l=c[0],h=c[1],g=c[2],e=c[3])}else c instanceof a.Color&&r<f.pixels.length&&
(l=c.rgba[0],h=c.rgba[1],g=c.rgba[2],e=c.rgba[3]);for(c=0;c<f.pixelDensity;c++)for(var u=0;u<f.pixelDensity;u++)r=4*((k*f.pixelDensity+u)*this.width*f.pixelDensity+(d*f.pixelDensity+c)),f.pixels[r]=l,f.pixels[r+1]=h,f.pixels[r+2]=g,f.pixels[r+3]=e}};a.Graphics2D.prototype.updatePixels=function(d,k,c,f){var l=this.pixelDensity||this._pInst.pixelDensity;void 0===d&&void 0===k&&void 0===c&&void 0===f&&(k=d=0,c=this.width,f=this.height);c*=l;f*=l;this._pInst?this.drawingContext.putImageData(this._pInst.imageData,
d,k,0,0,c,f):this.drawingContext.putImageData(this.imageData,d,k,0,0,c,f)};a.Graphics2D.prototype.arc=function(d,k,h,f,l,t,a,e){if(this._pInst._doStroke||this._pInst._doFill){var r=this.drawingContext,u=g.arcModeAdjust(d,k,h,f,this._pInst._ellipseMode),z=u.w/2,x=u.h/2;r.beginPath();e.forEach(function(f,k){0===k&&r.moveTo(u.x+f.x1*z,u.y+f.y1*x);r.bezierCurveTo(u.x+f.x2*z,u.y+f.y2*x,u.x+f.x3*z,u.y+f.y3*x,u.x+f.x4*z,u.y+f.y4*x)});if(this._pInst._doFill&&(a!==c.PIE&&null!=a||r.lineTo(u.x,u.y),r.closePath(),
r.fill(),this._pInst._doStroke&&(a===c.CHORD||a===c.PIE)))return r.stroke(),this;!this._pInst._doStroke||a!==c.OPEN&&null!=a||(r.beginPath(),e.forEach(function(f,k){0===k&&r.moveTo(u.x+f.x1*z,u.y+f.y1*x);r.bezierCurveTo(u.x+f.x2*z,u.y+f.y2*x,u.x+f.x3*z,u.y+f.y3*x,u.x+f.x4*z,u.y+f.y4*x)}),r.stroke());return this}};a.Graphics2D.prototype.ellipse=function(d,k,c,f){var l=this.drawingContext,h=this._pInst._doFill,a=this._pInst._doStroke;if(h&&!a){if("rgba(0,0,0,0)"===l.fillStyle)return this}else if(!h&&
a&&"rgba(0,0,0,0)"===l.strokeStyle)return this;d=g.modeAdjust(d,k,c,f,this._pInst._ellipseMode);k=d.w/2*.5522848;c=d.h/2*.5522848;f=d.x+d.w;var e=d.y+d.h,r=d.x+d.w/2,u=d.y+d.h/2;l.beginPath();l.moveTo(d.x,u);l.bezierCurveTo(d.x,u-c,r-k,d.y,r,d.y);l.bezierCurveTo(r+k,d.y,f,u-c,f,u);l.bezierCurveTo(f,u+c,r+k,e,r,e);l.bezierCurveTo(r-k,e,d.x,u+c,d.x,u);l.closePath();h&&l.fill();a&&l.stroke()};a.Graphics2D.prototype.line=function(d,k,c,f){var l=this.drawingContext;if(!this._pInst._doStroke||"rgba(0,0,0,0)"===
l.strokeStyle)return this;l.beginPath();l.moveTo(d,k);l.lineTo(c,f);l.stroke();return this};a.Graphics2D.prototype.point=function(d,k){var h=this.drawingContext,f=h.strokeStyle,l=h.fillStyle;if(!this._pInst._doStroke||"rgba(0,0,0,0)"===h.strokeStyle)return this;d=Math.round(d);k=Math.round(k);h.fillStyle=f;1<h.lineWidth?(h.beginPath(),h.arc(d,k,h.lineWidth/2,0,c.TWO_PI,!1),h.fill()):h.fillRect(d,k,1,1);h.fillStyle=l};a.Graphics2D.prototype.quad=function(d,k,c,f,l,h,g,a){var e=this.drawingContext,
u=this._pInst._doFill,z=this._pInst._doStroke;if(u&&!z){if("rgba(0,0,0,0)"===e.fillStyle)return this}else if(!u&&z&&"rgba(0,0,0,0)"===e.strokeStyle)return this;e.beginPath();e.moveTo(d,k);e.lineTo(c,f);e.lineTo(l,h);e.lineTo(g,a);e.closePath();u&&e.fill();z&&e.stroke();return this};a.Graphics2D.prototype.rect=function(d,k,c,f,l,h,a,e){var r=this.drawingContext,u=this._pInst._doFill,z=this._pInst._doStroke;if(u&&!z){if("rgba(0,0,0,0)"===r.fillStyle)return this}else if(!u&&z&&"rgba(0,0,0,0)"===r.strokeStyle)return this;
f=g.modeAdjust(d,k,c,f,this._pInst._rectMode);this._pInst._doStroke&&1===r.lineWidth%2&&r.translate(.5,.5);r.beginPath();"undefined"===typeof l?r.rect(f.x,f.y,f.w,f.h):("undefined"===typeof h&&(h=l),"undefined"===typeof a&&(a=h),"undefined"===typeof e&&(e=a),d=f.x,k=f.y,c=f.w,f=f.h,u=c/2,z=f/2,c<2*l&&(l=u),f<2*l&&(l=z),c<2*h&&(h=u),f<2*h&&(h=z),c<2*a&&(a=u),f<2*a&&(a=z),c<2*e&&(e=u),f<2*e&&(e=z),r.beginPath(),r.moveTo(d+l,k),r.arcTo(d+c,k,d+c,k+f,h),r.arcTo(d+c,k+f,d,k+f,a),r.arcTo(d,k+f,d,k,e),r.arcTo(d,
k,d+c,k,l),r.closePath());this._pInst._doFill&&r.fill();this._pInst._doStroke&&r.stroke();this._pInst._doStroke&&1===r.lineWidth%2&&r.translate(-.5,-.5);return this};a.Graphics2D.prototype.triangle=function(d,k,c,f,l,h){var g=this.drawingContext,a=this._pInst._doFill,e=this._pInst._doStroke;if(a&&!e){if("rgba(0,0,0,0)"===g.fillStyle)return this}else if(!a&&e&&"rgba(0,0,0,0)"===g.strokeStyle)return this;g.beginPath();g.moveTo(d,k);g.lineTo(c,f);g.lineTo(l,h);g.closePath();a&&g.fill();e&&g.stroke()};
a.Graphics2D.prototype.endShape=function(d,k,h,f,l,g,a){if(0===k.length||!this._pInst._doStroke&&!this._pInst._doFill)return this;(d=d===c.CLOSE)&&!g&&k.push(k[0]);g=k.length;if(!h||a!==c.POLYGON&&null!==a)if(!f||a!==c.POLYGON&&null!==a)if(!l||a!==c.POLYGON&&null!==a)if(a===c.POINTS)for(f=0;f<g;f++)h=k[f],this._pInst._doStroke&&this._pInst.stroke(h[6]),this._pInst.point(h[0],h[1]);else if(a===c.LINES)for(f=0;f+1<g;f+=2)h=k[f],this._pInst._doStroke&&this._pInst.stroke(k[f+1][6]),this._pInst.line(h[0],
h[1],k[f+1][0],k[f+1][1]);else if(a===c.TRIANGLES)for(f=0;f+2<g;f+=3)h=k[f],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0],h[1]),this.drawingContext.lineTo(k[f+1][0],k[f+1][1]),this.drawingContext.lineTo(k[f+2][0],k[f+2][1]),this.drawingContext.lineTo(h[0],h[1]),this._pInst._doFill&&(this._pInst.fill(k[f+2][5]),this.drawingContext.fill()),this._pInst._doStroke&&(this._pInst.stroke(k[f+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(a===c.TRIANGLE_STRIP)for(f=
0;f+1<g;f++)h=k[f],this.drawingContext.beginPath(),this.drawingContext.moveTo(k[f+1][0],k[f+1][1]),this.drawingContext.lineTo(h[0],h[1]),this._pInst._doStroke&&this._pInst.stroke(k[f+1][6]),this._pInst._doFill&&this._pInst.fill(k[f+1][5]),f+2<g&&(this.drawingContext.lineTo(k[f+2][0],k[f+2][1]),this._pInst._doStroke&&this._pInst.stroke(k[f+2][6]),this._pInst._doFill&&this._pInst.fill(k[f+2][5])),this._doFillStrokeClose();else if(a===c.TRIANGLE_FAN){if(2<g)for(this.drawingContext.beginPath(),this.drawingContext.moveTo(k[0][0],
k[0][1]),this.drawingContext.lineTo(k[1][0],k[1][1]),this.drawingContext.lineTo(k[2][0],k[2][1]),this._pInst._doFill&&this._pInst.fill(k[2][5]),this._pInst._doStroke&&this._pInst.stroke(k[2][6]),this._doFillStrokeClose(),f=3;f<g;f++)h=k[f],this.drawingContext.beginPath(),this.drawingContext.moveTo(k[0][0],k[0][1]),this.drawingContext.lineTo(k[f-1][0],k[f-1][1]),this.drawingContext.lineTo(h[0],h[1]),this._pInst._doFill&&this._pInst.fill(h[5]),this._pInst._doStroke&&this._pInst.stroke(h[6]),this._doFillStrokeClose()}else if(a===
c.QUADS)for(f=0;f+3<g;f+=4){h=k[f];this.drawingContext.beginPath();this.drawingContext.moveTo(h[0],h[1]);for(l=1;4>l;l++)this.drawingContext.lineTo(k[f+l][0],k[f+l][1]);this.drawingContext.lineTo(h[0],h[1]);this._pInst._doFill&&this._pInst.fill(k[f+3][5]);this._pInst._doStroke&&this._pInst.stroke(k[f+3][6]);this._doFillStrokeClose()}else if(a===c.QUAD_STRIP){if(3<g)for(f=0;f+1<g;f+=2)h=k[f],this.drawingContext.beginPath(),f+3<g?(this.drawingContext.moveTo(k[f+2][0],k[f+2][1]),this.drawingContext.lineTo(h[0],
h[1]),this.drawingContext.lineTo(k[f+1][0],k[f+1][1]),this.drawingContext.lineTo(k[f+3][0],k[f+3][1]),this._pInst._doFill&&this._pInst.fill(k[f+3][5]),this._pInst._doStroke&&this._pInst.stroke(k[f+3][6])):(this.drawingContext.moveTo(h[0],h[1]),this.drawingContext.lineTo(k[f+1][0],k[f+1][1])),this._doFillStrokeClose()}else{this.drawingContext.beginPath();this.drawingContext.moveTo(k[0][0],k[0][1]);for(f=1;f<g;f++)h=k[f],h.isVert&&(h.moveTo?this.drawingContext.moveTo(h[0],h[1]):this.drawingContext.lineTo(h[0],
h[1]));this._doFillStrokeClose()}else{this.drawingContext.beginPath();for(f=0;f<g;f++)k[f].isVert?k[f].moveTo?this.drawingContext.moveTo([0],k[f][1]):this.drawingContext.lineTo(k[f][0],k[f][1]):this.drawingContext.quadraticCurveTo(k[f][0],k[f][1],k[f][2],k[f][3]);this._doFillStrokeClose()}else{this.drawingContext.beginPath();for(f=0;f<g;f++)k[f].isVert?k[f].moveTo?this.drawingContext.moveTo(k[f][0],k[f][1]):this.drawingContext.lineTo(k[f][0],k[f][1]):this.drawingContext.bezierCurveTo(k[f][0],k[f][1],
k[f][2],k[f][3],k[f][4],k[f][5]);this._doFillStrokeClose()}else if(3<g){l=[];a=1-this._pInst._curveTightness;this.drawingContext.beginPath();this.drawingContext.moveTo(k[1][0],k[1][1]);for(f=1;f+2<g;f++)h=k[f],l[0]=[h[0],h[1]],l[1]=[h[0]+(a*k[f+1][0]-a*k[f-1][0])/6,h[1]+(a*k[f+1][1]-a*k[f-1][1])/6],l[2]=[k[f+1][0]+(a*k[f][0]-a*k[f+2][0])/6,k[f+1][1]+(a*k[f][1]-a*k[f+2][1])/6],l[3]=[k[f+1][0],k[f+1][1]],this.drawingContext.bezierCurveTo(l[1][0],l[1][1],l[2][0],l[2][1],l[3][0],l[3][1]);d&&this.drawingContext.lineTo(k[f+
1][0],k[f+1][1]);this._doFillStrokeClose()}d&&k.pop();return this};a.Graphics2D.prototype.noSmooth=function(){this.drawingContext.mozImageSmoothingEnabled=!1;this.drawingContext.webkitImageSmoothingEnabled=!1;return this};a.Graphics2D.prototype.smooth=function(){this.drawingContext.mozImageSmoothingEnabled=!0;this.drawingContext.webkitImageSmoothingEnabled=!0;return this};a.Graphics2D.prototype.strokeCap=function(d){if(d===c.ROUND||d===c.SQUARE||d===c.PROJECT)this.drawingContext.lineCap=d;return this};
a.Graphics2D.prototype.strokeJoin=function(d){if(d===c.ROUND||d===c.BEVEL||d===c.MITER)this.drawingContext.lineJoin=d;return this};a.Graphics2D.prototype.strokeWeight=function(d){this.drawingContext.lineWidth="undefined"===typeof d||0===d?1E-4:d;return this};a.Graphics2D.prototype._getFill=function(){return this.drawingContext.fillStyle};a.Graphics2D.prototype._getStroke=function(){return this.drawingContext.strokeStyle};a.Graphics2D.prototype.bezier=function(d,k,c,f,l,h,g,a){this._pInst.beginShape();
this._pInst.vertex(d,k);this._pInst.bezierVertex(c,f,l,h,g,a);this._pInst.endShape();return this};a.Graphics2D.prototype.curve=function(d,k,c,f,l,h,g,a){this._pInst.beginShape();this._pInst.curveVertex(d,k);this._pInst.curveVertex(c,f);this._pInst.curveVertex(l,h);this._pInst.curveVertex(g,a);this._pInst.endShape();return this};a.Graphics2D.prototype._doFillStrokeClose=function(){this._pInst._doFill&&this.drawingContext.fill();this._pInst._doStroke&&this.drawingContext.stroke();this.drawingContext.closePath()};
a.Graphics2D.prototype.applyMatrix=function(d,k,c,f,l,h){this.drawingContext.transform(d,k,c,f,l,h)};a.Graphics2D.prototype.resetMatrix=function(){this.drawingContext.setTransform(1,0,0,1,0,0);return this};a.Graphics2D.prototype.rotate=function(d){this.drawingContext.rotate(d)};a.Graphics2D.prototype.scale=function(){var d=1,k=1;1===arguments.length?d=k=arguments[0]:(d=arguments[0],k=arguments[1]);this.drawingContext.scale(d,k);return this};a.Graphics2D.prototype.shearX=function(d){this._pInst._angleMode===
c.DEGREES&&(d=this._pInst.radians(d));this.drawingContext.transform(1,0,this._pInst.tan(d),1,0,0);return this};a.Graphics2D.prototype.shearY=function(d){this._pInst._angleMode===c.DEGREES&&(d=this._pInst.radians(d));this.drawingContext.transform(1,this._pInst.tan(d),0,1,0,0);return this};a.Graphics2D.prototype.translate=function(d,k){this.drawingContext.translate(d,k);return this};a.Graphics2D.prototype.text=function(d,k,h,f,l){var g=this._pInst,a,e,r,u,z,x,w;if(g._doFill||g._doStroke){"string"!==
typeof d&&(d=d.toString());d=d.replace(/(\t)/g,"  ");d=d.split("\n");if("undefined"!==typeof f){for(e=w=0;e<d.length;e++)for(r="",x=d[e].split(" "),a=0;a<x.length;a++)u=r+x[a]+" ",z=this.textWidth(u),z>f?(r=x[a]+" ",w+=g.textLeading()):r=u;switch(this.drawingContext.textAlign){case c.CENTER:k+=f/2;break;case c.RIGHT:k+=f}if("undefined"!==typeof l)switch(this.drawingContext.textBaseline){case c.BOTTOM:h+=l-w;break;case c._CTX_MIDDLE:h+=(l-w)/2;break;case c.BASELINE:h+=l-w}for(e=0;e<d.length;e++){r=
"";x=d[e].split(" ");for(a=0;a<x.length;a++)u=r+x[a]+" ",z=this.textWidth(u),z>f?(this._renderText(g,r,k,h),r=x[a]+" ",h+=g.textLeading()):r=u;this._renderText(g,r,k,h);h+=g.textLeading()}}else for(f=0;f<d.length;f++)this._renderText(g,d[f],k,h),h+=g.textLeading();return g}};a.Graphics2D.prototype._renderText=function(d,k,h,f){if(d._isOpenType())return d._textFont.renderPath(k,h,f);d._doStroke&&d._strokeSet&&this.drawingContext.strokeText(k,h,f);d._doFill&&(this.drawingContext.fillStyle=d._fillSet?
this.drawingContext.fillStyle:c._DEFAULT_TEXT_FILL,this.drawingContext.fillText(k,h,f));return d};a.Graphics2D.prototype.textWidth=function(d){var k=this._pInst;return k._isOpenType()?k._textFont.textBounds(d,0,0).w:this.drawingContext.measureText(d).width};a.Graphics2D.prototype.textAlign=function(d,k){if(arguments.length){if(d===c.LEFT||d===c.RIGHT||d===c.CENTER)this.drawingContext.textAlign=d;if(k===c.TOP||k===c.BOTTOM||k===c.CENTER||k===c.BASELINE)this.drawingContext.textBaseline=k===c.CENTER?
c._CTX_MIDDLE:k;return this._pInst}var h=this.drawingContext.textBaseline;h===c._CTX_MIDDLE&&(h=c.CENTER);return{horizontal:this.drawingContext.textAlign,vertical:h}};a.Graphics2D.prototype._applyTextProperties=function(){var d,k=this._pInst;k._setProperty("_textAscent",null);k._setProperty("_textDescent",null);d=k._textFont;k._isOpenType()&&(d=k._textFont.font.familyName,k._setProperty("_textStyle",k._textFont.font.styleName));this.drawingContext.font=k._textStyle+" "+k._textSize+"px "+d;return k};
a.Graphics2D.prototype.push=function(){this.drawingContext.save()};a.Graphics2D.prototype.pop=function(){this.drawingContext.restore()};return a.Graphics2D}({},e.core,e.canvas,e.constants,e.filters,e.p5Graphics);e.shaders={defaultVertShader:"attribute vec3 a_VertexPosition;\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nvoid main(void) {\nvec3 zeroToOne = a_VertexPosition / 1000.0;\nvec3 zeroToTwo = zeroToOne * 2.0;\nvec3 clipSpace = zeroToTwo - 1.0;\ngl_Position = uPMatrix*uMVMatrix*vec4(clipSpace*vec3(1, -1, 1), 1.0);\n}",
defaultMatFragShader:"precision mediump float;\nuniform vec4 u_MaterialColor;\nvoid main(void) {\ngl_FragColor = u_MaterialColor;\n}"};e.mat4=function(e){var a="undefined"!==typeof Float32Array?Float32Array:Array;e={create:function(){var g=new a(16);g[0]=1;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=1;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=1;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;return g},clone:function(g){var c=new a(16);c[0]=g[0];c[1]=g[1];c[2]=g[2];c[3]=g[3];c[4]=g[4];c[5]=g[5];c[6]=g[6];c[7]=g[7];c[8]=g[8];
c[9]=g[9];c[10]=g[10];c[11]=g[11];c[12]=g[12];c[13]=g[13];c[14]=g[14];c[15]=g[15];return c},copy:function(g,c){g[0]=c[0];g[1]=c[1];g[2]=c[2];g[3]=c[3];g[4]=c[4];g[5]=c[5];g[6]=c[6];g[7]=c[7];g[8]=c[8];g[9]=c[9];g[10]=c[10];g[11]=c[11];g[12]=c[12];g[13]=c[13];g[14]=c[14];g[15]=c[15];return g},identity:function(g){g[0]=1;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=1;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=1;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;return g},transpose:function(g,c){if(g===c){var d=c[1],h=c[2],a=c[3],
k=c[6],m=c[7],f=c[11];g[1]=c[4];g[2]=c[8];g[3]=c[12];g[4]=d;g[6]=c[9];g[7]=c[13];g[8]=h;g[9]=k;g[11]=c[14];g[12]=a;g[13]=m;g[14]=f}else g[0]=c[0],g[1]=c[4],g[2]=c[8],g[3]=c[12],g[4]=c[1],g[5]=c[5],g[6]=c[9],g[7]=c[13],g[8]=c[2],g[9]=c[6],g[10]=c[10],g[11]=c[14],g[12]=c[3],g[13]=c[7],g[14]=c[11],g[15]=c[15];return g},invert:function(g,c){var d=c[0],h=c[1],a=c[2],k=c[3],m=c[4],f=c[5],l=c[6],t=c[7],e=c[8],q=c[9],r=c[10],u=c[11],z=c[12],x=c[13],w=c[14],y=c[15],v=d*f-h*m,n=d*l-a*m,B=d*t-k*m,D=h*l-a*f,
H=h*t-k*f,L=a*t-k*l,G=e*x-q*z,I=e*w-r*z,K=e*y-u*z,M=q*w-r*x,O=q*y-u*x,E=r*y-u*w,C=v*E-n*O+B*M+D*K-H*I+L*G;if(!C)return null;C=1/C;g[0]=(f*E-l*O+t*M)*C;g[1]=(a*O-h*E-k*M)*C;g[2]=(x*L-w*H+y*D)*C;g[3]=(r*H-q*L-u*D)*C;g[4]=(l*K-m*E-t*I)*C;g[5]=(d*E-a*K+k*I)*C;g[6]=(w*B-z*L-y*n)*C;g[7]=(e*L-r*B+u*n)*C;g[8]=(m*O-f*K+t*G)*C;g[9]=(h*K-d*O-k*G)*C;g[10]=(z*H-x*B+y*v)*C;g[11]=(q*B-e*H-u*v)*C;g[12]=(f*I-m*M-l*G)*C;g[13]=(d*M-h*I+a*G)*C;g[14]=(x*n-z*D-w*v)*C;g[15]=(e*D-q*n+r*v)*C;return g},adjoint:function(g,
c){var d=c[0],h=c[1],a=c[2],k=c[3],m=c[4],f=c[5],l=c[6],t=c[7],e=c[8],q=c[9],r=c[10],u=c[11],z=c[12],x=c[13],w=c[14],y=c[15];g[0]=f*(r*y-u*w)-q*(l*y-t*w)+x*(l*u-t*r);g[1]=-(h*(r*y-u*w)-q*(a*y-k*w)+x*(a*u-k*r));g[2]=h*(l*y-t*w)-f*(a*y-k*w)+x*(a*t-k*l);g[3]=-(h*(l*u-t*r)-f*(a*u-k*r)+q*(a*t-k*l));g[4]=-(m*(r*y-u*w)-e*(l*y-t*w)+z*(l*u-t*r));g[5]=d*(r*y-u*w)-e*(a*y-k*w)+z*(a*u-k*r);g[6]=-(d*(l*y-t*w)-m*(a*y-k*w)+z*(a*t-k*l));g[7]=d*(l*u-t*r)-m*(a*u-k*r)+e*(a*t-k*l);g[8]=m*(q*y-u*x)-e*(f*y-t*x)+z*(f*u-
t*q);g[9]=-(d*(q*y-u*x)-e*(h*y-k*x)+z*(h*u-k*q));g[10]=d*(f*y-t*x)-m*(h*y-k*x)+z*(h*t-k*f);g[11]=-(d*(f*u-t*q)-m*(h*u-k*q)+e*(h*t-k*f));g[12]=-(m*(q*w-r*x)-e*(f*w-l*x)+z*(f*r-l*q));g[13]=d*(q*w-r*x)-e*(h*w-a*x)+z*(h*r-a*q);g[14]=-(d*(f*w-l*x)-m*(h*w-a*x)+z*(h*l-a*f));g[15]=d*(f*r-l*q)-m*(h*r-a*q)+e*(h*l-a*f);return g},multiply:function(a,c,d){var h=c[0],p=c[1],k=c[2],m=c[3],f=c[4],l=c[5],t=c[6],e=c[7],q=c[8],r=c[9],u=c[10],z=c[11],x=c[12],w=c[13],y=c[14];c=c[15];var v=d[0],n=d[1],B=d[2],D=d[3];a[0]=
v*h+n*f+B*q+D*x;a[1]=v*p+n*l+B*r+D*w;a[2]=v*k+n*t+B*u+D*y;a[3]=v*m+n*e+B*z+D*c;v=d[4];n=d[5];B=d[6];D=d[7];a[4]=v*h+n*f+B*q+D*x;a[5]=v*p+n*l+B*r+D*w;a[6]=v*k+n*t+B*u+D*y;a[7]=v*m+n*e+B*z+D*c;v=d[8];n=d[9];B=d[10];D=d[11];a[8]=v*h+n*f+B*q+D*x;a[9]=v*p+n*l+B*r+D*w;a[10]=v*k+n*t+B*u+D*y;a[11]=v*m+n*e+B*z+D*c;v=d[12];n=d[13];B=d[14];D=d[15];a[12]=v*h+n*f+B*q+D*x;a[13]=v*p+n*l+B*r+D*w;a[14]=v*k+n*t+B*u+D*y;a[15]=v*m+n*e+B*z+D*c;return a}};e.mul=e.multiply;e.translate=function(a,c,d){var h=d[0],p=d[1];
d=d[2];var k,m,f,l,t,e,q,r,u,z,x,n;c===a?(a[12]=c[0]*h+c[4]*p+c[8]*d+c[12],a[13]=c[1]*h+c[5]*p+c[9]*d+c[13],a[14]=c[2]*h+c[6]*p+c[10]*d+c[14],a[15]=c[3]*h+c[7]*p+c[11]*d+c[15]):(k=c[0],m=c[1],f=c[2],l=c[3],t=c[4],e=c[5],q=c[6],r=c[7],u=c[8],z=c[9],x=c[10],n=c[11],a[0]=k,a[1]=m,a[2]=f,a[3]=l,a[4]=t,a[5]=e,a[6]=q,a[7]=r,a[8]=u,a[9]=z,a[10]=x,a[11]=n,a[12]=k*h+t*p+u*d+c[12],a[13]=m*h+e*p+z*d+c[13],a[14]=f*h+q*p+x*d+c[14],a[15]=l*h+r*p+n*d+c[15]);return a};e.scale=function(a,c,d){var h=d[0],p=d[1];d=
d[2];a[0]=c[0]*h;a[1]=c[1]*h;a[2]=c[2]*h;a[3]=c[3]*h;a[4]=c[4]*p;a[5]=c[5]*p;a[6]=c[6]*p;a[7]=c[7]*p;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};e.rotate=function(a,c,d,h){var p=h[0],k=h[1];h=h[2];var m=Math.sqrt(p*p+k*k+h*h),f,l,t,e,q,r,u,z,n,w,y,v,A,B,D,H,L,G,I,K;if(1E-6>Math.abs(m))return null;m=1/m;p*=m;k*=m;h*=m;f=Math.sin(d);l=Math.cos(d);t=1-l;d=c[0];m=c[1];e=c[2];q=c[3];r=c[4];u=c[5];z=c[6];n=c[7];w=c[8];y=c[9];v=c[10];A=c[11];
B=p*p*t+l;D=k*p*t+h*f;H=h*p*t-k*f;L=p*k*t-h*f;G=k*k*t+l;I=h*k*t+p*f;K=p*h*t+k*f;p=k*h*t-p*f;k=h*h*t+l;a[0]=d*B+r*D+w*H;a[1]=m*B+u*D+y*H;a[2]=e*B+z*D+v*H;a[3]=q*B+n*D+A*H;a[4]=d*L+r*G+w*I;a[5]=m*L+u*G+y*I;a[6]=e*L+z*G+v*I;a[7]=q*L+n*G+A*I;a[8]=d*K+r*p+w*k;a[9]=m*K+u*p+y*k;a[10]=e*K+z*p+v*k;a[11]=q*K+n*p+A*k;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};e.rotateX=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var p=c[4],k=c[5],m=c[6],f=c[7],l=c[8],t=c[9],e=c[10],q=c[11];c!==a&&
(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=p*d+l*h;a[5]=k*d+t*h;a[6]=m*d+e*h;a[7]=f*d+q*h;a[8]=l*d-p*h;a[9]=t*d-k*h;a[10]=e*d-m*h;a[11]=q*d-f*h;return a};e.rotateY=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var p=c[0],k=c[1],m=c[2],f=c[3],l=c[8],t=c[9],e=c[10],q=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=p*d-l*h;a[1]=k*d-t*h;a[2]=m*d-e*h;a[3]=f*d-q*h;a[8]=p*h+l*d;a[9]=k*h+t*d;
a[10]=m*h+e*d;a[11]=f*h+q*d;return a};e.rotateZ=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var p=c[0],k=c[1],m=c[2],f=c[3],l=c[4],t=c[5],e=c[6],q=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=p*d+l*h;a[1]=k*d+t*h;a[2]=m*d+e*h;a[3]=f*d+q*h;a[4]=l*d-p*h;a[5]=t*d-k*h;a[6]=e*d-m*h;a[7]=q*d-f*h;return a};e.frustum=function(a,c,d,h,p,k,m){var f=1/(d-c),l=1/(p-h),t=1/(k-m);a[0]=2*k*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*k*l;a[6]=0;a[7]=
0;a[8]=(d+c)*f;a[9]=(p+h)*l;a[10]=(m+k)*t;a[11]=-1;a[12]=0;a[13]=0;a[14]=m*k*2*t;a[15]=0;return a};e.perspective=function(a,c,d,h,p){c=1/Math.tan(c/2);var k=1/(h-p);a[0]=c/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(p+h)*k;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*p*h*k;a[15]=0;return a};e.ortho=function(a,c,d,h,p,k,m){var f=1/(c-d),l=1/(h-p),t=1/(k-m);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*t;a[11]=0;a[12]=(c+d)*f;a[13]=(p+h)*l;a[14]=
(m+k)*t;a[15]=1;return a};return e}({});e.p5Graphics3D=function(e,a,g,c,d){var h,p,k,m,f=[],l={alpha:!1,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};a.Graphics3D=function(f,d,k){a.Graphics.call(this,f,d,k);try{this.drawingContext=this.canvas.getContext("webgl",l)||this.canvas.getContext("experimental-webgl",l);if(null===this.drawingContext)throw"Error creating webgl context";console.log("p5.Graphics3d: enabled webgl context")}catch(c){console.error(c)}this._pInst._setProperty("_graphics",
this);this.isP3D=!0;h=this.drawingContext;h.clearColor(1,1,1,1);h.clearDepth(1);h.enable(h.DEPTH_TEST);h.depthFunc(h.LEQUAL);h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);h.viewport(0,0,this.width*this._pInst.pixelDensity,this.height*this._pInst.pixelDensity);this.initShaders();this.initMatrix();return this};a.Graphics3D.prototype=Object.create(a.Graphics.prototype);a.Graphics3D.prototype.initShaders=function(){var f=h.createShader(h.VERTEX_SHADER);h.shaderSource(f,g.defaultVertShader);h.compileShader(f);
if(!h.getShaderParameter(f,h.COMPILE_STATUS))return alert("Yikes! An error occurred compiling the shaders:"+h.getShaderInfoLog(f)),null;var d=h.createShader(h.FRAGMENT_SHADER);h.shaderSource(d,g.defaultMatFragShader);h.compileShader(d);if(!h.getShaderParameter(d,h.COMPILE_STATUS))return alert("Darn! An error occurred compiling the shaders:"+h.getShaderInfoLog(d)),null;p=h.createProgram();h.attachShader(p,f);h.attachShader(p,d);h.linkProgram(p);h.getProgramParameter(p,h.LINK_STATUS)||alert("Snap! Error linking shader program");
h.useProgram(p);p.vertexPositionAttribute=h.getAttribLocation(p,"a_VertexPosition");h.enableVertexAttribArray(p.vertexPositionAttribute);p.pMatrixUniform=h.getUniformLocation(p,"uPMatrix");p.mvMatrixUniform=h.getUniformLocation(p,"uMVMatrix");p.uMaterialColorLoc=h.getUniformLocation(p,"u_MaterialColor");h.uniform4f(p.uMaterialColorLoc,1,1,1,1)};a.Graphics3D.prototype.initMatrix=function(){k=d.create();m=d.create();d.perspective(m,60/180*Math.PI,this.width/this.height,.1,100)};a.Graphics3D.prototype.resetMatrix=
function(){d.identity(k)};a.Graphics3D.prototype.background=function(){var f=this._pInst.color.apply(this._pInst,arguments);h.clearColor(f.color_array[0]/255,f.color_array[1]/255,f.color_array[2]/255,f.color_array[3]/255);h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT)};a.Graphics3D.prototype.stroke=function(){this._stroke=this._pInst.color.apply(this._pInst,arguments)};a.Graphics3D.prototype.drawGeometry=function(f){var d=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,d);h.bufferData(h.ARRAY_BUFFER,
new Float32Array(f),h.STATIC_DRAW);h.vertexAttribPointer(p.vertexPositionAttribute,3,h.FLOAT,!1,0,0);h.uniformMatrix4fv(p.pMatrixUniform,!1,m);h.uniformMatrix4fv(p.mvMatrixUniform,!1,k);h.drawArrays(h.TRIANGLES,0,f.length/3);return this};a.Graphics3D.prototype.translate=function(f,c,a){d.translate(k,k,[f,c,a]);return this};a.Graphics3D.prototype.scale=function(f,c,a){d.scale(k,k,[f,c,a]);return this};a.Graphics3D.prototype.rotateX=function(f){d.rotateX(k,k,f);return this};a.Graphics3D.prototype.rotateY=
function(f){d.rotateY(k,k,f);return this};a.Graphics3D.prototype.rotateZ=function(f){d.rotateZ(k,k,f);return this};a.Graphics3D.prototype.push=function(){var c=d.create();d.copy(c,k);f.push(c)};a.Graphics3D.prototype.pop=function(){if(0===f.length)throw"Invalid popMatrix!";k=f.pop()};return a.Graphics3D}({},e.core,e.shaders,e.p5Graphics,e.mat4);e.p5Image=function(e,a,g){a.Image=function(c,d){this.width=c;this.height=d;this.canvas=document.createElement("canvas");this.canvas.width=this.width;this.canvas.height=
this.height;this.drawingContext=this.canvas.getContext("2d");this.pixelDensity=1;this.pixels=[]};a.Image.prototype._setProperty=function(c,d){this[c]=d};a.Image.prototype.loadPixels=function(){a.Graphics2D.prototype.loadPixels.call(this)};a.Image.prototype.updatePixels=function(c,d,h,g){a.Graphics2D.prototype.updatePixels.call(this,c,d,h,g)};a.Image.prototype.get=function(c,d,h,g){return a.Graphics2D.prototype.get.call(this,c,d,h,g)};a.Image.prototype.set=function(c,d,h){a.Graphics2D.prototype.set.call(this,
c,d,h)};a.Image.prototype.resize=function(c,d){c=c||this.canvas.width;d=d||this.canvas.height;var a=document.createElement("canvas");a.width=c;a.height=d;a.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,a.width,a.height);this.canvas.width=this.width=c;this.canvas.height=this.height=d;this.drawingContext.drawImage(a,0,0,c,d,0,0,c,d);0<this.pixels.length&&this.loadPixels()};a.Image.prototype.copy=function(){a.prototype.copy.apply(this,arguments)};a.Image.prototype.mask=
function(c){void 0===c&&(c=this);var d=this.drawingContext.globalCompositeOperation,h=1;c instanceof a.Graphics&&(h=c._pInst.pixelDensity);c=[c,0,0,h*c.width,h*c.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in";this.copy.apply(this,c);this.drawingContext.globalCompositeOperation=d};a.Image.prototype.filter=function(c,d){g.apply(this.canvas,g[c.toLowerCase()],d)};a.Image.prototype.blend=function(){a.prototype.blend.apply(this,arguments)};a.Image.prototype.save=
function(c,d){var h;if(d)switch(d.toLowerCase()){case "png":h="image/png";break;case "jpeg":h="image/jpeg";break;case "jpg":h="image/jpeg";break;default:h="image/png"}else d="png",h="image/png";var g=this.canvas.toDataURL(h),g=g.replace(h,"image/octet-stream");a.prototype.downloadFile(g,c,d)};return a.Image}({},e.core,e.filters);e.polargeometry=function(e){return{degreesToRadians:function(a){return 2*Math.PI*a/360},radiansToDegrees:function(a){return 360*a/(2*Math.PI)}}}({});e.p5Vector=function(e,
a,g,c){a.Vector=function(d,c,g){var k;d instanceof a?(this.p5=d,d=c[0]||0,k=c[1]||0,c=c[2]||0):(d=d||0,k=c||0,c=g||0);this.x=d;this.y=k;this.z=c};a.Vector.prototype.set=function(d,c,g){if(d instanceof a.Vector)return this.x=d.x||0,this.y=d.y||0,this.z=d.z||0,this;if(d instanceof Array)return this.x=d[0]||0,this.y=d[1]||0,this.z=d[2]||0,this;this.x=d||0;this.y=c||0;this.z=g||0;return this};a.Vector.prototype.copy=function(){return this.p5?new a.Vector(this.p5,[this.x,this.y,this.z]):new a.Vector(this.x,
this.y,this.z)};a.Vector.prototype.add=function(d,c,g){if(d instanceof a.Vector)return this.x+=d.x||0,this.y+=d.y||0,this.z+=d.z||0,this;if(d instanceof Array)return this.x+=d[0]||0,this.y+=d[1]||0,this.z+=d[2]||0,this;this.x+=d||0;this.y+=c||0;this.z+=g||0;return this};a.Vector.prototype.sub=function(d,c,g){if(d instanceof a.Vector)return this.x-=d.x||0,this.y-=d.y||0,this.z-=d.z||0,this;if(d instanceof Array)return this.x-=d[0]||0,this.y-=d[1]||0,this.z-=d[2]||0,this;this.x-=d||0;this.y-=c||0;this.z-=
g||0;return this};a.Vector.prototype.mult=function(d){this.x*=d||0;this.y*=d||0;this.z*=d||0;return this};a.Vector.prototype.div=function(d){this.x/=d;this.y/=d;this.z/=d;return this};a.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())};a.Vector.prototype.magSq=function(){var d=this.x,c=this.y,a=this.z;return d*d+c*c+a*a};a.Vector.prototype.dot=function(d,c,g){return d instanceof a.Vector?this.dot(d.x,d.y,d.z):this.x*(d||0)+this.y*(c||0)+this.z*(g||0)};a.Vector.prototype.cross=function(d){var c=
this.y*d.z-this.z*d.y,g=this.z*d.x-this.x*d.z;d=this.x*d.y-this.y*d.x;return this.p5?new a.Vector(this.p5,[c,g,d]):new a.Vector(c,g,d)};a.Vector.prototype.dist=function(d){return d.copy().sub(this).mag()};a.Vector.prototype.normalize=function(){return this.div(this.mag())};a.Vector.prototype.limit=function(d){var c=this.magSq();c>d*d&&(this.div(Math.sqrt(c)),this.mult(d));return this};a.Vector.prototype.setMag=function(d){return this.normalize().mult(d)};a.Vector.prototype.heading=function(){var d=
Math.atan2(this.y,this.x);return this.p5?this.p5._angleMode===c.RADIANS?d:g.radiansToDegrees(d):d};a.Vector.prototype.rotate=function(d){this.p5&&this.p5._angleMode===c.DEGREES&&(d=g.degreesToRadians(d));d=this.heading()+d;var a=this.mag();this.x=Math.cos(d)*a;this.y=Math.sin(d)*a;return this};a.Vector.prototype.lerp=function(d,c,g,k){if(d instanceof a.Vector)return this.lerp(d.x,d.y,d.z,c);this.x+=(d-this.x)*k||0;this.y+=(c-this.y)*k||0;this.z+=(g-this.z)*k||0;return this};a.Vector.prototype.array=
function(){return[this.x||0,this.y||0,this.z||0]};a.Vector.prototype.equals=function(d,c,g){d instanceof a.Vector?(d=d.x||0,c=d.y||0,g=d.z||0):d instanceof Array?(d=d[0]||0,c=d[1]||0,g=d[2]||0):(d=d||0,c=c||0,g=g||0);return this.x===d&&this.y===c&&this.z===g};a.Vector.fromAngle=function(d){this.p5&&this.p5._angleMode===c.DEGREES&&(d=g.degreesToRadians(d));return this.p5?new a.Vector(this.p5,[Math.cos(d),Math.sin(d),0]):new a.Vector(Math.cos(d),Math.sin(d),0)};a.Vector.random2D=function(){var d;d=
this.p5?this.p5._angleMode===c.DEGREES?this.p5.random(360):this.p5.random(c.TWO_PI):Math.random()*Math.PI*2;return this.fromAngle(d)};a.Vector.random3D=function(){var d,h;this.p5?(d=this.p5.random(0,c.TWO_PI),h=this.p5.random(-1,1)):(d=Math.random()*Math.PI*2,h=2*Math.random()-1);var g=Math.sqrt(1-h*h)*Math.cos(d);d=Math.sqrt(1-h*h)*Math.sin(d);return this.p5?new a.Vector(this.p5,[g,d,h]):new a.Vector(g,d,h)};a.Vector.add=function(d,c,a){a?a.set(d):a=d.copy();a.add(c);return a};a.Vector.sub=function(d,
c,a){a?a.set(d):a=d.copy();a.sub(c);return a};a.Vector.mult=function(d,c,a){a?a.set(d):a=d.copy();a.mult(c);return a};a.Vector.div=function(d,c,a){a?a.set(d):a=d.copy();a.div(c);return a};a.Vector.dot=function(d,c){return d.dot(c)};a.Vector.cross=function(d,c){return d.cross(c)};a.Vector.dist=function(d,c){return d.dist(c)};a.Vector.lerp=function(d,c,a,k){k?k.set(d):k=d.copy();k.lerp(c,a);return k};a.Vector.angleBetween=function(d,a){var e=Math.acos(d.dot(a)/(d.mag()*a.mag()));this.p5&&this.p5._angleMode===
c.DEGREES&&(e=g.radiansToDegrees(e));return e};return a.Vector}({},e.core,e.polargeometry,e.constants);e.p5TableRow=function(e,a){a.TableRow=function(a,c){var d=[],h={};a&&(d=a.split(c||","));for(var e=0;e<d.length;e++)h[e]=d[e];this.arr=d;this.obj=h;this.table=null};a.TableRow.prototype.set=function(a,c){if("string"===typeof a){var d=this.table.columns.indexOf(a);if(0<=d)this.obj[a]=c,this.arr[d]=c;else throw'This table has no column named "'+a+'"';}else if(a<this.table.columns.length)this.arr[a]=
c,this.obj[this.table.columns[a]]=c;else throw"Column #"+a+" is out of the range of this table";};a.TableRow.prototype.setNum=function(a,c){var d=parseFloat(c,10);this.set(a,d)};a.TableRow.prototype.setString=function(a,c){this.set(a,c.toString())};a.TableRow.prototype.get=function(a){return"string"===typeof a?this.obj[a]:this.arr[a]};a.TableRow.prototype.getNum=function(a){var c;c="string"===typeof a?parseFloat(this.obj[a],10):parseFloat(this.arr[a],10);if("NaN"===c.toString())throw"Error: "+this.obj[a]+
" is NaN (Not a Number)";return c};a.TableRow.prototype.getString=function(a){return"string"===typeof a?this.obj[a].toString():this.arr[a].toString()};return a.TableRow}({},e.core);e.p5Table=function(e,a){a.Table=function(a){this.columns=[];this.rows=[]};a.Table.prototype.addRow=function(g){g=g||new a.TableRow;if("undefined"===typeof g.arr||"undefined"===typeof g.obj)throw"invalid TableRow: "+g;g.table=this;this.rows.push(g);return g};a.Table.prototype.removeRow=function(a){this.rows[a].table=null;
a=this.rows.splice(a+1,this.rows.length);this.rows.pop();this.rows=this.rows.concat(a)};a.Table.prototype.getRow=function(a){return this.rows[a]};a.Table.prototype.getRows=function(){return this.rows};a.Table.prototype.findRow=function(a,c){if("string"===typeof c)for(var d=0;d<this.rows.length;d++){if(this.rows[d].obj[c]===a)return this.rows[d]}else for(d=0;d<this.rows.length;d++)if(this.rows[d].arr[c]===a)return this.rows[d];return null};a.Table.prototype.findRows=function(a,c){var d=[];if("string"===
typeof c)for(var h=0;h<this.rows.length;h++)this.rows[h].obj[c]===a&&d.push(this.rows[h]);else for(h=0;h<this.rows.length;h++)this.rows[h].arr[c]===a&&d.push(this.rows[h]);return d};a.Table.prototype.matchRow=function(a,c){if("number"===typeof c)for(var d=0;d<this.rows.length;d++){if(this.rows[d].arr[c].match(a))return this.rows[d]}else for(d=0;d<this.rows.length;d++)if(this.rows[d].obj[c].match(a))return this.rows[d];return null};a.Table.prototype.matchRows=function(a,c){var d=[];if("number"===typeof c)for(var h=
0;h<this.rows.length;h++)this.rows[h].arr[c].match(a)&&d.push(this.rows[h]);else for(h=0;h<this.rows.length;h++)this.rows[h].obj[c].match(a)&&d.push(this.rows[h]);return d};a.Table.prototype.getColumn=function(a){var c=[];if("string"===typeof a)for(var d=0;d<this.rows.length;d++)c.push(this.rows[d].obj[a]);else for(d=0;d<this.rows.length;d++)c.push(this.rows[d].arr[a]);return c};a.Table.prototype.clearRows=function(){delete this.rows;this.rows=[]};a.Table.prototype.addColumn=function(a){this.columns.push(a||
null)};a.Table.prototype.getColumnCount=function(){return this.columns.length};a.Table.prototype.getRowCount=function(){return this.rows.length};a.Table.prototype.removeTokens=function(a,c){for(var d=function(d){return d.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},h=[],e=0;e<a.length;e++)h.push(d(a.charAt(e)));d=new RegExp(h.join("|"),"g");if("undefined"===typeof c)for(h=0;h<this.columns.length;h++)for(e=0;e<this.rows.length;e++){var k=this.rows[e].arr[h],k=k.replace(d,"");this.rows[e].arr[h]=k;this.rows[e].obj[this.columns[h]]=
k}else if("string"===typeof c)for(h=0;h<this.rows.length;h++)e=this.rows[h].obj[c],e=e.replace(d,""),this.rows[h].obj[c]=e,k=this.columns.indexOf(c),this.rows[h].arr[k]=e;else for(h=0;h<this.rows.length;h++)e=this.rows[h].arr[c],e=e.replace(d,""),this.rows[h].arr[c]=e,this.rows[h].obj[this.columns[c]]=e};a.Table.prototype.trim=function(a){var c=RegExp(" ","g");if("undefined"===typeof a)for(a=0;a<this.columns.length;a++)for(var d=0;d<this.rows.length;d++){var h=this.rows[d].arr[a],h=h.replace(c,"");
this.rows[d].arr[a]=h;this.rows[d].obj[this.columns[a]]=h}else if("string"===typeof a)for(d=0;d<this.rows.length;d++){h=this.rows[d].obj[a];h=h.replace(c,"");this.rows[d].obj[a]=h;var e=this.columns.indexOf(a);this.rows[d].arr[e]=h}else for(d=0;d<this.rows.length;d++)h=this.rows[d].arr[a],h=h.replace(c,""),this.rows[d].arr[a]=h,this.rows[d].obj[this.columns[a]]=h};a.Table.prototype.removeColumn=function(a){var c,d;"string"===typeof a?(c=a,d=this.columns.indexOf(a),console.log("string")):(d=a,c=this.columns[a]);
a=this.columns.splice(d+1,this.columns.length);this.columns.pop();this.columns=this.columns.concat(a);for(a=0;a<this.rows.length;a++){var h=this.rows[a].arr,e=h.splice(d+1,h.length);h.pop();this.rows[a].arr=h.concat(e);delete this.rows[a].obj[c]}};a.Table.prototype.set=function(a,c,d){this.rows[a].set(c,d)};a.Table.prototype.setNum=function(a,c,d){this.rows[a].set(c,d)};a.Table.prototype.setString=function(a,c,d){this.rows[a].set(c,d)};a.Table.prototype.get=function(a,c){return this.rows[a].get(c)};
a.Table.prototype.getNum=function(a,c){return this.rows[a].getNum(c)};a.Table.prototype.getString=function(a,c){return this.rows[a].getString(c)};a.Table.prototype.getObject=function(a){for(var c={},d,h,e=0;e<this.rows.length;e++)if(d=this.rows[e].obj,"string"===typeof a)if(h=this.columns.indexOf(a),0<=h)h=d[a],c[h]=d;else throw'This table has no column named "'+a+'"';else c[e]=this.rows[e].obj;return c};a.Table.prototype.getArray=function(){for(var a=[],c=0;c<this.rows.length;c++)a.push(this.rows[c].arr);
return a};return a.Table}({},e.core);e.colorcreating_reading=function(e,a,g){a.prototype.alpha=function(c){if(c instanceof a.Color||c instanceof Array)return this.color(c).getAlpha();throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.blue=function(c){if(c instanceof a.Color||c instanceof Array)return this.color(c).getBlue();throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.brightness=function(c){if(c instanceof a.Color||c instanceof Array)return this.color(c).getBrightness();
throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.color=function(){if(arguments[0]instanceof a.Color)return arguments[0];if(arguments[0]instanceof Array)return new a.Color(this,arguments[0]);var c=Array.prototype.slice.call(arguments);return new a.Color(this,c)};a.prototype.green=function(c){if(c instanceof a.Color||c instanceof Array)return this.color(c).getGreen();throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.hue=function(c){if(!c instanceof a.Color)throw Error("Needs p5.Color as argument.");
return c.getHue()};a.prototype.lerpColor=function(c,d,h){h=Math.max(Math.min(h,1),0);if(c instanceof Array){for(var e=[],k=0;k<c.length;k++)e.push(Math.sqrt(a.prototype.lerp(c[k]*c[k],d[k]*d[k],h)));return e}if(c instanceof a.Color){e=[];for(k=0;4>k;k++)e.push(Math.sqrt(a.prototype.lerp(c.rgba[k]*c.rgba[k],d.rgba[k]*d.rgba[k],h)));return new a.Color(this,e)}return Math.sqrt(a.prototype.lerp(c*c,d*d,h))};a.prototype.red=function(c){if(c instanceof a.Color||c instanceof Array)return this.color(c).getRed();
throw Error("Needs p5.Color or pixel array as argument.");};a.prototype.saturation=function(c){if(!c instanceof a.Color)throw Error("Needs p5.Color as argument.");return c.getSaturation()};return a}({},e.core,e.p5Color);e.colorsetting=function(e,a,g,c){a.prototype._doStroke=!0;a.prototype._doFill=!0;a.prototype._strokeSet=!1;a.prototype._fillSet=!1;a.prototype._colorMode=g.RGB;a.prototype._maxRGB=[255,255,255,255];a.prototype._maxHSB=[255,255,255,255];a.prototype.background=function(){arguments[0]instanceof
a.Image?this.image(arguments[0],0,0,this.width,this.height):this._graphics.background.apply(this._graphics,arguments);return this};a.prototype.clear=function(){this._graphics.clear();return this};a.prototype.colorMode=function(){if(arguments[0]===g.RGB||arguments[0]===g.HSB){this._colorMode=arguments[0];var d=this._colorMode===g.RGB?this._maxRGB:this._maxHSB;2===arguments.length?(d[0]=arguments[1],d[1]=arguments[1],d[2]=arguments[1],d[3]=arguments[1]):2<arguments.length&&(d[0]=arguments[1],d[1]=arguments[2],
d[2]=arguments[3]);5===arguments.length&&(d[3]=arguments[4])}return this};a.prototype.fill=function(){this._setProperty("_fillSet",!0);this._setProperty("_doFill",!0);this._graphics.fill.apply(this._graphics,arguments);return this};a.prototype.noFill=function(){this._setProperty("_doFill",!1);return this};a.prototype.noStroke=function(){this._setProperty("_doStroke",!1);return this};a.prototype.stroke=function(){this._setProperty("_strokeSet",!0);this._setProperty("_doStroke",!0);this._graphics.stroke.apply(this._graphics,
arguments);return this};return a}({},e.core,e.constants,e.p5Color);e.dataconversion=function(e,a){a.prototype["float"]=function(a){return parseFloat(a)};a.prototype["int"]=function(e,c){if("string"===typeof e)return c=c||10,parseInt(e,c);if("number"===typeof e)return e|0;if("boolean"===typeof e)return e?1:0;if(e instanceof Array)return e.map(function(d){return a.prototype["int"](d,c)})};a.prototype.str=function(e){return e instanceof Array?e.map(a.prototype.str):String(e)};a.prototype["boolean"]=
function(e){if("number"===typeof e)return 0!==e;if("string"===typeof e)return"true"===e.toLowerCase();if("boolean"===typeof e)return e;if(e instanceof Array)return e.map(a.prototype["boolean"])};a.prototype["byte"]=function(e){e=a.prototype["int"](e,10);if("number"===typeof e)return(e+128)%256-128;if(e instanceof Array)return e.map(a.prototype["byte"])};a.prototype["char"]=function(e){if("number"!==typeof e||isNaN(e)){if(e instanceof Array)return e.map(a.prototype["char"]);if("string"===typeof e)return a.prototype["char"](parseInt(e,
10))}else return String.fromCharCode(e)};a.prototype.unchar=function(e){if("string"===typeof e&&1===e.length)return e.charCodeAt(0);if(e instanceof Array)return e.map(a.prototype.unchar)};a.prototype.hex=function(e,c){c=void 0===c||null===c?c=8:c;if(e instanceof Array)return e.map(function(d){return a.prototype.hex(d,c)});if("number"===typeof e){0>e&&(e=4294967295+e+1);for(var d=Number(e).toString(16).toUpperCase();d.length<c;)d="0"+d;d.length>=c&&(d=d.substring(d.length-c,d.length));return d}};a.prototype.unhex=
function(e){return e instanceof Array?e.map(a.prototype.unhex):parseInt("0x"+e,16)};return a}({},e.core);e.dataarray_functions=function(e,a){a.prototype.append=function(a,c){a.push(c);return a};a.prototype.arrayCopy=function(a,c,d,h,e){"undefined"!==typeof e?(e=Math.min(e,a.length),a=a.slice(c,e+c)):(e="undefined"!==typeof d?Math.min(d,a.length):a.length,h=0,d=c,a=a.slice(0,e));Array.prototype.splice.apply(d,[h,e].concat(a))};a.prototype.concat=function(a,c){return a.concat(c)};a.prototype.reverse=
function(a){return a.reverse()};a.prototype.shorten=function(a){a.pop();return a};a.prototype.shuffle=function(a,c){a=c||ArrayBuffer.isView(a)?a:a.slice();for(var d,h,e=a.length;1<e;)d=Math.random()*e|0,h=a[--e],a[e]=a[d],a[d]=h;return a};a.prototype.sort=function(a,c){var d=c?a.slice(0,Math.min(c,a.length)):a,h=c?a.slice(Math.min(c,a.length)):[],d="string"===typeof d[0]?d.sort():d.sort(function(a,d){return a-d});return d.concat(h)};a.prototype.splice=function(a,c,d){Array.prototype.splice.apply(a,
[d,0].concat(c));return a};a.prototype.subset=function(a,c,d){return"undefined"!==typeof d?a.slice(c,c+d):a.slice(c,a.length)};return a}({},e.core);e.datastring_functions=function(e,a){function g(){var a=arguments[0],d=0>a,c=d?a.toString().substring(1):a.toString(),f=c.indexOf("."),a=-1!==f?c.substring(0,f):c,f=-1!==f?c.substring(f+1):"",d=d?"-":"";if(3===arguments.length){for(c=0;c<arguments[1]-a.length;c++)d+="0";d=d+a+".";d+=f;for(a=0;a<arguments[2]-f.length;a++)d+="0"}else{for(f=0;f<Math.max(arguments[1]-
a.length,0);f++)d+="0";d+=c}return d}function c(){var a=arguments[0].toString(),d=a.indexOf("."),c=-1!==d?a.substring(d):"",a=-1!==d?a.substring(0,d):a,a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");0===arguments[1]&&(c="");1<arguments.length&&(c=c.substring(0,arguments[1]+1));return a+c}function d(a){return 0<parseFloat(a)?"+"+a.toString():a.toString()}function h(a){return 0<parseFloat(a)?" "+a.toString():a.toString()}a.prototype.join=function(a,d){return a.join(d)};a.prototype.match=function(a,
d){return a.match(d)};a.prototype.matchAll=function(a,d){for(var c=new RegExp(d,"g"),f=c.exec(a),l=[];null!==f;)l.push(f),f=c.exec(a);return l};a.prototype.nf=function(){if(arguments[0]instanceof Array){var a=arguments[1],d=arguments[2];return arguments[0].map(function(c){return g(c,a,d)})}return g.apply(this,arguments)};a.prototype.nfc=function(){if(arguments[0]instanceof Array){var a=arguments[1];return arguments[0].map(function(d){return c(d,a)})}return c.apply(this,arguments)};a.prototype.nfp=
function(){var a=this.nf.apply(this,arguments);return a instanceof Array?a.map(d):d(a)};a.prototype.nfs=function(){var a=this.nf.apply(this,arguments);return a instanceof Array?a.map(h):h(a)};a.prototype.split=function(a,d){return a.split(d)};a.prototype.splitTokens=function(){return arguments[0].split(0<arguments.length?arguments[1]:/\s/g).filter(function(a){return a})};a.prototype.trim=function(a){return a instanceof Array?a.map(this.trim):a.trim()};return a}({},e.core);e.environment=function(e,
a,g){var c=[g.ARROW,g.CROSS,g.HAND,g.MOVE,g.TEXT,g.WAIT];a.prototype._frameRate=0;a.prototype._lastFrameTime=(new Date).getTime();a.prototype._targetFrameRate=60;a.prototype.print=window.console&&console.log?function(a){a=JSON.parse(JSON.stringify(a));console.log(a)}:function(){};a.prototype.println=a.prototype.print;a.prototype.frameCount=0;a.prototype.focused=!0;a.prototype.cursor=function(a,h,e){var k="auto",m=this._curElement.elt;-1<c.indexOf(a)?k=a:"string"===typeof a&&(k="",h&&e&&"number"===
typeof h&&"number"===typeof e&&(k=h+" "+e),k="http://"!==a.substring(0,6)?"url("+a+") "+k+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(a)?"url("+a+") "+k+", auto":a);m.style.cursor=k};a.prototype.frameRate=function(a){if("undefined"===typeof a)return this._frameRate;this._setProperty("_targetFrameRate",a);this._runFrames();return this};a.prototype.getFrameRate=function(){return this.frameRate()};a.prototype.setFrameRate=function(a){return this.frameRate(a)};a.prototype.noCursor=
function(){this._curElement.elt.style.cursor="none"};a.prototype.displayWidth=screen.width;a.prototype.displayHeight=screen.height;a.prototype.windowWidth=window.innerWidth;a.prototype.windowHeight=window.innerHeight;a.prototype._onresize=function(a){this._setProperty("windowWidth",window.innerWidth);this._setProperty("windowHeight",window.innerHeight);var c=this._isGlobal?window:this;"function"===typeof c.windowResized&&(c=c.windowResized(a),void 0===c||c||a.preventDefault())};a.prototype.width=
0;a.prototype.height=0;a.prototype.fullscreen=function(a){if("undefined"===typeof a)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(a){a=document.documentElement;if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw Error("Fullscreen not enabled in this browser.");a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():
a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()};a.prototype.devicePixelScaling=function(a){this.pixelDensity=a?"number"===typeof a?a:window.devicePixelRatio||1:1;this.resizeCanvas(this.width,this.height,!0)};a.prototype.getURL=
function(){return location.href};a.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(a){return""!==a})};a.prototype.getURLParams=function(){for(var a=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,c,e={};null!=(c=a.exec(location.search));)c.index===a.lastIndex&&a.lastIndex++,e[c[1]]=c[2];return e};return a}({},e.core,e.constants);e.imageimage=function(e,a,g){a.prototype._imageMode=g.CORNER;a.prototype._tint=null;a.prototype.createImage=function(d,c){return new a.Image(d,c)};var c=
[];a.prototype.saveCanvas=function(d,c,e){e||(e=a.prototype._checkFileExtension(c,e)[1],""===e&&(e="png"));var k;d?k=d:this._curElement&&this._curElement.elt&&(k=this._curElement.elt);if(a.prototype._isSafari())c="Hello, Safari user!\nNow capturing a screenshot...\nTo save this image,\n",c+="go to File --\x3e Save As.\n",alert(c),window.location.href=k.toDataURL();else{if("undefined"===typeof e)e="png",d="image/png";else switch(e){case "png":d="image/png";break;case "jpeg":d="image/jpeg";break;case "jpg":d=
"image/jpeg";break;default:d="image/png"}k=k.toDataURL(d);k=k.replace(d,"image/octet-stream");a.prototype.downloadFile(k,c,e)}};a.prototype.saveFrames=function(d,h,e,k,m){e=a.prototype.constrain(e||3,0,15);e*=1E3;k=a.prototype.constrain(k||15,0,22);var f=0,l=a.prototype._makeFrame,t=this._curElement.elt,g=setInterval(function(){l(d+f,h,t);f++},1E3/k);setTimeout(function(){clearInterval(g);if(m)m(c);else for(var f=0;f<c.length;f++){var d=c[f];a.prototype.downloadFile(d.imageData,d.filename,d.ext)}c=
[]},e+.01)};a.prototype._makeFrame=function(a,h,e){var k;k=this?this._curElement.elt:e;if(h)switch(h.toLowerCase()){case "png":e="image/png";break;case "jpeg":e="image/jpeg";break;case "jpg":e="image/jpeg";break;default:e="image/png"}else h="png",e="image/png";k=k.toDataURL(e);k=k.replace(e,"image/octet-stream");e={};e.imageData=k;e.filename=a;e.ext=h;c.push(e)};return a}({},e.core,e.constants);e.helpers=function(e,a){function g(a,f,d){"undefined"===k(d)?d="#B40033":"number"===k(d)&&(d=l[d]);console.log("%c> p5.js says: "+
a+"%c [http://p5js.org/reference/#p5/"+f+"]","background-color:"+d+";color:#FFF;","background-color:transparent;color:"+d+";")}for(var c={},d=c.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),p=0;p<h.length;p++)c["[object "+h[p]+"]"]=h[p].toLowerCase();var k=function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?c[d.call(a)]||"object":typeof a},m=Array.isArray||function(a){return"array"===k(a)},f=["Number","Integer","Number/Constant"],l=["#2D7BB6",
"#EE9900","#4DB200"];a.prototype._validateParameters=function(d,c,l){m(l[0])||(l=[l]);var h=Math.abs(c.length-l[0].length),e,p=0,x=1;for(e=l.length;x<e;x++){var n=Math.abs(c.length-l[x].length);n<=h&&(p=x,h=n)}0<h&&(e="You wrote "+d+"(",0<c.length&&(e+="X"+",X".repeat(c.length-1)),e+="). "+d+" was expecting "+l[p].length+" parameters. Try "+d+"(",0<l[p].length&&(e+="X"+",X".repeat(l[p].length-1)),e+=").",1<l.length&&(e+=" "+d+" takes different numbers of parameters depending on what you want to do. Click this link to learn more: "),
g(e,d,0));for(p=0;p<l.length;p++)for(h=0;h<l[p].length&&h<c.length;h++)if(e=l[p][h],x=k(c[h]),"undefined"===x||null===x)g("It looks like "+d+" received an empty variable in spot #"+(h+1)+". If not intentional, this is often a problem with scope: [link to scope].",d,1);else{var y=e,v=x,n=c[h];if(y.match(/^p5\./))y=y.split("."),n=n instanceof a[y[1]];else{if(!(v="Boolean"===y||y.toLowerCase()===v)){if(y=-1<f.indexOf(y))y=!m(n)&&0<=n-parseFloat(n)+1;v=y}n=v}n||(e=d+" was expecting a "+e.toLowerCase()+
" for parameter #"+(h+1)+", received ",e+="string"===x?'"'+c[h]+'"':c[h],e+=" instead.",1<l.length&&(e+=" "+d+" takes different numbers of parameters depending on what you want to do. Click this link to learn more:"),g(e,d,2))}};a.prototype._testColors=function(){g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#ED225D");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#2D7BB6");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer",
"println","#EE9900");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#A67F59");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#704F21");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#1CC581");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#FF6625");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#79EB22");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer",
"println","#B40033");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#084B7F");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#945F00");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#6B441D");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#2E1B00");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#008851");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer",
"println","#C83C00");g("A box of biscuits, a box of mixed biscuits and a biscuit mixer","println","#4DB200")};return a}({},e.core);e.imageloading_displaying=function(e,a,g,c,d,h){a.prototype.loadImage=function(d,c,h){var f=new Image,l=new a.Image(1,1,this);f.onload=function(){l.width=l.canvas.width=f.width;l.height=l.canvas.height=f.height;l.canvas.getContext("2d").drawImage(f,0,0);"function"===typeof c&&c(l)};f.onerror=function(a){"function"===typeof h&&h(a)};0!==d.indexOf("data:image/")&&(f.crossOrigin=
"Anonymous");f.src=d;return l};a.prototype.image=function(a,d,h,f,l){this._validateParameters("image",arguments,[["p5.Image","Number","Number"],["p5.Image","Number","Number","Number","Number"]]);f=f||a.width;l=l||a.height;var e=c.modeAdjust(d||0,h||0,f,l,this._imageMode);this._graphics.image(a,e.x,e.y,e.w,e.h)};a.prototype.tint=function(){this._tint=this.color.apply(this,arguments).rgba};a.prototype.noTint=function(){this._tint=null};a.prototype._getTintedImageCanvas=function(a){if(!a.canvas)return a;
var d=g._toPixels(a.canvas),c=document.createElement("canvas");c.width=a.canvas.width;c.height=a.canvas.height;var f=c.getContext("2d");a=f.createImageData(a.canvas.width,a.canvas.height);for(var l=a.data,h=0;h<d.length;h+=4){var e=d[h+1],q=d[h+2],r=d[h+3];l[h]=d[h]*this._tint[0]/255;l[h+1]=e*this._tint[1]/255;l[h+2]=q*this._tint[2]/255;l[h+3]=r*this._tint[3]/255}f.putImageData(a,0,0);return c};a.prototype.imageMode=function(a){if(a===d.CORNER||a===d.CORNERS||a===d.CENTER)this._imageMode=a};return a}({},
e.core,e.filters,e.canvas,e.constants,e.helpers);e.imagepixels=function(e,a,g,c){a.prototype.pixels=[];a.prototype.blend=function(){this._graphics.blend.apply(this._graphics,arguments)};a.prototype.copy=function(){a.Graphics2D._copyHelper.apply(this,arguments)};a.prototype.filter=function(a,c){g.apply(this.canvas,g[a.toLowerCase()],c)};a.prototype.get=function(a,c,e,k){return this._graphics.get(a,c,e,k)};a.prototype.loadPixels=function(){this._graphics.loadPixels()};a.prototype.set=function(a,c,e){this._graphics.set(a,
c,e)};a.prototype.updatePixels=function(a,c,e,k){this._graphics.updatePixels(a,c,e,k)};return a}({},e.core,e.filters,e.p5Color);!function(e,a,g){"undefined"!=typeof module&&module.exports?module.exports=g():"function"==typeof define&&define.amd?define("reqwest",g):a[e]=g()}("reqwest",e,function(){function e(a,f,d){return function(){if(a._aborted)return d(a.request);if(a._timedOut)return d(a.request,"Request is aborted: timeout");if(a.request&&4==a.request.readyState){a.request.onreadystatechange=
L;var c=y.exec(a.url),c=c&&c[1]||window.location.protocol;(w.test(c)?v.test(a.request.status):a.request.response)?f(a.request):d(a.request)}}}function a(a,f){var d=f.headers||{},c;d.Accept=d.Accept||I.accept[f.type]||I.accept["*"];var k="function"===typeof FormData&&f.data instanceof FormData;f.crossOrigin||d["X-Requested-With"]||(d["X-Requested-With"]=I.requestedWith);d["Content-Type"]||k||(d["Content-Type"]=f.contentType||I.contentType);for(c in d)d.hasOwnProperty(c)&&"setRequestHeader"in a&&a.setRequestHeader(c,
d[c])}function g(a){H=a}function c(a,f){return a+(/\?/.test(a)?"&":"?")+f}function d(a,d,k,l){var h=B++,e=a.jsonpCallback||"callback";a=a.jsonpCallbackName||f.getcallbackPrefix(h);var t=new RegExp("((^|\\?|&)"+e+")=([^&]+)"),m=l.match(t),p=x.createElement("script"),q=0,r=-1!==navigator.userAgent.indexOf("MSIE 10.0");m?"?"===m[3]?l=l.replace(t,"$1="+a):a=m[3]:l=c(l,e+"="+a);z[a]=g;p.type="text/javascript";p.src=l;p.async=!0;"undefined"===typeof p.onreadystatechange||r||(p.htmlFor=p.id="_reqwest_"+
h);p.onload=p.onreadystatechange=function(){if(p.readyState&&"complete"!==p.readyState&&"loaded"!==p.readyState||q)return!1;p.onload=p.onreadystatechange=null;p.onclick&&p.onclick();d(H);H=void 0;A.removeChild(p);q=1};A.appendChild(p);return{abort:function(){p.onload=p.onreadystatechange=null;k({},"Request is aborted: timeout",{});H=void 0;A.removeChild(p);q=1}}}function h(k,l){var h=this.o,t=(h.method||"GET").toUpperCase(),m="string"===typeof h?h:h.url,g=!1!==h.processData&&h.data&&"string"!==typeof h.data?
f.toQueryString(h.data):h.data||null,p,q=!1;"jsonp"!=h.type&&"GET"!=t||!g||(m=c(m,g),g=null);if("jsonp"==h.type)return d(h,k,l,m);p=h.xhr&&h.xhr(h)||K(h);p.open(t,m,!1===h.async?!1:!0);a(p,h);"undefined"!==typeof h.withCredentials&&"undefined"!==typeof p.withCredentials&&(p.withCredentials=!!h.withCredentials);z.XDomainRequest&&p instanceof z.XDomainRequest?(p.onload=k,p.onerror=l,p.onprogress=function(){},q=!0):p.onreadystatechange=e(this,k,l);h.before&&h.before(p);q?setTimeout(function(){p.send(g)},
200):p.send(g);return p}function p(a,f){this.o=a;this.fn=f;m.apply(this,arguments)}function k(a){if(a.match("json"))return"json";if(a.match("javascript"))return"js";if(a.match("text"))return"html";if(a.match("xml"))return"xml"}function m(a,f){function d(f){a.timeout&&clearTimeout(l.timeout);for(l.timeout=null;0<l._completeHandlers.length;)l._completeHandlers.shift()(f)}function c(a,f,k){a=l.request;l._responseArgs.resp=a;l._responseArgs.msg=f;l._responseArgs.t=k;for(l._erred=!0;0<l._errorHandlers.length;)l._errorHandlers.shift()(a,
f,k);d(a)}this.url="string"==typeof a?a:a.url;this.timeout=null;this._fulfilled=!1;this._successHandler=function(){};this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=[];this._erred=!1;this._responseArgs={};var l=this;f=f||function(){};a.timeout&&(this.timeout=setTimeout(function(){l._timedOut=!0;l.request.abort()},a.timeout));a.success&&(this._successHandler=function(){a.success.apply(a,arguments)});a.error&&this._errorHandlers.push(function(){a.error.apply(a,arguments)});
a.complete&&this._completeHandlers.push(function(){a.complete.apply(a,arguments)});this.request=h.call(this,function(h){var e=a.type||h&&k(h.getResponseHeader("Content-Type"));h="jsonp"!==e?l.request:h;var t=M.dataFilter(h.responseText,e);try{h.responseText=t}catch(m){}if(t)switch(e){case "json":try{h=z.JSON?z.JSON.parse(t):eval("("+t+")")}catch(g){return c(h,"Could not parse JSON in response",g)}break;case "js":h=eval(t);break;case "html":h=t;break;case "xml":h=h.responseXML&&h.responseXML.parseError&&
h.responseXML.parseError.errorCode&&h.responseXML.parseError.reason?null:h.responseXML}l._responseArgs.resp=h;l._fulfilled=!0;f(h);for(l._successHandler(h);0<l._fulfillmentHandlers.length;)h=l._fulfillmentHandlers.shift()(h);d(h)},c)}function f(a,f){return new p(a,f)}function l(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function t(a,f){var d=a.name,c=a.tagName.toLowerCase(),k=function(a){a&&!a.disabled&&f(d,l(a.attributes.value&&a.attributes.value.specified?a.value:a.text))},h;if(!a.disabled&&d)switch(c){case "input":/reset|button|image|file/i.test(a.type)||
(k=/checkbox/i.test(a.type),c=/radio/i.test(a.type),h=a.value,(!k&&!c||a.checked)&&f(d,l(k&&""===h?"on":h)));break;case "textarea":f(d,l(a.value));break;case "select":if("select-one"===a.type.toLowerCase())k(0<=a.selectedIndex?a.options[a.selectedIndex]:null);else for(c=0;a.length&&c<a.length;c++)a.options[c].selected&&k(a.options[c])}}function F(){var a,f;for(f=0;f<arguments.length;f++){a=arguments[f];/input|select|textarea/i.test(a.tagName)&&t(a,this);for(var d=["input","select","textarea"],c=void 0,
k=void 0,l=void 0,c=0;c<d.length;c++)for(l=a.getElementsByTagName(d[c]),k=0;k<l.length;k++)t(l[k],this)}}function q(){return f.toQueryString(f.serializeArray.apply(null,arguments))}function r(){var a={};F.apply(function(f,d){f in a?(a[f]&&!G(a[f])&&(a[f]=[a[f]]),a[f].push(d)):a[f]=d},arguments);return a}function u(a,f,d,c){var k,l,h=/\[\]$/;if(G(f))for(k=0;f&&k<f.length;k++)l=f[k],d||h.test(a)?c(a,l):u(a+"["+("object"===typeof l?k:"")+"]",l,d,c);else if(f&&"[object Object]"===f.toString())for(k in f)u(a+
"["+k+"]",f[k],d,c);else c(a,f)}var z=window,x=document,w=/^http/,y=/(^\w+):\/\//,v=/^(20\d|1223)$/,A=x.getElementsByTagName("head")[0],B=0,D="reqwest_"+ +new Date,H,L=function(){},G="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},I={contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",
js:"application/javascript, text/javascript"}},K=function(a){if(!0===a.crossOrigin){if((a=z.XMLHttpRequest?new XMLHttpRequest:null)&&"withCredentials"in a)return a;if(z.XDomainRequest)return new XDomainRequest;throw Error("Browser does not support cross-origin requests");}return z.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},M={dataFilter:function(a){return a}};p.prototype={abort:function(){this._aborted=!0;this.request.abort()},retry:function(){m.call(this,this.o,this.fn)},
then:function(a,f){a=a||function(){};f=f||function(){};this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?f(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(f));return this},always:function(a){this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a);return this},fail:function(a){this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):
this._errorHandlers.push(a);return this},"catch":function(a){return this.fail(a)}};f.serializeArray=function(){var a=[];F.apply(function(f,d){a.push({name:f,value:d})},arguments);return a};f.serialize=function(){if(0===arguments.length)return"";var a,d=Array.prototype.slice.call(arguments,0);(a=d.pop())&&a.nodeType&&d.push(a)&&(a=null);a&&(a=a.type);return("map"==a?r:"array"==a?f.serializeArray:q).apply(null,d)};f.toQueryString=function(a,f){var d,c=f||!1,k=[],l=encodeURIComponent,h=function(a,f){f=
"function"===typeof f?f():null==f?"":f;k[k.length]=l(a)+"="+l(f)};if(G(a))for(d=0;a&&d<a.length;d++)h(a[d].name,a[d].value);else for(d in a)a.hasOwnProperty(d)&&u(d,a[d],c,h);return k.join("&").replace(/%20/g,"+")};f.getcallbackPrefix=function(){return D};f.compat=function(a,f){a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp));return new p(a,f)};f.ajaxSetup=
function(a){a=a||{};for(var f in a)M[f]=a[f]};return f});e.inputfiles=function(e,a,g){function c(a,d){var f={};d=d||[];if("undefined"===typeof d)for(var c=0;c<a.length;c++)d[c.toString()]=c;for(c=0;c<d.length;c++)f[d[c]]=a[c];return f}function d(a,d){d&&!0!==d&&"true"!==d||(d="");a||(a="untitled");var f="";a&&-1<a.indexOf(".")&&(f=a.split(".").pop());d&&f!==d&&(f=d,a=a+"."+f);return[a,f]}function h(a){document.body.removeChild(a.target)}a.prototype.loadFont=function(d,c){var f=new a.Font(this);opentype.load(d,
function(a,d){if(a)throw Error(a);f.font=d;"undefined"!==typeof c&&c(f)});return f};a.prototype.createInput=function(){throw"not yet implemented";};a.prototype.createReader=function(){throw"not yet implemented";};a.prototype.loadBytes=function(){throw"not yet implemented";};a.prototype.loadJSON=function(a,d,f){var c=[],h="json";"string"!==typeof f||"jsonp"!==f&&"json"!==f||(h=f);g({url:a,type:h,crossOrigin:!0}).then(function(a){for(var f in a)c[f]=a[f];"undefined"!==typeof d&&d(a)});return c};a.prototype.loadStrings=
function(a,d){var f=[],c=new XMLHttpRequest;c.open("GET",a,!0);c.onreadystatechange=function(){if(4===c.readyState&&(200===c.status||0===c.status)){var a=c.responseText.match(/[^\r\n]+/g),k;for(k in a)f[k]=a[k];"undefined"!==typeof d&&d(f)}};c.send(null);return f};a.prototype.loadTable=function(d){for(var h=null,f=[],l=!1,e=",",p=!1,q=1;q<arguments.length;q++)if("function"===typeof arguments[q])h=arguments[q];else if("string"===typeof arguments[q])if(f.push(arguments[q]),"header"===arguments[q]&&
(l=!0),"csv"===arguments[q]){if(p)throw Error("Cannot set multiple separator types.");e=",";p=!0}else if("tsv"===arguments[q]){if(p)throw Error("Cannot set multiple separator types.");e="\t";p=!0}var r=new a.Table;g({url:d,crossOrigin:!0,type:"csv"}).then(function(f){f=f.responseText;for(var d={},k=[],g=0,p=null,F,n=function(){d.currentState=4;k.push(p);p=null},B=function(){p.push(d.token);d.currentState=0;d.token=""};;){F=f[g++];if(null==F){if(d.escaped)throw Error("Unclosed quote in file.");if(p){B();
n();break}}null===p&&(d.escaped=!1,p=[],d.currentState=0,d.token="");if(0===d.currentState){if('"'===F){d.escaped=!0;d.currentState=1;continue}d.currentState=1}1===d.currentState&&d.escaped?'"'===F?'"'===f[g]?(d.token+='"',g++):(d.escaped=!1,d.currentState=2):d.token+=F:"\r"===F?("\n"===f[g]&&g++,B(),n()):"\n"===F?(B(),n()):F===e?B():1===d.currentState&&(d.token+=F)}if(l)r.columns=k.shift();else for(q=0;q<k.length;q++)r.columns[q]=q.toString();for(q=0;q<k.length&&(q!==k.length-1||1!==k[q].length||
"undefined"!==k[q][0]);q++)f=new a.TableRow,f.arr=k[q],f.obj=c(k[q],r.columns),r.addRow(f);null!==h&&h(r)}).fail(function(a,f){"undefined"!==typeof h&&h(!1)});return r};a.prototype.loadXML=function(a,d){g({url:a,type:"xml",crossOrigin:!0}).then(function(a){d(a)});return[]};a.prototype.parseXML=function(){throw"not yet implemented";};a.prototype.selectFolder=function(){throw"not yet implemented";};a.prototype.selectInput=function(){throw"not yet implemented";};a.prototype.httpGet=function(){var d=
Array.prototype.slice.call(arguments);d.push("GET");a.prototype.httpDo.apply(this,d)};a.prototype.httpPost=function(){var d=Array.prototype.slice.call(arguments);d.push("POST");a.prototype.httpDo.apply(this,d)};a.prototype.httpDo=function(){for(var a="GET",d=arguments[0],f={},c="",h,e=1;e<arguments.length;e++){var p=arguments[e];"string"===typeof p?"GET"===p||"POST"===p||"PUT"===p?a=p:c=p:"object"===typeof p?f=p:"function"===typeof p&&(h=p)}""===c&&(c=-1!==d.indexOf("json")?"json":-1!==d.indexOf("xml")?
"xml":"text");g({url:d,method:a,data:f,type:c,crossOrigin:!0,success:function(a){"undefined"!==typeof h&&("text"===c?h(a.response):h(a))}})};window.URL=window.URL||window.webkitURL;a.prototype._pWriters=[];a.prototype.beginRaw=function(){throw"not yet implemented";};a.prototype.beginRecord=function(){throw"not yet implemented";};a.prototype.createOutput=function(){throw"not yet implemented";};a.prototype.createWriter=function(d,c){for(var f in a.prototype._pWriters)if(a.prototype._pWriters[f].name===
d)return f=new a.PrintWriter(d+window.millis(),c),a.prototype._pWriters.push(f),f;f=new a.PrintWriter(d,c);a.prototype._pWriters.push(f);return f};a.prototype.endRaw=function(){throw"not yet implemented";};a.prototype.endRecord=function(){throw"not yet implemented";};a.PrintWriter=function(d,c){var f=this;this.name=d;this.content="";this.print=function(a){this.content+=a};this.println=function(a){this.content+=a+"\n"};this.flush=function(){this.content=""};this.close=function(){var l=[];l.push(this.content);
a.prototype.writeFile(l,d,c);for(var h in a.prototype._pWriters)a.prototype._pWriters[h].name===this.name&&a.prototype._pWriters.splice(h,1);f.flush();f={}}};a.prototype.saveBytes=function(){throw"not yet implemented";};a.prototype.save=function(c,h,f){var l=arguments,e=this._curElement.elt;if(0===l.length)a.prototype.saveCanvas(e);else if(l[0]instanceof a.Graphics)a.prototype.saveCanvas(l[0].elt,l[1],l[2]);else if(1===l.length&&"string"===typeof l[0])a.prototype.saveCanvas(e,l[0]);else switch(d(l[1],
l[2])[1]){case "json":a.prototype.saveJSON(l[0],l[1],l[2]);break;case "txt":a.prototype.saveStrings(l[0],l[1],l[2]);break;default:l[0]instanceof Array?a.prototype.saveStrings(l[0],l[1],l[2]):l[0]instanceof a.Table?a.prototype.saveTable(l[0],l[1],l[2],l[3]):l[0]instanceof a.Image?a.prototype.saveCanvas(l[0].canvas,l[1]):l[0]instanceof a.SoundFile&&a.prototype.saveSound(l[0],l[1],l[2],l[3])}};a.prototype.saveJSON=function(a,d,f){a=f?JSON.stringify(a):JSON.stringify(a,void 0,2);console.log(a);this.saveStrings(a.split("\n"),
d,"json")};a.prototype.saveJSONObject=a.prototype.saveJSON;a.prototype.saveJSONArray=a.prototype.saveJSON;a.prototype.saveStream=function(){throw"not yet implemented";};a.prototype.saveStrings=function(a,d,f){d=this.createWriter(d,f||"txt");for(var c in a)c<a.length-1?d.println(a[c]):d.print(a[c]);d.close();d.flush()};a.prototype.saveXML=function(){throw"not yet implemented";};a.prototype.selectOutput=function(){throw"not yet implemented";};a.prototype.saveTable=function(a,d,f){d=this.createWriter(d,
f);var c=a.columns,h=",";"tsv"===f&&(h="\t");if("html"!==f){if("0"!==c[0])for(f=0;f<c.length;f++)f<c.length-1?d.print(c[f]+h):d.println(c[f]);for(c=0;c<a.rows.length;c++)for(f=0;f<a.rows[c].arr.length;f++)f<a.rows[c].arr.length-1?d.print(a.rows[c].arr[f]+h):c<a.rows.length-1?d.println(a.rows[c].arr[f]):d.print(a.rows[c].arr[f])}else{d.println("<html>");d.println("<head>");d.println('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />');d.println("</head>");d.println("<body>");d.println("  <table>");
if("0"!==c[0]){d.println("    <tr>");for(h=0;h<c.length;h++)f=p(c[h]),d.println("      <td>"+f),d.println("      </td>");d.println("    </tr>")}for(c=0;c<a.rows.length;c++){d.println("    <tr>");for(h=0;h<a.columns.length;h++)f=a.rows[c].getString(h),f=p(f),d.println("      <td>"+f),d.println("      </td>");d.println("    </tr>")}d.println("  </table>");d.println("</body>");d.print("</html>")}d.close();d.flush()};var p=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,
"&quot;").replace(/'/g,"&#039;")};a.prototype.writeFile=function(d,c,f){var l="application/octet-stream";a.prototype._isSafari()&&(l="text/plain");d=new Blob(d,{type:l});d=window.URL.createObjectURL(d);a.prototype.downloadFile(d,c,f)};a.prototype.downloadFile=function(c,e,f){f=d(e,f);e=f[0];f=f[1];var l=document.createElement("a");l.href=c;l.download=e;l.onclick=h;l.style.display="none";document.body.appendChild(l);a.prototype._isSafari()&&(c='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n',
c+='3. Name it with this extension: ."'+f+'"',alert(c));l.click()};a.prototype._checkFileExtension=d;a.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};return a}({},e.core,e.reqwest);e.inputkeyboard=function(e,a){var g={};a.prototype.isKeyPressed=!1;a.prototype.keyIsPressed=!1;a.prototype.key="";a.prototype.keyCode=0;a.prototype._onkeydown=function(a){this._setProperty("isKeyPressed",!0);this._setProperty("keyIsPressed",!0);this._setProperty("keyCode",
a.which);g[a.which]=!0;var d=String.fromCharCode(a.which);d||(d=a.which);this._setProperty("key",d);d=this.keyPressed||window.keyPressed;"function"!==typeof d||a.charCode||!1===d(a)&&a.preventDefault()};a.prototype._onkeyup=function(a){var d=this.keyReleased||window.keyReleased;this._setProperty("isKeyPressed",!1);this._setProperty("keyIsPressed",!1);g[a.which]=!1;var h=String.fromCharCode(a.which);h||(h=a.which);this._setProperty("key",h);this._setProperty("keyCode",a.which);"function"===typeof d&&
!1===d(a)&&a.preventDefault()};a.prototype._onkeypress=function(a){this._setProperty("keyCode",a.which);this._setProperty("key",String.fromCharCode(a.which));var d=this.keyTyped||window.keyTyped;"function"===typeof d&&!1===d(a)&&a.preventDefault()};a.prototype._onblur=function(a){g={}};a.prototype.keyIsDown=function(a){return g[a]};return a}({},e.core);e.inputacceleration=function(e,a){a.prototype.deviceOrientation=void 0;a.prototype.accelerationX=0;a.prototype.accelerationY=0;a.prototype.accelerationZ=
0;a.prototype.pAccelerationX=0;a.prototype.pAccelerationY=0;a.prototype.pAccelerationZ=0;a.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX);this._setProperty("pAccelerationY",this.accelerationY);this._setProperty("pAccelerationZ",this.accelerationZ)};var g=.5;a.prototype.setMoveThreshold=function(a){"number"===typeof a&&(g=a)};var c="",d="";a.prototype._ondeviceorientation=function(a){this._setProperty("accelerationX",a.beta);this._setProperty("accelerationY",
a.gamma);this._setProperty("accelerationZ",a.alpha);this._handleMotion()};a.prototype._ondevicemotion=function(a){this._setProperty("accelerationX",2*a.acceleration.x);this._setProperty("accelerationY",2*a.acceleration.y);this._setProperty("accelerationZ",2*a.acceleration.z);this._handleMotion()};a.prototype._onMozOrientation=function(a){this._setProperty("accelerationX",a.x);this._setProperty("accelerationY",a.y);this._setProperty("accelerationZ",a.z);this._handleMotion()};a.prototype._handleMotion=
function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var a=this.onDeviceMove||window.onDeviceMove;"function"===typeof a&&(Math.abs(this.accelerationX-this.pAccelerationX)>g||Math.abs(this.accelerationY-this.pAccelerationY)>g||Math.abs(this.accelerationZ-this.pAccelerationZ)>g)&&a();a=this.onDeviceTurn||
window.onDeviceTurn;if("function"===typeof a){var e=0;Math.abs(this.accelerationX)>e&&(e=this.accelerationX,d="x");Math.abs(this.accelerationY)>e&&(e=this.accelerationY,d="y");Math.abs(this.accelerationZ)>e&&(d="z");""!==c&&c!==d&&a(d);c=d}};return a}({},e.core);e.inputmouse=function(e,a,g){a.prototype.mouseX=0;a.prototype.mouseY=0;a.prototype.pmouseX=0;a.prototype.pmouseY=0;a.prototype.winMouseX=0;a.prototype.winMouseY=0;a.prototype.pwinMouseX=0;a.prototype.pwinMouseY=0;a.prototype.mouseButton=0;
a.prototype.mouseIsPressed=!1;a.prototype.isMousePressed=!1;a.prototype._updateMouseCoords=function(a){var d,h;"touchstart"===a.type||"touchmove"===a.type||"touchend"===a.type?(this._setProperty("mouseX",this.touchX),this._setProperty("mouseY",this.touchY)):null!==this._curElement&&(h=this._curElement.elt.getBoundingClientRect(),d=a.clientX-h.left,h=a.clientY-h.top,this._setProperty("mouseX",d),this._setProperty("mouseY",h));this._setProperty("winMouseX",a.pageX);this._setProperty("winMouseY",a.pageY)};
a.prototype._updatePMouseCoords=function(a){this._setProperty("pmouseX",this.mouseX);this._setProperty("pmouseY",this.mouseY);this._setProperty("pwinMouseX",this.winMouseX);this._setProperty("pwinMouseY",this.winMouseY)};a.prototype._setMouseButton=function(a){if(1===a.button)this._setProperty("mouseButton",g.CENTER);else if(2===a.button)this._setProperty("mouseButton",g.RIGHT);else if(this._setProperty("mouseButton",g.LEFT),"touchstart"===a.type||"touchmove"===a.type)this._setProperty("mouseX",this.touchX),
this._setProperty("mouseY",this.touchY)};a.prototype._onmousemove=function(a){var d=this._isGlobal?window:this;this._updateMouseCoords(a);this.isMousePressed?"function"===typeof d.mouseDragged?(d=d.mouseDragged(a),!1===d&&a.preventDefault()):"function"===typeof d.touchMoved&&(d=d.touchMoved(a),!1===d&&a.preventDefault(),this._updateTouchCoords(a)):"function"===typeof d.mouseMoved&&(d=d.mouseMoved(a),!1===d&&a.preventDefault())};a.prototype._onmousedown=function(a){var d=this._isGlobal?window:this;
this._setProperty("isMousePressed",!0);this._setProperty("mouseIsPressed",!0);this._setMouseButton(a);this._updateMouseCoords(a);"function"===typeof d.mousePressed?(d=d.mousePressed(a),!1===d&&a.preventDefault()):"function"===typeof d.touchStarted&&(d=d.touchStarted(a),!1===d&&a.preventDefault(),this._updateTouchCoords(a))};a.prototype._onmouseup=function(a){var d=this._isGlobal?window:this;this._setProperty("isMousePressed",!1);this._setProperty("mouseIsPressed",!1);"function"===typeof d.mouseReleased?
(d=d.mouseReleased(a),!1===d&&a.preventDefault()):"function"===typeof d.touchEnded&&(d=d.touchEnded(a),!1===d&&a.preventDefault(),this._updateTouchCoords(a))};a.prototype._onclick=function(a){var d=this._isGlobal?window:this;"function"===typeof d.mouseClicked&&!1===d.mouseClicked(a)&&a.preventDefault()};a.prototype._onmousewheel=a.prototype._onDOMMouseScroll=function(a){var d=this._isGlobal?window:this;"function"===typeof d.mouseWheel&&!1===d.mouseWheel(a)&&a.preventDefault()};return a}({},e.core,
e.constants);e.inputtime_date=function(e,a){a.prototype.day=function(){return(new Date).getDate()};a.prototype.hour=function(){return(new Date).getHours()};a.prototype.minute=function(){return(new Date).getMinutes()};a.prototype.millis=function(){return(new Date).getTime()-this._startTime};a.prototype.month=function(){return(new Date).getMonth()+1};a.prototype.second=function(){return(new Date).getSeconds()};a.prototype.year=function(){return(new Date).getFullYear()};return a}({},e.core);e.inputtouch=
function(e,a){function g(a,d,h){h=h||0;a=a.getBoundingClientRect();d=d.touches[h]||d.changedTouches[h];return{x:d.clientX-a.left,y:d.clientY-a.top}}a.prototype.touchX=0;a.prototype.touchY=0;a.prototype.ptouchX=0;a.prototype.ptouchY=0;a.prototype.touches=[];a.prototype.touchIsDown=!1;a.prototype._updateTouchCoords=function(a){if("mousedown"===a.type||"mousemove"===a.type||"mouseup"===a.type)this._setProperty("touchX",this.mouseX),this._setProperty("touchY",this.mouseY);else{var d=g(this._curElement.elt,
a,0);this._setProperty("touchX",d.x);this._setProperty("touchY",d.y);for(var d=[],h=0;h<a.touches.length;h++){var e=g(this._curElement.elt,a,h);d[h]={x:e.x,y:e.y}}this._setProperty("touches",d)}};a.prototype._updatePTouchCoords=function(){this._setProperty("ptouchX",this.touchX);this._setProperty("ptouchY",this.touchY)};a.prototype._ontouchstart=function(a){var d=this._isGlobal?window:this;this._updateTouchCoords(a);this._setProperty("touchIsDown",!0);"function"===typeof d.touchStarted?(d=d.touchStarted(a),
!1===d&&a.preventDefault()):"function"===typeof d.mousePressed&&(d=d.mousePressed(a),!1===d&&a.preventDefault())};a.prototype._ontouchmove=function(a){var d=this._isGlobal?window:this;this._updateTouchCoords(a);"function"===typeof d.touchMoved?(d=d.touchMoved(a),!1===d&&a.preventDefault()):"function"===typeof d.mouseDragged&&(d=d.mouseDragged(a),!1===d&&a.preventDefault(),this._updateMouseCoords(a))};a.prototype._ontouchend=function(a){this._updateTouchCoords(a);0===this.touches.length&&this._setProperty("touchIsDown",
!1);var d=this._isGlobal?window:this;"function"===typeof d.touchEnded?(d=d.touchEnded(a),!1===d&&a.preventDefault()):"function"===typeof d.mouseReleased&&(d=d.mouseReleased(a),!1===d&&a.preventDefault(),this._updateMouseCoords(a))};return a}({},e.core);e.mathmath=function(e,a){a.prototype.createVector=function(e,c,d){return this instanceof a?new a.Vector(this,arguments):new a.Vector(e,c,d)};return a}({},e.core);e.mathcalculation=function(e,a){a.prototype.abs=Math.abs;a.prototype.ceil=Math.ceil;a.prototype.constrain=
function(a,c,d){return Math.max(Math.min(a,d),c)};a.prototype.dist=function(a,c,d,h){return Math.sqrt((d-a)*(d-a)+(h-c)*(h-c))};a.prototype.exp=Math.exp;a.prototype.floor=Math.floor;a.prototype.lerp=function(a,c,d){return d*(c-a)+a};a.prototype.log=Math.log;a.prototype.mag=function(a,c){return Math.sqrt(a*a+c*c)};a.prototype.map=function(a,c,d,h,e){return(a-c)/(d-c)*(e-h)+h};a.prototype.max=function(){return arguments[0]instanceof Array?Math.max.apply(null,arguments[0]):Math.max.apply(null,arguments)};
a.prototype.min=function(){return arguments[0]instanceof Array?Math.min.apply(null,arguments[0]):Math.min.apply(null,arguments)};a.prototype.norm=function(a,c,d){return this.map(a,c,d,0,1)};a.prototype.pow=Math.pow;a.prototype.round=Math.round;a.prototype.sq=function(a){return a*a};a.prototype.sqrt=Math.sqrt;return a}({},e.core);e.mathrandom=function(e,a){var g=!1,c=function(){var a,d;return{setSeed:function(c){d=a=(null==c?4294967296*Math.random():c)>>>0},getSeed:function(){return a},rand:function(){d=
(1664525*d+1013904223)%4294967296;return d/4294967296}}}();a.prototype.randomSeed=function(a){c.setSeed(a);g=!0};a.prototype.random=function(a,d){var h;h=g?c.rand():Math.random();if(0===arguments.length)return h;if(1===arguments.length)return h*a;if(a>d){var f=a;a=d;d=f}return h*(d-a)+a};var d,h=!1;a.prototype.randomGaussian=function(a,c){var e,f,l;if(h)e=d,h=!1;else{do e=this.random(2)-1,f=this.random(2)-1,l=e*e+f*f;while(1<=l);l=Math.sqrt(-2*Math.log(l)/l);e*=l;d=f*l;h=!0}return e*(c||1)+(a||0)};
return a}({},e.core);e.mathnoise=function(e,a){for(var g=4,c=.5,d=Math.floor(720),h=Array(d),p=Array(d),k=Math.PI/180,m=0;m<d;m++)h[m]=Math.sin(m*k*.5),p[m]=Math.cos(m*k*.5);var f=d,f=f>>1,l;a.prototype.noise=function(a,k,h){k=k||0;h=h||0;if(null==l){l=Array(4096);for(var e=0;4096>e;e++)l[e]=Math.random()}0>a&&(a=-a);0>k&&(k=-k);0>h&&(h=-h);var e=Math.floor(a),m=Math.floor(k),z=Math.floor(h);a-=e;k-=m;h-=z;for(var n,w,y=0,v=.5,A,B,D,H=function(a){return.5*(1-p[Math.floor(a*f)%d])},L=0;L<g;L++){var G=
e+(m<<4)+(z<<8);n=H(a);w=H(k);A=l[G&4095];A+=n*(l[G+1&4095]-A);B=l[G+16&4095];B+=n*(l[G+16+1&4095]-B);A+=w*(B-A);G+=256;B=l[G&4095];B+=n*(l[G+1&4095]-B);D=l[G+16&4095];D+=n*(l[G+16+1&4095]-D);B+=w*(D-B);A+=H(h)*(B-A);y+=A*v;v*=c;e<<=1;a*=2;m<<=1;k*=2;z<<=1;h*=2;1<=a&&(e++,a--);1<=k&&(m++,k--);1<=h&&(z++,h--)}return y};a.prototype.noiseDetail=function(a,f){0<a&&(g=a);0<f&&(c=f)};a.prototype.noiseSeed=function(a){var f=function(){var a,f;return{setSeed:function(d){f=a=(null==d?4294967296*Math.random():
d)>>>0},getSeed:function(){return a},rand:function(){f=(1664525*f+1013904223)%4294967296;return f/4294967296}}}();f.setSeed(a);l=Array(4096);for(a=0;4096>a;a++)l[a]=f.rand()};return a}({},e.core);e.mathtrigonometry=function(e,a,g,c){a.prototype._angleMode=c.RADIANS;a.prototype.acos=function(a){return this._angleMode===c.RADIANS?Math.acos(a):g.radiansToDegrees(Math.acos(a))};a.prototype.asin=function(a){return this._angleMode===c.RADIANS?Math.asin(a):g.radiansToDegrees(Math.asin(a))};a.prototype.atan=
function(a){return this._angleMode===c.RADIANS?Math.atan(a):g.radiansToDegrees(Math.atan(a))};a.prototype.atan2=function(a,h){return this._angleMode===c.RADIANS?Math.atan2(a,h):g.radiansToDegrees(Math.atan2(a,h))};a.prototype.cos=function(a){return this._angleMode===c.RADIANS?Math.cos(a):Math.cos(this.radians(a))};a.prototype.sin=function(a){return this._angleMode===c.RADIANS?Math.sin(a):Math.sin(this.radians(a))};a.prototype.tan=function(a){return this._angleMode===c.RADIANS?Math.tan(a):Math.tan(this.radians(a))};
a.prototype.degrees=function(a){return g.radiansToDegrees(a)};a.prototype.radians=function(a){return g.degreesToRadians(a)};a.prototype.angleMode=function(a){if(a===c.DEGREES||a===c.RADIANS)this._angleMode=a};return a}({},e.core,e.polargeometry,e.constants);e.renderingrendering=function(e,a,g,c,d){a.prototype.createCanvas=function(d,c,k,e){k=k||g.P2D;var f;e&&(f="boolean"===typeof e?e:!1);k===g.WEBGL?((e=document.getElementById("defaultCanvas"))&&e.parentNode.removeChild(e),e=document.createElement("canvas"),
e.id="defaultCanvas"):f?(e=document.createElement("canvas"),e.id="defaultCanvas"):e=this.canvas;this._setupDone||(e.className+=" p5_hidden",e.style.visibility="hidden");this._userNode?this._userNode.appendChild(e):document.body.appendChild(e);k===g.WEBGL?this._defaultGraphics||(this._defaultGraphics=this._graphics=new a.Graphics3D(e,this,!0),this._elements.push(this._defaultGraphics)):this._defaultGraphics||(this._defaultGraphics=this._graphics=new a.Graphics2D(e,this,!0),this._elements.push(this._defaultGraphics));
this._defaultGraphics.resize(d,c);this._defaultGraphics._applyDefaults();return this._defaultGraphics};a.prototype.resizeCanvas=function(a,d,c){this._graphics&&(this._graphics.resize(a,d),this._graphics._applyDefaults(),c||this.redraw())};a.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)};a.prototype.createGraphics=function(a,d,c){return c===g.WEBGL?this._createGraphics3D(a,d):this._createGraphics2D(a,d)};a.prototype._createGraphics2D=function(d,c){var k=
document.createElement("canvas");(this._userNode||document.body).appendChild(k);k=new a.Graphics2D(k,this,!1);this._elements.push(k);for(var e in a.prototype)k[e]||(k[e]="function"===typeof a.prototype[e]?a.prototype[e].bind(k):a.prototype[e]);k.resize(d,c);k._applyDefaults();return k};a.prototype._createGraphics3D=function(d,c){var k=document.createElement("canvas");(this._userNode||document.body).appendChild(k);k=new a.Graphics3D(k,this,!1);this._elements.push(k);for(var e in a.prototype)k.hasOwnProperty(e)||
(k[e]="function"===typeof a.prototype[e]?a.prototype[e].bind(k):a.prototype[e]);k.resize(d,c);k._applyDefaults();return k};a.prototype.blendMode=function(a){if(a===g.BLEND||a===g.DARKEST||a===g.LIGHTEST||a===g.DIFFERENCE||a===g.MULTIPLY||a===g.EXCLUSION||a===g.SCREEN||a===g.REPLACE||a===g.OVERLAY||a===g.HARD_LIGHT||a===g.SOFT_LIGHT||a===g.DODGE||a===g.BURN||a===g.ADD||a===g.NORMAL)this.drawingContext.globalCompositeOperation=a;else throw Error("Mode "+a+" not recognized.");};return a}({},e.core,e.constants,
e.p5Graphics2D,e.p5Graphics3D);e.shape2d_primitives=function(e,a,g,c){a.prototype._createArc=function(a,c,e){var k=[],m=Math.PI/2,f=c<e?1:-1,l=c;for(c=Math.min(2*Math.PI,Math.abs(e-c));1E-5<c;)e=l+f*Math.min(c,m),k.push(this._createSmallArc(a,l,e)),c-=Math.abs(e-l),l=e;return k};a.prototype._createSmallArc=function(a,c,e){var k=(e-c)/2,m=a*Math.cos(k),f=a*Math.sin(k),l=-f,t=.5522847498*Math.tan(k),f=m+t*f,m=l+t*m,l=-m,t=k+c,k=Math.cos(t),t=Math.sin(t);return{x1:a*Math.cos(c),y1:a*Math.sin(c),x2:f*
k-m*t,y2:f*t+m*k,x3:f*k-l*t,y3:f*t+l*k,x4:a*Math.cos(e),y4:a*Math.sin(e)}};a.prototype.arc=function(a,c,e,k,m,f,l){if(!this._doStroke&&!this._doFill)return this;this._angleMode===g.DEGREES&&(m=this.radians(m),f=this.radians(f));var t=this._createArc(1,m,f);this._graphics.arc(a,c,e,k,m,f,l,t);return this};a.prototype.ellipse=function(a,c,e,k){this._validateParameters("ellipse",arguments,["Number","Number","Number","Number"]);if(!this._doStroke&&!this._doFill)return this;e=Math.abs(e);k=Math.abs(k);
this._graphics.ellipse(a,c,e,k);return this};a.prototype.line=function(){this._validateParameters("line",arguments,[["Number","Number","Number","Number"],"Number Number Number Number Number Number".split(" ")]);if(!this._doStroke)return this;this._graphics.isP3D?this._graphics.line(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]):this._graphics.line(arguments[0],arguments[1],arguments[2],arguments[3])};a.prototype.point=function(a,c){this._validateParameters("point",
arguments,["Number","Number"]);if(!this._doStroke)return this;this._graphics.point(a,c);return this};a.prototype.quad=function(a,c,e,k,m,f,l,t){this._validateParameters("quad",arguments,"Number Number Number Number Number Number Number Number".split(" "));if(!this._doStroke&&!this._doFill)return this;this._graphics.quad(a,c,e,k,m,f,l,t);return this};a.prototype.rect=function(a,c,e,k,m,f,l,t){this._validateParameters("rect",arguments,[["Number","Number","Number","Number"],["Number","Number","Number",
"Number","Number"],"Number Number Number Number Number Number Number Number Number".split(" ")]);if(this._doStroke||this._doFill)return this._graphics.rect(a,c,e,k,m,f,l,t),this};a.prototype.triangle=function(a,c,e,k,m,f){this._validateParameters("triangle",arguments,"Number Number Number Number Number Number".split(" "));if(!this._doStroke&&!this._doFill)return this;this._graphics.triangle(a,c,e,k,m,f);return this};return a}({},e.core,e.constants,e.helpers);e.shape3d_primitives=function(e,a){function g(a,
d){var h=[];a.forEach(function(a){a.forEach(function(a){d[a].forEach(function(a){h.push(a)})})});return h}a.prototype.Geometry3D=function(){this.vertices=[];this.faces=[];this.faceNormals=[];this.uvs=[]};a.prototype.plane=function(c,d,h,e){a.prototype.Geometry3D.call(this);c=c||1;d=d||1;h=h||1;e=e||1;for(var k=0;k<=e;k++)for(var m=k/e,f=0;f<=h;f++){var l=f/h;this.vertices.push([2*c*l-c,2*d*m-d,0]);this.uvs.push([l,m]);this.faceNormals.push([0,0,1]);f<h&&k<e&&(l=f+k*(h+1),this.faces.push([l,l+1,l+
h+1]),this.faces.push([l+h+1,l+1,l+h+2]))}c=g(this.faces,this.vertices);this._graphics.drawGeometry(c);return this};a.prototype.cube=function(c,d,h,e,k,m){a.prototype.Geometry3D.call(this);c=c||1;d=d||1;h=h||1;e=e||1;k=k||1;for(m=0;m<=k;m++)for(var f=m/k,l=0;l<=e;l++){var t=l/e;this.vertices.push([2*c*t-c,2*d*f-d,h/2]);this.uvs.push([t,f]);this.faceNormals.push([0,0,1]);l<e&&m<k&&(t=l+m*(e+1),this.faces.push([t,t+1,t+e+1]),this.faces.push([t+e+1,t+1,t+e+2]))}for(m=0;m<=k;m++)for(f=m/k,l=0;l<=e;l++)t=
l/e,this.vertices.push([2*c*t-c,2*d*f-d,-h/2]),this.uvs.push([t,f]),this.faceNormals.push([0,0,-1]),l<e&&m<k&&(t=l+m*(e+1),this.faces.push([t,t+1,t+e+1]),this.faces.push([t+e+1,t+1,t+e+2]));c=g(this.faces,this.vertices);this._graphics.drawGeometry(c);return this};a.prototype.sphere=function(c,d,e,p){a.prototype.Geometry3D.call(this);c=g(this.faces,this.vertices);this._graphics.drawGeometry(c);return this};return a}({},e.core);e.shapeattributes=function(e,a,g){a.prototype._rectMode=g.CORNER;a.prototype._ellipseMode=
g.CENTER;a.prototype.ellipseMode=function(a){if(a===g.CORNER||a===g.CORNERS||a===g.RADIUS||a===g.CENTER)this._ellipseMode=a;return this};a.prototype.noSmooth=function(){this._graphics.noSmooth();return this};a.prototype.rectMode=function(a){if(a===g.CORNER||a===g.CORNERS||a===g.RADIUS||a===g.CENTER)this._rectMode=a;return this};a.prototype.smooth=function(){this._graphics.smooth();return this};a.prototype.strokeCap=function(a){a!==g.ROUND&&a!==g.SQUARE&&a!==g.PROJECT||this._graphics.strokeCap(a);
return this};a.prototype.strokeJoin=function(a){a!==g.ROUND&&a!==g.BEVEL&&a!==g.MITER||this._graphics.strokeJoin(a);return this};a.prototype.strokeWeight=function(a){this._graphics.strokeWeight(a);return this};return a}({},e.core,e.constants);e.shapecurves=function(e,a,g){a.prototype._curveTightness=0;a.prototype.bezier=function(a,d,e,g,k,m,f,l){this._validateParameters("bezier",arguments,"Number Number Number Number Number Number Number Number".split(" "));if(!this._doStroke)return this;this._graphics.bezier(a,
d,e,g,k,m,f,l);return this};a.prototype.bezierDetail=function(a){return this};a.prototype.bezierPoint=function(a,d,e,g,k){var m=1-k;return Math.pow(m,3)*a+3*Math.pow(m,2)*k*d+3*m*Math.pow(k,2)*e+Math.pow(k,3)*g};a.prototype.bezierTangent=function(a,d,e,g,k){var m=1-k;return 3*g*Math.pow(k,2)-3*e*Math.pow(k,2)+6*e*m*k-6*d*m*k+3*d*Math.pow(m,2)-3*a*Math.pow(m,2)};a.prototype.curve=function(a,d,e,g,k,m,f,l){this._validateParameters("curve",arguments,"Number Number Number Number Number Number Number Number".split(" "));
if(this._doStroke)return this._graphics.curve(a,d,e,g,k,m,f,l),this};a.prototype.curveDetail=function(a){return this};a.prototype.curveTightness=function(a){this._setProperty("_curveTightness",a)};a.prototype.curvePoint=function(a,d,e,g,k){var m=k*k*k,f=k*k;return a*(-.5*m+f-.5*k)+d*(1.5*m-2.5*f+1)+e*(-1.5*m+2*f+.5*k)+g*(.5*m-.5*f)};a.prototype.curveTangent=function(a,d,e,g,k){var m=k*k;return a*(-3*m/2+2*k-.5)+d*(9*m/2-5*k)+e*(-9*m/2+4*k+.5)+g*(3*m/2-k)};return a}({},e.core,e.helpers);e.shapevertex=
function(e,a,g){var c=null,d=[],h=[],p=!1,k=!1,m=!1,f=!1;a.prototype.beginContour=function(){h=[];f=!0;return this};a.prototype.beginShape=function(a){c=a===g.POINTS||a===g.LINES||a===g.TRIANGLES||a===g.TRIANGLE_FAN||a===g.TRIANGLE_STRIP||a===g.QUADS||a===g.QUAD_STRIP?a:null;d=[];h=[];return this};a.prototype.bezierVertex=function(a,c,k,e,m,g){if(0===d.length)throw"vertex() must be used once before calling bezierVertex()";p=!0;for(var z=[],n=0;n<arguments.length;n++)z[n]=arguments[n];z.isVert=!1;
f?h.push(z):d.push(z);return this};a.prototype.curveVertex=function(a,f){k=!0;this.vertex(a,f);return this};a.prototype.endContour=function(){var a=h[0].slice();a.isVert=h[0].isVert;a.moveTo=!1;h.push(a);d.push(d[0]);for(a=0;a<h.length;a++)d.push(h[a]);return this};a.prototype.endShape=function(a){if(0===d.length||!this._doStroke&&!this._doFill)return this;var e=a===g.CLOSE;e&&!f&&d.push(d[0]);this._graphics.endShape(a,d,k,p,m,f,c);f=m=p=k=!1;e&&d.pop();return this};a.prototype.quadraticVertex=function(a,
c,k,e){if(this._contourInited){var r={};r.x=a;r.y=c;r.x3=k;r.y3=e;r.type=g.QUADRATIC;this._contourVertices.push(r);return this}if(0<d.length){m=!0;for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];r.isVert=!1;f?h.push(r):d.push(r)}else throw"vertex() must be used once before calling quadraticVertex()";return this};a.prototype.vertex=function(a,c,k){var e=[];e.isVert=!0;e[0]=a;e[1]=c;e[2]=0;e[3]=0;e[4]=0;e[5]=this._graphics._getFill();e[6]=this._graphics._getStroke();k&&(e.moveTo=k);f?(0===
h.length&&(e.moveTo=!0),h.push(e)):d.push(e);return this};return a}({},e.core,e.constants);e.structure=function(e,a){a.prototype.exit=function(){throw"exit() not implemented, see remove()";};a.prototype.noLoop=function(){this._loop=!1;this._drawInterval&&clearInterval(this._drawInterval)};a.prototype.loop=function(){this._loop=!0;this._draw()};a.prototype.push=function(){this._graphics.push();this._styles.push({doStroke:this._doStroke,doFill:this._doFill,tint:this._tint,imageMode:this._imageMode,
rectMode:this._rectMode,ellipseMode:this._ellipseMode,colorMode:this._colorMode,textFont:this.textFont,textLeading:this.textLeading,textSize:this.textSize,textStyle:this.textStyle})};a.prototype.pop=function(){this._graphics.pop();var a=this._styles.pop();this._doStroke=a.doStroke;this._doFill=a.doFill;this._tint=a.tint;this._imageMode=a.imageMode;this._rectMode=a.rectMode;this._ellipseMode=a.ellipseMode;this._colorMode=a.colorMode;this.textFont=a.textFont;this.textLeading=a.textLeading;this.textSize=
a.textSize;this.textStyle=a.textStyle};a.prototype.pushStyle=function(){throw Error("pushStyle() not used, see push()");};a.prototype.popStyle=function(){throw Error("popStyle() not used, see pop()");};a.prototype.redraw=function(){var a=this.setup||window.setup,c=this.draw||window.draw;"function"===typeof c&&(this.push(),"undefined"===typeof a&&this.scale(this.pixelDensity,this.pixelDensity),this._registeredMethods.pre.forEach(function(a){a.call(this)}),c(),this._registeredMethods.post.forEach(function(a){a.call(this)}),
this.pop())};a.prototype.size=function(){throw"size() not implemented, see createCanvas()";};return a}({},e.core);e.transform=function(e,a,g){a.prototype.applyMatrix=function(a,d,e,g,k,m){this._graphics.applyMatrix(a,d,e,g,k,m);return this};a.prototype.popMatrix=function(){throw Error("popMatrix() not used, see pop()");};a.prototype.printMatrix=function(){throw Error("printMatrix() not implemented");};a.prototype.pushMatrix=function(){throw Error("pushMatrix() not used, see push()");};a.prototype.resetMatrix=
function(){this._graphics.resetMatrix();return this};a.prototype.rotate=function(a){this._angleMode===g.DEGREES&&(a=this.radians(a));this._graphics.rotate(a);return this};a.prototype.rotateX=function(a){if(this._graphics.isP3D)this._graphics.rotateX(a);else throw"not yet implemented.";return this};a.prototype.rotateY=function(a){if(this._graphics.isP3D)this._graphics.rotateY(a);else throw"not yet implemented.";return this};a.prototype.rotateZ=function(a){if(this._graphics.isP3D)this._graphics.rotateZ(a);
else throw"not supported in p2d. Please use webgl mode";return this};a.prototype.scale=function(){this._graphics.isP3D?this._graphics.scale(arguments[0],arguments[1],arguments[2]):this._graphics.scale.apply(this._graphics,arguments);return this};a.prototype.shearX=function(a){this._angleMode===g.DEGREES&&(a=this.radians(a));this._graphics.shearX(a);return this};a.prototype.shearY=function(a){this._angleMode===g.DEGREES&&(a=this.radians(a));this._graphics.shearY(a);return this};a.prototype.translate=
function(a,d,e){this._graphics.isP3D?this._graphics.translate(a,d,e):this._graphics.translate(a,d);return this};return a}({},e.core,e.constants);e.typographyattributes=function(e,a,g){a.prototype._textSize=12;a.prototype._textLeading=15;a.prototype._textFont="sans-serif";a.prototype._textStyle=g.NORMAL;a.prototype._textAscent=null;a.prototype._textDescent=null;a.prototype.textAlign=function(a,d){return this._graphics.textAlign(a,d)};a.prototype.textLeading=function(a){return arguments.length?(this._setProperty("_textLeading",
a),this):this._textLeading};a.prototype.textSize=function(a){return arguments.length?(this._setProperty("_textSize",a),this._setProperty("_textLeading",a*g._DEFAULT_LEADMULT),this._graphics._applyTextProperties()):this._textSize};a.prototype.textStyle=function(a){return arguments.length?(a!==g.NORMAL&&a!==g.ITALIC&&a!==g.BOLD||this._setProperty("_textStyle",a),this._graphics._applyTextProperties()):this._textStyle};a.prototype.textWidth=function(a){return this._graphics.textWidth(a)};a.prototype.textAscent=
function(){null===this._textAscent&&this._updateTextMetrics();return this._textAscent};a.prototype.textDescent=function(){null===this._textDescent&&this._updateTextMetrics();return this._textDescent};a.prototype._isOpenType=function(a){a=a||this._textFont;return"object"===typeof a&&a.font&&a.font.supported};a.prototype._updateTextMetrics=function(){if(this._isOpenType()){var a=this._textFont.textBounds("ABCjgq|",0,0);this._setProperty("_textAscent",Math.abs(a.y));this._setProperty("_textDescent",
a.h-Math.abs(a.y));return this}var d=document.createElement("span");d.style.fontFamily=this._textFont;d.style.fontSize=this._textSize+"px";d.innerHTML="ABCjgq|";var e=document.createElement("div");e.style.display="inline-block";e.style.width="1px";e.style.height="0px";a=document.createElement("div");a.appendChild(d);a.appendChild(e);a.style.height="0px";a.style.overflow="hidden";document.body.appendChild(a);e.style.verticalAlign="baseline";var g=this._calculateOffset(e),k=this._calculateOffset(d),
m=g[1]-k[1];e.style.verticalAlign="bottom";g=this._calculateOffset(e);k=this._calculateOffset(d);d=g[1]-k[1]-m;document.body.removeChild(a);this._setProperty("_textAscent",m);this._setProperty("_textDescent",d);return this};a.prototype._calculateOffset=function(a){var d=0,e=0;if(a.offsetParent){do d+=a.offsetLeft,e+=a.offsetTop;while(a=a.offsetParent)}else d+=a.offsetLeft,e+=a.offsetTop;return[d,e]};return a}({},e.core,e.constants);e.typographyloading_displaying=function(e,a,g,c){a.prototype.text=
function(a,c,e,k,m){this._validateParameters("text",arguments,[["String","Number","Number"],["String","Number","Number","Number","Number"]]);return this._doFill||this._doStroke?this._graphics.text.apply(this._graphics,arguments):this};a.prototype.textFont=function(a,c){if(arguments.length){if(!a)throw Error("null font passed to textFont");this._setProperty("_textFont",a);c&&(this._setProperty("_textSize",c),this._setProperty("_textLeading",c*g._DEFAULT_LEADMULT));return this._graphics._applyTextProperties()}return this};
return a}({},e.core,e.constants,e.helpers);e.src_app=function(e,a,g,c,d,h,p,k,m,f,l,t,F,q,r,u,z,x,w,y,v,A,B,D,H,L,G,I,K,M,O,E,C,P,J,X,Q,aa,W,Y,Z,ba,ca){e=function(){window.PHANTOMJS||window.mocha||(window.setup&&"function"===typeof window.setup||window.draw&&"function"===typeof window.draw)&&new a};"complete"===document.readyState?e():window.addEventListener("load",e,!1);return a}({},e.core,e.p5Color,e.p5Element,e.p5Font,e.p5Graphics2D,e.p5Graphics3D,e.p5Image,e.p5Vector,e.p5TableRow,e.p5Table,e.colorcreating_reading,
e.colorsetting,e.constants,e.dataconversion,e.dataarray_functions,e.datastring_functions,e.environment,e.imageimage,e.imageloading_displaying,e.imagepixels,e.inputfiles,e.inputkeyboard,e.inputacceleration,e.inputmouse,e.inputtime_date,e.inputtouch,e.mathmath,e.mathcalculation,e.mathrandom,e.mathnoise,e.mathtrigonometry,e.renderingrendering,e.shape2d_primitives,e.shape3d_primitives,e.shapeattributes,e.shapecurves,e.shapevertex,e.structure,e.transform,e.typographyattributes,e.typographyloading_displaying,
e.shaders);return e.src_app});
(function(e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).opentype=e()})(function(){return function n(a,g,c){function d(k,m){if(!g[k]){if(!a[k]){var f="function"==typeof require&&require;if(!m&&f)return f(k,!0);if(h)return h(k,!0);f=Error("Cannot find module '"+k+"'");throw f.code="MODULE_NOT_FOUND",f;}f=g[k]={exports:{}};
a[k][0].call(f.exports,function(f){var c=a[k][1][f];return d(c?c:f)},f,f.exports,n,a,g,c)}return g[k].exports}for(var h="function"==typeof require&&require,p=0;p<c.length;p++)d(c[p]);return d}({1:[function(n,a,g){g.argument=function(a,d){if(!a)throw Error(d);};g.assert=g.argument},{}],2:[function(n,a,g){g.line=function(a,d,h,g,k){a.beginPath();a.moveTo(d,h);a.lineTo(g,k);a.stroke()}},{}],3:[function(n,a,g){function c(a){this.font=a}function d(a){this.cmap=a}function h(a,d){this.encoding=a;this.charset=
d}function p(a){var d;switch(a.version){case 1:this.names=g.standardNames.slice();break;case 2:this.names=Array(a.numberOfGlyphs);for(d=0;d<a.numberOfGlyphs;d++)this.names[d]=a.glyphNameIndex[d]<g.standardNames.length?g.standardNames[a.glyphNameIndex[d]]:a.names[a.glyphNameIndex[d]-g.standardNames.length];break;case 2.5:this.names=Array(a.numberOfGlyphs);for(d=0;d<a.numberOfGlyphs;d++)this.names[d]=g.standardNames[d+a.glyphNameIndex[d]];break;case 3:this.names=[]}}c.prototype.charToGlyphIndex=function(a){a=
a.charCodeAt(0);var d=this.font.glyphs;if(!d)return null;for(var f=0;f<d.length;f+=1)for(var c=d[f],h=0;h<c.unicodes.length;h+=1)if(c.unicodes[h]===a)return f};d.prototype.charToGlyphIndex=function(a){return this.cmap.glyphIndexMap[a.charCodeAt(0)]||0};h.prototype.charToGlyphIndex=function(a){a=a.charCodeAt(0);return this.charset.indexOf(this.encoding[a])};p.prototype.nameToGlyphIndex=function(a){return this.names.indexOf(a)};p.prototype.glyphIndexToName=function(a){return this.names[a]};g.cffStandardStrings=
".notdef;space;exclam;quotedbl;numbersign;dollar;percent;ampersand;quoteright;parenleft;parenright;asterisk;plus;comma;hyphen;period;slash;zero;one;two;three;four;five;six;seven;eight;nine;colon;semicolon;less;equal;greater;question;at;A;B;C;D;E;F;G;H;I;J;K;L;M;N;O;P;Q;R;S;T;U;V;W;X;Y;Z;bracketleft;backslash;bracketright;asciicircum;underscore;quoteleft;a;b;c;d;e;f;g;h;i;j;k;l;m;n;o;p;q;r;s;t;u;v;w;x;y;z;braceleft;bar;braceright;asciitilde;exclamdown;cent;sterling;fraction;yen;florin;section;currency;quotesingle;quotedblleft;guillemotleft;guilsinglleft;guilsinglright;fi;fl;endash;dagger;daggerdbl;periodcentered;paragraph;bullet;quotesinglbase;quotedblbase;quotedblright;guillemotright;ellipsis;perthousand;questiondown;grave;acute;circumflex;tilde;macron;breve;dotaccent;dieresis;ring;cedilla;hungarumlaut;ogonek;caron;emdash;AE;ordfeminine;Lslash;Oslash;OE;ordmasculine;ae;dotlessi;lslash;oslash;oe;germandbls;onesuperior;logicalnot;mu;trademark;Eth;onehalf;plusminus;Thorn;onequarter;divide;brokenbar;degree;thorn;threequarters;twosuperior;registered;minus;eth;multiply;threesuperior;copyright;Aacute;Acircumflex;Adieresis;Agrave;Aring;Atilde;Ccedilla;Eacute;Ecircumflex;Edieresis;Egrave;Iacute;Icircumflex;Idieresis;Igrave;Ntilde;Oacute;Ocircumflex;Odieresis;Ograve;Otilde;Scaron;Uacute;Ucircumflex;Udieresis;Ugrave;Yacute;Ydieresis;Zcaron;aacute;acircumflex;adieresis;agrave;aring;atilde;ccedilla;eacute;ecircumflex;edieresis;egrave;iacute;icircumflex;idieresis;igrave;ntilde;oacute;ocircumflex;odieresis;ograve;otilde;scaron;uacute;ucircumflex;udieresis;ugrave;yacute;ydieresis;zcaron;exclamsmall;Hungarumlautsmall;dollaroldstyle;dollarsuperior;ampersandsmall;Acutesmall;parenleftsuperior;parenrightsuperior;266 ff;onedotenleader;zerooldstyle;oneoldstyle;twooldstyle;threeoldstyle;fouroldstyle;fiveoldstyle;sixoldstyle;sevenoldstyle;eightoldstyle;nineoldstyle;commasuperior;threequartersemdash;periodsuperior;questionsmall;asuperior;bsuperior;centsuperior;dsuperior;esuperior;isuperior;lsuperior;msuperior;nsuperior;osuperior;rsuperior;ssuperior;tsuperior;ff;ffi;ffl;parenleftinferior;parenrightinferior;Circumflexsmall;hyphensuperior;Gravesmall;Asmall;Bsmall;Csmall;Dsmall;Esmall;Fsmall;Gsmall;Hsmall;Ismall;Jsmall;Ksmall;Lsmall;Msmall;Nsmall;Osmall;Psmall;Qsmall;Rsmall;Ssmall;Tsmall;Usmall;Vsmall;Wsmall;Xsmall;Ysmall;Zsmall;colonmonetary;onefitted;rupiah;Tildesmall;exclamdownsmall;centoldstyle;Lslashsmall;Scaronsmall;Zcaronsmall;Dieresissmall;Brevesmall;Caronsmall;Dotaccentsmall;Macronsmall;figuredash;hypheninferior;Ogoneksmall;Ringsmall;Cedillasmall;questiondownsmall;oneeighth;threeeighths;fiveeighths;seveneighths;onethird;twothirds;zerosuperior;foursuperior;fivesuperior;sixsuperior;sevensuperior;eightsuperior;ninesuperior;zeroinferior;oneinferior;twoinferior;threeinferior;fourinferior;fiveinferior;sixinferior;seveninferior;eightinferior;nineinferior;centinferior;dollarinferior;periodinferior;commainferior;Agravesmall;Aacutesmall;Acircumflexsmall;Atildesmall;Adieresissmall;Aringsmall;AEsmall;Ccedillasmall;Egravesmall;Eacutesmall;Ecircumflexsmall;Edieresissmall;Igravesmall;Iacutesmall;Icircumflexsmall;Idieresissmall;Ethsmall;Ntildesmall;Ogravesmall;Oacutesmall;Ocircumflexsmall;Otildesmall;Odieresissmall;OEsmall;Oslashsmall;Ugravesmall;Uacutesmall;Ucircumflexsmall;Udieresissmall;Yacutesmall;Thornsmall;Ydieresissmall;001.000;001.001;001.002;001.003;Black;Bold;Book;Light;Medium;Regular;Roman;Semibold".split(";");
g.cffStandardEncoding="                                space exclam quotedbl numbersign dollar percent ampersand quoteright parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore quoteleft a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde                                   exclamdown cent sterling fraction yen florin section currency quotesingle quotedblleft guillemotleft guilsinglleft guilsinglright fi fl  endash dagger daggerdbl periodcentered  paragraph bullet quotesinglbase quotedblbase quotedblright guillemotright ellipsis perthousand  questiondown  grave acute circumflex tilde macron breve dotaccent dieresis  ring cedilla  hungarumlaut ogonek caron emdash                 AE  ordfeminine     Lslash Oslash OE ordmasculine      ae    dotlessi   lslash oslash oe germandbls".split(" ");
g.cffExpertEncoding="                                space exclamsmall Hungarumlautsmall  dollaroldstyle dollarsuperior ampersandsmall Acutesmall parenleftsuperior parenrightsuperior twodotenleader onedotenleader comma hyphen period fraction zerooldstyle oneoldstyle twooldstyle threeoldstyle fouroldstyle fiveoldstyle sixoldstyle sevenoldstyle eightoldstyle nineoldstyle colon semicolon commasuperior threequartersemdash periodsuperior questionsmall  asuperior bsuperior centsuperior dsuperior esuperior   isuperior   lsuperior msuperior nsuperior osuperior   rsuperior ssuperior tsuperior  ff fi fl ffi ffl parenleftinferior  parenrightinferior Circumflexsmall hyphensuperior Gravesmall Asmall Bsmall Csmall Dsmall Esmall Fsmall Gsmall Hsmall Ismall Jsmall Ksmall Lsmall Msmall Nsmall Osmall Psmall Qsmall Rsmall Ssmall Tsmall Usmall Vsmall Wsmall Xsmall Ysmall Zsmall colonmonetary onefitted rupiah Tildesmall                                   exclamdownsmall centoldstyle Lslashsmall   Scaronsmall Zcaronsmall Dieresissmall Brevesmall Caronsmall  Dotaccentsmall   Macronsmall   figuredash hypheninferior   Ogoneksmall Ringsmall Cedillasmall    onequarter onehalf threequarters questiondownsmall oneeighth threeeighths fiveeighths seveneighths onethird twothirds   zerosuperior onesuperior twosuperior threesuperior foursuperior fivesuperior sixsuperior sevensuperior eightsuperior ninesuperior zeroinferior oneinferior twoinferior threeinferior fourinferior fiveinferior sixinferior seveninferior eightinferior nineinferior centinferior dollarinferior periodinferior commainferior Agravesmall Aacutesmall Acircumflexsmall Atildesmall Adieresissmall Aringsmall AEsmall Ccedillasmall Egravesmall Eacutesmall Ecircumflexsmall Edieresissmall Igravesmall Iacutesmall Icircumflexsmall Idieresissmall Ethsmall Ntildesmall Ogravesmall Oacutesmall Ocircumflexsmall Otildesmall Odieresissmall OEsmall Oslashsmall Ugravesmall Uacutesmall Ucircumflexsmall Udieresissmall Yacutesmall Thornsmall Ydieresissmall".split(" ");
g.standardNames=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(" ");
g.DefaultEncoding=c;g.CmapEncoding=d;g.CffEncoding=h;g.GlyphNames=p;g.addGlyphNames=function(a){for(var d,f=a.tables.cmap.glyphIndexMap,c=Object.keys(f),h=0;h<c.length;h+=1){var g=c[h];d=a.glyphs[f[g]];d.addUnicode(parseInt(g))}for(h=0;h<a.glyphs.length;h+=1)d=a.glyphs[h],d.name=a.cffEncoding?a.cffEncoding.charset[h]:a.glyphNames.glyphIndexToName(h)}},{}],4:[function(n,a,g){function c(a){a=a||{};this.familyName=a.familyName||" ";this.styleName=a.styleName||" ";this.designer=a.designer||" ";this.designerURL=
a.designerURL||" ";this.manufacturer=a.manufacturer||" ";this.manufacturerURL=a.manufacturerURL||" ";this.license=a.license||" ";this.licenseURL=a.licenseURL||" ";this.version=a.version||"Version 0.1";this.description=a.description||" ";this.copyright=a.copyright||" ";this.trademark=a.trademark||" ";this.unitsPerEm=a.unitsPerEm||1E3;this.ascender=a.ascender;this.descender=a.descender;this.supported=!0;this.glyphs=a.glyphs||[];this.encoding=new p.DefaultEncoding(this);this.tables={}}var d=n("./path"),
h=n("./tables/sfnt"),p=n("./encoding");c.prototype.hasChar=function(a){return null!==this.encoding.charToGlyphIndex(a)};c.prototype.charToGlyphIndex=function(a){return this.encoding.charToGlyphIndex(a)};c.prototype.charToGlyph=function(a){a=this.charToGlyphIndex(a);a=this.glyphs[a];return a||(a=this.glyphs[0]),a};c.prototype.stringToGlyphs=function(a){for(var d=[],f=0;f<a.length;f+=1)d.push(this.charToGlyph(a[f]));return d};c.prototype.nameToGlyphIndex=function(a){return this.glyphNames.nameToGlyphIndex(a)};
c.prototype.nameToGlyph=function(a){a=this.nametoGlyphIndex(a);a=this.glyphs[a];return a||(a=this.glyphs[0]),a};c.prototype.glyphIndexToName=function(a){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(a):""};c.prototype.getKerningValue=function(a,d){a=a.index||a;d=d.index||d;var f=this.getGposKerningValue;return f?f(a,d):this.kerningPairs[a+","+d]||0};c.prototype.forEachGlyph=function(a,d,f,c,h,g){if(this.supported){d=void 0!==d?d:0;f=void 0!==f?f:0;c=void 0!==c?c:72;h=h||
{};var p=void 0===h.kerning?!0:h.kerning,r=1/this.unitsPerEm*c;a=this.stringToGlyphs(a);for(var u=0;u<a.length;u+=1){var z=a[u];if(g(z,d,f,c,h),z.advanceWidth&&(d+=z.advanceWidth*r),p&&u<a.length-1)z=this.getKerningValue(z,a[u+1]),d+=z*r}}};c.prototype.getPath=function(a,c,f,l,h){var g=new d.Path;return this.forEachGlyph(a,c,f,l,h,function(a,f,d,c){a=a.getPath(f,d,c);g.extend(a)}),g};c.prototype.draw=function(a,d,f,c,h,g){this.getPath(d,f,c,h,g).draw(a)};c.prototype.drawPoints=function(a,d,f,c,h,
g){this.forEachGlyph(d,f,c,h,g,function(f,d,c,l){f.drawPoints(a,d,c,l)})};c.prototype.drawMetrics=function(a,d,f,c,h,g){this.forEachGlyph(d,f,c,h,g,function(f,d,c,l){f.drawMetrics(a,d,c,l)})};c.prototype.validate=function(){function a(c){f[c]&&0<f[c].trim().length||d.push("No "+c+" specified.")}var d=[],f=this;a("familyName");a("weightName");a("manufacturer");a("copyright");a("version");0<this.unitsPerEm||d.push("No unitsPerEm specified.")};c.prototype.toTables=function(){return h.fontToTable(this)};
c.prototype.toBuffer=function(){for(var a=this.toTables().encode(),d=new ArrayBuffer(a.length),f=new Uint8Array(d),c=0;c<a.length;c++)f[c]=a[c];return d};c.prototype.download=function(){var a=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf",d=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;window.requestFileSystem(window.TEMPORARY,d.byteLength,function(f){f.root.getFile(a,{create:!0},function(a){a.createWriter(function(f){var c=new DataView(d),
c=new Blob([c],{type:"font/opentype"});f.write(c);f.addEventListener("writeend",function(){location.href=a.toURL()},!1)})})},function(a){throw a;})};g.Font=c},{"./encoding":3,"./path":8,"./tables/sfnt":23}],5:[function(n,a,g){function c(a){this.font=a.font||null;this.index=a.index||0;this.name=a.name||null;this.unicode=a.unicode||void 0;this.unicodes=a.unicodes||void 0!==a.unicode?[a.unicode]:[];this.xMin=a.xMin||0;this.yMin=a.yMin||0;this.xMax=a.xMax||0;this.yMax=a.yMax||0;this.advanceWidth=a.advanceWidth||
0;this.path=a.path||null}var d=n("./check"),h=n("./draw"),p=n("./path");c.prototype.addUnicode=function(a){0===this.unicodes.length&&(this.unicode=a);this.unicodes.push(a)};c.prototype.getPath=function(a,d,f){a=void 0!==a?a:0;d=void 0!==d?d:0;f=1/this.font.unitsPerEm*(void 0!==f?f:72);for(var c=new p.Path,h=this.path.commands,g=0;g<h.length;g+=1){var q=h[g];"M"===q.type?c.moveTo(a+q.x*f,d+-q.y*f):"L"===q.type?c.lineTo(a+q.x*f,d+-q.y*f):"Q"===q.type?c.quadraticCurveTo(a+q.x1*f,d+-q.y1*f,a+q.x*f,d+
-q.y*f):"C"===q.type?c.curveTo(a+q.x1*f,d+-q.y1*f,a+q.x2*f,d+-q.y2*f,a+q.x*f,d+-q.y*f):"Z"===q.type&&c.closePath()}return c};c.prototype.getContours=function(){if(void 0===this.points)return[];for(var a=[],c=[],f=0;f<this.points.length;f+=1){var l=this.points[f];c.push(l);l.lastPointOfContour&&(a.push(c),c=[])}return d.argument(0===c.length,"There are still points left in the current contour."),a};c.prototype.getMetrics=function(){for(var a=this.path.commands,d=[],f=[],c=0;c<a.length;c+=1){var h=
a[c];"Z"!==h.type&&(d.push(h.x),f.push(h.y));"Q"!==h.type&&"C"!==h.type||(d.push(h.x1),f.push(h.y1));"C"===h.type&&(d.push(h.x2),f.push(h.y2))}a={xMin:Math.min.apply(null,d),yMin:Math.min.apply(null,f),xMax:Math.max.apply(null,d),yMax:Math.max.apply(null,f),leftSideBearing:0};return a.rightSideBearing=this.advanceWidth-a.leftSideBearing-(a.xMax-a.xMin),a};c.prototype.draw=function(a,d,f,c){this.getPath(d,f,c).draw(a)};c.prototype.drawPoints=function(a,d,f,c){function h(d,f,c,l){var t=2*Math.PI;a.beginPath();
for(var g=0;g<d.length;g+=1)a.moveTo(f+d[g].x*l,c+d[g].y*l),a.arc(f+d[g].x*l,c+d[g].y*l,2,0,t,!1);a.closePath();a.fill()}d=void 0!==d?d:0;f=void 0!==f?f:0;c=1/this.font.unitsPerEm*(void 0!==c?c:24);for(var g=[],p=[],r=this.path,u=0;u<r.commands.length;u+=1){var z=r.commands[u];void 0!==z.x&&g.push({x:z.x,y:-z.y});void 0!==z.x1&&p.push({x:z.x1,y:-z.y1});void 0!==z.x2&&p.push({x:z.x2,y:-z.y2})}a.fillStyle="blue";h(g,d,f,c);a.fillStyle="red";h(p,d,f,c)};c.prototype.drawMetrics=function(a,d,f,c){d=void 0!==
d?d:0;f=void 0!==f?f:0;c=1/this.font.unitsPerEm*(void 0!==c?c:24);a.lineWidth=1;a.strokeStyle="black";h.line(a,d,-1E4,d,1E4);h.line(a,-1E4,f,1E4,f);a.strokeStyle="blue";h.line(a,d+this.xMin*c,-1E4,d+this.xMin*c,1E4);h.line(a,d+this.xMax*c,-1E4,d+this.xMax*c,1E4);h.line(a,-1E4,f+-this.yMin*c,1E4,f+-this.yMin*c);h.line(a,-1E4,f+-this.yMax*c,1E4,f+-this.yMax*c);a.strokeStyle="green";h.line(a,d+this.advanceWidth*c,-1E4,d+this.advanceWidth*c,1E4)};g.Glyph=c},{"./check":1,"./draw":2,"./path":8}],6:[function(n,
a,g){function c(a,d){n("fs").readFile(a,function(a,f){var c;if(a)c=d(a.message);else{c=new ArrayBuffer(f.length);for(var l=new Uint8Array(c),h=0;h<f.length;h+=1)l[h]=f[h];c=void d(null,c)}return c})}function d(a,d){var f=new XMLHttpRequest;f.open("get",a,!0);f.responseType="arraybuffer";f.onload=function(){return 200!==f.status?d("Font could not be loaded: "+f.statusText):d(null,f.response)};f.send()}function h(a){var d,f,c,h,g,n,O,E=new k.Font;a=new DataView(a,0);var C=m.getFixed(a,0);if(1===C)E.outlinesFormat=
"truetype";else{if(C=m.getTag(a,0),"OTTO"!==C)throw Error("Unsupported OpenType version "+C);E.outlinesFormat="cff"}for(var C=m.getUShort(a,4),P=12,J=0;C>J;J+=1){var X=m.getTag(a,P),Q=m.getULong(a,P+8);switch(X){case "cmap":E.tables.cmap=l.parse(a,Q);E.encoding=new p.CmapEncoding(E.tables.cmap);E.encoding||(E.supported=!1);break;case "head":E.tables.head=r.parse(a,Q);E.unitsPerEm=E.tables.head.unitsPerEm;d=E.tables.head.indexToLocFormat;break;case "hhea":E.tables.hhea=u.parse(a,Q);E.ascender=E.tables.hhea.ascender;
E.descender=E.tables.hhea.descender;E.numberOfHMetrics=E.tables.hhea.numberOfHMetrics;break;case "hmtx":f=Q;break;case "maxp":E.tables.maxp=y.parse(a,Q);E.numGlyphs=E.tables.maxp.numGlyphs;break;case "name":E.tables.name=v.parse(a,Q);E.familyName=E.tables.name.fontFamily;E.styleName=E.tables.name.fontSubfamily;break;case "OS/2":E.tables.os2=A.parse(a,Q);break;case "post":E.tables.post=B.parse(a,Q);E.glyphNames=new p.GlyphNames(E.tables.post);break;case "glyf":c=Q;break;case "loca":h=Q;break;case "CFF ":g=
Q;break;case "kern":n=Q;break;case "GPOS":O=Q}P+=16}c&&h?(d=w.parse(a,h,E.numGlyphs,0===d),E.glyphs=F.parse(a,c,d,E),z.parse(a,f,E.numberOfHMetrics,E.numGlyphs,E.glyphs),p.addGlyphNames(E)):g?(t.parse(a,g,E),p.addGlyphNames(E)):E.supported=!1;return E.supported&&(E.kerningPairs=n?x.parse(a,n):{},O&&q.parse(a,O,E)),E}var p=n("./encoding"),k=n("./font");a=n("./glyph");var m=n("./parse"),f=n("./path"),l=n("./tables/cmap"),t=n("./tables/cff"),F=n("./tables/glyf"),q=n("./tables/gpos"),r=n("./tables/head"),
u=n("./tables/hhea"),z=n("./tables/hmtx"),x=n("./tables/kern"),w=n("./tables/loca"),y=n("./tables/maxp"),v=n("./tables/name"),A=n("./tables/os2"),B=n("./tables/post");g._parse=m;g.Font=k.Font;g.Glyph=a.Glyph;g.Path=f.Path;g.parse=h;g.load=function(a,f){("undefined"==typeof window?c:d)(a,function(a,d){if(a)return f(a);var c=h(d);return c.supported?f(null,c):f("Font is not supported (is this a Postscript font?)")})}},{"./encoding":3,"./font":4,"./glyph":5,"./parse":7,"./path":8,"./tables/cff":10,"./tables/cmap":11,
"./tables/glyf":12,"./tables/gpos":13,"./tables/head":14,"./tables/hhea":15,"./tables/hmtx":16,"./tables/kern":17,"./tables/loca":18,"./tables/maxp":19,"./tables/name":20,"./tables/os2":21,"./tables/post":22,fs:void 0}],7:[function(n,a,g){function c(a,d){this.data=a;this.offset=d;this.relativeOffset=0}g.getByte=function(a,d){return a.getUint8(d)};g.getCard8=g.getByte;g.getUShort=function(a,d){return a.getUint16(d,!1)};g.getCard16=g.getUShort;g.getShort=function(a,d){return a.getInt16(d,!1)};g.getULong=
function(a,d){return a.getUint32(d,!1)};g.getFixed=function(a,d){var c=a.getInt16(d,!1),g=a.getUint16(d+2,!1);return c+g/65535};g.getTag=function(a,d){for(var c="",g=d;d+4>g;g+=1)c+=String.fromCharCode(a.getInt8(g));return c};g.getOffset=function(a,d,c){for(var g=0,f=0;c>f;f+=1)g<<=8,g+=a.getUint8(d+f);return g};g.getBytes=function(a,d,c){for(var g=[];c>d;d+=1)g.push(a.getUint8(d));return g};g.bytesToString=function(a){for(var d="",c=0;c<a.length;c+=1)d+=String.fromCharCode(a[c]);return d};var d=
{"byte":1,uShort:2,"short":2,uLong:4,fixed:4,longDateTime:8,tag:4};c.prototype.parseByte=function(){var a=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a};c.prototype.parseChar=function(){var a=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a};c.prototype.parseCard8=c.prototype.parseByte;c.prototype.parseUShort=function(){var a=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a};c.prototype.parseCard16=
c.prototype.parseUShort;c.prototype.parseSID=c.prototype.parseUShort;c.prototype.parseOffset16=c.prototype.parseUShort;c.prototype.parseShort=function(){var a=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a};c.prototype.parseF2Dot14=function(){var a=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,a};c.prototype.parseULong=function(){var a=g.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,
a};c.prototype.parseFixed=function(){var a=g.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a};c.prototype.parseOffset16List=c.prototype.parseUShortList=function(a){for(var d=Array(a),c=this.data,m=this.offset+this.relativeOffset,f=0;a>f;f++)d[f]=g.getUShort(c,m),m+=2;return this.relativeOffset+=2*a,d};c.prototype.parseString=function(a){var d=this.data,c=this.offset+this.relativeOffset,g="";this.relativeOffset+=a;for(var f=0;a>f;f++)g+=String.fromCharCode(d.getUint8(c+
f));return g};c.prototype.parseTag=function(){return this.parseString(4)};c.prototype.parseLongDateTime=function(){var a=g.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,a};c.prototype.parseFixed=function(){var a=g.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a/65536};c.prototype.parseVersion=function(){var a=g.getUShort(this.data,this.offset+this.relativeOffset),d=g.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=
4,a+d/4096/10};c.prototype.skip=function(a,c){void 0===c&&(c=1);this.relativeOffset+=d[a]*c};g.Parser=c},{}],8:[function(n,a,g){function c(){this.commands=[];this.fill="black";this.stroke=null;this.strokeWidth=1}c.prototype.moveTo=function(a,c){this.commands.push({type:"M",x:a,y:c})};c.prototype.lineTo=function(a,c){this.commands.push({type:"L",x:a,y:c})};c.prototype.curveTo=c.prototype.bezierCurveTo=function(a,c,g,k,m,f){this.commands.push({type:"C",x1:a,y1:c,x2:g,y2:k,x:m,y:f})};c.prototype.quadTo=
c.prototype.quadraticCurveTo=function(a,c,g,k){this.commands.push({type:"Q",x1:a,y1:c,x:g,y:k})};c.prototype.close=c.prototype.closePath=function(){this.commands.push({type:"Z"})};c.prototype.extend=function(a){a.commands&&(a=a.commands);Array.prototype.push.apply(this.commands,a)};c.prototype.draw=function(a){a.beginPath();for(var c=0;c<this.commands.length;c+=1){var g=this.commands[c];"M"===g.type?a.moveTo(g.x,g.y):"L"===g.type?a.lineTo(g.x,g.y):"C"===g.type?a.bezierCurveTo(g.x1,g.y1,g.x2,g.y2,
g.x,g.y):"Q"===g.type?a.quadraticCurveTo(g.x1,g.y1,g.x,g.y):"Z"===g.type&&a.closePath()}this.fill&&(a.fillStyle=this.fill,a.fill());this.stroke&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeWidth,a.stroke())};c.prototype.toPathData=function(a){function c(){for(var f="",l=0;l<arguments.length;l+=1){var k=arguments[l];0<=k&&0<l&&(f+=" ");k=Math.round(k)===k?""+Math.round(k):k.toFixed(a);f+=k}return f}a=void 0!==a?a:2;for(var g="",k=0;k<this.commands.length;k+=1){var m=this.commands[k];"M"===m.type?
g+="M"+c(m.x,m.y):"L"===m.type?g+="L"+c(m.x,m.y):"C"===m.type?g+="C"+c(m.x1,m.y1,m.x2,m.y2,m.x,m.y):"Q"===m.type?g+="Q"+c(m.x1,m.y1,m.x,m.y):"Z"===m.type&&(g+="Z")}return g};c.prototype.toSVG=function(a){var c='<path d="';return c+=this.toPathData(a),c+='"',this.fill&"black"!==this.fill&&(c+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(c+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),c+"/>"};g.Path=c},{}],9:[function(n,a,g){function c(a,d,f){var c;for(c=
0;c<d.length;c+=1){var h=d[c];this[h.name]=h.value}if(this.tableName=a,this.fields=d,f)for(a=Object.keys(f),c=0;c<a.length;c+=1)d=a[c],h=f[d],void 0!==this[d]&&(this[d]=h)}var d=n("./check"),h=n("./types").encode,p=n("./types").sizeOf;c.prototype.sizeOf=function(){for(var a=0,c=0;c<this.fields.length;c+=1){var f=this.fields[c],l=this[f.name];if(void 0===l&&(l=f.value),"function"==typeof l.sizeOf)a+=l.sizeOf();else{var h=p[f.type];d.assert("function"==typeof h,"Could not find sizeOf function for field"+
f.name);a+=h(l)}}return a};c.prototype.encode=function(){return h.TABLE(this)};g.Table=c},{"./check":1,"./types":24}],10:[function(n,a,g){function c(a,d){if(a===d)return!0;if(Array.isArray(a)&&Array.isArray(d)){if(a.length!==d.length)return!1;for(var f=0;f<a.length;f+=1)if(!c(a[f],d[f]))return!1;return!0}return!1}function d(a,d,f){var c,l,k,h=[],g=[];k=x.getCard16(a,d);if(0!==k){var t=x.getByte(a,d+2);l=d+(k+1)*t+2;var m=d+3;for(c=0;k+1>c;c+=1)h.push(x.getOffset(a,m,t)),m+=t;k=l+h[k]}else k=d+2;for(c=
0;c<h.length-1;c+=1)t=x.getBytes(a,l+h[c],l+h[c+1]),f&&(t=f(t)),g.push(t);return{objects:g,startOffset:d,endOffset:k}}function h(a,d){var f,c,l,k;if(28===d)return f=a.parseByte(),c=a.parseByte(),f<<8|c;if(29===d)return f=a.parseByte(),c=a.parseByte(),l=a.parseByte(),k=a.parseByte(),f<<24|c<<16|l<<8|k;if(30===d){f="";for(c=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){k=a.parseByte();l=k>>4;k&=15;if(15===l)break;if(f+=c[l],15===k)break;f+=c[k]}return parseFloat(f)}if(32<=d&&246>=
d)return d-139;if(247<=d&&250>=d)return f=a.parseByte(),256*(d-247)+f+108;if(251<=d&&254>=d)return f=a.parseByte(),256*-(d-251)-f-108;throw Error("Invalid b0 "+d);}function p(a,d,f){var c=new x.Parser(a,void 0!==d?d:0);d=[];var l=[];for(f=void 0!==f?f:a.length;c.relativeOffset<f;)a=c.parseByte(),21>=a?(12===a&&(a=1200+c.parseByte()),d.push([a,l]),l=[]):l.push(h(c,a));f={};for(a=0;a<d.length;a+=1){c=d[a][0];l=d[a][1];if(l=1===l.length?l[0]:l,f.hasOwnProperty(c))throw Error("Object "+f+" already has key "+
c);f[c]=l}return f}function k(a,d){return 390>=d?u.cffStandardStrings[d]:a[d-391]}function m(a,d,f){for(var c={},l=0;l<d.length;l+=1){var h=d[l],g=a[h.op];void 0===g&&(g=void 0!==h.value?h.value:null);"SID"===h.type&&(g=k(f,g));c[h.name]=g}return c}function f(a,d,f){function c(a,d){y&&r.closePath();r.moveTo(a,d);y=!0}function l(){0!==q.length%2&&!p&&(u=q.shift()+d.nominalWidthX);F+=q.length>>1;q.length=0;p=!0}function k(a){for(var z,B,w,x,A,V,S,T,R,U,N=0;N<a.length;)switch(A=a[N],N+=1,A){case 1:l();
break;case 3:l();break;case 4:1<q.length&&!p&&(u=q.shift()+d.nominalWidthX,p=!0);n+=q.pop();c(v,n);break;case 5:for(;0<q.length;)v+=q.shift(),n+=q.shift(),r.lineTo(v,n);break;case 6:for(;0<q.length&&(v+=q.shift(),r.lineTo(v,n),0!==q.length);)n+=q.shift(),r.lineTo(v,n);break;case 7:for(;0<q.length&&(n+=q.shift(),r.lineTo(v,n),0!==q.length);)v+=q.shift(),r.lineTo(v,n);break;case 8:for(;0<q.length;)h=v+q.shift(),g=n+q.shift(),t=h+q.shift(),m=g+q.shift(),v=t+q.shift(),n=m+q.shift(),r.curveTo(h,g,t,m,
v,n);break;case 10:A=q.pop()+d.subrsBias;(A=d.subrs[A])&&k(A);break;case 11:return;case 12:switch(A=a[N],N+=1,A){case 35:h=v+q.shift();g=n+q.shift();t=h+q.shift();m=g+q.shift();A=t+q.shift();V=m+q.shift();S=A+q.shift();T=V+q.shift();R=S+q.shift();U=T+q.shift();v=R+q.shift();n=U+q.shift();q.shift();r.curveTo(h,g,t,m,A,V);r.curveTo(S,T,R,U,v,n);break;case 34:h=v+q.shift();g=n;t=h+q.shift();m=g+q.shift();A=t+q.shift();V=m;S=A+q.shift();T=m;R=S+q.shift();U=n;v=R+q.shift();r.curveTo(h,g,t,m,A,V);r.curveTo(S,
T,R,U,v,n);break;case 36:h=v+q.shift();g=n+q.shift();t=h+q.shift();m=g+q.shift();A=t+q.shift();V=m;S=A+q.shift();T=m;R=S+q.shift();U=T+q.shift();v=R+q.shift();r.curveTo(h,g,t,m,A,V);r.curveTo(S,T,R,U,v,n);break;case 37:h=v+q.shift();g=n+q.shift();t=h+q.shift();m=g+q.shift();A=t+q.shift();V=m+q.shift();S=A+q.shift();T=V+q.shift();R=S+q.shift();U=T+q.shift();Math.abs(R-v)>Math.abs(U-n)?v=R+q.shift():n=U+q.shift();r.curveTo(h,g,t,m,A,V);r.curveTo(S,T,R,U,v,n);break;default:console.log("Glyph "+f+": unknown operator 1200"+
A),q.length=0}break;case 14:0<q.length&&!p&&(u=q.shift()+d.nominalWidthX,p=!0);y&&(r.closePath(),y=!1);break;case 18:l();break;case 19:case 20:l();N+=F+7>>3;break;case 21:2<q.length&&!p&&(u=q.shift()+d.nominalWidthX,p=!0);n+=q.pop();v+=q.pop();c(v,n);break;case 22:1<q.length&&!p&&(u=q.shift()+d.nominalWidthX,p=!0);v+=q.pop();c(v,n);break;case 23:l();break;case 24:for(;2<q.length;)h=v+q.shift(),g=n+q.shift(),t=h+q.shift(),m=g+q.shift(),v=t+q.shift(),n=m+q.shift(),r.curveTo(h,g,t,m,v,n);v+=q.shift();
n+=q.shift();r.lineTo(v,n);break;case 25:for(;6<q.length;)v+=q.shift(),n+=q.shift(),r.lineTo(v,n);h=v+q.shift();g=n+q.shift();t=h+q.shift();m=g+q.shift();v=t+q.shift();n=m+q.shift();r.curveTo(h,g,t,m,v,n);break;case 26:for(q.length%2&&(v+=q.shift());0<q.length;)h=v,g=n+q.shift(),t=h+q.shift(),m=g+q.shift(),v=t,n=m+q.shift(),r.curveTo(h,g,t,m,v,n);break;case 27:for(q.length%2&&(n+=q.shift());0<q.length;)h=v+q.shift(),g=n,t=h+q.shift(),m=g+q.shift(),v=t+q.shift(),n=m,r.curveTo(h,g,t,m,v,n);break;case 28:z=
a[N];B=a[N+1];q.push((z<<24|B<<16)>>16);N+=2;break;case 29:A=q.pop()+d.gsubrsBias;(A=d.gsubrs[A])&&k(A);break;case 30:for(;0<q.length&&(h=v,g=n+q.shift(),t=h+q.shift(),m=g+q.shift(),v=t+q.shift(),n=m+(1===q.length?q.shift():0),r.curveTo(h,g,t,m,v,n),0!==q.length);)h=v+q.shift(),g=n,t=h+q.shift(),m=g+q.shift(),n=m+q.shift(),v=t+(1===q.length?q.shift():0),r.curveTo(h,g,t,m,v,n);break;case 31:for(;0<q.length&&(h=v+q.shift(),g=n,t=h+q.shift(),m=g+q.shift(),n=m+q.shift(),v=t+(1===q.length?q.shift():0),
r.curveTo(h,g,t,m,v,n),0!==q.length);)h=v,g=n+q.shift(),t=h+q.shift(),m=g+q.shift(),v=t+q.shift(),n=m+(1===q.length?q.shift():0),r.curveTo(h,g,t,m,v,n);break;default:32>A?console.log("Glyph "+f+": unknown operator "+A):247>A?q.push(A-139):251>A?(z=a[N],N+=1,q.push(256*(A-247)+z+108)):255>A?(z=a[N],N+=1,q.push(256*-(A-251)-z-108)):(z=a[N],B=a[N+1],w=a[N+2],x=a[N+3],N+=4,q.push((z<<24|B<<16|w<<8|x)/65536))}}var h,g,t,m,r=new w.Path,q=[],F=0,p=!1,u=d.defaultWidthX,y=!1,v=0,n=0;k(a);a=new z.Glyph({font:d,
index:f});return a.path=r,a.advanceWidth=u,a}function l(a){return 1240>a.length?107:33900>a.length?1131:32768}function t(a,d){var f,c=u.cffStandardStrings.indexOf(a);return c=d.indexOf(a),0<=c?f=c+u.cffStandardStrings.length:(f=u.cffStandardStrings.length+d.length,d.push(a)),f}function F(a,d,f){for(var l={},h=0;h<a.length;h+=1){var k=a[h],g=d[k.name];void 0===g||c(g,k.value)||("SID"===k.type&&(g=t(g,f)),l[k.op]={name:k.name,type:k.type,value:g})}return l}function q(a,d){var f=new y.Table("Top DICT",
[{name:"dict",type:"DICT",value:{}}]);return f.dict=F(v,a,d),f}function r(a){var d=new y.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return d.topDicts=[{name:"topDict_0",type:"TABLE",value:a}],d}var u=n("../encoding"),z=n("../glyph"),x=n("../parse"),w=n("../path"),y=n("../table"),v=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},
{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:"real real real real real real".split(" "),value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number",
"number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],A=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];g.parse=function(a,
c,h){h.tables.cff={};var g;g={};g=(g.formatMajor=x.getCard8(a,c),g.formatMinor=x.getCard8(a,c+1),g.size=x.getCard8(a,c+2),g.offsetSize=x.getCard8(a,c+3),g.startOffset=c,g.endOffset=c+4,g);g=d(a,g.endOffset,x.bytesToString);g=d(a,g.endOffset);var t=d(a,g.endOffset,x.bytesToString),q=d(a,t.endOffset);h.gsubrs=q.objects;h.gsubrsBias=l(h.gsubrs);q=new DataView((new Uint8Array(g.objects[0])).buffer);g=t.objects;q=p(q,0,q.byteLength);q=m(q,v,g);h.tables.cff.topDict=q;g=c+q["private"][1];var r;r=t.objects;
var F=p(a,g,q["private"][0]);r=m(F,A,r);(h.defaultWidthX=r.defaultWidthX,h.nominalWidthX=r.nominalWidthX,0!==r.subrs)?(g=d(a,g+r.subrs),h.subrs=g.objects,h.subrsBias=l(h.subrs)):(h.subrs=[],h.subrsBias=0);g=d(a,c+q.charStrings);h.nGlyphs=g.objects.length;r=h.nGlyphs;var F=t.objects,y,n,z,w=new x.Parser(a,c+q.charset);--r;t=[".notdef"];y=w.parseCard8();if(0===y)for(y=0;r>y;y+=1)n=w.parseSID(),t.push(k(F,n));else if(1===y)for(;t.length<=r;)for(n=w.parseSID(),z=w.parseCard8(),y=0;z>=y;y+=1)t.push(k(F,
n)),n+=1;else{if(2!==y)throw Error("Unknown charset format "+y);for(;t.length<=r;)for(n=w.parseSID(),z=w.parseCard16(),y=0;z>=y;y+=1)t.push(k(F,n)),n+=1}if(0===q.encoding)a=new u.CffEncoding(u.cffStandardEncoding,t);else if(1===q.encoding)a=new u.CffEncoding(u.cffExpertEncoding,t);else{r={};a=new x.Parser(a,c+q.encoding);c=a.parseCard8();if(0===c)for(F=a.parseCard8(),c=0;F>c;c+=1)q=a.parseCard8(),r[q]=c;else{if(1!==c)throw Error("Unknown encoding format "+c);F=a.parseCard8();q=1;for(c=0;F>c;c+=1)for(w=
a.parseCard8(),y=a.parseCard8(),n=w;w+y>=n;n+=1)r[n]=q,q+=1}a=new u.CffEncoding(r,t)}h.cffEncoding=a;h.encoding=h.encoding||h.cffEncoding;h.glyphs=[];for(a=0;a<h.nGlyphs;a+=1)h.glyphs.push(f(g.objects[a],h,a))};g.make=function(a,d){for(var f=new y.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",
type:"TABLE"}]),c={version:d.version,fullName:d.fullName,familyName:d.familyName,weight:d.weightName,charset:999,encoding:0,charStrings:999,"private":[0,999]},l=[],h=1;h<a.length;h+=1)l.push(a[h].name);h=[];f.header=new y.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]);var k=[d.postScriptName],g=new y.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);g.names=[];for(var m=0;m<
k.length;m+=1)g.names.push({name:"name_"+m,type:"NAME",value:k[m]});f.nameIndex=g;k=q(c,h);f.topDictIndex=r(k);f.globalSubrIndex=new y.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]);g=new y.Table("Charsets",[{name:"format",type:"Card8",value:0}]);for(m=0;m<l.length;m+=1){var p=t(l[m],h);g.fields.push({name:"glyph_"+m,type:"SID",value:p})}f.charsets=g;l=new y.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(g=0;g<a.length;g+=1){var m=a[g],p=[],u=m.path;
p.push({name:"width",type:"NUMBER",value:m.advanceWidth});for(var n=0,v=0,z=0;z<u.commands.length;z+=1){var w=u.commands[z];if("Q"===w.type)var x=1/3,W=2/3,w={type:"C",x:w.x,y:w.y,x1:x*n+W*w.x1,y1:x*v+W*w.y1,x2:x*w.x+W*w.x1,y2:x*w.y+W*w.y1};if("M"===w.type)n=Math.round(w.x-n),v=Math.round(w.y-v),p.push({name:"dx",type:"NUMBER",value:n}),p.push({name:"dy",type:"NUMBER",value:v}),p.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(w.x),v=Math.round(w.y);else if("L"===w.type)n=Math.round(w.x-n),
v=Math.round(w.y-v),p.push({name:"dx",type:"NUMBER",value:n}),p.push({name:"dy",type:"NUMBER",value:v}),p.push({name:"rlineto",type:"OP",value:5}),n=Math.round(w.x),v=Math.round(w.y);else if("C"===w.type){var x=Math.round(w.x1-n),W=Math.round(w.y1-v),Y=Math.round(w.x2-w.x1),Z=Math.round(w.y2-w.y1),n=Math.round(w.x-w.x2),v=Math.round(w.y-w.y2);p.push({name:"dx1",type:"NUMBER",value:x});p.push({name:"dy1",type:"NUMBER",value:W});p.push({name:"dx2",type:"NUMBER",value:Y});p.push({name:"dy2",type:"NUMBER",
value:Z});p.push({name:"dx",type:"NUMBER",value:n});p.push({name:"dy",type:"NUMBER",value:v});p.push({name:"rrcurveto",type:"OP",value:8});n=Math.round(w.x);v=Math.round(w.y)}}p=(p.push({name:"endchar",type:"OP",value:14}),p);l.charStrings.push({name:m.name,type:"CHARSTRING",value:p})}f.charStringsIndex=l;l=new y.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);l=(l.dict=F(A,{},h),l);g=new y.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);l=(g.privateDicts=[{name:"privateDict_0",
type:"TABLE",value:l}],g);f.privateDictIndex=l;l=new y.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);l.strings=[];for(g=0;g<h.length;g+=1)l.strings.push({name:"string_"+g,type:"STRING",value:h[g]});f.stringIndex=l;l=f.header.sizeOf()+f.nameIndex.sizeOf()+f.topDictIndex.sizeOf()+f.stringIndex.sizeOf()+f.globalSubrIndex.sizeOf();return c.charset=l,c.encoding=0,c.charStrings=c.charset+f.charsets.sizeOf(),c["private"][1]=c.charStrings+f.charStringsIndex.sizeOf(),k=q(c,h),f.topDictIndex=
r(k),f}},{"../encoding":3,"../glyph":5,"../parse":7,"../path":8,"../table":9}],11:[function(n,a,g){function c(a,d,f){a.segments.push({end:d,start:d,delta:-(d-f),offset:0})}var d=n("../check"),h=n("../parse"),p=n("../table");g.parse=function(a,c){var f,l={};l.version=h.getUShort(a,c);d.argument(0===l.version,"cmap table version should be 0.");l.numTables=h.getUShort(a,c+2);var g=-1;for(f=0;f<l.numTables;f+=1){var p=h.getUShort(a,c+4+8*f),q=h.getUShort(a,c+4+8*f+2);if(3===p&&(1===q||0===q)){g=h.getULong(a,
c+4+8*f+4);break}}if(-1===g)return null;f=new h.Parser(a,c+g);l.format=f.parseUShort();d.argument(4===l.format,"Only format 4 cmap tables are supported.");l.length=f.parseUShort();l.language=f.parseUShort();l.segCount=p=f.parseUShort()>>1;f.skip("uShort",3);l.glyphIndexMap={};var q=new h.Parser(a,c+g+14),r=new h.Parser(a,c+g+16+2*p),u=new h.Parser(a,c+g+16+4*p),n=new h.Parser(a,c+g+16+6*p),g=c+g+16+8*p;for(f=0;p-1>f;f+=1)for(var x,w=q.parseUShort(),y=r.parseUShort(),v=u.parseShort(),A=n.parseUShort(),
B=y;w>=B;B+=1)0!==A?(g=n.offset+n.relativeOffset-2,g+=A,g+=2*(B-y),x=h.getUShort(a,g),0!==x&&(x=x+v&65535)):x=B+v&65535,l.glyphIndexMap[B]=x;return l};g.make=function(a){var d,f=new p.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",
value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);f.segments=[];for(d=0;d<a.length;d+=1){for(var l=a[d],h=0;h<l.unicodes.length;h+=1)c(f,l.unicodes[h],d);f.segments=f.segments.sort(function(a,d){return a.start-d.start})}f.segments.push({end:65535,start:65535,delta:1,offset:0});a=f.segments.length;f.segCountX2=2*a;f.searchRange=2*Math.pow(2,Math.floor(Math.log(a)/Math.log(2)));
f.entrySelector=Math.log(f.searchRange/2)/Math.log(2);f.rangeShift=f.segCountX2-f.searchRange;var l=[],h=[],g=[],q=[],r=[];for(d=0;a>d;d+=1){var u=f.segments[d],l=l.concat({name:"end_"+d,type:"USHORT",value:u.end}),h=h.concat({name:"start_"+d,type:"USHORT",value:u.start}),g=g.concat({name:"idDelta_"+d,type:"SHORT",value:u.delta}),q=q.concat({name:"idRangeOffset_"+d,type:"USHORT",value:u.offset});void 0!==u.glyphId&&(r=r.concat({name:"glyph_"+d,type:"USHORT",value:u.glyphId}))}return f.fields=f.fields.concat(l),
f.fields.push({name:"reservedPad",type:"USHORT",value:0}),f.fields=f.fields.concat(h),f.fields=f.fields.concat(g),f.fields=f.fields.concat(q),f.fields=f.fields.concat(r),f.length=2*l.length+16+2*h.length+2*g.length+2*q.length+2*r.length,f}},{"../check":1,"../parse":7,"../table":9}],12:[function(n,a,g){function c(a,d,c,h,k){var g;return 0<(d&h)?(g=a.parseByte(),0===(d&k)&&(g=-g),g=c+g):g=0<(d&k)?c:c+a.parseShort(),g}function d(a,d,g,m){a=new k.Parser(a,d);g=new p.Glyph({font:m,index:g});g.numberOfContours=
a.parseShort();g.xMin=a.parseShort();g.yMin=a.parseShort();g.xMax=a.parseShort();g.yMax=a.parseShort();var q;if(0<g.numberOfContours){var r=g.endPointIndices=[];for(d=0;d<g.numberOfContours;d+=1)r.push(a.parseUShort());g.instructionLength=a.parseUShort();g.instructions=[];for(d=0;d<g.instructionLength;d+=1)g.instructions.push(a.parseByte());var u=r[r.length-1]+1;m=[];for(d=0;u>d;d+=1)if(q=a.parseByte(),m.push(q),0<(8&q))for(var n=a.parseByte(),x=0;n>x;x+=1)m.push(q),d+=1;if(h.argument(m.length===
u,"Bad flags."),0<r.length){x=[];if(0<u){for(d=0;u>d;d+=1)q=m[d],n={},n.onCurve=!!(1&q),n.lastPointOfContour=0<=r.indexOf(d),x.push(n);for(d=r=0;u>d;d+=1)q=m[d],n=x[d],n.x=c(a,q,r,2,16),r=n.x;for(d=r=0;u>d;d+=1)q=m[d],n=x[d],n.y=c(a,q,r,4,32),r=n.y}g.points=x}else g.points=[]}else if(0===g.numberOfContours)g.points=[];else for(g.isComposite=!0,g.points=[],g.components=[],q=!0;q;)m=a.parseUShort(),q={glyphIndex:a.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0},0<(1&m)?(q.dx=a.parseShort(),
q.dy=a.parseShort()):(q.dx=a.parseChar(),q.dy=a.parseChar()),0<(8&m)?q.xScale=q.yScale=a.parseF2Dot14():0<(64&m)?(q.xScale=a.parseF2Dot14(),q.yScale=a.parseF2Dot14()):0<(128&m)&&(q.xScale=a.parseF2Dot14(),q.scale01=a.parseF2Dot14(),q.scale10=a.parseF2Dot14(),q.yScale=a.parseF2Dot14()),g.components.push(q),q=!!(32&m);return g}var h=n("../check"),p=n("../glyph"),k=n("../parse"),m=n("../path");g.parse=function(a,c,k,g){var q,r=[];for(q=0;q<k.length-1;q+=1){var u=k[q];r.push(u!==k[q+1]?d(a,c+u,q,g):new p.Glyph({font:g,
index:q}))}for(q=0;q<r.length;q+=1){c=r[q];if(c.isComposite)for(a=0;a<c.components.length;a+=1)if(g=c.components[a],k=r[g.glyphIndex],k.points){k=k.points;for(var u=[],n=0;n<k.length;n+=1){var x=k[n];u.push({x:g.xScale*x.x+g.scale01*x.y+g.dx,y:g.scale10*x.x+g.yScale*x.y+g.dy,onCurve:x.onCurve,lastPointOfContour:x.lastPointOfContour})}c.points=c.points.concat(u)}a=c;k=c.points;c=new m.Path;if(k){g=[];u=[];for(n=0;n<k.length;n+=1)x=k[n],u.push(x),x.lastPointOfContour&&(g.push(u),u=[]);k=(h.argument(0===
u.length,"There are still points left in the current contour."),g);for(g=0;g<k.length;g+=1){var w,y,u=k[g],n=u[0],x=u[u.length-1];n.onCurve?(w=null,y=!0):(n=x.onCurve?x:{x:(n.x+x.x)/2,y:(n.y+x.y)/2},w=n,y=!1);c.moveTo(n.x,n.y);for(var v=y?1:0;v<u.length;v+=1){var A=u[v],B=0===v?n:u[v-1];if(B.onCurve&&A.onCurve)c.lineTo(A.x,A.y);else if(B.onCurve&&!A.onCurve)w=A;else if(B.onCurve||A.onCurve){if(B.onCurve||!A.onCurve)throw Error("Invalid state.");c.quadraticCurveTo(w.x,w.y,A.x,A.y);w=null}else c.quadraticCurveTo(B.x,
B.y,(B.x+A.x)/2,(B.y+A.y)/2),w=A}n!==x&&(w?c.quadraticCurveTo(w.x,w.y,n.x,n.y):c.lineTo(n.x,n.y))}c=(c.closePath(),c)}a.path=c}return r}},{"../check":1,"../glyph":5,"../parse":7,"../path":8}],13:[function(n,a,g){function c(a,d){for(var c=new f.Parser(a,d),h=c.parseUShort(),k=[],g=0;h>g;g++)k[c.parseTag()]={offset:c.parseUShort()};return k}function d(a,d){var c=new f.Parser(a,d),h=c.parseUShort(),k=c.parseUShort();if(1===h)return c.parseUShortList(k);if(2===h){for(h=[];k--;)for(var g=c.parseUShort(),
m=c.parseUShort(),p=c.parseUShort();m>=g;g++)h[p++]=g;return h}}function h(a,d){var c=new f.Parser(a,d),h=c.parseUShort();if(1===h){var k=c.parseUShort(),h=c.parseUShort(),g=c.parseUShortList(h);return function(a){return g[a-k]||0}}if(2===h){for(var h=c.parseUShort(),m=[],p=[],n=[],y=0;h>y;y++)m[y]=c.parseUShort(),p[y]=c.parseUShort(),n[y]=c.parseUShort();return function(a){for(var d=0,f=m.length-1;f>d;){var c=d+f+1>>1;a<m[c]?f=c-1:d=c}return m[d]<=a&&a<=p[d]?n[d]||0:0}}}function p(a,c){var k,g=new f.Parser(a,
c),m=g.parseUShort(),p=g.parseUShort(),p=d(a,c+p),n=g.parseUShort(),x=g.parseUShort();if(4===n&&0===x){var w={};if(1===m){for(var m=g.parseUShort(),y=[],v=g.parseOffset16List(m),A=0;m>A;A++){var B=v[A],D=w[B];if(!D)for(D={},g.relativeOffset=B,B=g.parseUShort();B--;){var H=g.parseUShort();n&&(k=g.parseShort());x&&g.parseShort();D[H]=k}y[p[A]]=D}return function(a,d){var f=y[a];return f?f[d]:void 0}}if(2===m){for(var v=g.parseUShort(),A=g.parseUShort(),w=g.parseUShort(),m=g.parseUShort(),L=h(a,c+v),
G=h(a,c+A),I=[],v=0;w>v;v++)for(A=I[v]=[],D=0;m>D;D++)n&&(k=g.parseShort()),x&&g.parseShort(),A[D]=k;for(var K={},v=0;v<p.length;v++)K[p[v]]=1;return function(a,d){if(K[a]){var f=L(a),c=G(d);return(f=I[f])?f[c]:void 0}}}}}function k(a,d){var c=new f.Parser(a,d),h=c.parseUShort(),k=c.parseUShort(),g=16&k,m=c.parseUShort(),n=c.parseOffset16List(m),c={lookupType:h,lookupFlag:k,markFilteringSet:g?c.parseUShort():-1};if(2===h){for(var w=[],h=0;m>h;h++)w.push(p(a,d+n[h]));c.getKerningValue=function(a,d){for(var f=
w.length;f--;){var c=w[f](a,d);if(void 0!==c)return c}return 0}}return c}var m=n("../check"),f=n("../parse");g.parse=function(a,d,h){var g=new f.Parser(a,d),r=g.parseFixed();m.argument(1===r,"Unsupported GPOS table version.");c(a,d+g.parseUShort());c(a,d+g.parseUShort());var p=g.parseUShort();g.relativeOffset=p;r=g.parseUShort();g=g.parseOffset16List(r);d+=p;for(p=0;r>p;p++){var n=k(a,d+g[p]);2!==n.lookupType||h.getGposKerningValue||(h.getGposKerningValue=n.getKerningValue)}}},{"../check":1,"../parse":7}],
14:[function(n,a,g){var c=n("../check"),d=n("../parse"),h=n("../table");g.parse=function(a,h){var g={},f=new d.Parser(a,h);return g.version=f.parseVersion(),g.fontRevision=Math.round(1E3*f.parseFixed())/1E3,g.checkSumAdjustment=f.parseULong(),g.magicNumber=f.parseULong(),c.argument(1594834165===g.magicNumber,"Font header has wrong magic number."),g.flags=f.parseUShort(),g.unitsPerEm=f.parseUShort(),g.created=f.parseLongDateTime(),g.modified=f.parseLongDateTime(),g.xMin=f.parseShort(),g.yMin=f.parseShort(),
g.xMax=f.parseShort(),g.yMax=f.parseShort(),g.macStyle=f.parseUShort(),g.lowestRecPPEM=f.parseUShort(),g.fontDirectionHint=f.parseShort(),g.indexToLocFormat=f.parseShort(),g.glyphDataFormat=f.parseShort(),g};g.make=function(a){return new h.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",
value:1E3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],a)}},{"../check":1,"../parse":7,
"../table":9}],15:[function(n,a,g){var c=n("../parse"),d=n("../table");g.parse=function(a,d){var k={},g=new c.Parser(a,d);return k.version=g.parseVersion(),k.ascender=g.parseShort(),k.descender=g.parseShort(),k.lineGap=g.parseShort(),k.advanceWidthMax=g.parseUShort(),k.minLeftSideBearing=g.parseShort(),k.minRightSideBearing=g.parseShort(),k.xMaxExtent=g.parseShort(),k.caretSlopeRise=g.parseShort(),k.caretSlopeRun=g.parseShort(),k.caretOffset=g.parseShort(),g.relativeOffset+=8,k.metricDataFormat=g.parseShort(),
k.numberOfHMetrics=g.parseUShort(),k};g.make=function(a){return new d.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",
value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],a)}},{"../parse":7,"../table":9}],16:[function(n,a,g){var c=n("../parse"),d=n("../table");g.parse=function(a,d,k,g,f){var l,t;a=new c.Parser(a,d);for(d=0;g>d;d+=1){k>d&&(l=a.parseUShort(),t=a.parseShort());
var n=f[d];n.advanceWidth=l;n.leftSideBearing=t}};g.make=function(a){for(var c=new d.Table("hmtx",[]),k=0;k<a.length;k+=1){var g=a[k],f=g.leftSideBearing||0;c.fields.push({name:"advanceWidth_"+k,type:"USHORT",value:g.advanceWidth||0});c.fields.push({name:"leftSideBearing_"+k,type:"SHORT",value:f})}return c}},{"../parse":7,"../table":9}],17:[function(n,a,g){var c=n("../check"),d=n("../parse");g.parse=function(a,g){var k={},m=new d.Parser(a,g),f=m.parseUShort();c.argument(0===f,"Unsupported kern table version.");
m.skip("uShort",1);f=m.parseUShort();c.argument(0===f,"Unsupported kern sub-table version.");m.skip("uShort",2);f=m.parseUShort();m.skip("uShort",3);for(var l=0;f>l;l+=1){var t=m.parseUShort(),n=m.parseUShort(),q=m.parseShort();k[t+","+n]=q}return k}},{"../check":1,"../parse":7}],18:[function(n,a,g){var c=n("../parse");g.parse=function(a,h,g,k){a=new c.Parser(a,h);h=k?a.parseUShort:a.parseULong;for(var m=[],f=0;g+1>f;f+=1){var l=h.call(a);k&&(l*=2);m.push(l)}return m}},{"../parse":7}],19:[function(n,
a,g){var c=n("../parse"),d=n("../table");g.parse=function(a,d){var k={},g=new c.Parser(a,d);return k.version=g.parseVersion(),k.numGlyphs=g.parseUShort(),1===k.version&&(k.maxPoints=g.parseUShort(),k.maxContours=g.parseUShort(),k.maxCompositePoints=g.parseUShort(),k.maxCompositeContours=g.parseUShort(),k.maxZones=g.parseUShort(),k.maxTwilightPoints=g.parseUShort(),k.maxStorage=g.parseUShort(),k.maxFunctionDefs=g.parseUShort(),k.maxInstructionDefs=g.parseUShort(),k.maxStackElements=g.parseUShort(),
k.maxSizeOfInstructions=g.parseUShort(),k.maxComponentElements=g.parseUShort(),k.maxComponentDepth=g.parseUShort()),k};g.make=function(a){return new d.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:a}])}},{"../parse":7,"../table":9}],20:[function(n,a,g){function c(a,d,c,h,k,g){return new p.Table("NameRecord",[{name:"platformID",type:"USHORT",value:a},{name:"encodingID",type:"USHORT",value:d},{name:"languageID",type:"USHORT",value:c},{name:"nameID",type:"USHORT",
value:h},{name:"length",type:"USHORT",value:k},{name:"offset",type:"USHORT",value:g}])}var d=n("../types").encode,h=n("../parse"),p=n("../table"),k="copyright fontFamily fontSubfamily uniqueID fullName version postScriptName trademark manufacturer designer description manufacturerURL designerURL licence licenceURL reserved preferredFamily preferredSubfamily compatibleFullName sampleText postScriptFindFontName wwsFamily wwsSubfamily".split(" ");g.parse=function(a,d){var c={},g=new h.Parser(a,d);c.format=
g.parseUShort();for(var p=g.parseUShort(),q=g.offset+g.parseUShort(),r=0,n=0;p>n;n++){var z=g.parseUShort(),x=g.parseUShort(),w=g.parseUShort(),y=g.parseUShort(),y=k[y],v=g.parseUShort(),A=g.parseUShort();if(3===z&&1===x&&1033===w){z=[];x=v/2;for(w=0;x>w;w++,A+=2)z[w]=h.getShort(a,q+A);A=String.fromCharCode.apply(null,z);y?c[y]=A:(r++,c["unknown"+r]=A)}}return 1===c.format&&(c.langTagCount=g.parseUShort()),c};g.make=function(a){var f=new p.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",
type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]);f.records=[];f.strings=[];var h,g,n=0;for(h=0;h<k.length;h+=1)if(void 0!==a[k[h]]){g=a[k[h]];var q=f,r=h;g=d.STRING(g);n=(q.records.push(c(1,0,0,r,g.length,n)),q.strings.push(g),n+g.length)}for(h=0;h<k.length;h+=1)void 0!==a[k[h]]&&(g=a[k[h]],q=f,r=h,g=d.UTF16(g),n=(q.records.push(c(3,1,1033,r,g.length,n)),q.strings.push(g),n+g.length));f.count=f.records.length;f.stringOffset=6+12*f.count;for(h=0;h<f.records.length;h+=1)f.fields.push({name:"record_"+
h,type:"TABLE",value:f.records[h]});for(h=0;h<f.strings.length;h+=1)f.fields.push({name:"string_"+h,type:"LITERAL",value:f.strings[h]});return f}},{"../parse":7,"../table":9,"../types":24}],21:[function(n,a,g){var c=n("../parse"),d=n("../table"),h=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,
end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,
end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,
end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,
end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},
{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66E3,end:66047},{begin:66208,end:66271},
{begin:127024,end:127135}];g.unicodeRanges=h;g.getUnicodeRange=function(a){for(var d=0;d<h.length;d+=1){var c=h[d];if(a>=c.begin&&a<c.end)return d}return-1};g.parse=function(a,d){var h={},f=new c.Parser(a,d);h.version=f.parseUShort();h.xAvgCharWidth=f.parseShort();h.usWeightClass=f.parseUShort();h.usWidthClass=f.parseUShort();h.fsType=f.parseUShort();h.ySubscriptXSize=f.parseShort();h.ySubscriptYSize=f.parseShort();h.ySubscriptXOffset=f.parseShort();h.ySubscriptYOffset=f.parseShort();h.ySuperscriptXSize=
f.parseShort();h.ySuperscriptYSize=f.parseShort();h.ySuperscriptXOffset=f.parseShort();h.ySuperscriptYOffset=f.parseShort();h.yStrikeoutSize=f.parseShort();h.yStrikeoutPosition=f.parseShort();h.sFamilyClass=f.parseShort();h.panose=[];for(var g=0;10>g;g++)h.panose[g]=f.parseByte();return h.ulUnicodeRange1=f.parseULong(),h.ulUnicodeRange2=f.parseULong(),h.ulUnicodeRange3=f.parseULong(),h.ulUnicodeRange4=f.parseULong(),h.achVendID=String.fromCharCode(f.parseByte(),f.parseByte(),f.parseByte(),f.parseByte()),
h.fsSelection=f.parseUShort(),h.usFirstCharIndex=f.parseUShort(),h.usLastCharIndex=f.parseUShort(),h.sTypoAscender=f.parseShort(),h.sTypoDescender=f.parseShort(),h.sTypoLineGap=f.parseShort(),h.usWinAscent=f.parseUShort(),h.usWinDescent=f.parseUShort(),1<=h.version&&(h.ulCodePageRange1=f.parseULong(),h.ulCodePageRange2=f.parseULong()),2<=h.version&&(h.sxHeight=f.parseShort(),h.sCapHeight=f.parseShort(),h.usDefaultChar=f.parseUShort(),h.usBreakChar=f.parseUShort(),h.usMaxContent=f.parseUShort()),h};
g.make=function(a){return new d.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",
type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",
value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",
type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},
{name:"usMaxContext",type:"USHORT",value:0}],a)}},{"../parse":7,"../table":9}],22:[function(n,a,g){var c=n("../encoding"),d=n("../parse"),h=n("../table");g.parse=function(a,h){var g,f={},l=new d.Parser(a,h);switch(f.version=l.parseVersion(),f.italicAngle=l.parseFixed(),f.underlinePosition=l.parseShort(),f.underlineThickness=l.parseShort(),f.isFixedPitch=l.parseULong(),f.minMemType42=l.parseULong(),f.maxMemType42=l.parseULong(),f.minMemType1=l.parseULong(),f.maxMemType1=l.parseULong(),f.version){case 1:f.names=
c.standardNames.slice();break;case 2:f.numberOfGlyphs=l.parseUShort();f.glyphNameIndex=Array(f.numberOfGlyphs);for(g=0;g<f.numberOfGlyphs;g++)f.glyphNameIndex[g]=l.parseUShort();f.names=[];for(g=0;g<f.numberOfGlyphs;g++)if(f.glyphNameIndex[g]>=c.standardNames.length){var t=l.parseChar();f.names.push(l.parseString(t))}break;case 2.5:for(f.numberOfGlyphs=l.parseUShort(),f.offset=Array(f.numberOfGlyphs),g=0;g<f.numberOfGlyphs;g++)f.offset[g]=l.parseChar()}return f};g.make=function(){return new h.Table("post",
[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},{"../encoding":3,"../parse":7,"../table":9}],23:[function(n,a,g){function c(a){for(;0!==a.length%4;)a.push(0);
for(var d=0,f=0;f<a.length;f+=4)d+=(a[f]<<24)+(a[f+1]<<16)+(a[f+2]<<8)+a[f+3];return d%Math.pow(2,32)}function d(a,d,f,c){return new m.Table("Table Record",[{name:"tag",type:"TAG",value:void 0!==a?a:""},{name:"checkSum",type:"ULONG",value:void 0!==d?d:0},{name:"offset",type:"ULONG",value:void 0!==f?f:0},{name:"length",type:"ULONG",value:void 0!==c?c:0}])}function h(a){var f=new m.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",
value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);f.tables=a;f.numTables=a.length;var h=Math.pow(2,Math.log(f.numTables)/Math.log(2)|0);f.searchRange=16*h;f.entrySelector=Math.log(h)/Math.log(2)|0;f.rangeShift=16*f.numTables-f.searchRange;for(var h=[],g=[],l=f.sizeOf()+d().sizeOf()*f.numTables;0!==l%4;)l+=1,g.push({name:"padding",type:"BYTE",value:0});for(var t=0;t<a.length;t+=1){var q=a[t];k.argument(4===q.tableName.length,"Table name"+q.tableName+
" is invalid.");var r=q.sizeOf(),p=d(q.tableName,c(q.encode()),l,r);h.push({name:p.tag+" Table Record",type:"TABLE",value:p});g.push({name:q.tableName+" table",type:"TABLE",value:q});l+=r;for(k.argument(!isNaN(l),"Something went wrong calculating the offset.");0!==l%4;)l+=1,g.push({name:"padding",type:"BYTE",value:0})}return h.sort(function(a,d){return a.value.tag>d.value.tag?1:-1}),f.fields=f.fields.concat(h),f.fields=f.fields.concat(g),f}function p(a,d,f){for(var c=0;c<d.length;c+=1){var h=a.charToGlyphIndex(d[c]);
if(0<h)return a.glyphs[h].getMetrics()}return f}var k=n("../check"),m=n("../table"),f=n("./cmap"),l=n("./cff"),t=n("./head"),F=n("./hhea"),q=n("./hmtx"),r=n("./maxp"),u=n("./name"),z=n("./os2"),x=n("./post");g.computeCheckSum=c;g.make=h;g.fontToTable=function(a){for(var d=[],g=[],k=[],m=[],n=[],H=[],L=[],G=null,I=0,K=0,M=0,O=0,E=0,C=0;C<a.glyphs.length;C+=1){var P=a.glyphs[C],J=0|P.unicode;(G>J||null===G)&&(G=J);J>I&&(I=J);J=z.getUnicodeRange(J);if(32>J)K|=1<<J;else if(64>J)M|=1<<J-32;else if(96>
J)O|=1<<J-64;else{if(!(123>J))throw Error("Unicode ranges bits > 123 are reserved for internal usage");E|=1<<J-96}".notdef"!==P.name&&(J=P.getMetrics(),d.push(J.xMin),g.push(J.yMin),k.push(J.xMax),m.push(J.yMax),H.push(J.leftSideBearing),L.push(J.rightSideBearing),n.push(P.advanceWidth))}C=Math.min.apply(null,d);g=Math.min.apply(null,g);k=Math.max.apply(null,k);m=Math.max.apply(null,m);d=Math.max.apply(null,n);for(J=P=0;J<n.length;J+=1)P+=n[J];C={xMin:C,yMin:g,xMax:k,yMax:m,advanceWidthMax:d,advanceWidthAvg:P/
n.length,minLeftSideBearing:Math.min.apply(null,H),maxLeftSideBearing:Math.max.apply(null,H),minRightSideBearing:Math.min.apply(null,L)};C.ascender=void 0!==a.ascender?a.ascender:C.yMax;C.descender=void 0!==a.descender?a.descender:C.yMin;n=t.make({unitsPerEm:a.unitsPerEm,xMin:C.xMin,yMin:C.yMin,xMax:C.xMax,yMax:C.yMax});H=F.make({ascender:C.ascender,descender:C.descender,advanceWidthMax:C.advanceWidthMax,minLeftSideBearing:C.minLeftSideBearing,minRightSideBearing:C.minRightSideBearing,xMaxExtent:C.maxLeftSideBearing+
(C.xMax-C.xMin),numberOfHMetrics:a.glyphs.length});L=r.make(a.glyphs.length);G=z.make({xAvgCharWidth:Math.round(C.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:G,usLastCharIndex:I,ulUnicodeRange1:K,ulUnicodeRange2:M,ulUnicodeRange3:O,ulUnicodeRange4:E,sTypoAscender:C.ascender,sTypoDescender:C.descender,sTypoLineGap:0,usWinAscent:C.ascender,usWinDescent:-C.descender,sxHeight:p(a,"xyvw",{yMax:0}).yMax,sCapHeight:p(a,"HIKLEFJMNTZBDPRAGOQSUVWXY",C).yMax,usBreakChar:a.hasChar(" ")?
32:0});I=q.make(a.glyphs);K=f.make(a.glyphs);E=a.familyName+" "+a.styleName;C=a.familyName.replace(/\s/g,"")+"-"+a.styleName;M=u.make({copyright:a.copyright,fontFamily:a.familyName,fontSubfamily:a.styleName,uniqueID:a.manufacturer+":"+E,fullName:E,version:a.version,postScriptName:C,trademark:a.trademark,manufacturer:a.manufacturer,designer:a.designer,description:a.description,manufacturerURL:a.manufacturerURL,designerURL:a.designerURL,license:a.license,licenseURL:a.licenseURL,preferredFamily:a.familyName,
preferredSubfamily:a.styleName});O=x.make();a=l.make(a.glyphs,{version:a.version,fullName:E,familyName:a.familyName,weightName:a.styleName,postScriptName:C});a=h([n,H,L,G,M,K,O,a,I]);G=a.encode();G=c(G);I=a.fields;K=!1;for(C=0;C<I.length;C+=1)if("head table"===I[C].name){I[C].value.checkSumAdjustment=2981146554-G;K=!0;break}if(!K)throw Error("Could not find head table with checkSum to adjust.");return a}},{"../check":1,"../table":9,"./cff":10,"./cmap":11,"./head":14,"./hhea":15,"./hmtx":16,"./maxp":19,
"./name":20,"./os2":21,"./post":22}],24:[function(n,a,g){function c(a){return function(){return a}}var d=n("./check"),h={};n={};h.BYTE=function(a){return d.argument(0<=a&&255>=a,"Byte value should be between 0 and 255."),[a]};n.BYTE=c(1);h.CHAR=function(a){return[a.charCodeAt(0)]};n.BYTE=c(1);h.CHARARRAY=function(a){for(var d=[],f=0;f<a.length;f+=1)d.push(a.charCodeAt(f));return d};n.CHARARRAY=function(a){return a.length};h.USHORT=function(a){return[a>>8&255,255&a]};n.USHORT=c(2);h.SHORT=function(a){return 32768<=
a&&(a=-(65536-a)),[a>>8&255,255&a]};n.SHORT=c(2);h.UINT24=function(a){return[a>>16&255,a>>8&255,255&a]};n.UINT24=c(3);h.ULONG=function(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]};n.ULONG=c(4);h.LONG=function(a){return 2147483648<=a&&(a=-(4294967296-a)),[a>>24&255,a>>16&255,a>>8&255,255&a]};n.LONG=c(4);h.FIXED=h.ULONG;n.FIXED=n.ULONG;h.FWORD=h.SHORT;n.FWORD=n.SHORT;h.UFWORD=h.USHORT;n.UFWORD=n.USHORT;h.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]};n.LONGDATETIME=c(8);h.TAG=function(a){return d.argument(4===
a.length,"Tag should be exactly 4 ASCII characters."),[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]};n.TAG=c(4);h.Card8=h.BYTE;n.Card8=n.BYTE;h.Card16=h.USHORT;n.Card16=n.USHORT;h.OffSize=h.BYTE;n.OffSize=n.BYTE;h.SID=h.USHORT;n.SID=n.USHORT;h.NUMBER=function(a){return-107<=a&&107>=a?[a+139]:108<=a&&1131>=a?(a-=108,[(a>>8)+247,255&a]):-1131<=a&&-108>=a?(a=-a-108,[(a>>8)+251,255&a]):-32768<=a&&32767>=a?h.NUMBER16(a):h.NUMBER32(a)};n.NUMBER=function(a){return h.NUMBER(a).length};
h.NUMBER16=function(a){return[28,a>>8&255,255&a]};n.NUMBER16=c(2);h.NUMBER32=function(a){return[29,a>>24&255,a>>16&255,a>>8&255,255&a]};n.NUMBER32=c(4);h.NAME=h.CHARARRAY;n.NAME=n.CHARARRAY;h.STRING=h.CHARARRAY;n.STRING=n.CHARARRAY;h.UTF16=function(a){for(var d=[],f=0;f<a.length;f+=1)d.push(0),d.push(a.charCodeAt(f));return d};n.UTF16=function(a){return 2*a.length};h.INDEX=function(a){var d,f=1,c=[f],g=[],p=0;for(d=0;d<a.length;d+=1){var q=h.OBJECT(a[d]);Array.prototype.push.apply(g,q);p+=q.length;
f+=q.length;c.push(f)}if(0===g.length)return[0,0];f=[];p=1+Math.floor(Math.log(p)/Math.log(2))/8|0;q=[void 0,h.BYTE,h.USHORT,h.UINT24,h.ULONG][p];for(d=0;d<c.length;d+=1){var r=q(c[d]);Array.prototype.push.apply(f,r)}return Array.prototype.concat(h.Card16(a.length),h.OffSize(p),f,g)};n.INDEX=function(a){return h.INDEX(a).length};h.DICT=function(a){for(var d=[],f=Object.keys(a),c=f.length,g=0;c>g;g+=1)var p=parseInt(f[g],0),q=a[p],d=d.concat(h.OPERAND(q.value,q.type)),d=d.concat(h.OPERATOR(p));return d};
n.DICT=function(a){return h.DICT(a).length};h.OPERATOR=function(a){return 1200>a?[a]:[12,a-1200]};h.OPERAND=function(a,c){var f=[];if(Array.isArray(c))for(var g=0;g<c.length;g+=1)d.argument(a.length===c.length,"Not enough arguments given for type"+c),f=f.concat(h.OPERAND(a[g],c[g]));else f=f.concat("SID"===c?h.NUMBER(a):"offset"===c?h.NUMBER32(a):h.NUMBER(a));return f};h.OP=h.BYTE;n.OP=n.BYTE;var p="function"==typeof WeakMap&&new WeakMap;h.CHARSTRING=function(a){if(p&&p.has(a))return p.get(a);for(var d=
[],f=a.length,c=0;f>c;c+=1)var g=a[c],d=d.concat(h[g.type](g.value));return p&&p.set(a,d),d};n.CHARSTRING=function(a){return h.CHARSTRING(a).length};h.OBJECT=function(a){var c=h[a.type];return d.argument(void 0!==c,"No encoding function for type "+a.type),c(a.value)};h.TABLE=function(a){for(var c=[],f=a.fields.length,g=0;f>g;g+=1){var t=a.fields[g],p=h[t.type];d.argument(void 0!==p,"No encoding function for field type "+t.type);var q=a[t.name];void 0===q&&(q=t.value);t=p(q);c=c.concat(t)}return c};
h.LITERAL=function(a){return a};n.LITERAL=function(a){return a.length};g.decode={};g.encode=h;g.sizeOf=n},{"./check":1}]},{},[6])(6)});var fft_analyzer=function(){function e(){h.isPlaying()?(h.stop(),fileinput.hide(),d.setInput(c),c.connect(d),button.html("mic"),fileinput.hide()):(h.isLoaded()&&(h.play(),d.setInput(h),c.disconnect()),button.html("file"),fileinput.show())}function n(a){h.stop();h=null;h=loadSound(a.data);button.html("loading...");file_polling=setInterval(function(){h.isLoaded()&&(button.html("file is ready"),clearInterval(file_polling))},100)}function a(){for(;y<w.length&&w[y].time<performance.now()-x;)w[y].time>
performance.now()-x-50&&(w[y].play=notes[w[y].note],w[y].play.amp(w[y].amp/65536),w[y].play.play()),y++;y>=w.length&&(clearInterval(v),k=!1,button_play.html("Play"),loop())}function g(){var a="";w.forEach(function(d){a+=" ~ "+B[(d.note-12-1)%12]+" ["+Math.floor((d.note-12-1)/12)+"] "});return a}start_a_old=start_a=800;var c,d,h,p=!1,k=!1,m="",f=0;trigger_amp=.4;harmonic_filter=20;var l=Math.ceil(Math.log(22E3/Math.floor(440*Math.pow(2,-38/12)))/Math.log(2)*576),t=new Int32Array(l),F=new Int32Array(l),
q=new Int32Array(l),r=new Int32Array(108),u=new Int32Array(108),z=new Set,x,w=[],y=0,v,A=new Int8Array(108),B="1 1# 2 2# 3 4 4# 5 5# 6 6# 7".split(" "),D="C C# D D# E F F# G G# A A# B".split(" "),H=null;touchStarted=function(){start_a_old=start_a;H=null};touchEnded=function(){null!=H&&(start_a=start_a_old+H-touchX);H=null};touchMoved=function(){null==H&&(H=touchX);start_a=start_a_old+H-touchX};preload=function(){notes=[];h=new p5.SoundFile("");for(var a=32;108>=a;a++)notes[a]=new p5.SoundFile("./sound/"+
a.toString()+".ogg")};setup=function(){createElement("h2","Music Analyzer - Homework for Signal & Systems");createElement("h","Input:");button=createButton("mic");button.mousePressed(e);createElement("h","Record: ");button_mode=createButton("Start");button_mode.mousePressed(function(){(p=!p)?(button_mode.html("Stop"),canvas.hide(),w=[],result.html("--"),timestamp=0,x=Math.floor(performance.now())):(canvas.show(),button_mode.html("Start"))});fileinput=createFileInput(n);fileinput.hide();createElement("br");
createElement("h","Identified notes: ");linear_identify=createElement("h","--");createElement("br");createElement("i","High amplitude notes: ");amp_identify=createElement("i"," (may be incorrect) ");createElement("br");createElement("br");createElement("br");canvas=createCanvas(1200,500);createElement("br");createElement("br");button_play=createButton("Play");button_play.mousePressed(function(){0>=w.length?alert("No record!"):k=!k;k?(noLoop(),button_play.html("Stop"),p=!1,y=0,x=Math.floor(performance.now()),
v=setInterval(a,10)):(button_play.html("Play"),clearInterval(v),loop())});silder=createSlider(0,10,3);result=createElement("h","--");noFill();c=new p5.AudioIn;c.start();c.disconnect();d=new p5.FFT(0,8192);d.setInput(c)};draw=function(){for(var a=d.analyze(),c=0;c<l;c++){var h=Math.floor(440*Math.pow(2,-38/12)*Math.pow(2,c/576)*8192/22E3);F[c]=0;for(b=Math.floor(h/Math.pow(2,1/576));b<=Math.ceil(h);b++)F[c]=max(F[c],a[b]*a[b]);q[c]=F[c]-t[c]}t.set(F);a=1;for(c=0;c<q.length;c++)a<q[c]&&(a=q[c]);for(c=
0;c<q.length;c++)q[c]=Math.floor(q[c]/a*F[c]*1.3),0>q[c]&&(q[c]=0);a=Math.floor(2/12*576);h=new Int8Array(q.length);for(c=0;c<q.length;c++)if(q[c]>65536*trigger_amp)for(var e=0,k=1;k<harmonic_filter;e=Math.floor(576*Math.log(++k)/Math.log(2)))max([q[c-e-1],q[c-e],q[c-e+1]])>65536*trigger_amp&&h[c-e]++;var n=0;z.clear();for(k=0;108>k;k++){e=k+34;r[e]=0;u[e]=0;for(var c=Math.floor(a+576*k/12),y=c-Math.floor(12)-1;y<c+Math.floor(12)+1;y++)1<=h[y]&&(z.add(e),r[e]=max(r[e],h[y]*h[y]*h[y]*F[y]),u[e]=max(u[e],
F[y]),n=max(n,r[e]))}var v="",H=new Set;0<z.size&&z.forEach(function(a){A[a]||(v+=B[(a-12-1)%12]+" ["+Math.floor((a-12-1)/12)+"] /"+Math.round(r[a]/n*100)+"%/  ",r[a]>.9*n&&H.add(a))});m!=v&&(""==m&&f++,amp_identify.html(v));m=v;for(e=0;e<A.length;e++)A[e]&&A[e]--;linear_identify.html("");var J=silder.value();0<H.size&&H.forEach(function(a){A[a]=J;A[a+12]=J;A[a+12+7]=J;A[a+12+12]=J;linear_identify.html(linear_identify.html()+" "+D[(a-12-1)%12]+" ["+Math.floor((a-12-1)/12)+"]")});H.forEach(function(a){3>=
(a-12-1)/12&&H["delete"](a)});p&&0<H.size&&(H.forEach(function(a){w[w.length]={time:Math.floor(performance.now())-x,note:a,amp:u[a]}}),result.html(g()));if(!p){background(200);stroke("red");beginShape();for(c=0;c<width;c++)vertex(c,map(q[c+start_a],0,65536,height,0));endShape();stroke("black");beginShape();for(c=0;c<width;c++)vertex(c,map(F[c+start_a],0,65536,height,0));endShape();beginShape();for(e=0;108>e;e++){c=Math.floor(a+576*e/12);switch(e%12){case 3:stroke("black");text((Math.floor(e/12)+2).toString(),
c-start_a+3,10);stroke("blue");line(c-start_a,0,c-start_a,height);break;case 0:stroke("black"),text("A",c-start_a+3,10),stroke("green"),line(c-start_a,0,c-start_a,height)}stroke("black");text(B[(e+21)%12],c-start_a+3,30);stroke("white");line(c-start_a,0,c-start_a,100)}endShape();beginShape();strokeWeight(10);stroke("purple");for(e=0;108>e;e++)c=Math.floor(a+576*e/12),line(c-start_a,0,c-start_a,Math.ceil(r[e+34]/n*100));strokeWeight(1);endShape()}}}();(function(e,n){"function"===typeof define&&define.amd?define("p5.dom",["p5"],function(a){n(a)}):"object"===typeof exports?n(require("../p5")):n(e.p5)})(this,function(e){function n(a){return"VIDEO"===a.tagName||"AUDIO"===a.tagName?new e.MediaElement(a):new e.Element(a)}function a(a,c,g){(c._userNode?c._userNode:document.body).appendChild(a);a=g?new e.MediaElement(a):new e.Element(a);c._elements.push(a);return a}function g(d,c,e,g){var m=document.createElement(c);"string"===typeof e&&(e=[e]);for(c=
0;c<e.length;c++){var f=document.createElement("source");f.src=e[c];m.appendChild(f)}"undefined"!==typeof g&&m.addEventListener("canplaythrough",function(){g()});var l=a(m,d,!0);l.loadedmetadata=!1;m.addEventListener("loadedmetadata",function(){l.width=m.videoWidth;l.height=m.videoHeight;l.loadedmetadata=!0});return l}e.prototype.getElement=function(a){return(a=document.getElementById(a))?n(a):null};e.prototype.getElements=function(a){var c=[];if(a=document.getElementsByClassName(a))for(var e=0;e<
a.length;e++){var g=n(a[e]);c.push(g)}return c};e.prototype.removeElements=function(a){for(a=0;a<this._elements.length;a++)this._elements[a].elt instanceof HTMLCanvasElement||this._elements[a].remove()};["div","p","span"].forEach(function(d){var c="create"+d.charAt(0).toUpperCase()+d.slice(1);e.prototype[c]=function(c){var h=document.createElement(d);h.innerHTML=void 0===typeof c?"":c;return a(h,this)}});e.prototype.createImg=function(d,c){var e=document.createElement("img");e.src=d;"undefined"!==
typeof c&&(e.alt=c);return a(e,this)};e.prototype.createA=function(d,c,e){var g=document.createElement("a");g.href=d;g.innerHTML=c;e&&(g.target=e);return a(g,this)};e.prototype.createSlider=function(d,c,e,g){var m=document.createElement("input");m.type="range";m.min=d;m.max=c;g&&(m.step=g);e&&(m.value=e);return a(m,this)};e.prototype.createButton=function(d,c){var e=document.createElement("button");e.innerHTML=d;if(e.value=c)e.value=c;return a(e,this)};e.prototype.createInput=function(d){var c=document.createElement("input");
c.type="text";d&&(c.value=d);return a(c,this)};e.prototype.createFileInput=function(d,c){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var g=document.createElement("input");g.type="file";c&&(g.multiple="multiple");g.addEventListener("change",function(a){a=a.target.files;for(var c=0;c<a.length;c++){var f=a[c],h=new FileReader;h.onload=function(a){var c=new e.File(a);return function(a){c.data=a.target.result;d(c)}}(f);"text"===f.type?h.readAsText(f):h.readAsDataURL(f)}},!1);return a(g,
this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")};e.prototype.createVideo=function(a,c){return g(this,"video",a,c)};e.prototype.createAudio=function(a,c){return g(this,"audio",a,c)};e.prototype.VIDEO="video";e.prototype.AUDIO="audio";navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;e.prototype.createCapture=function(){for(var d=!0,c=!0,g,k,m=0;m<arguments.length;m++)arguments[m]===
e.prototype.VIDEO?c=!1:arguments[m]===e.prototype.AUDIO?d=!1:"object"===typeof arguments[m]?g=arguments[m]:"function"===typeof arguments[m]&&(k=arguments[m]);if(navigator.getUserMedia){var f=document.createElement("video");g||(g={video:d,audio:c});navigator.getUserMedia(g,function(a){f.src=window.URL.createObjectURL(a);f.play();k&&k(a)},function(a){console.log(a)})}else throw"getUserMedia not supported in this browser";var l=a(f,this,!0);l.loadedmetadata=!1;f.addEventListener("loadedmetadata",function(){l.width=
f.videoWidth;l.height=f.videoHeight;l.loadedmetadata=!0});return l};e.prototype.createElement=function(d,c){var e=document.createElement(d);"undefined"!==typeof c&&(e.innerHTML=c);return a(e,this)};e.Element.prototype.addClass=function(a){this.elt.className=this.elt.className?this.elt.className+" "+a:a;return this};e.Element.prototype.removeClass=function(a){this.elt.className=this.elt.className.replace(new RegExp("(?:^|\\s)"+a+"(?!\\S)"),"");this.elt.className=this.elt.className.replace(/^\s+|\s+$/g,
"");return this};e.Element.prototype.child=function(a){"string"===typeof a?a=document.getElementById(a):a instanceof e.Element&&(a=a.elt);this.elt.appendChild(a);return this};e.Element.prototype.html=function(a){return"undefined"!==typeof a?(this.elt.innerHTML=a,this):this.elt.innerHTML};e.Element.prototype.position=function(a,c){this.elt.style.position="absolute";this.elt.style.left=a+"px";this.elt.style.top=c+"px";return this};e.Element.prototype.style=function(a,c){if("undefined"===typeof c)for(var e=
a.split(";"),g=0;g<e.length;g++){var m=e[g].split(":");m[0]&&m[1]&&(this.elt.style[m[0].trim()]=m[1].trim())}else this.elt.style[a]=c;return this};e.Element.prototype.attribute=function(a,c){if("undefined"===typeof c)return this.elt.getAttribute(a);this.elt.setAttribute(a,c);return this};e.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value};e.Element.prototype.show=function(){this.elt.style.display=
"block";return this};e.Element.prototype.hide=function(){this.elt.style.display="none";return this};e.Element.prototype.size=function(a,c){var g=a,k=c,m=e.prototype.AUTO;if(g!==m||k!==m){g===m?g=c*this.width/this.height:k===m&&(k=a*this.height/this.width);if(this.elt instanceof HTMLCanvasElement){var m={},f=this.elt.getContext("2d"),l;for(l in f)m[l]=f[l];this.elt.setAttribute("width",g*this._pInst.pixelDensity);this.elt.setAttribute("height",k*this._pInst.pixelDensity);this.elt.setAttribute("style",
"width:"+g+"px !important; height:"+k+"px !important;");this._pInst.scale(this._pInst.pixelDensity,this._pInst.pixelDensity);for(l in m)this.elt.getContext("2d")[l]=m[l]}else this.elt.style.width=g+"px !important",this.elt.style.height=k+"px !important",this.elt.width=g,this.elt.height=k;this.elt.style.overflow="hidden";this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight;this._pInst&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",
this.elt.offsetHeight))}return this};e.Element.prototype.remove=function(){for(var a in this._events)this.elt.removeEventListener(a,this._events[a]);this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)};e.MediaElement=function(a,c){e.Element.call(this,a,c);this._cueIDCounter=this._prevTime=0;this._cues=[]};e.MediaElement.prototype=Object.create(e.Element.prototype);e.MediaElement.prototype.play=function(){this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0);1<this.elt.readyState||
this.elt.load();this.elt.play();return this};e.MediaElement.prototype.stop=function(){this.elt.pause();this.elt.currentTime=0;return this};e.MediaElement.prototype.pause=function(){this.elt.pause();return this};e.MediaElement.prototype.loop=function(){this.elt.setAttribute("loop",!0);this.play();return this};e.MediaElement.prototype.noLoop=function(){this.elt.setAttribute("loop",!1);return this};e.MediaElement.prototype.autoplay=function(a){this.elt.setAttribute("autoplay",a);return this};e.MediaElement.prototype.volume=
function(a){if("undefined"===typeof a)return this.elt.volume;this.elt.volume=a};e.MediaElement.prototype.time=function(a){if("undefined"===typeof a)return this.elt.currentTime;this.elt.currentTime=a};e.MediaElement.prototype.duration=function(){return this.elt.duration};e.MediaElement.prototype.pixels=[];e.MediaElement.prototype.loadPixels=function(){this.loadedmetadata&&(this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=
this.canvas.getContext("2d")),this.drawingContext.drawImage(this.elt,0,0,this.width,this.height),e.prototype.loadPixels.call(this));return this};e.MediaElement.prototype.updatePixels=function(a,c,g,k){this.loadedmetadata&&e.prototype.updatePixels.call(this,a,c,g,k);return this};e.MediaElement.prototype.get=function(a,c,g,k){return this.loadedmetadata?e.prototype.get.call(this,a,c,g,k):[0,0,0,255]};e.MediaElement.prototype.set=function(a,c,g){this.loadedmetadata&&e.prototype.set.call(this,a,c,g)};
e.MediaElement.prototype.connect=function(a){var c,g;if("function"===typeof e.prototype.getAudioContext)c=e.prototype.getAudioContext(),g=e.soundOut.input;else try{c=a.context,g=c.destination}catch(k){throw"connect() is meant to be used with Web Audio API or p5.sound.js";}this.audioSourceNode||(this.audioSourceNode=c.createMediaElementSource(this.elt),this.audioSourceNode.connect(g));a?a.input?this.audioSourceNode.connect(a.input):this.audioSourceNode.connect(a):this.audioSourceNode.connect(g)};e.MediaElement.prototype.disconnect=
function(){if(this.audioSourceNode)this.audioSourceNode.disconnect();else throw"nothing to disconnect";};e.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit";this.elt.controls=!0};e.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};e.MediaElement.prototype.addCue=function(a,e,g){var k=this._cueIDCounter++;a=new c(e,a,k,g);this._cues.push(a);this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this));return k};e.MediaElement.prototype.removeCue=
function(a){for(var c=0;c<this._cues.length;c++)this._cues[c].id===a&&this.cues.splice(c,1);0===this._cues.length&&(this.elt.ontimeupdate=null)};e.MediaElement.prototype.clearCues=function(){this._cues=[];this.elt.ontimeupdate=null};e.MediaElement.prototype._onTimeUpdate=function(){for(var a=this.time(),c=0;c<this._cues.length;c++){var e=this._cues[c].time,g=this._cues[c].val;this._prevTime<e&&e<=a&&this._cues[c].callback(g)}this._prevTime=a};var c=function(a,c,e,g){this.callback=a;this.time=c;this.id=
e;this.val=g};e.File=function(a,c){this.file=a;this._pInst=c;var e=a.type.split("/");this.type=e[0];this.subtype=e[1];this.name=a.name;this.size=a.size;this.data=void 0}});(function(e,n){"function"===typeof define&&define.amd?define("p5.sound",["p5"],function(a){n(a)}):"object"===typeof exports?n(require("../p5")):n(e.p5)})(this,function(e){var n;n=function(){window.AudioContext=window.AudioContext||window.webkitAudioContext;var a=new window.AudioContext;e.prototype.getAudioContext=function(){return a};"function"!==typeof a.createGain&&(window.audioContext.createGain=window.audioContext.createGainNode);"function"!==typeof a.createDelay&&(window.audioContext.createDelay=
window.audioContext.createDelayNode);"function"!==typeof window.AudioBufferSourceNode.prototype.start&&(window.AudioBufferSourceNode.prototype.start=window.AudioBufferSourceNode.prototype.noteGrainOn);"function"!==typeof window.AudioBufferSourceNode.prototype.stop&&(window.AudioBufferSourceNode.prototype.stop=window.AudioBufferSourceNode.prototype.noteOff);"function"!==typeof window.OscillatorNode.prototype.start&&(window.OscillatorNode.prototype.start=window.OscillatorNode.prototype.noteOn);"function"!==
typeof window.OscillatorNode.prototype.stop&&(window.OscillatorNode.prototype.stop=window.OscillatorNode.prototype.noteOff);window.AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(window.AudioContext.prototype.createScriptProcessor=window.AudioContext.prototype.createJavaScriptNode);navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var c=document.createElement("audio");e.prototype.isSupported=function(){return!!c.canPlayType};
e.prototype.isFileSupported=function(a){switch(a.toLowerCase()){case "mp3":return!!c.canPlayType&&c.canPlayType("audio/mpeg;");case "wav":return!!c.canPlayType&&c.canPlayType('audio/wav; codecs="1"');case "ogg":return!!c.canPlayType&&c.canPlayType('audio/ogg; codecs="vorbis"');case "aac","m4a","mp4":return!!c.canPlayType&&(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/aac;"));case "aif","aiff":return!!c.canPlayType&&c.canPlayType("audio/x-aiff;");default:return!1}};navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&
window.addEventListener("touchstart",function(){var c=a.createBuffer(1,1,22050),d=a.createBufferSource();d.buffer=c;d.connect(a.destination);d.start(0)},!1)}();var a;a=function(){var a=new function(){var a=e.prototype.getAudioContext();this.input=a.createGain();this.output=a.createGain();this.limiter=a.createDynamicsCompressor();this.limiter.threshold.value=0;this.limiter.ratio.value=100;this.audiocontext=a;this.output.disconnect();this.inputSources=[];this.input.connect(this.limiter);this.limiter.connect(this.output);
this.meter=a.createGain();this.fftMeter=a.createGain();this.output.connect(this.meter);this.output.connect(this.fftMeter);this.output.connect(this.audiocontext.destination);this.soundArray=[];this.parts=[];this.extensions=[]};e.prototype.getMasterVolume=function(){return a.output.gain.value};e.prototype.masterVolume=function(c,d,e){if("number"===typeof c){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=a.output.gain.value;a.output.gain.cancelScheduledValues(g+e);a.output.gain.linearRampToValueAtTime(h,
g+e);a.output.gain.linearRampToValueAtTime(c,g+e+d)}else if(c)c.connect(a.output.gain);else return a.output.gain};e.soundOut=a;e.soundOut._silentNode=a.audiocontext.createGain();e.soundOut._silentNode.gain.value=0;e.soundOut._silentNode.connect(a.audiocontext.destination);return a}(n);(function(){e.prototype.sampleRate=function(){return a.audiocontext.sampleRate};e.prototype.freqToMidi=function(a){a=Math.log(a/440)/Math.log(2);return Math.round(12*a)+57};e.prototype.midiToFreq=function(a){return 440*
Math.pow(2,(a-69)/12)};e.prototype.soundFormats=function(){a.extensions=[];for(var c=0;c<arguments.length;c++)if(arguments[c]=arguments[c].toLowerCase(),-1<["mp3","wav","ogg","m4a","aac"].indexOf(arguments[c]))a.extensions.push(arguments[c]);else throw arguments[c]+" is not a valid sound format!";};e.prototype.disposeSound=function(){for(var c=0;c<a.soundArray.length;c++)a.soundArray[c].dispose()};e.prototype.registerMethod("remove",e.prototype.disposeSound);e.prototype._checkFileFormats=function(c){var d;
if("string"===typeof c){d=c;var g=d.split(".").pop();if(-1<["mp3","wav","ogg","m4a","aac"].indexOf(g)){var h=e.prototype.isFileSupported(g);if(!h)for(c=d.split("."),h=c[c.length-1],g=0;g<a.extensions.length;g++){var k=a.extensions[g];if(h=e.prototype.isFileSupported(k)){h="";2===c.length&&(h+=c[0]);for(g=1;g<=c.length-2;g++)h+="."+c[g];d=h+".";d=d+=k;break}}}else for(g=0;g<a.extensions.length;g++)if(k=a.extensions[g],h=e.prototype.isFileSupported(k)){d=d+"."+k;break}}else if("object"===typeof c)for(g=
0;g<c.length;g++)if(k=c[g].split(".").pop(),h=e.prototype.isFileSupported(k)){d=c[g];break}return d};e.prototype._mathChain=function(a,c,d,e,g){for(var h in a.mathOps)a.mathOps[h]instanceof g&&(a.mathOps[h].dispose(),d=h,d<a.mathOps.length-1&&(e=a.mathOps[h+1]));a.mathOps[d-1].disconnect();a.mathOps[d-1].connect(c);c.connect(e);a.mathOps[d]=c;return a}})(a);(function(){var c=a.audiocontext;e.Panner=function(a,d,e){this.input=c.createGain();a.connect(this.input);this.left=c.createGain();this.right=
c.createGain();this.left.channelInterpretation="discrete";this.right.channelInterpretation="discrete";1<e?(this.splitter=c.createChannelSplitter(2),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0)):(this.input.connect(this.left),this.input.connect(this.right));this.output=c.createChannelMerger(2);this.left.connect(this.output,0,1);this.right.connect(this.output,0,0);this.output.connect(d)};e.Panner.prototype.pan=function(a,d){var e=c.currentTime+
(d||0),g=(a+1)/2,h=Math.cos(g*Math.PI/2),g=Math.sin(g*Math.PI/2);this.left.gain.linearRampToValueAtTime(g,e);this.right.gain.linearRampToValueAtTime(h,e)};e.Panner.prototype.inputChannels=function(a){1===a?(this.input.disconnect(),this.input.connect(this.left),this.input.connect(this.right)):2===a&&(typeof("undefined"===this.splitter)&&(this.splitter=c.createChannelSplitter(2)),this.input.disconnect(),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,
0))};e.Panner.prototype.connect=function(a){this.output.connect(a)};e.Panner.prototype.disconnect=function(a){this.output.disconnect()};e.Panner3D=function(a,d){var e=c.createPanner();e.panningModel="HRTF";e.distanceModel="linear";e.setPosition(0,0,0);a.connect(e);e.connect(d);e.pan=function(a,c,d){e.setPosition(a,c,d)};return e}})(a);(function(){function c(a,d){for(var f={},e=a.length,g=0;g<e;g++){if(a[g]>d){var h=new n(a[g],g);f[g]=h;g+=6E3}g++}return f}function d(a){for(var c=[],f=Object.keys(a).sort(),
e=0;e<f.length;e++)for(var g=0;10>g;g++){var h=a[f[e]],l=a[f[e+g]];if(h&&l){var k=l.sampleIndex-h.sampleIndex;0<k&&h.intervals.push(k);c.some(function(a,c){if(a.interval===k)return a.count++,a})||c.push({interval:k,count:1})}}return c}function g(a,c){var d=[];a.forEach(function(a,f){try{var e=Math.abs(60/(a.interval/c)),e=k(e);d.some(function(c){if(c.tempo===e)return c.count+=a.count})||isNaN(e)||d.push({tempo:Math.round(e),count:a.count})}catch(g){throw g;}});return d}function h(a,c,d,f){for(var e=
[],g=Object.keys(a).sort(),l=0;l<g.length;l++)for(var t=a[g[l]],r=0;r<t.intervals.length;r++){var m=Math.round(Math.abs(60/(t.intervals[r]/d))),m=k(m);Math.abs(m-c)<f&&e.push(t.sampleIndex/44100)}return e=e.filter(function(a,c,d){if(.01<d[c+1]-a)return!0})}function k(a){if(isFinite(a)&&0!=a){for(;90>a;)a*=2;for(;180<a&&90<a;)a/=2;return a}}var r=a.audiocontext;e.SoundFile=function(c,d,f){if("undefined"!==typeof c){if("string"==typeof c||"string"==typeof c[0])this.url=e.prototype._checkFileFormats(c);
else if("object"==typeof c&&!(window.File&&window.FileReader&&window.FileList&&window.Blob))throw"Unable to load file because the File API is not supported";c.file&&(c=c.file);this.file=c}this._paused=this._playing=this._looping=!1;this._pauseTime=0;this._cues=[];this._lastPos=0;this._counterNode;this._scopeNode;this.bufferSourceNodes=[];this.buffer=this.bufferSourceNode=null;this.gain=this.playbackRate=1;this.input=a.audiocontext.createGain();this.output=a.audiocontext.createGain();this.reversed=
!1;this.startTime=0;this.endTime=null;this.pauseTime=0;this.mode="sustain";this.startMillis=null;this.amplitude=new e.Amplitude;this.output.connect(this.amplitude.input);this.panPosition=0;this.panner=new e.Panner(this.output,a.input,2);(this.url||this.file)&&this.load(d);a.soundArray.push(this);this.whileLoading="function"===typeof f?f:function(){}};e.prototype.registerPreloadMethod("loadSound");e.prototype.loadSound=function(a,c,d){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&
alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");return new e.SoundFile(a,c,d)};e.SoundFile.prototype.load=function(a){if(void 0!=this.url&&""!=this.url){var c=this,d=new XMLHttpRequest;d.addEventListener("progress",function(a){c._updateProgress(a)},!1);d.open("GET",this.url,!0);d.responseType="arraybuffer";var f=this;d.onload=function(){r.decodeAudioData(d.response,function(c){f.buffer=c;f.panner.inputChannels(c.numberOfChannels);a&&a(f)})};d.send()}else if(void 0!=
this.file){var e=new FileReader,f=this;e.onload=function(){r.decodeAudioData(e.result,function(c){f.buffer=c;f.panner.inputChannels(c.numberOfChannels);a&&a(f)})};e.readAsArrayBuffer(this.file)}};e.SoundFile.prototype._updateProgress=function(a){a.lengthComputable?(a=Math.log(a.loaded/a.total*9.9),this.whileLoading(a)):console.log("size unknown")};e.SoundFile.prototype.isLoaded=function(){return this.buffer?!0:!1};e.SoundFile.prototype.play=function(c,d,f,e,g){var h=this,l=a.audiocontext.currentTime;
c=c||0;0>c&&(c=0);c+=l;if(this.buffer){this._pauseTime=0;"restart"===this.mode&&this.buffer&&this.bufferSourceNode&&(l=a.audiocontext.currentTime,this.bufferSourceNode.stop(c),this._counterNode.stop(c));this.bufferSourceNode=this._initSourceNode();this._counterNode=this._initCounterNode();if(e){if(!(0<=e&&e<this.buffer.duration))throw"start time out of range";}else e=0;g=g?g<=this.buffer.duration-e?g:this.buffer.duration:this.buffer.duration-e;f=f||1;this.bufferSourceNode.connect(this.output);this.output.gain.value=
f;d=d||Math.abs(this.playbackRate);this.bufferSourceNode.playbackRate.setValueAtTime(d,l);this._paused?(this.bufferSourceNode.start(c,this.pauseTime,g),this._counterNode.start(c,this.pauseTime,g)):(this.bufferSourceNode.start(c,e,g),this._counterNode.start(c,e,g));this._playing=!0;this._paused=!1;this.bufferSourceNodes.push(this.bufferSourceNode);this.bufferSourceNode._arrayIndex=this.bufferSourceNodes.length-1;this.bufferSourceNode.onended=function(a){var c=this;this._playing=!1;setTimeout(function(){h.bufferSourceNodes.splice(c._arrayIndex,
1);0===h.bufferSourceNodes.length&&(h._playing=!1)},1)}}else throw"not ready to play file, buffer has yet to load. Try preload()";this.bufferSourceNode.loop=this._looping;this._counterNode.loop=this._looping;!0===this._looping&&(c=e+g,this.bufferSourceNode.loopStart=e,this.bufferSourceNode.loopEnd=c,this._counterNode.loopStart=e,this._counterNode.loopEnd=c)};e.SoundFile.prototype.playMode=function(c){c=c.toLowerCase();if("restart"===c&&this.buffer&&this.bufferSourceNode)for(var d=0;d<this.bufferSourceNodes.length-
1;d++)this.bufferSourceNodes[d].stop(a.audiocontext.currentTime);if("restart"===c||"sustain"===c)this.mode=c;else throw'Invalid play mode. Must be either "restart" or "sustain"';};e.SoundFile.prototype.pause=function(c){var d=a.audiocontext.currentTime;c=(c||0)+d;this.isPlaying()&&this.buffer&&this.bufferSourceNode?(this.pauseTime=this.currentTime(),this.bufferSourceNode.stop(c),this._counterNode.stop(c),this._paused=!0,this._playing=!1,this._pauseTime=this.currentTime()):this._pauseTime=0};e.SoundFile.prototype.loop=
function(a,c,d,f,e){this._looping=!0;this.play(a,c,d,f,e)};e.SoundFile.prototype.setLoop=function(a){if(!0===a)this._looping=!0;else if(!1===a)this._looping=!1;else throw"Error: setLoop accepts either true or false";this.bufferSourceNode&&(this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping)};e.SoundFile.prototype.isLooping=function(){return this.bufferSourceNode?!0===this._looping&&!0===this.isPlaying()?!0:!1:!1};e.SoundFile.prototype.isPlaying=function(){return this._playing};
e.SoundFile.prototype.isPaused=function(){return this._paused};e.SoundFile.prototype.stop=function(c){var d=c||0;"sustain"==this.mode?(this.stopAll(d),this._playing=!1,this.pauseTime=0,this._paused=!1):this.buffer&&this.bufferSourceNode&&(c=a.audiocontext.currentTime,d=d||0,this.pauseTime=0,this.bufferSourceNode.stop(c+d),this._counterNode.stop(c+d),this._paused=this._playing=!1)};e.SoundFile.prototype.stopAll=function(c){var d=a.audiocontext.currentTime;c=c||0;if(this.buffer&&this.bufferSourceNode){for(var f=
0;f<this.bufferSourceNodes.length;f++)if(void 0!=typeof this.bufferSourceNodes[f])try{this.bufferSourceNodes[f].stop(d+c)}catch(e){}this._counterNode.stop(d+c)}};e.SoundFile.prototype.setVolume=function(c,d,f){if("number"===typeof c){d=d||0;f=f||0;var e=a.audiocontext.currentTime,g=this.output.gain.value;this.output.gain.cancelScheduledValues(e+f);this.output.gain.linearRampToValueAtTime(g,e+f);this.output.gain.linearRampToValueAtTime(c,e+f+d)}else if(c)c.connect(this.output.gain);else return this.output.gain};
e.SoundFile.prototype.amp=e.SoundFile.prototype.setVolume;e.SoundFile.prototype.fade=e.SoundFile.prototype.setVolume;e.SoundFile.prototype.getVolume=function(){return this.output.gain.value};e.SoundFile.prototype.pan=function(a,c){this.panPosition=a;this.panner.pan(a,c)};e.SoundFile.prototype.getPan=function(){return this.panPosition};e.SoundFile.prototype.rate=function(c){if(this.playbackRate!==c||!this.bufferSourceNode||this.bufferSourceNode.playbackRate.value!==c){var d=this.playbackRate=c;0===
this.playbackRate&&this._playing&&this.pause();if(0>this.playbackRate&&!this.reversed){var f=this.currentTime();this.reverseBuffer();d=Math.abs(c);this.pauseTime=(f-this.duration())/d}else 0<this.playbackRate&&this.reversed&&this.reverseBuffer();this.bufferSourceNode&&(c=a.audiocontext.currentTime,this.bufferSourceNode.playbackRate.cancelScheduledValues(c),this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(d),c),this._counterNode.playbackRate.cancelScheduledValues(c),this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(d),
c))}};e.SoundFile.prototype.setPitch=function(a){a=midiToFreq(a)/midiToFreq(60);this.rate(a)};e.SoundFile.prototype.getPlaybackRate=function(){return this.playbackRate};e.SoundFile.prototype.duration=function(){return this.buffer?this.buffer.duration:0};e.SoundFile.prototype.currentTime=function(){return 0<this._pauseTime?this._pauseTime:this._lastPos/r.sampleRate};e.SoundFile.prototype.jump=function(a,c){if(0>a||a>this.buffer.duration)throw"jump time out of range";if(c>this.buffer.duration-a)throw"end time out of range";
var d=a||0,f=c||this.buffer.duration-a;this.isPlaying()&&this.stop();this.play(0,this.playbackRate,this.output.gain.value,d,f)};e.SoundFile.prototype.channels=function(){return this.buffer.numberOfChannels};e.SoundFile.prototype.sampleRate=function(){return this.buffer.sampleRate};e.SoundFile.prototype.frames=function(){return this.buffer.length};e.SoundFile.prototype.getPeaks=function(a){if(this.buffer){if(a||(a=5*window.width),this.buffer){for(var c=this.buffer,d=c.length/a,f=~~(d/10)||1,e=c.numberOfChannels,
g=new Float32Array(Math.round(a)),h=0;h<e;h++)for(var l=c.getChannelData(h),k=0;k<a;k++){for(var t=~~(k*d),q=~~(t+d),r=0;t<q;t+=f){var m=l[t];m>r?r=m:-m>r&&(r=m)}if(0===h||Math.abs(r)>g[k])g[k]=r}return g}}else throw"Cannot load peaks yet, buffer is not loaded";};e.SoundFile.prototype.reverseBuffer=function(){var a=this.getVolume();this.setVolume(0,.01,0);this.pause();if(this.buffer){for(var c=0;c<this.buffer.numberOfChannels;c++)Array.prototype.reverse.call(this.buffer.getChannelData(c));this.reversed=
!this.reversed}else throw"SoundFile is not done loading";this.setVolume(a,.01,.0101);this.play()};e.SoundFile.prototype._onEnded=function(c){c.onended=function(c){c.stop(a.audiocontext.currentTime)}};e.SoundFile.prototype.add=function(){};e.SoundFile.prototype.dispose=function(){var c=a.audiocontext.currentTime;this.stop(c);if(this.buffer&&this.bufferSourceNode){for(var d=0;d<this.bufferSourceNodes.length-1;d++)null!==this.bufferSourceNodes[d]&&(this.bufferSourceNodes[d].stop(c),this.bufferSourceNodes[d]=
null);if(this.isPlaying()){try{this._counterNode.stop(c)}catch(f){console.log(f)}this._counterNode=null}}this.output&&(this.output.disconnect(),this.output=null);this.panner&&(this.panner.disconnect(),this.panner=null)};e.SoundFile.prototype.connect=function(c){c?c.hasOwnProperty("input")?this.panner.connect(c.input):this.panner.connect(c):this.panner.connect(a.input)};e.SoundFile.prototype.disconnect=function(a){this.panner.disconnect(a)};e.SoundFile.prototype.getLevel=function(a){a&&(this.amplitude.smoothing=
a);return this.amplitude.getLevel()};e.SoundFile.prototype.setPath=function(a,c){this.url=e.prototype._checkFileFormats(a);this.load(c)};e.SoundFile.prototype.setBuffer=function(a){var c=a.length,d=r.createBuffer(c,a[0].length,r.sampleRate);!a[0]instanceof Float32Array&&(a[0]=new Float32Array(a[0]));for(var f=0;f<c;f++)d.getChannelData(f).set(a[f]);this.buffer=d;this.panner.inputChannels(c)};e.SoundFile.prototype._initCounterNode=function(){var a=this,c=r.currentTime,d=r.createBufferSource();a._scopeNode&&
(a._scopeNode.disconnect(),a._scopeNode=null);a._scopeNode=r.createScriptProcessor(256,1,1);d.buffer=m(a.buffer);d.playbackRate.setValueAtTime(a.playbackRate,c);d.connect(a._scopeNode);a._scopeNode.connect(e.soundOut._silentNode);a._scopeNode.onaudioprocess=function(c){c=c.inputBuffer.getChannelData(0);a._lastPos=c[c.length-1]||0;a._onTimeUpdate(a._lastPos)};return d};e.SoundFile.prototype._initSourceNode=function(){var a=r.currentTime,c=r.createBufferSource();c.buffer=this.buffer;c.playbackRate.setValueAtTime(this.playbackRate,
a);return c};var m=function(a){for(var c=new Float32Array(a.length),d=r.createBuffer(1,a.length,44100),f=0;f<a.length;f++)c[f]=f;d.getChannelData(0).set(c);return d};e.SoundFile.prototype.processPeaks=function(a,e,k,q){var r=this.buffer,m=e||.9,n=k||.22,u=q||200;e=new OfflineAudioContext(1,this.buffer.length,this.buffer.sampleRate);k=e.createBufferSource();k.buffer=r;r=e.createBiquadFilter();r.type="lowpass";k.connect(r);r.connect(e.destination);k.start(0);e.startRendering();e.oncomplete=function(e){e=
e.renderedBuffer;var k=e.getChannelData(0);do p=c(k,m),m-=.005;while(Object.keys(p).length<u&&m>=n);k=d(p);k=g(k,e.sampleRate).sort(function(a,c){return c.count-a.count}).splice(0,5);this.tempo=k[0].tempo;e=h(p,k[0].tempo,e.sampleRate,5);a(e)}};var n=function(a,c){this.sampleIndex=c;this.amplitude=a;this.tempos=[];this.intervals=[]},p=[];e.SoundFile.prototype.addCue=function(a,c,d){var f=this._cueIDCounter++;a=new w(c,a,f,d);this._cues.push(a);return f};e.SoundFile.prototype.removeCue=function(a){for(var c=
0;c<this._cues.length;c++)this._cues[c].id===a&&this.cues.splice(c,1)};e.SoundFile.prototype.clearCues=function(){this._cues=[]};e.SoundFile.prototype._onTimeUpdate=function(a){a/=this.buffer.sampleRate;for(var c=0;c<this._cues.length;c++){var d=this._cues[c].time,f=this._cues[c].val;this._prevTime<d&&d<=a&&this._cues[c].callback(f)}this._prevTime=a};var w=function(a,c,d,f){this.callback=a;this.time=c;this.id=d;this.val=f}})(n,a);(function(){e.Amplitude=function(c){this.bufferSize=2048;this.audiocontext=
a.audiocontext;this.input=this.processor=this.audiocontext.createScriptProcessor(this.bufferSize,2,1);this.output=this.audiocontext.createGain();this.smoothing=c||0;this.average=this.volume=0;this.stereoVol=[0,0];this.stereoAvg=[0,0];this.stereoVolNorm=[0,0];this.volMax=.001;this.normalize=!1;this.processor.onaudioprocess=this._audioProcess.bind(this);this.processor.connect(this.output);this.output.gain.value=0;this.output.connect(this.audiocontext.destination);a.meter.connect(this.processor)};e.Amplitude.prototype.setInput=
function(c,d){a.meter.disconnect();d&&(this.smoothing=d);null==c?(console.log("Amplitude input source is not ready! Connecting to master output instead"),a.meter.connect(this.processor)):c instanceof e.Signal?c.output.connect(this.processor):c?(c.connect(this.processor),this.processor.disconnect(),this.processor.connect(this.output)):a.meter.connect(this.processor)};e.Amplitude.prototype.connect=function(c){c?c.hasOwnProperty("input")?this.output.connect(c.input):this.output.connect(c):this.output.connect(this.panner.connect(a.input))};
e.Amplitude.prototype.disconnect=function(a){this.output.disconnect()};e.Amplitude.prototype._audioProcess=function(a){for(var c=0;c<a.inputBuffer.numberOfChannels;c++){for(var d=a.inputBuffer.getChannelData(c),e=d.length,g=0,h=0,k,m=0;m<e;m++)k=d[m],this.normalize?(g+=Math.max(Math.min(k/this.volMax,1),-1),h+=Math.max(Math.min(k/this.volMax,1),-1)*Math.max(Math.min(k/this.volMax,1),-1)):(g+=k,h+=k*k);d=g/e;e=Math.sqrt(h/e);this.stereoVol[c]=Math.max(e,this.stereoVol[c]*this.smoothing);this.stereoAvg[c]=
Math.max(d,this.stereoVol[c]*this.smoothing);this.volMax=Math.max(this.stereoVol[c],this.volMax)}var n=this;this.volume=this.stereoVol.reduce(function(a,c,d){n.stereoVolNorm[d-1]=Math.max(Math.min(n.stereoVol[d-1]/n.volMax,1),0);n.stereoVolNorm[d]=Math.max(Math.min(n.stereoVol[d]/n.volMax,1),0);return a+c})/this.stereoVol.length;this.volNorm=Math.max(Math.min(this.volume/this.volMax,1),0)};e.Amplitude.prototype.getLevel=function(a){return"undefined"!==typeof a?this.normalize?this.stereoVolNorm[a]:
this.stereoVol[a]:this.normalize?this.volNorm:this.volume};e.Amplitude.prototype.toggleNormalize=function(a){this.normalize="boolean"===typeof a?a:!this.normalize};e.Amplitude.prototype.smooth=function(a){0<=a&&1>a?this.smoothing=a:console.log("Error: smoothing must be between 0 and 1")}})(a);(function(){e.FFT=function(c,d){this.smoothing=c||.8;this.bins=d||1024;var e=2*d||2048;this.input=this.analyser=a.audiocontext.createAnalyser();a.fftMeter.connect(this.analyser);this.analyser.smoothingTimeConstant=
this.smoothing;this.analyser.fftSize=e;this.freqDomain=new Uint8Array(this.analyser.frequencyBinCount);this.timeDomain=new Uint8Array(this.analyser.frequencyBinCount);this.bass=[20,140];this.lowMid=[140,400];this.mid=[400,2600];this.highMid=[2600,5200];this.treble=[5200,14E3]};e.FFT.prototype.setInput=function(c){c?(c.output?c.output.connect(this.analyser):c.connect&&c.connect(this.analyser),a.fftMeter.disconnect()):a.fftMeter.connect(this.analyser)};e.FFT.prototype.waveform=function(){for(var a,
c,d=0;d<arguments.length;d++)"number"===typeof arguments[d]&&(a=arguments[d],this.analyser.fftSize=2*a),"string"===typeof arguments[d]&&(c=arguments[d]);if(c&&!e.prototype._isSafari())return!1===this.timeDomain instanceof Float32Array&&(this.timeDomain=new Float32Array(this.analyser.frequencyBinCount)),this.analyser.getFloatTimeDomainData(this.timeDomain),this.timeDomain;!1===this.timeDomain instanceof Uint8Array&&(this.timeDomain=new Uint8Array(this.analyser.frequencyBinCount));this.analyser.getByteTimeDomainData(this.timeDomain);
a=[];for(d=0;d<this.timeDomain.length;d++)c=e.prototype.map(this.timeDomain[d],0,255,-1,1),a.push(c);return a};e.FFT.prototype.analyze=function(){for(var a,c=0;c<arguments.length;c++)"number"===typeof arguments[c]&&(this.bins=arguments[c],this.analyser.fftSize=2*this.bins),"string"===typeof arguments[c]&&(a=arguments[c]);if(a&&"db"===a.toLowerCase())return!1===this.freqDomain instanceof Float32Array&&(this.freqDomain=new Float32Array(this.analyser.frequencyBinCount)),this.analyser.getFloatFrequencyData(this.freqDomain),
this.freqDomain;!1===this.freqDomain instanceof Uint8Array&&(this.freqDomain=new Uint8Array(this.analyser.frequencyBinCount));this.analyser.getByteFrequencyData(this.freqDomain);a=Array.apply([],this.freqDomain);a.length===this.analyser.fftSize;a.constructor===Array;return a};e.FFT.prototype.getEnergy=function(c,d){var e=a.audiocontext.sampleRate/2;"bass"===c?(c=this.bass[0],d=this.bass[1]):"lowMid"===c?(c=this.lowMid[0],d=this.lowMid[1]):"mid"===c?(c=this.mid[0],d=this.mid[1]):"highMid"===c?(c=this.highMid[0],
d=this.highMid[1]):"treble"===c&&(c=this.treble[0],d=this.treble[1]);if("number"!==typeof c)throw"invalid input for getEnergy()";if(d){if(c&&d){if(c>d){var g=d;d=c;c=g}for(var g=Math.round(c/e*this.freqDomain.length),e=Math.round(d/e*this.freqDomain.length),h=0,k=0;g<=e;g++)h+=this.freqDomain[g],k+=1;return h/k}throw"invalid input for getEnergy()";}g=Math.round(c/e*this.freqDomain.length);return this.freqDomain[g]};e.FFT.prototype.getFreq=function(a,c){console.log("getFreq() is deprecated. Please use getEnergy() instead.");
return this.getEnergy(a,c)};e.FFT.prototype.smooth=function(a){a&&(this.smoothing=a);this.analyser.smoothingTimeConstant=a}})(a);var g;g=function(){function a(c){return void 0===c}var c;a(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext);a(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext);if(a(AudioContext))throw Error("Web Audio is not supported in this browser");c=new AudioContext;"function"!==typeof AudioContext.prototype.createGain&&
(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode);"function"!==typeof AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode);"function"!==typeof AudioContext.prototype.createPeriodicWave&&(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable);"function"!==typeof AudioBufferSourceNode.prototype.start&&(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn);"function"!==
typeof AudioBufferSourceNode.prototype.stop&&(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff);"function"!==typeof OscillatorNode.prototype.start&&(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn);"function"!==typeof OscillatorNode.prototype.stop&&(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff);"function"!==typeof OscillatorNode.prototype.setPeriodicWave&&(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable);AudioNode.prototype._nativeConnect=
AudioNode.prototype.connect;AudioNode.prototype.connect=function(c,d,e){if(c.input)Array.isArray(c.input)?(a(e)&&(e=0),this.connect(c.input[e])):this.connect(c.input,d,e);else try{c instanceof AudioNode?this._nativeConnect(c,d,e):this._nativeConnect(c,d)}catch(g){throw Error("error connecting to node: "+c);}};var d=function(c,d){a(c)||1===c?this.input=this.context.createGain():1<c&&(this.input=Array(c));a(d)||1===d?this.output=this.context.createGain():1<d&&(this.output=Array(c))};d.context=c;d.prototype.context=
d.context;d.prototype.bufferSize=2048;d.prototype.bufferTime=d.prototype.bufferSize/d.context.sampleRate;d.prototype.connect=function(a,c,d){Array.isArray(this.output)?(c=this.defaultArg(c,0),this.output[c].connect(a,0,d)):this.output.connect(a,c,d)};d.prototype.disconnect=function(a){Array.isArray(this.output)?(a=this.defaultArg(a,0),this.output[a].disconnect()):this.output.disconnect()};d.prototype.connectSeries=function(){if(1<arguments.length)for(var a=arguments[0],c=1;c<arguments.length;c++){var d=
arguments[c];a.connect(d);a=d}};d.prototype.connectParallel=function(){var a=arguments[0];if(1<arguments.length)for(var c=1;c<arguments.length;c++)a.connect(arguments[c])};d.prototype.chain=function(){if(0<arguments.length)for(var a=this,c=0;c<arguments.length;c++){var d=arguments[c];a.connect(d);a=d}};d.prototype.fan=function(){if(0<arguments.length)for(var a=1;a<arguments.length;a++)this.connect(arguments[a])};AudioNode.prototype.chain=d.prototype.chain;AudioNode.prototype.fan=d.prototype.fan;d.prototype.defaultArg=
function(c,d){if("object"===typeof c&&"object"===typeof d){var e={},g;for(g in c)e[g]=this.defaultArg(c[g],c[g]);for(var h in d)e[h]=this.defaultArg(c[h],d[h]);return e}return a(c)?d:c};d.prototype.optionsObject=function(a,c,d){var f={};if(1===a.length&&"object"===typeof a[0])f=a[0];else for(var e=0;e<c.length;e++)f[c[e]]=a[e];return this.isUndef(d)?f:this.defaultArg(f,d)};d.prototype.isUndef=a;d.prototype.equalPowerScale=function(a){return Math.sin(.5*a*Math.PI)};d.prototype.logScale=function(a){return Math.max(this.normalize(this.gainToDb(a),
-100,0),0)};d.prototype.expScale=function(a){return this.dbToGain(this.interpolate(a,-100,0))};d.prototype.dbToGain=function(a){return Math.pow(2,a/6)};d.prototype.gainToDb=function(a){return 20*(Math.log(a)/Math.LN10)};d.prototype.interpolate=function(a,c,d){return a*(d-c)+c};d.prototype.normalize=function(a,c,d){if(c>d){var f=d;d=c;c=f}else if(c==d)return 0;return(a-c)/(d-c)};d.prototype.dispose=function(){this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=
null);this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null)};var e=null;d.prototype.noGC=function(){this.output.connect(e)};AudioNode.prototype.noGC=function(){this.connect(e)};d.prototype.now=function(){return this.context.currentTime};d.prototype.samplesToSeconds=function(a){return a/this.context.sampleRate};d.prototype.toSamples=function(a){a=this.toSeconds(a);return Math.round(a*this.context.sampleRate)};d.prototype.toSeconds=function(a,c){c=
this.defaultArg(c,this.now());if("number"===typeof a)return a;if("string"===typeof a){var d=0;"+"===a.charAt(0)&&(a=a.slice(1),d=c);return parseFloat(a)+d}return c};d.prototype.frequencyToSeconds=function(a){return 1/parseFloat(a)};d.prototype.secondsToFrequency=function(a){return 1/a};var g=[];d._initAudioContext=function(a){a(d.context);g.push(a)};d.setContext=function(a){d.prototype.context=a;d.context=a;for(var c=0;c<g.length;c++)g[c](a)};d.extend=function(c,e){function g(){}a(e)&&(e=d);g.prototype=
e.prototype;c.prototype=new g;c.prototype.constructor=c};d.startMobile=function(){var a=d.context.createOscillator(),c=d.context.createGain();c.gain.value=0;a.connect(c);c.connect(d.context.destination);c=d.context.currentTime;a.start(c);a.stop(c+1)};d._initAudioContext(function(a){d.prototype.bufferTime=d.prototype.bufferSize/a.sampleRate;e=a.createGain();e.gain.value=0;e.connect(a.destination)});return d}();(function(a){a.SignalBase=function(){};a.extend(a.SignalBase);a.SignalBase.prototype.connect=
function(c,d,e){c instanceof a.Signal?c.setValue(0):c instanceof AudioParam&&(c.value=0);a.prototype.connect.call(this,c,d,e)};a.SignalBase.prototype.dispose=function(){a.prototype.dispose.call(this)};return a.SignalBase})(g);(function(a){a.WaveShaper=function(a,c){this._shaper=this.input=this.output=this.context.createWaveShaper();this._curve=null;Array.isArray(a)?this.setCurve(a):isFinite(a)||this.isUndef(a)?this._curve=new Float32Array(this.defaultArg(a,1024)):"function"===typeof a&&(this._curve=
new Float32Array(this.defaultArg(c,1024)),this.setMap(a))};a.extend(a.WaveShaper,a.SignalBase);a.WaveShaper.prototype.setMap=function(a){for(var c=0,d=this._curve.length;c<d;c++)this._curve[c]=a(c/d*2-1,c,c/(d-1)*2-1);this._shaper.curve=this._curve};a.WaveShaper.prototype.setCurve=function(a){this._isSafari()&&a.unshift(a[0]);this._curve=new Float32Array(a);this._shaper.curve=this._curve};a.WaveShaper.prototype.setOversample=function(a){this._shaper.oversample=a};a.WaveShaper.prototype._isSafari=
function(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")};a.WaveShaper.prototype.dispose=function(){a.prototype.dispose.call(this);this._shaper.disconnect();this._curve=this._shaper=null};return a.WaveShaper})(g);var c;c=function(a){a.Signal=function(c){this._scalar=this.context.createGain();this.input=this.output=this.context.createGain();this._syncRatio=1;this.value=this.defaultArg(c,0);a.Signal._constant.chain(this._scalar,this.output)};a.extend(a.Signal,
a.SignalBase);a.Signal.prototype.getValue=function(){return this._scalar.gain.value};a.Signal.prototype.setValue=function(a){a=0===this._syncRatio?0:a*this._syncRatio;this._scalar.gain.value=a};a.Signal.prototype.setValueAtTime=function(a,c){a*=this._syncRatio;this._scalar.gain.setValueAtTime(a,this.toSeconds(c))};a.Signal.prototype.setCurrentValueNow=function(a){a=this.defaultArg(a,this.now());var c=this.getValue();this.cancelScheduledValues(a);this._scalar.gain.setValueAtTime(c,a);return c};a.Signal.prototype.linearRampToValueAtTime=
function(a,c){a*=this._syncRatio;this._scalar.gain.linearRampToValueAtTime(a,this.toSeconds(c))};a.Signal.prototype.exponentialRampToValueAtTime=function(a,c){a*=this._syncRatio;try{this._scalar.gain.exponentialRampToValueAtTime(a,this.toSeconds(c))}catch(d){this._scalar.gain.linearRampToValueAtTime(a,this.toSeconds(c))}};a.Signal.prototype.exponentialRampToValueNow=function(a,c){var d=this.now();this.setCurrentValueNow(d);"+"===c.toString().charAt(0)&&(c=c.substr(1));this.exponentialRampToValueAtTime(a,
d+this.toSeconds(c))};a.Signal.prototype.linearRampToValueNow=function(a,c){var d=this.now();this.setCurrentValueNow(d);a*=this._syncRatio;"+"===c.toString().charAt(0)&&(c=c.substr(1));this._scalar.gain.linearRampToValueAtTime(a,d+this.toSeconds(c))};a.Signal.prototype.setTargetAtTime=function(a,c,d){a*=this._syncRatio;this._scalar.gain.setTargetAtTime(a,this.toSeconds(c),d)};a.Signal.prototype.setValueCurveAtTime=function(a,c,d){for(var f=0;f<a.length;f++)a[f]*=this._syncRatio;this._scalar.gain.setValueCurveAtTime(a,
this.toSeconds(c),this.toSeconds(d))};a.Signal.prototype.cancelScheduledValues=function(a){this._scalar.gain.cancelScheduledValues(this.toSeconds(a))};a.Signal.prototype.sync=function(a,c){c?this._syncRatio=c:0!==a.getValue()?this._syncRatio=this.getValue()/a.getValue():this._syncRatio=0;this._scalar.disconnect();this._scalar=this.context.createGain();this.connectSeries(a,this._scalar,this.output);this._scalar.gain.value=this._syncRatio};a.Signal.prototype.unsync=function(){var c=this.getValue();
this._scalar.disconnect();this._scalar=this.context.createGain();this._scalar.gain.value=c/this._syncRatio;this._syncRatio=1;a.Signal._constant.chain(this._scalar,this.output)};a.Signal.prototype.dispose=function(){a.prototype.dispose.call(this);this._scalar.disconnect();this._scalar=null};Object.defineProperty(a.Signal.prototype,"value",{get:function(){return this.getValue()},set:function(a){this.setValue(a)}});a.Signal._generator=null;a.Signal._constant=null;a._initAudioContext(function(c){a.Signal._generator=
c.createOscillator();a.Signal._constant=new a.WaveShaper([1,1]);a.Signal._generator.connect(a.Signal._constant);a.Signal._generator.start(0);a.Signal._generator.noGC()});return a.Signal}(g);var d;d=function(a){a.Add=function(c){a.call(this,2,0);this._sum=this.input[0]=this.input[1]=this.output=this.context.createGain();this._value=null;isFinite(c)&&(this._value=new a.Signal(c),this._value.connect(this._sum))};a.extend(a.Add,a.SignalBase);a.Add.prototype.setValue=function(a){if(null!==this._value)this._value.setValue(a);
else throw Error("cannot switch from signal to number");};a.Add.prototype.dispose=function(){a.prototype.dispose.call(this);this._sum=null;this._value&&(this._value.dispose(),this._value=null)};return a.Add}(g);var h;h=function(a){a.Multiply=function(c){a.call(this,2,0);this._mult=this.input[0]=this.output=this.context.createGain();this._factor=this.input[1]=this.output.gain;this._factor.value=this.defaultArg(c,0)};a.extend(a.Multiply,a.SignalBase);a.Multiply.prototype.setValue=function(a){this._factor.value=
a};a.Multiply.prototype.dispose=function(){a.prototype.dispose.call(this);this._factor=this._mult=null};return a.Multiply}(g);var p;p=function(a){a.Scale=function(c,d){this._outputMin=this.defaultArg(c,0);this._outputMax=this.defaultArg(d,1);this._scale=this.input=new a.Multiply(1);this._add=this.output=new a.Add(0);this._scale.connect(this._add);this._setRange()};a.extend(a.Scale,a.SignalBase);a.Scale.prototype.setMin=function(a){this._outputMin=a;this._setRange()};a.Scale.prototype.setMax=function(a){this._outputMax=
a;this._setRange()};a.Scale.prototype._setRange=function(){this._add.setValue(this._outputMin);this._scale.setValue(this._outputMax-this._outputMin)};a.Scale.prototype.dispose=function(){a.prototype.dispose.call(this);this._add.dispose();this._add=null;this._scale.dispose();this._scale=null};return a.Scale}(g,d,h);(function(){g.setContext(a.audiocontext);e.Signal=function(a){return new c(a)};c.prototype.fade=c.prototype.linearRampToValueAtTime;h.prototype.fade=c.prototype.fade;d.prototype.fade=c.prototype.fade;
p.prototype.fade=c.prototype.fade;c.prototype.setInput=function(a){a.connect(this)};h.prototype.setInput=c.prototype.setInput;d.prototype.setInput=c.prototype.setInput;p.prototype.setInput=c.prototype.setInput;c.prototype.add=function(a){a=new d(a);this.connect(a);return a};h.prototype.add=c.prototype.add;d.prototype.add=c.prototype.add;p.prototype.add=c.prototype.add;c.prototype.mult=function(a){a=new h(a);this.connect(a);return a};h.prototype.mult=c.prototype.mult;d.prototype.mult=c.prototype.mult;
p.prototype.mult=c.prototype.mult;c.prototype.scale=function(a,c,d,g){var h,k;4===arguments.length?(h=e.prototype.map(d,a,c,0,1)-.5,k=e.prototype.map(g,a,c,0,1)-.5):(h=arguments[0],k=arguments[1]);h=new p(h,k);this.connect(h);return h};h.prototype.scale=c.prototype.scale;d.prototype.scale=c.prototype.scale;p.prototype.scale=c.prototype.scale})(c,d,h,p,g,a);var k;k=function(){e.Oscillator=function(c,d){if("string"===typeof c){var f=d;d=c;c=f}"number"===typeof d&&(f=d,d=c,c=f);this.started=!1;this.oscillator=
a.audiocontext.createOscillator();this.f=c||440;this.oscillator.frequency.setValueAtTime(this.f,a.audiocontext.currentTime);this.oscillator.type=d||"sine";this.input=a.audiocontext.createGain();this.output=a.audiocontext.createGain();this._freqMods=[];this.output.gain.value=.5;this.output.gain.setValueAtTime(.5,a.audiocontext.currentTime);this.oscillator.connect(this.output);this.panPosition=0;this.connection=a.input;this.panner=new e.Panner(this.output,this.connection,1);this.mathOps=[this.output];
a.soundArray.push(this)};e.Oscillator.prototype.start=function(c,d){this.started&&this.stop(a.audiocontext.currentTime);if(!this.started){var f=d||this.f,e=this.oscillator.type;this.oscillator=a.audiocontext.createOscillator();this.oscillator.frequency.exponentialRampToValueAtTime(Math.abs(f),a.audiocontext.currentTime);this.oscillator.type=e;this.oscillator.connect(this.output);this.oscillator.start((c||0)+a.audiocontext.currentTime);this.freqNode=this.oscillator.frequency;for(var g in this._freqMods)"undefined"!==
typeof this._freqMods[g].connect&&this._freqMods[g].connect(this.oscillator.frequency);this.started=!0}};e.Oscillator.prototype.stop=function(c){this.started&&(this.oscillator.stop((c||0)+a.audiocontext.currentTime),this.started=!1)};e.Oscillator.prototype.amp=function(c,d,f){if("number"===typeof c){d=d||0;f=f||0;var e=a.audiocontext.currentTime,g=this.output.gain.value;this.output.gain.cancelScheduledValues(e);this.output.gain.linearRampToValueAtTime(g,e+f);this.output.gain.linearRampToValueAtTime(c,
e+f+d)}else if(c)console.log(c),c.connect(this.output.gain);else return this.output.gain};e.Oscillator.prototype.fade=e.Oscillator.prototype.amp;e.Oscillator.prototype.getAmp=function(){return this.output.gain.value};e.Oscillator.prototype.freq=function(c,d,f){if("number"!==typeof c||isNaN(c))if(c)c.output&&(c=c.output),c.connect(this.oscillator.frequency),this._freqMods.push(c);else return this.oscillator.frequency;else{this.f=c;var e=a.audiocontext.currentTime;d=d||0;f=f||0;var g=this.oscillator.frequency.value;
this.oscillator.frequency.cancelScheduledValues(e);this.oscillator.frequency.setValueAtTime(g,e+f);0<c?this.oscillator.frequency.exponentialRampToValueAtTime(c,f+d+e):this.oscillator.frequency.linearRampToValueAtTime(c,f+d+e)}};e.Oscillator.prototype.getFreq=function(){return this.oscillator.frequency.value};e.Oscillator.prototype.setType=function(a){this.oscillator.type=a};e.Oscillator.prototype.getType=function(){return this.oscillator.type};e.Oscillator.prototype.connect=function(c){c?c.hasOwnProperty("input")?
(this.panner.connect(c.input),this.connection=c.input):(this.panner.connect(c),this.connection=c):this.panner.connect(a.input)};e.Oscillator.prototype.disconnect=function(a){this.output.disconnect();this.panner.disconnect();this.output.connect(this.panner);this.oscMods=[]};e.Oscillator.prototype.pan=function(a,c){this.panPosition=a;this.panner.pan(a,c)};e.Oscillator.prototype.getPan=function(){return this.panPosition};e.Oscillator.prototype.dispose=function(){this.oscillator&&(this.stop(a.audiocontext.currentTime),
this.disconnect(),this.oscillator.disconnect(),this.oscillator=this.panner=null);this.osc2&&this.osc2.dispose()};e.Oscillator.prototype.phase=function(c){this.dNode||(this.dNode=a.audiocontext.createDelay(),this.output.disconnect(),this.output.connect(this.dNode),this.dNode.connect(this.panner));var d=a.audiocontext.currentTime;this.dNode.delayTime.linearRampToValueAtTime(e.prototype.map(c,0,1,0,1/this.oscillator.frequency.value),d)};var c=function(a,c,d,f,e){var g=a.oscillator,h;for(h in a.mathOps)a.mathOps[h]instanceof
e&&(g.disconnect(),a.mathOps[h].dispose(),d=h,d<a.mathOps.length-2&&(f=a.mathOps[h+1]));d==a.mathOps.length-1&&a.mathOps.push(f);0<h&&(g=a.mathOps[h-1]);g.disconnect();g.connect(c);c.connect(f);a.mathOps[d]=c;return a};e.Oscillator.prototype.add=function(a){a=new d(a);return c(this,a,this.mathOps.length-1,this.output,d)};e.Oscillator.prototype.mult=function(a){a=new h(a);return c(this,a,this.mathOps.length-1,this.output,h)};e.Oscillator.prototype.scale=function(a,d,g,h){var k,m;4===arguments.length?
(k=e.prototype.map(g,a,d,0,1)-.5,m=e.prototype.map(h,a,d,0,1)-.5):(k=arguments[0],m=arguments[1]);k=new p(k,m);return c(this,k,this.mathOps.length-1,this.output,p)};e.SinOsc=function(a){e.Oscillator.call(this,a,"sine")};e.SinOsc.prototype=Object.create(e.Oscillator.prototype);e.TriOsc=function(a){e.Oscillator.call(this,a,"triangle")};e.TriOsc.prototype=Object.create(e.Oscillator.prototype);e.SawOsc=function(a){e.Oscillator.call(this,a,"sawtooth")};e.SawOsc.prototype=Object.create(e.Oscillator.prototype);
e.SqrOsc=function(a){e.Oscillator.call(this,a,"square")};e.SqrOsc.prototype=Object.create(e.Oscillator.prototype)}(a,c,d,h,p);(function(){g.setContext(a.audiocontext);var c=null,k=!1;e.Env=function(c,d,f,g,h,k,l,m){this.aTime=c;this.aLevel=d;this.dTime=f||0;this.dLevel=g||0;this.sTime=h||0;this.sLevel=k||0;this.rTime=l||0;this.rLevel=m||0;this.output=a.audiocontext.createGain();this.control=new e.Signal;this.control.connect(this.output);this.connection=null;this.mathOps=[this.control];a.soundArray.push(this)};
e.Env.prototype.set=function(a,c,d,f,e,g,h,k){this.aTime=a;this.aLevel=c;this.dTime=d||0;this.dLevel=f||0;this.sTime=e||0;this.sLevel=g||0;this.rTime=h||0;this.rLevel=k||0};e.Env.prototype.setInput=function(a){for(var c=0;c<arguments.length;c++)this.connect(arguments[c])};e.Env.prototype.ctrl=function(a){this.connect(a)};e.Env.prototype.play=function(c,d){var f=a.audiocontext.currentTime+(d||0);c&&this.connection!==c&&this.connect(c);var e=this.control.getValue();this.control.cancelScheduledValues(f);
this.control.linearRampToValueAtTime(e,f);this.control.linearRampToValueAtTime(this.aLevel,f+this.aTime);this.control.linearRampToValueAtTime(this.dLevel,f+this.aTime+this.dTime);this.control.linearRampToValueAtTime(this.sLevel,f+this.aTime+this.dTime+this.sTime);this.control.linearRampToValueAtTime(this.rLevel,f+this.aTime+this.dTime+this.sTime+this.rTime)};e.Env.prototype.triggerAttack=function(c,d){var f=a.audiocontext.currentTime+(d||0);this.lastAttack=f;k=!0;var e=this.control.getValue();console.log(e);
this.control.cancelScheduledValues(f);this.control.linearRampToValueAtTime(e,f);c&&this.connection!==c&&this.connect(c);this.control.linearRampToValueAtTime(this.aLevel,f+this.aTime);this.control.linearRampToValueAtTime(this.aLevel,f+this.aTime);this.control.linearRampToValueAtTime(this.dLevel,f+this.aTime+this.dTime);this.control.linearRampToValueAtTime(this.sLevel,f+this.aTime+this.dTime+this.sTime)};e.Env.prototype.triggerRelease=function(d,e){if(k){var g=a.audiocontext.currentTime,h=g+(e||0);
d&&this.connection!==d&&this.connect(d);this.control.cancelScheduledValues(h);g-this.lastAttack<this.aTime?(g=this.aTime-(h-this.lastAttack),this.control.linearRampToValueAtTime(this.aLevel,h+g),this.control.linearRampToValueAtTime(this.dLevel,h+g+this.dTime),this.control.linearRampToValueAtTime(this.sLevel,h+g+this.dTime+this.sTime),this.control.linearRampToValueAtTime(this.rLevel,h+g+this.dTime+this.sTime+this.rTime)):g-this.lastAttack<this.aTime+this.dTime?(g=this.aTime+this.dTime-(g-this.lastAttack),
this.control.linearRampToValueAtTime(this.dLevel,h+g),this.control.linearRampToValueAtTime(this.sLevel,h+g+.01),this.control.linearRampToValueAtTime(this.rLevel,h+g+.01+this.rTime)):g-this.lastAttack<this.aTime+this.dTime+this.sTime?(g=this.aTime+this.dTime+this.sTime-(g-this.lastAttack),this.control.linearRampToValueAtTime(this.sLevel,h+g),this.control.linearRampToValueAtTime(this.rLevel,h+g+this.rTime)):(this.control.linearRampToValueAtTime(this.sLevel,h),this.control.linearRampToValueAtTime(this.rLevel,
h+this.rTime));h=h+this.aTime+this.dTime+this.sTime+this.rTime;this.connection&&this.connection.hasOwnProperty("oscillator")?(c=this.connection.oscillator,c.stop(h+.01)):this.connect&&this.connection.hasOwnProperty("source")&&(c=this.connection.source,c.stop(h+.01));k=!1}};e.Env.prototype.connect=function(c){this.connection=c;if(c instanceof e.Oscillator||c instanceof e.SoundFile||c instanceof e.AudioIn||c instanceof e.Reverb||c instanceof e.Noise||c instanceof e.Filter||c instanceof e.Delay)c=c.output.gain;
c instanceof AudioParam&&c.setValueAtTime(0,a.audiocontext.currentTime);c instanceof e.Signal&&c.setValue(0);this.output.connect(c)};e.Env.prototype.disconnect=function(a){this.output.disconnect()};e.Env.prototype.add=function(a){a=new d(a);return e.prototype._mathChain(this,a,this.mathOps.length,this.output,d)};e.Env.prototype.mult=function(a){a=new h(a);return e.prototype._mathChain(this,a,this.mathOps.length,this.output,h)};e.Env.prototype.scale=function(a,c,d,f){a=new p(a,c,d,f);return e.prototype._mathChain(this,
a,this.mathOps.length,this.output,p)};e.Env.prototype.dispose=function(){this.disconnect();try{this.control.dispose(),this.control=null}catch(a){}for(var c=1;c<this.mathOps.length;c++)mathOps[c].dispose()}})(a,d,h,p,g);(function(){function c(){for(var a=d.audiocontext,f=a.createBuffer(1,2048,a.sampleRate),e=f.getChannelData(0),g=0;2048>g;g++)e[g]=1;a=a.createBufferSource();a.buffer=f;a.loop=!0;return a}var d=a;e.Pulse=function(a,g){e.Oscillator.call(this,a,"sawtooth");this.w=g||0;this.osc2=new e.SawOsc(a);
this.dNode=d.audiocontext.createDelay();this.dcOffset=c();this.dcGain=d.audiocontext.createGain();this.dcOffset.connect(this.dcGain);this.dcGain.connect(this.output);this.f=a||440;this.dNode.delayTime.value=this.w/this.oscillator.frequency.value;this.dcGain.gain.value=1.7*(.5-this.w);this.osc2.disconnect();this.osc2.output.gain.minValue=-10;this.osc2.output.gain.maxValue=10;this.osc2.panner.disconnect();this.osc2.amp(-1);this.osc2.output.connect(this.dNode);this.dNode.connect(this.output);this.output.gain.value=
1;this.output.connect(this.panner)};e.Pulse.prototype=Object.create(e.Oscillator.prototype);e.Pulse.prototype.width=function(a){if("number"===typeof a)1>=a&&0<=a&&(this.w=a,this.dNode.delayTime.value=this.w/this.oscillator.frequency.value),this.dcGain.gain.value=1.7*(.5-this.w);else{a.connect(this.dNode.delayTime);var c=new e.SignalAdd(-.5);c.setInput(a);c=c.mult(-1);c=c.mult(1.7);c.connect(this.dcGain.gain)}};e.Pulse.prototype.start=function(a,e){var g=d.audiocontext.currentTime,h=e||0;if(!this.started){var k=
a||this.f,m=this.oscillator.type;this.oscillator=d.audiocontext.createOscillator();this.oscillator.frequency.setValueAtTime(k,g);this.oscillator.type=m;this.oscillator.connect(this.output);this.oscillator.start(h+g);this.osc2.oscillator=d.audiocontext.createOscillator();this.osc2.oscillator.frequency.setValueAtTime(k,h+g);this.osc2.oscillator.type=m;this.osc2.oscillator.connect(this.osc2.output);this.osc2.start(h+g);this.freqNode=[this.oscillator.frequency,this.osc2.oscillator.frequency];this.dcOffset=
c();this.dcOffset.connect(this.dcGain);this.dcOffset.start(h+g);void 0!==this.mods&&void 0!==this.mods.frequency&&(this.mods.frequency.connect(this.freqNode[0]),this.mods.frequency.connect(this.freqNode[1]));this.started=!0;this.osc2.started=!0}};e.Pulse.prototype.stop=function(a){if(this.started){a=a||0;var c=d.audiocontext.currentTime;this.oscillator.stop(a+c);this.osc2.oscillator.stop(a+c);this.dcOffset.stop(a+c);this.started=!1;this.osc2.started=!1}};e.Pulse.prototype.freq=function(a,c,f){if("number"===
typeof a){this.f=a;var e=d.audiocontext.currentTime;c=c||0;f=f||0;var g=this.oscillator.frequency.value;this.oscillator.frequency.cancelScheduledValues(e);this.oscillator.frequency.setValueAtTime(g,e+f);this.oscillator.frequency.exponentialRampToValueAtTime(a,f+c+e);this.osc2.oscillator.frequency.cancelScheduledValues(e);this.osc2.oscillator.frequency.setValueAtTime(g,e+f);this.osc2.oscillator.frequency.exponentialRampToValueAtTime(a,f+c+e);this.freqMod&&(this.freqMod.output.disconnect(),this.freqMod=
null)}else a.output&&(a.output.disconnect(),a.output.connect(this.oscillator.frequency),a.output.connect(this.osc2.oscillator.frequency),this.freqMod=a)}})(a,k);(function(){e.Noise=function(a){e.Oscillator.call(this);delete this.f;delete this.freq;delete this.oscillator;this.buffer=c};e.Noise.prototype=Object.create(e.Oscillator.prototype);var c=function(){for(var c=2*a.audiocontext.sampleRate,d=a.audiocontext.createBuffer(1,c,a.audiocontext.sampleRate),f=d.getChannelData(0),e=0;e<c;e++)f[e]=2*Math.random()-
1;d.type="white";return d}(),d=function(){for(var c=2*a.audiocontext.sampleRate,d=a.audiocontext.createBuffer(1,c,a.audiocontext.sampleRate),f=d.getChannelData(0),e,g,h,k,l,m,n,t=e=g=h=k=l=m=n=0;t<c;t++){var p=2*Math.random()-1;e=.99886*e+.0555179*p;g=.99332*g+.0750759*p;h=.969*h+.153852*p;k=.8665*k+.3104856*p;l=.55*l+.5329522*p;m=-.7616*m-.016898*p;f[t]=e+g+h+k+l+m+n+.5362*p;f[t]*=.11;n=.115926*p}d.type="pink";return d}(),g=function(){for(var c=2*a.audiocontext.sampleRate,d=a.audiocontext.createBuffer(1,
c,a.audiocontext.sampleRate),f=d.getChannelData(0),e=0,g=0;g<c;g++){var h=2*Math.random()-1;f[g]=(e+.02*h)/1.02;e=f[g];f[g]*=3.5}d.type="brown";return d}();e.Noise.prototype.setType=function(e){switch(e){case "white":this.buffer=c;break;case "pink":this.buffer=d;break;case "brown":this.buffer=g;break;default:this.buffer=c}this.started&&(e=a.audiocontext.currentTime,this.stop(e),this.start(e+.01))};e.Noise.prototype.getType=function(){return this.buffer.type};e.Noise.prototype.start=function(){this.started&&
this.stop();this.noise=a.audiocontext.createBufferSource();this.noise.buffer=this.buffer;this.noise.loop=!0;this.noise.connect(this.output);this.noise.start(a.audiocontext.currentTime);this.started=!0};e.Noise.prototype.stop=function(){var c=a.audiocontext.currentTime;this.noise&&(this.noise.stop(c),this.started=!1)};e.Noise.prototype.dispose=function(){var c=a.audiocontext.currentTime;this.noise&&(this.noise.disconnect(),this.stop(c));this.output&&this.output.disconnect();this.panner&&this.panner.disconnect();
this.noise=this.buffer=this.panner=this.output=null}})(a);(function(){e.AudioIn=function(){this.input=a.audiocontext.createGain();this.output=a.audiocontext.createGain();this.mediaStream=this.stream=null;this.currentSource=0;this.enabled=!1;this.amplitude=new e.Amplitude;this.output.connect(this.amplitude.input);"undefined"===typeof window.MediaStreamTrack?window.alert("This browser does not support MediaStreamTrack"):"undefined"!==typeof window.MediaStreamTrack.getSources&&window.MediaStreamTrack.getSources(this._gotSources);
a.soundArray.push(this)};e.AudioIn.prototype.start=function(){var c=this;a.inputSources[c.currentSource]?navigator.getUserMedia({audio:{optional:[{sourceId:a.inputSources[c.currentSource].id}]}},this._onStream=function(d){c.stream=d;c.enabled=!0;c.mediaStream=a.audiocontext.createMediaStreamSource(d);c.mediaStream.connect(c.output);c.amplitude.setInput(c.output)},this._onStreamError=function(a){console.error(a)}):window.navigator.getUserMedia({audio:!0},this._onStream=function(d){c.stream=d;c.enabled=
!0;c.mediaStream=a.audiocontext.createMediaStreamSource(d);c.mediaStream.connect(c.output);c.amplitude.setInput(c.output)},this._onStreamError=function(a){console.error(a)})};e.AudioIn.prototype.stop=function(){this.stream&&this.stream.stop()};e.AudioIn.prototype.connect=function(c){c?c.hasOwnProperty("input")?this.output.connect(c.input):c.hasOwnProperty("analyser")?this.output.connect(c.analyser):this.output.connect(c):this.output.connect(a.input)};e.AudioIn.prototype.disconnect=function(a){this.output.disconnect(a);
this.output.connect(this.amplitude.input)};e.AudioIn.prototype.getLevel=function(a){a&&(this.amplitude.smoothing=a);return this.amplitude.getLevel()};e.AudioIn.prototype._gotSources=function(c){for(var d=0;d!==c.length;d++){var e=c[d];"audio"===e.kind&&a.inputSources.push(e)}};e.AudioIn.prototype.amp=function(c,d){if(d){var e=d||0,g=this.output.gain.value;this.output.gain.cancelScheduledValues(a.audiocontext.currentTime);this.output.gain.setValueAtTime(g,a.audiocontext.currentTime);this.output.gain.linearRampToValueAtTime(c,
e+a.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(a.audiocontext.currentTime),this.output.gain.setValueAtTime(c,a.audiocontext.currentTime)};e.AudioIn.prototype.listSources=function(){console.log("input sources: ");console.log(a.inputSources);return 0<a.inputSources.length?a.inputSources:"This browser does not support MediaStreamTrack.getSources()"};e.AudioIn.prototype.setSource=function(c){0<a.inputSources.length&&c<a.inputSources.length?(this.currentSource=c,console.log("set source to "+
a.inputSources[this.currentSource].id)):console.log("unable to set input source")};e.AudioIn.prototype.dispose=function(){this.stop();this.output&&this.output.disconnect();this.amplitude&&this.amplitude.disconnect();this.output=this.amplitude=null}})(a);k=function(){e.Filter=function(c){this.ac=a.audiocontext;this.input=this.ac.createGain();this.output=this.ac.createGain();this.biquad=this.ac.createBiquadFilter();this.input.connect(this.biquad);this.biquad.connect(this.output);this.connect();c&&this.setType(c)};
e.Filter.prototype.process=function(a,c,d){a.connect(this.input);this.set(c,d)};e.Filter.prototype.set=function(a,c,d){a&&this.freq(a,d);c&&this.res(c,d)};e.Filter.prototype.freq=function(a,c){var d=c||0;0>=a&&(a=1);"number"===typeof a?(this.biquad.frequency.value=a,this.biquad.frequency.cancelScheduledValues(this.ac.currentTime+.01+d),this.biquad.frequency.exponentialRampToValueAtTime(a,this.ac.currentTime+.02+d)):a&&a.connect(this.biquad.frequency);return this.biquad.frequency.value};e.Filter.prototype.res=
function(a,c){var d=c||0;"number"==typeof a?(this.biquad.Q.value=a,this.biquad.Q.cancelScheduledValues(this.ac.currentTime+.01+d),this.biquad.Q.linearRampToValueAtTime(a,this.ac.currentTime+.02+d)):a&&freq.connect(this.biquad.Q);return this.biquad.Q.value};e.Filter.prototype.setType=function(a){this.biquad.type=a};e.Filter.prototype.amp=function(c,d,e){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=this.output.gain.value;this.output.gain.cancelScheduledValues(g);this.output.gain.linearRampToValueAtTime(h,
g+e+.001);this.output.gain.linearRampToValueAtTime(c,g+e+d+.001)};e.Filter.prototype.connect=function(a){this.output.connect(a||e.soundOut.input)};e.Filter.prototype.disconnect=function(){this.output.disconnect()};e.LowPass=function(){e.Filter.call(this,"lowpass")};e.LowPass.prototype=Object.create(e.Filter.prototype);e.HighPass=function(){e.Filter.call(this,"highpass")};e.HighPass.prototype=Object.create(e.Filter.prototype);e.BandPass=function(){e.Filter.call(this,"bandpass")};e.BandPass.prototype=
Object.create(e.Filter.prototype)}(a);(function(){e.Delay=function(){this.ac=a.audiocontext;this.input=this.ac.createGain();this.output=this.ac.createGain();this._split=this.ac.createChannelSplitter(2);this._merge=this.ac.createChannelMerger(2);this._leftGain=this.ac.createGain();this._rightGain=this.ac.createGain();this.leftDelay=this.ac.createDelay();this.rightDelay=this.ac.createDelay();this._leftFilter=new e.Filter;this._rightFilter=new e.Filter;this._leftFilter.disconnect();this._rightFilter.disconnect();
this.lowPass=this._leftFilter;this._leftFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime);this._rightFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime);this._leftFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime);this._rightFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime);this.input.connect(this._split);this.leftDelay.connect(this._leftGain);this.rightDelay.connect(this._rightGain);this._leftGain.connect(this._leftFilter.input);this._rightGain.connect(this._rightFilter.input);
this._merge.connect(this.output);this.output.connect(e.soundOut.input);this._leftFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime);this._rightFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime);this.setType(0);this._maxDelay=this.leftDelay.delayTime.maxValue};e.Delay.prototype.process=function(a,c,d,e){d=d||0;c=c||0;if(1<=d)throw Error("Feedback value will force a positive feedback loop.");if(c>=this._maxDelay)throw Error("Delay Time exceeds maximum delay time of "+this._maxDelay+" second.");
a.connect(this.input);this.leftDelay.delayTime.setValueAtTime(c,this.ac.currentTime);this.rightDelay.delayTime.setValueAtTime(c,this.ac.currentTime);this._leftGain.gain.setValueAtTime(d,this.ac.currentTime);this._rightGain.gain.setValueAtTime(d,this.ac.currentTime);e&&(this._leftFilter.freq(e),this._rightFilter.freq(e))};e.Delay.prototype.delayTime=function(a){"number"!==typeof a?(a.connect(this.leftDelay.delayTime),a.connect(this.rightDelay.delayTime)):(this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime),
this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.leftDelay.delayTime.linearRampToValueAtTime(a,this.ac.currentTime),this.rightDelay.delayTime.linearRampToValueAtTime(a,this.ac.currentTime))};e.Delay.prototype.feedback=function(a){if("number"!==typeof a)a.connect(this._leftGain.gain),a.connect(this._rightGain.gain);else{if(1<=a)throw Error("Feedback value will force a positive feedback loop.");this._leftGain.gain.exponentialRampToValueAtTime(a,this.ac.currentTime);this._rightGain.gain.exponentialRampToValueAtTime(a,
this.ac.currentTime)}};e.Delay.prototype.filter=function(a,c){this._leftFilter.set(a,c);this._rightFilter.set(a,c)};e.Delay.prototype.setType=function(a){1===a&&(a="pingPong");this._split.disconnect();this._leftFilter.disconnect();this._rightFilter.disconnect();this._split.connect(this.leftDelay,0);this._split.connect(this.rightDelay,1);switch(a){case "pingPong":this._rightFilter.setType(this._leftFilter.biquad.type);this._leftFilter.output.connect(this._merge,0,0);this._rightFilter.output.connect(this._merge,
0,1);this._leftFilter.output.connect(this.rightDelay);this._rightFilter.output.connect(this.leftDelay);break;default:this._leftFilter.output.connect(this._merge,0,0),this._leftFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.leftDelay),this._leftFilter.output.connect(this.rightDelay)}};e.Delay.prototype.amp=function(c,d,e){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=this.output.gain.value;this.output.gain.cancelScheduledValues(g);this.output.gain.linearRampToValueAtTime(h,
g+e+.001);this.output.gain.linearRampToValueAtTime(c,g+e+d+.001)};e.Delay.prototype.connect=function(a){this.output.connect(a||e.soundOut.input)};e.Delay.prototype.disconnect=function(){this.output.disconnect()}})(a,k);(function(){e.Reverb=function(){this.ac=a.audiocontext;this.convolverNode=this.ac.createConvolver();this.input=this.ac.createGain();this.output=this.ac.createGain();this.input.gain.value=.5;this.input.connect(this.convolverNode);this.convolverNode.connect(this.output);this._seconds=
3;this._decay=2;this._reverse=!1;this._buildImpulse();this.connect();a.soundArray.push(this)};e.Reverb.prototype.process=function(a,c,d,e){a.connect(this.input);a=!1;c&&(this._seconds=c,a=!0);d&&(this._decay=d);e&&(this._reverse=e);a&&this._buildImpulse()};e.Reverb.prototype.set=function(a,c,d){var e=!1;a&&(this._seconds=a,e=!0);c&&(this._decay=c);d&&(this._reverse=d);e&&this._buildImpulse()};e.Reverb.prototype.amp=function(c,d,e){d=d||0;e=e||0;var g=a.audiocontext.currentTime,h=this.output.gain.value;
this.output.gain.cancelScheduledValues(g);this.output.gain.linearRampToValueAtTime(h,g+e+.001);this.output.gain.linearRampToValueAtTime(c,g+e+d+.001)};e.Reverb.prototype.connect=function(a){a=a||e.soundOut.input;this.output.connect(a.input?a.input:a)};e.Reverb.prototype.disconnect=function(){this.output.disconnect()};e.Reverb.prototype._buildImpulse=function(){var a=this.ac.sampleRate,c=a*this._seconds,d=this._decay,a=this.ac.createBuffer(2,c,a),e=a.getChannelData(0),g=a.getChannelData(1),h,k;for(k=
0;k<c;k++)h=this.reverse?c-k:k,e[k]=(2*Math.random()-1)*Math.pow(1-h/c,d),g[k]=(2*Math.random()-1)*Math.pow(1-h/c,d);this.convolverNode.buffer=a};e.Reverb.prototype.dispose=function(){this.convolverNode&&(this.convolverNode=this.convolverNode.buffer=null);"undefined"!==typeof this.output&&(this.output.disconnect(),this.output=null);"undefined"!==typeof this.panner&&(this.panner.disconnect(),this.panner=null)};e.Convolver=function(c,d){this.ac=a.audiocontext;this.convolverNode=this.ac.createConvolver();
this.input=this.ac.createGain();this.output=this.ac.createGain();this.input.gain.value=.5;this.input.connect(this.convolverNode);this.convolverNode.connect(this.output);c?(this.impulses=[],this._loadBuffer(c,d)):(this._seconds=3,this._decay=2,this._reverse=!1,this._buildImpulse());this.connect();a.soundArray.push(this)};e.Convolver.prototype=Object.create(e.Reverb.prototype);e.prototype.registerPreloadMethod("createConvolver");e.prototype.createConvolver=function(a,c){-1<window.location.origin.indexOf("file://")&&
"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");var d=new e.Convolver(a,c);d.impulses=[];return d};e.Convolver.prototype._loadBuffer=function(a,c){a=e.prototype._checkFileFormats(a);var d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType="arraybuffer";var g=this;d.onload=function(){e.prototype.getAudioContext().decodeAudioData(d.response,function(d){var e={},h=a.split("/");e.name=h[h.length-1];e.audioBuffer=d;g.impulses.push(e);
g.convolverNode.buffer=e.audioBuffer;c&&c(e)})};d.send()};e.Convolver.prototype.set=null;e.Convolver.prototype.process=function(a){a.connect(this.input)};e.Convolver.prototype.impulses=[];e.Convolver.prototype.addImpulse=function(a,c){-1<window.location.origin.indexOf("file://")&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");this._loadBuffer(a,c)};e.Convolver.prototype.resetImpulse=function(a,c){-1<window.location.origin.indexOf("file://")&&
"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");this.impulses=[];this._loadBuffer(a,c)};e.Convolver.prototype.toggleImpulse=function(a){"number"===typeof a&&a<this.impulses.length&&(this.convolverNode.buffer=this.impulses[a].audioBuffer);if("string"===typeof a)for(var c=0;c<this.impulses.length;c++)if(this.impulses[c].name===a){this.convolverNode.buffer=this.impulses[c].audioBuffer;break}};e.Convolver.prototype.dispose=
function(){for(var a in this.impulses)this.impulses[a]=null;this.convolverNode.disconnect();this.concolverNode=null;"undefined"!==typeof this.output&&(this.output.disconnect(),this.output=null);"undefined"!==typeof this.panner&&(this.panner.disconnect(),this.panner=null)}})(a,n);var m;m=function(a){a.Clock=function(c,d){this._oscillator=null;this._jsNode=this.context.createScriptProcessor(this.bufferSize,1,1);this._jsNode.onaudioprocess=this._processBuffer.bind(this);this._controlSignal=new a.Signal(1);
this._upTick=!1;this.tick=this.defaultArg(d,function(){});this._jsNode.noGC();this.setRate(c)};a.extend(a.Clock);a.Clock.prototype.setRate=function(a,c){var d=this.secondsToFrequency(this.toSeconds(a));c?this._controlSignal.exponentialRampToValueNow(d,c):(this._controlSignal.cancelScheduledValues(0),this._controlSignal.setValue(d))};a.Clock.prototype.getRate=function(){return this._controlSignal.getValue()};a.Clock.prototype.start=function(a){this._oscillator=this.context.createOscillator();this._oscillator.type=
"square";this._oscillator.connect(this._jsNode);this._controlSignal.connect(this._oscillator.frequency);this._upTick=!1;a=this.toSeconds(a);this._oscillator.start(a);this._oscillator.onended=function(){}};a.Clock.prototype.stop=function(a,c){var d=this.toSeconds(a);this._oscillator.onended=c;this._oscillator.stop(d)};a.Clock.prototype._processBuffer=function(a){var c=this.defaultArg(a.playbackTime,this.now()),d=this._jsNode.bufferSize;a=a.inputBuffer.getChannelData(0);for(var e=this._upTick,f=this,
g=0;g<d;g++){var h=a[g];0<h&&!e?(e=!0,setTimeout(function(){var a=c+f.samplesToSeconds(g+2*d);return function(){f.tick(a)}}(),0)):0>h&&e&&(e=!1)}this._upTick=e};a.Clock.prototype.dispose=function(){this._jsNode.disconnect();this._controlSignal.dispose();this._oscillator&&(this._oscillator.onended(),this._oscillator.disconnect());this._jsNode.onaudioprocess=function(){};this._oscillator=this._controlSignal=this._jsNode=null};return a.Clock}(g);(function(){var c=a.audiocontext;e.Metro=function(){this.clock=
new m(c.sampleRate,this.ontick.bind(this));this.syncedParts=[];this.bpm=120;this._init();this.tickCallback=function(){}};var d=0,g=0;e.Metro.prototype.ontick=function(c){var e=c-a.audiocontext.currentTime;if(!(-.02>=c-d-g)){d=c;for(var f in this.syncedParts){c=this.syncedParts[f];c.incrementStep(e);for(var h in c.phrases){var k=c.phrases[h],m=k.sequence,n=this.metroTicks%m.length;0!==m[n]&&(this.metroTicks<m.length||!k.looping)&&k.callback(e,m[n])}}this.metroTicks+=1;this.tickCallback(e)}};e.Metro.prototype.setBPM=
function(c,d){var e=60/(c*this.tatums);g=e;this.clock.setRate(e,d+a.audiocontext.currentTime);this.bpm=c};e.Metro.prototype.getBPM=function(a){return this.clock.getRate()/this.tatums*60};e.Metro.prototype._init=function(){this.metroTicks=0};e.Metro.prototype.resetSync=function(a){this.syncedParts=[a]};e.Metro.prototype.pushSync=function(a){this.syncedParts.push(a)};e.Metro.prototype.start=function(a){this.clock.start(a||0);this.setBPM(this.bpm)};e.Metro.prototype.stop=function(a){this.clock._oscillator&&
this.clock.stop(a||0)};e.Metro.prototype.beatLength=function(a){this.tatums=1/a/4}})(a,m);(function(){var c=120;e.prototype.setBPM=function(d,e){c=d;for(var g in a.parts)a.parts[g].setBPM(c,e)};e.Phrase=function(a,c,d){this.phraseStep=0;this.name=a;this.callback=c;this.sequence=d};e.Part=function(d,g){this.length=d||0;this.partStep=0;this.phrases=[];this.isPlaying=this.looping=!1;this.onended=function(){this.stop()};this.tatums=g||.0625;this.metro=new e.Metro;this.metro._init();this.metro.beatLength(this.tatums);
this.metro.setBPM(c);a.parts.push(this);this.callback=function(){}};e.Part.prototype.setBPM=function(a,c){this.metro.setBPM(a,c)};e.Part.prototype.getBPM=function(){return this.metro.getBPM()};e.Part.prototype.start=function(a){this.isPlaying||(this.isPlaying=!0,this.metro.resetSync(this),this.metro.start(a||0))};e.Part.prototype.loop=function(a){this.looping=!0;this.onended=function(){this.partStep=0};this.start(a||0)};e.Part.prototype.noLoop=function(){this.looping=!1;this.onended=function(){this.stop()}};
e.Part.prototype.stop=function(a){this.partStep=0;this.pause(a)};e.Part.prototype.pause=function(a){this.isPlaying=!1;this.metro.stop(a||0)};e.Part.prototype.addPhrase=function(a,c,d){var f;if(3===arguments.length)f=new e.Phrase(a,c,d);else if(arguments[0]instanceof e.Phrase)f=arguments[0];else throw"invalid input. addPhrase accepts name, callback, array or a p5.Phrase";this.phrases.push(f);f.sequence.length>this.length&&(this.length=f.sequence.length)};e.Part.prototype.removePhrase=function(a){for(var c in this.phrases)this.phrases[c].name===
a&&this.phrases.split(c,1)};e.Part.prototype.getPhrase=function(a){for(var c in this.phrases)if(this.phrases[c].name===a)return this.phrases[c]};e.Part.prototype.replaceSequence=function(a,c){for(var d in this.phrases)this.phrases[d].name===a&&(this.phrases[d].sequence=c)};e.Part.prototype.incrementStep=function(a){this.partStep<this.length-1?(this.callback(a),this.partStep+=1):(this.looping&&this.callback(a),this.onended(),this.partStep=0)};e.Part.prototype.onStep=function(a){this.callback=a};e.Score=
function(){this.parts=[];this.currentPart=0;var a=this,c;for(c in arguments)this.parts[c]=arguments[c],this.parts[c].nextPart=this.parts[c+1],this.parts[c].onended=function(){a.resetPart(c);var d=a;d.currentPart++;d.currentPart>=d.parts.length?(d.scoreStep=0,d.onended()):(d.scoreStep=0,d.parts[d.currentPart-1].stop(),d.parts[d.currentPart].start())};this.looping=!1};e.Score.prototype.onended=function(){this.looping?this.parts[0].start():this.parts[this.parts.length-1].onended=function(){this.stop();
this.resetParts()};this.currentPart=0};e.Score.prototype.start=function(){this.parts[this.currentPart].start();this.scoreStep=0};e.Score.prototype.stop=function(){this.parts[this.currentPart].stop();this.scoreStep=this.currentPart=0};e.Score.prototype.pause=function(){this.parts[this.currentPart].stop()};e.Score.prototype.loop=function(){this.looping=!0;this.start()};e.Score.prototype.noLoop=function(){this.looping=!1};e.Score.prototype.resetParts=function(){for(var a in this.parts)this.resetPart(a)};
e.Score.prototype.resetPart=function(a){this.parts[a].stop();this.parts[a].partStep=0;for(var c in this.parts[a].phrases)this.parts[a].phrases[c].phraseStep=0};e.Score.prototype.setBPM=function(a,c){for(var d in this.parts)this.parts[d].setBPM(a,c)}})(a);(function(){function c(a,d,e){for(var f=e.length,g=0;g<f;g++)a.setUint8(d+g,e.charCodeAt(g))}var d=a.audiocontext;e.SoundRecorder=function(){this.input=d.createGain();this.output=d.createGain();this.recording=!1;this.bufferSize=1024;this._channels=
2;this._clear();this._jsNode=d.createScriptProcessor(this.bufferSize,this._channels,2);this._jsNode.onaudioprocess=this._audioprocess.bind(this);this._callback=function(){};this._jsNode.connect(e.soundOut._silentNode);this.setInput();a.soundArray.push(this)};e.SoundRecorder.prototype.setInput=function(a){this.input.disconnect();this.input=null;this.input=d.createGain();this.input.connect(this._jsNode);this.input.connect(this.output);a?a.connect(this.input):e.soundOut.output.connect(this.input)};e.SoundRecorder.prototype.record=
function(a,c,e){this.recording=!0;c&&(this.sampleLimit=Math.round(c*d.sampleRate));a&&e?this._callback=function(){this.buffer=this._getBuffer();a.setBuffer(this.buffer);e()}:a&&(this._callback=function(){this.buffer=this._getBuffer();a.setBuffer(this.buffer)})};e.SoundRecorder.prototype.stop=function(){this.recording=!1;this._callback();this._clear()};e.SoundRecorder.prototype._clear=function(){this._leftBuffers=[];this._rightBuffers=[];this.recordedSamples=0;this.sampleLimit=null};e.SoundRecorder.prototype._audioprocess=
function(a){if(!1!==this.recording&&!0===this.recording)if(this.sampleLimit&&this.recordedSamples>=this.sampleLimit)this.stop();else{var c=a.inputBuffer.getChannelData(0);a=a.inputBuffer.getChannelData(1);this._leftBuffers.push(new Float32Array(c));this._rightBuffers.push(new Float32Array(a));this.recordedSamples+=this.bufferSize}};e.SoundRecorder.prototype._getBuffer=function(){var a=[];a.push(this._mergeBuffers(this._leftBuffers));a.push(this._mergeBuffers(this._rightBuffers));return a};e.SoundRecorder.prototype._mergeBuffers=
function(a){for(var c=new Float32Array(this.recordedSamples),d=0,e=a.length,f=0;f<e;f++){var g=a[f];c.set(g,d);d+=g.length}return c};e.SoundRecorder.prototype.dispose=function(){this._clear();this._callback=function(){};this.input&&this.input.disconnect();this._jsNode=this.input=null};e.prototype.saveSound=function(a,d){for(var g=a.buffer.getChannelData(0),h=a.buffer.getChannelData(1),k=g.length+h.length,l=new Float32Array(k),m=0,n=0;n<k;)l[n++]=g[m],l[n++]=h[m],m++;g=new ArrayBuffer(44+2*l.length);
g=new DataView(g);c(g,0,"RIFF");g.setUint32(4,44+2*l.length,!0);c(g,8,"WAVE");c(g,12,"fmt ");g.setUint32(16,16,!0);g.setUint16(20,1,!0);g.setUint16(22,2,!0);g.setUint32(24,44100,!0);g.setUint32(28,176400,!0);g.setUint16(32,4,!0);g.setUint16(34,16,!0);c(g,36,"data");g.setUint32(40,2*l.length,!0);h=l.length;k=44;for(m=0;m<h;m++)g.setInt16(k,32767*l[m],!0),k+=2;e.prototype.writeFile([g],d,"wav")}})(n,a);(function(){e.PeakDetect=function(a,c,d,e){this.framesPerPeak=e||5;this.framesSinceLastPeak=0;this.decayRate=
.95;this.threshold=d||.25;this.penergy=this.energy=this.cutoff=0;this.isDetected=!1;this.f1=a||40;this.f2=c||2E4;this._onPeak=function(){}};e.PeakDetect.prototype.update=function(a){a=this.energy=a.getEnergy(this.f1,this.f2)/255;a>this.cutoff&&a>this.threshold&&0<a-this.penergy?(this._onPeak(),this.isDetected=!0,this.cutoff=1.1*a,this.framesSinceLastPeak=0):(this.isDetected=!1,this.framesSinceLastPeak<=this.framesPerPeak?this.framesSinceLastPeak++:(this.cutoff*=this.decayRate,this.cutoff=Math.max(this.cutoff,
this.threshold)));this.penergy=a};e.PeakDetect.prototype.onPeak=function(a,c){var d=this;d._onPeak=function(){a(d.energy,c)}}})(a)});
